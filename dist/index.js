require('./sourcemap-register.js');(()=>{var __webpack_modules__={4158:(e,t,r)=>{"use strict";
/**
 * @license
 * Copyright 2020 Balena Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * ------------------------------------------------------------------------
 *
 * Copyright 2018 Zeit, Inc.
 * Licensed under the MIT License. See file LICENSE.md for a full copy.
 *
 * ------------------------------------------------------------------------
 */const n=r(6928);const factory=e=>new IgnoreBase(e);factory.default=factory;e.exports=factory;function make_array(e){return Array.isArray(e)?e:[e]}const i=/(?<=.)\/$/;const s=/(?<=.)\\$/;const o=n.sep==="\\"?s:i;const l=typeof Symbol!=="undefined"?Symbol.for("dockerignore"):"dockerignore";function cleanPath(e){return n.normalize(e).replace(o,"")}function toSlash(e){if(n.sep==="/"){return e}return e.replace(/\\/g,"/")}function fromSlash(e){if(n.sep==="/"){return e}return e.replace(/\//g,n.sep)}class IgnoreBase{constructor({ignorecase:e=true}={}){this._rules=[];this._ignorecase=e;this[l]=true;this._initCache()}_initCache(){this._cache={}}add(e){this._added=false;if(typeof e==="string"){e=e.split(/\r?\n/g)}make_array(e).forEach(this._addPattern,this);if(this._added){this._initCache()}return this}addPattern(e){return this.add(e)}_addPattern(e){if(e&&e[l]){this._rules=this._rules.concat(e._rules);this._added=true;return}if(this._checkPattern(e)){const t=this._createRule(e.trim());if(t!==null){this._added=true;this._rules.push(t)}}}_checkPattern(e){return e&&typeof e==="string"&&e.indexOf("#")!==0&&e.trim()!==""}filter(e){return make_array(e).filter((e=>this._filter(e)))}createFilter(){return e=>this._filter(e)}ignores(e){return!this._filter(e)}_createRule(e){const t=e;let r=false;if(e[0]==="!"){r=true;e=e.substring(1).trim()}if(e.length>0){e=cleanPath(e);e=toSlash(e);if(e.length>1&&e[0]==="/"){e=e.slice(1)}}if(r){e="!"+e}e=e.trim();if(e===""){return null}e=cleanPath(e);if(e[0]==="!"){if(e.length===1){return null}r=true;e=e.substring(1)}else{r=false}return{origin:t,pattern:e,dirs:e.split(n.sep),negative:r}}_filter(e){if(!e){return false}if(e in this._cache){return this._cache[e]}return this._cache[e]=this._test(e)}_test(e){e=fromSlash(e);const t=cleanPath(n.dirname(e));const r=t.split(n.sep);let i=false;this._rules.forEach((s=>{let o=this._match(e,s);if(!o&&t!=="."){if(s.dirs.includes("**")){for(let e=s.dirs.filter((e=>e!=="**")).length;e<=r.length;e++){o=o||this._match(r.slice(0,e).join(n.sep),s)}}else if(s.dirs.length<=r.length){o=this._match(r.slice(0,s.dirs.length).join(n.sep),s)}}if(o){i=!s.negative}}));return!i}_match(e,t){return this._compile(t).regexp.test(e)}_compile(e){if(e.regexp){return e}let t="^";let r=n.sep==="\\"?"\\\\":n.sep;for(let i=0;i<e.pattern.length;i++){const s=e.pattern[i];if(s==="*"){if(e.pattern[i+1]==="*"){i++;if(e.pattern[i+1]===n.sep){i++}if(e.pattern[i+1]===undefined){t+=".*"}else{t+=`(.*${r})?`}}else{t+=`[^${r}]*`}}else if(s==="?"){t+=`[^${r}]`}else if(s==="."||s==="$"){t+=`\\${s}`}else if(s==="\\"){if(n.sep==="\\"){t+=r;continue}if(e.pattern[i+1]!==undefined){t+="\\"+e.pattern[i+1];i++}else{t+="\\"}}else{t+=s}}t+="$";e.regexp=new RegExp(t,this._ignorecase?"i":"");return e}}},2914:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.registerAdminService=registerAdminService;t.addAdminServicesToServer=addAdminServicesToServer;const r=[];function registerAdminService(e,t){r.push({getServiceDefinition:e,getHandlers:t})}function addAdminServicesToServer(e){for(const{getServiceDefinition:t,getHandlers:n}of r){e.addService(t(),n())}}},4643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BackoffTimeout=void 0;const n=r(8288);const i=r(8536);const s="backoff";const o=1e3;const l=1.6;const u=12e4;const p=.2;function uniformRandom(e,t){return Math.random()*(t-e)+e}class BackoffTimeout{constructor(e,t){this.callback=e;this.initialDelay=o;this.multiplier=l;this.maxDelay=u;this.jitter=p;this.running=false;this.hasRef=true;this.startTime=new Date;this.endTime=new Date;this.id=BackoffTimeout.getNextId();if(t){if(t.initialDelay){this.initialDelay=t.initialDelay}if(t.multiplier){this.multiplier=t.multiplier}if(t.jitter){this.jitter=t.jitter}if(t.maxDelay){this.maxDelay=t.maxDelay}}this.trace("constructed initialDelay="+this.initialDelay+" multiplier="+this.multiplier+" jitter="+this.jitter+" maxDelay="+this.maxDelay);this.nextDelay=this.initialDelay;this.timerId=setTimeout((()=>{}),0);clearTimeout(this.timerId)}static getNextId(){return this.nextId++}trace(e){i.trace(n.LogVerbosity.DEBUG,s,"{"+this.id+"} "+e)}runTimer(e){var t,r;this.trace("runTimer(delay="+e+")");this.endTime=this.startTime;this.endTime.setMilliseconds(this.endTime.getMilliseconds()+e);clearTimeout(this.timerId);this.timerId=setTimeout((()=>{this.trace("timer fired");this.running=false;this.callback()}),e);if(!this.hasRef){(r=(t=this.timerId).unref)===null||r===void 0?void 0:r.call(t)}}runOnce(){this.trace("runOnce()");this.running=true;this.startTime=new Date;this.runTimer(this.nextDelay);const e=Math.min(this.nextDelay*this.multiplier,this.maxDelay);const t=e*this.jitter;this.nextDelay=e+uniformRandom(-t,t)}stop(){this.trace("stop()");clearTimeout(this.timerId);this.running=false}reset(){this.trace("reset() running="+this.running);this.nextDelay=this.initialDelay;if(this.running){const e=new Date;const t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay);clearTimeout(this.timerId);if(e<t){this.runTimer(t.getTime()-e.getTime())}else{this.running=false}}}isRunning(){return this.running}ref(){var e,t;this.hasRef=true;(t=(e=this.timerId).ref)===null||t===void 0?void 0:t.call(e)}unref(){var e,t;this.hasRef=false;(t=(e=this.timerId).unref)===null||t===void 0?void 0:t.call(e)}getEndTime(){return this.endTime}}t.BackoffTimeout=BackoffTimeout;BackoffTimeout.nextId=0},9190:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CallCredentials=void 0;const n=r(6100);function isCurrentOauth2Client(e){return"getRequestHeaders"in e&&typeof e.getRequestHeaders==="function"}class CallCredentials{static createFromMetadataGenerator(e){return new SingleCallCredentials(e)}static createFromGoogleCredential(e){return CallCredentials.createFromMetadataGenerator(((t,r)=>{let i;if(isCurrentOauth2Client(e)){i=e.getRequestHeaders(t.service_url)}else{i=new Promise(((r,n)=>{e.getRequestMetadata(t.service_url,((e,t)=>{if(e){n(e);return}if(!t){n(new Error("Headers not set by metadata plugin"));return}r(t)}))}))}i.then((e=>{const t=new n.Metadata;for(const r of Object.keys(e)){t.add(r,e[r])}r(null,t)}),(e=>{r(e)}))}))}static createEmpty(){return new EmptyCallCredentials}}t.CallCredentials=CallCredentials;class ComposedCallCredentials extends CallCredentials{constructor(e){super();this.creds=e}async generateMetadata(e){const t=new n.Metadata;const r=await Promise.all(this.creds.map((t=>t.generateMetadata(e))));for(const e of r){t.merge(e)}return t}compose(e){return new ComposedCallCredentials(this.creds.concat([e]))}_equals(e){if(this===e){return true}if(e instanceof ComposedCallCredentials){return this.creds.every(((t,r)=>t._equals(e.creds[r])))}else{return false}}}class SingleCallCredentials extends CallCredentials{constructor(e){super();this.metadataGenerator=e}generateMetadata(e){return new Promise(((t,r)=>{this.metadataGenerator(e,((e,n)=>{if(n!==undefined){t(n)}else{r(e)}}))}))}compose(e){return new ComposedCallCredentials([this,e])}_equals(e){if(this===e){return true}if(e instanceof SingleCallCredentials){return this.metadataGenerator===e.metadataGenerator}else{return false}}}class EmptyCallCredentials extends CallCredentials{generateMetadata(e){return Promise.resolve(new n.Metadata)}compose(e){return e}_equals(e){return e instanceof EmptyCallCredentials}}},1803:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InterceptingListenerImpl=void 0;t.isInterceptingListener=isInterceptingListener;function isInterceptingListener(e){return e.onReceiveMetadata!==undefined&&e.onReceiveMetadata.length===1}class InterceptingListenerImpl{constructor(e,t){this.listener=e;this.nextListener=t;this.processingMetadata=false;this.hasPendingMessage=false;this.processingMessage=false;this.pendingStatus=null}processPendingMessage(){if(this.hasPendingMessage){this.nextListener.onReceiveMessage(this.pendingMessage);this.pendingMessage=null;this.hasPendingMessage=false}}processPendingStatus(){if(this.pendingStatus){this.nextListener.onReceiveStatus(this.pendingStatus)}}onReceiveMetadata(e){this.processingMetadata=true;this.listener.onReceiveMetadata(e,(e=>{this.processingMetadata=false;this.nextListener.onReceiveMetadata(e);this.processPendingMessage();this.processPendingStatus()}))}onReceiveMessage(e){this.processingMessage=true;this.listener.onReceiveMessage(e,(e=>{this.processingMessage=false;if(this.processingMetadata){this.pendingMessage=e;this.hasPendingMessage=true}else{this.nextListener.onReceiveMessage(e);this.processPendingStatus()}}))}onReceiveStatus(e){this.listener.onReceiveStatus(e,(e=>{if(this.processingMetadata||this.processingMessage){this.pendingStatus=e}else{this.nextListener.onReceiveStatus(e)}}))}}t.InterceptingListenerImpl=InterceptingListenerImpl},8056:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getNextCallNumber=getNextCallNumber;let r=0;function getNextCallNumber(){return r++}},1161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=void 0;t.callErrorFromStatus=callErrorFromStatus;const n=r(4434);const i=r(2203);const s=r(8288);function callErrorFromStatus(e,t){const r=`${e.code} ${s.Status[e.code]}: ${e.details}`;const n=new Error(r);const i=`${n.stack}\nfor call at\n${t}`;return Object.assign(new Error(r),e,{stack:i})}class ClientUnaryCallImpl extends n.EventEmitter{constructor(){super()}cancel(){var e;(e=this.call)===null||e===void 0?void 0:e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}}t.ClientUnaryCallImpl=ClientUnaryCallImpl;class ClientReadableStreamImpl extends i.Readable{constructor(e){super({objectMode:true});this.deserialize=e}cancel(){var e;(e=this.call)===null||e===void 0?void 0:e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_read(e){var t;(t=this.call)===null||t===void 0?void 0:t.startRead()}}t.ClientReadableStreamImpl=ClientReadableStreamImpl;class ClientWritableStreamImpl extends i.Writable{constructor(e){super({objectMode:true});this.serialize=e}cancel(){var e;(e=this.call)===null||e===void 0?void 0:e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_write(e,t,r){var n;const i={callback:r};const s=Number(t);if(!Number.isNaN(s)){i.flags=s}(n=this.call)===null||n===void 0?void 0:n.sendMessageWithContext(i,e)}_final(e){var t;(t=this.call)===null||t===void 0?void 0:t.halfClose();e()}}t.ClientWritableStreamImpl=ClientWritableStreamImpl;class ClientDuplexStreamImpl extends i.Duplex{constructor(e,t){super({objectMode:true});this.serialize=e;this.deserialize=t}cancel(){var e;(e=this.call)===null||e===void 0?void 0:e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_read(e){var t;(t=this.call)===null||t===void 0?void 0:t.startRead()}_write(e,t,r){var n;const i={callback:r};const s=Number(t);if(!Number.isNaN(s)){i.flags=s}(n=this.call)===null||n===void 0?void 0:n.sendMessageWithContext(i,e)}_final(e){var t;(t=this.call)===null||t===void 0?void 0:t.halfClose();e()}}t.ClientDuplexStreamImpl=ClientDuplexStreamImpl},7974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FileWatcherCertificateProvider=void 0;const n=r(9896);const i=r(8536);const s=r(8288);const o=r(9023);const l="certificate_provider";function trace(e){i.trace(s.LogVerbosity.DEBUG,l,e)}const u=(0,o.promisify)(n.readFile);class FileWatcherCertificateProvider{constructor(e){this.config=e;this.refreshTimer=null;this.fileResultPromise=null;this.latestCaUpdate=undefined;this.caListeners=new Set;this.latestIdentityUpdate=undefined;this.identityListeners=new Set;this.lastUpdateTime=null;if(e.certificateFile===undefined!==(e.privateKeyFile===undefined)){throw new Error("certificateFile and privateKeyFile must be set or unset together")}if(e.certificateFile===undefined&&e.caCertificateFile===undefined){throw new Error("At least one of certificateFile and caCertificateFile must be set")}trace("File watcher constructed with config "+JSON.stringify(e))}updateCertificates(){if(this.fileResultPromise){return}this.fileResultPromise=Promise.allSettled([this.config.certificateFile?u(this.config.certificateFile):Promise.reject(),this.config.privateKeyFile?u(this.config.privateKeyFile):Promise.reject(),this.config.caCertificateFile?u(this.config.caCertificateFile):Promise.reject()]);this.fileResultPromise.then((([e,t,r])=>{if(!this.refreshTimer){return}trace("File watcher read certificates certificate "+e.status+", privateKey "+t.status+", CA certificate "+r.status);this.lastUpdateTime=new Date;this.fileResultPromise=null;if(e.status==="fulfilled"&&t.status==="fulfilled"){this.latestIdentityUpdate={certificate:e.value,privateKey:t.value}}else{this.latestIdentityUpdate=null}if(r.status==="fulfilled"){this.latestCaUpdate={caCertificate:r.value}}else{this.latestCaUpdate=null}for(const e of this.identityListeners){e(this.latestIdentityUpdate)}for(const e of this.caListeners){e(this.latestCaUpdate)}}));trace("File watcher initiated certificate update")}maybeStartWatchingFiles(){if(!this.refreshTimer){const e=this.lastUpdateTime?(new Date).getTime()-this.lastUpdateTime.getTime():Infinity;if(e>this.config.refreshIntervalMs){this.updateCertificates()}if(e>this.config.refreshIntervalMs*2){this.latestCaUpdate=undefined;this.latestIdentityUpdate=undefined}this.refreshTimer=setInterval((()=>this.updateCertificates()),this.config.refreshIntervalMs);trace("File watcher started watching")}}maybeStopWatchingFiles(){if(this.caListeners.size===0&&this.identityListeners.size===0){this.fileResultPromise=null;if(this.refreshTimer){clearInterval(this.refreshTimer);this.refreshTimer=null}}}addCaCertificateListener(e){this.caListeners.add(e);this.maybeStartWatchingFiles();if(this.latestCaUpdate!==undefined){process.nextTick(e,this.latestCaUpdate)}}removeCaCertificateListener(e){this.caListeners.delete(e);this.maybeStopWatchingFiles()}addIdentityCertificateListener(e){this.identityListeners.add(e);this.maybeStartWatchingFiles();if(this.latestIdentityUpdate!==undefined){process.nextTick(e,this.latestIdentityUpdate)}}removeIdentityCertificateListener(e){this.identityListeners.delete(e);this.maybeStopWatchingFiles()}}t.FileWatcherCertificateProvider=FileWatcherCertificateProvider},2257:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChannelCredentials=void 0;t.createCertificateProviderChannelCredentials=createCertificateProviderChannelCredentials;const n=r(4756);const i=r(9190);const s=r(8876);const o=r(6027);const l=r(6255);const u=r(8536);const p=r(8288);function verifyIsBufferOrNull(e,t){if(e&&!(e instanceof Buffer)){throw new TypeError(`${t}, if provided, must be a Buffer.`)}}class ChannelCredentials{compose(e){return new ComposedChannelCredentialsImpl(this,e)}static createSsl(e,t,r,i){var o;verifyIsBufferOrNull(e,"Root certificate");verifyIsBufferOrNull(t,"Private key");verifyIsBufferOrNull(r,"Certificate chain");if(t&&!r){throw new Error("Private key must be given with accompanying certificate chain")}if(!t&&r){throw new Error("Certificate chain must be given with accompanying private key")}const l=(0,n.createSecureContext)({ca:(o=e!==null&&e!==void 0?e:(0,s.getDefaultRootsData)())!==null&&o!==void 0?o:undefined,key:t!==null&&t!==void 0?t:undefined,cert:r!==null&&r!==void 0?r:undefined,ciphers:s.CIPHER_SUITES});return new SecureChannelCredentialsImpl(l,i!==null&&i!==void 0?i:{})}static createFromSecureContext(e,t){return new SecureChannelCredentialsImpl(e,t!==null&&t!==void 0?t:{})}static createInsecure(){return new InsecureChannelCredentialsImpl}}t.ChannelCredentials=ChannelCredentials;class InsecureChannelCredentialsImpl extends ChannelCredentials{constructor(){super()}compose(e){throw new Error("Cannot compose insecure credentials")}_isSecure(){return false}_equals(e){return e instanceof InsecureChannelCredentialsImpl}_createSecureConnector(e,t,r){return{connect(e){return Promise.resolve({socket:e,secure:false})},waitForReady:()=>Promise.resolve(),getCallCredentials:()=>r!==null&&r!==void 0?r:i.CallCredentials.createEmpty(),destroy(){}}}}function getConnectionOptions(e,t,r,i){var s,u;const p={secureContext:e};let g=r;if("grpc.http_connect_target"in i){const e=(0,o.parseUri)(i["grpc.http_connect_target"]);if(e){g=e}}const m=(0,l.getDefaultAuthority)(g);const y=(0,o.splitHostPort)(m);const _=(s=y===null||y===void 0?void 0:y.host)!==null&&s!==void 0?s:m;p.host=_;if(t.checkServerIdentity){p.checkServerIdentity=t.checkServerIdentity}if(t.rejectUnauthorized!==undefined){p.rejectUnauthorized=t.rejectUnauthorized}p.ALPNProtocols=["h2"];if(i["grpc.ssl_target_name_override"]){const e=i["grpc.ssl_target_name_override"];const t=(u=p.checkServerIdentity)!==null&&u!==void 0?u:n.checkServerIdentity;p.checkServerIdentity=(r,n)=>t(e,n);p.servername=e}else{p.servername=_}if(i["grpc-node.tls_enable_trace"]){p.enableTrace=true}return p}class SecureConnectorImpl{constructor(e,t){this.connectionOptions=e;this.callCredentials=t}connect(e){const t=Object.assign({socket:e},this.connectionOptions);return new Promise(((e,r)=>{const i=(0,n.connect)(t,(()=>{var t;if(((t=this.connectionOptions.rejectUnauthorized)!==null&&t!==void 0?t:true)&&!i.authorized){r(i.authorizationError);return}e({socket:i,secure:true})}));i.on("error",(e=>{r(e)}))}))}waitForReady(){return Promise.resolve()}getCallCredentials(){return this.callCredentials}destroy(){}}class SecureChannelCredentialsImpl extends ChannelCredentials{constructor(e,t){super();this.secureContext=e;this.verifyOptions=t}_isSecure(){return true}_equals(e){if(this===e){return true}if(e instanceof SecureChannelCredentialsImpl){return this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}else{return false}}_createSecureConnector(e,t,r){const n=getConnectionOptions(this.secureContext,this.verifyOptions,e,t);return new SecureConnectorImpl(n,r!==null&&r!==void 0?r:i.CallCredentials.createEmpty())}}class CertificateProviderChannelCredentialsImpl extends ChannelCredentials{constructor(e,t,r){super();this.caCertificateProvider=e;this.identityCertificateProvider=t;this.verifyOptions=r;this.refcount=0;this.latestCaUpdate=undefined;this.latestIdentityUpdate=undefined;this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this);this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this);this.secureContextWatchers=[]}_isSecure(){return true}_equals(e){var t,r;if(this===e){return true}if(e instanceof CertificateProviderChannelCredentialsImpl){return this.caCertificateProvider===e.caCertificateProvider&&this.identityCertificateProvider===e.identityCertificateProvider&&((t=this.verifyOptions)===null||t===void 0?void 0:t.checkServerIdentity)===((r=e.verifyOptions)===null||r===void 0?void 0:r.checkServerIdentity)}else{return false}}ref(){var e;if(this.refcount===0){this.caCertificateProvider.addCaCertificateListener(this.caCertificateUpdateListener);(e=this.identityCertificateProvider)===null||e===void 0?void 0:e.addIdentityCertificateListener(this.identityCertificateUpdateListener)}this.refcount+=1}unref(){var e;this.refcount-=1;if(this.refcount===0){this.caCertificateProvider.removeCaCertificateListener(this.caCertificateUpdateListener);(e=this.identityCertificateProvider)===null||e===void 0?void 0:e.removeIdentityCertificateListener(this.identityCertificateUpdateListener)}}_createSecureConnector(e,t,r){this.ref();return new CertificateProviderChannelCredentialsImpl.SecureConnectorImpl(this,e,t,r!==null&&r!==void 0?r:i.CallCredentials.createEmpty())}maybeUpdateWatchers(){if(this.hasReceivedUpdates()){for(const e of this.secureContextWatchers){e(this.getLatestSecureContext())}this.secureContextWatchers=[]}}handleCaCertificateUpdate(e){this.latestCaUpdate=e;this.maybeUpdateWatchers()}handleIdentityCertitificateUpdate(e){this.latestIdentityUpdate=e;this.maybeUpdateWatchers()}hasReceivedUpdates(){if(this.latestCaUpdate===undefined){return false}if(this.identityCertificateProvider&&this.latestIdentityUpdate===undefined){return false}return true}getSecureContext(){if(this.hasReceivedUpdates()){return Promise.resolve(this.getLatestSecureContext())}else{return new Promise((e=>{this.secureContextWatchers.push(e)}))}}getLatestSecureContext(){var e,t;if(!this.latestCaUpdate){return null}if(this.identityCertificateProvider!==null&&!this.latestIdentityUpdate){return null}try{return(0,n.createSecureContext)({ca:this.latestCaUpdate.caCertificate,key:(e=this.latestIdentityUpdate)===null||e===void 0?void 0:e.privateKey,cert:(t=this.latestIdentityUpdate)===null||t===void 0?void 0:t.certificate,ciphers:s.CIPHER_SUITES})}catch(e){(0,u.log)(p.LogVerbosity.ERROR,"Failed to createSecureContext with error "+e.message);return null}}}CertificateProviderChannelCredentialsImpl.SecureConnectorImpl=class{constructor(e,t,r,n){this.parent=e;this.channelTarget=t;this.options=r;this.callCredentials=n}connect(e){return new Promise(((t,r)=>{const i=this.parent.getLatestSecureContext();if(!i){r(new Error("Failed to load credentials"));return}if(e.closed){r(new Error("Socket closed while loading credentials"))}const s=getConnectionOptions(i,this.parent.verifyOptions,this.channelTarget,this.options);const o=Object.assign({socket:e},s);const closeCallback=()=>{r(new Error("Socket closed"))};const errorCallback=e=>{r(e)};const l=(0,n.connect)(o,(()=>{var e;l.removeListener("close",closeCallback);l.removeListener("error",errorCallback);if(((e=this.parent.verifyOptions.rejectUnauthorized)!==null&&e!==void 0?e:true)&&!l.authorized){r(l.authorizationError);return}t({socket:l,secure:true})}));l.once("close",closeCallback);l.once("error",errorCallback)}))}async waitForReady(){await this.parent.getSecureContext()}getCallCredentials(){return this.callCredentials}destroy(){this.parent.unref()}};function createCertificateProviderChannelCredentials(e,t,r){return new CertificateProviderChannelCredentialsImpl(e,t,r!==null&&r!==void 0?r:{})}class ComposedChannelCredentialsImpl extends ChannelCredentials{constructor(e,t){super();this.channelCredentials=e;this.callCredentials=t;if(!e._isSecure()){throw new Error("Cannot compose insecure credentials")}}compose(e){const t=this.callCredentials.compose(e);return new ComposedChannelCredentialsImpl(this.channelCredentials,t)}_isSecure(){return true}_equals(e){if(this===e){return true}if(e instanceof ComposedChannelCredentialsImpl){return this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}else{return false}}_createSecureConnector(e,t,r){const n=this.callCredentials.compose(r!==null&&r!==void 0?r:i.CallCredentials.createEmpty());return this.channelCredentials._createSecureConnector(e,t,n)}}},6793:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.recognizedOptions=void 0;t.channelOptionsEqual=channelOptionsEqual;t.recognizedOptions={"grpc.ssl_target_name_override":true,"grpc.primary_user_agent":true,"grpc.secondary_user_agent":true,"grpc.default_authority":true,"grpc.keepalive_time_ms":true,"grpc.keepalive_timeout_ms":true,"grpc.keepalive_permit_without_calls":true,"grpc.service_config":true,"grpc.max_concurrent_streams":true,"grpc.initial_reconnect_backoff_ms":true,"grpc.max_reconnect_backoff_ms":true,"grpc.use_local_subchannel_pool":true,"grpc.max_send_message_length":true,"grpc.max_receive_message_length":true,"grpc.enable_http_proxy":true,"grpc.enable_channelz":true,"grpc.dns_min_time_between_resolutions_ms":true,"grpc.enable_retries":true,"grpc.per_rpc_retry_buffer_size":true,"grpc.retry_buffer_size":true,"grpc.max_connection_age_ms":true,"grpc.max_connection_age_grace_ms":true,"grpc-node.max_session_memory":true,"grpc.service_config_disable_resolution":true,"grpc.client_idle_timeout_ms":true,"grpc-node.tls_enable_trace":true,"grpc.lb.ring_hash.ring_size_cap":true,"grpc-node.retry_max_attempts_limit":true,"grpc-node.flow_control_window":true};function channelOptionsEqual(e,t){const r=Object.keys(e).sort();const n=Object.keys(t).sort();if(r.length!==n.length){return false}for(let i=0;i<r.length;i+=1){if(r[i]!==n[i]){return false}if(e[r[i]]!==t[n[i]]){return false}}return true}},6918:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChannelImplementation=void 0;const n=r(2257);const i=r(114);class ChannelImplementation{constructor(e,t,r){if(typeof e!=="string"){throw new TypeError("Channel target must be a string")}if(!(t instanceof n.ChannelCredentials)){throw new TypeError("Channel credentials must be a ChannelCredentials object")}if(r){if(typeof r!=="object"){throw new TypeError("Channel options must be an object")}}this.internalChannel=new i.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,n,i){if(typeof e!=="string"){throw new TypeError("Channel#createCall: method must be a string")}if(!(typeof t==="number"||t instanceof Date)){throw new TypeError("Channel#createCall: deadline must be a number or Date")}return this.internalChannel.createCall(e,t,r,n,i)}}t.ChannelImplementation=ChannelImplementation},8198:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTrackerStub=t.ChannelzCallTracker=t.ChannelzChildrenTrackerStub=t.ChannelzChildrenTracker=t.ChannelzTrace=t.ChannelzTraceStub=void 0;t.unregisterChannelzRef=unregisterChannelzRef;t.getChannelzHandlers=getChannelzHandlers;t.getChannelzServiceDefinition=getChannelzServiceDefinition;t.setup=setup;const n=r(9278);const i=r(2518);const s=r(778);const o=r(8288);const l=r(7021);const u=r(2914);const p=r(6983);function channelRefToMessage(e){return{channel_id:e.id,name:e.name}}function subchannelRefToMessage(e){return{subchannel_id:e.id,name:e.name}}function serverRefToMessage(e){return{server_id:e.id}}function socketRefToMessage(e){return{socket_id:e.id,name:e.name}}const g=32;const m=100;class ChannelzTraceStub{constructor(){this.events=[];this.creationTimestamp=new Date;this.eventsLogged=0}addTrace(){}getTraceMessage(){return{creation_timestamp:dateToProtoTimestamp(this.creationTimestamp),num_events_logged:this.eventsLogged,events:[]}}}t.ChannelzTraceStub=ChannelzTraceStub;class ChannelzTrace{constructor(){this.events=[];this.eventsLogged=0;this.creationTimestamp=new Date}addTrace(e,t,r){const n=new Date;this.events.push({description:t,severity:e,timestamp:n,childChannel:(r===null||r===void 0?void 0:r.kind)==="channel"?r:undefined,childSubchannel:(r===null||r===void 0?void 0:r.kind)==="subchannel"?r:undefined});if(this.events.length>=g*2){this.events=this.events.slice(g)}this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:dateToProtoTimestamp(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map((e=>({description:e.description,severity:e.severity,timestamp:dateToProtoTimestamp(e.timestamp),channel_ref:e.childChannel?channelRefToMessage(e.childChannel):null,subchannel_ref:e.childSubchannel?subchannelRefToMessage(e.childSubchannel):null})))}}}t.ChannelzTrace=ChannelzTrace;class ChannelzChildrenTracker{constructor(){this.channelChildren=new i.OrderedMap;this.subchannelChildren=new i.OrderedMap;this.socketChildren=new i.OrderedMap;this.trackerMap={["channel"]:this.channelChildren,["subchannel"]:this.subchannelChildren,["socket"]:this.socketChildren}}refChild(e){const t=this.trackerMap[e.kind];const r=t.find(e.id);if(r.equals(t.end())){t.setElement(e.id,{ref:e,count:1},r)}else{r.pointer[1].count+=1}}unrefChild(e){const t=this.trackerMap[e.kind];const r=t.getElementByKey(e.id);if(r!==undefined){r.count-=1;if(r.count===0){t.eraseElementByKey(e.id)}}}getChildLists(){return{channels:this.channelChildren,subchannels:this.subchannelChildren,sockets:this.socketChildren}}}t.ChannelzChildrenTracker=ChannelzChildrenTracker;class ChannelzChildrenTrackerStub extends ChannelzChildrenTracker{refChild(){}unrefChild(){}}t.ChannelzChildrenTrackerStub=ChannelzChildrenTrackerStub;class ChannelzCallTracker{constructor(){this.callsStarted=0;this.callsSucceeded=0;this.callsFailed=0;this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1;this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}t.ChannelzCallTracker=ChannelzCallTracker;class ChannelzCallTrackerStub extends ChannelzCallTracker{addCallStarted(){}addCallSucceeded(){}addCallFailed(){}}t.ChannelzCallTrackerStub=ChannelzCallTrackerStub;const y={["channel"]:new i.OrderedMap,["subchannel"]:new i.OrderedMap,["server"]:new i.OrderedMap,["socket"]:new i.OrderedMap};const generateRegisterFn=e=>{let t=1;function getNextId(){return t++}const r=y[e];return(t,n,i)=>{const s=getNextId();const o={id:s,name:t,kind:e};if(i){r.setElement(s,{ref:o,getInfo:n})}return o}};t.registerChannelzChannel=generateRegisterFn("channel");t.registerChannelzSubchannel=generateRegisterFn("subchannel");t.registerChannelzServer=generateRegisterFn("server");t.registerChannelzSocket=generateRegisterFn("socket");function unregisterChannelzRef(e){y[e.kind].eraseElementByKey(e.id)}function parseIPv6Section(e){const t=Number.parseInt(e,16);return[t/256|0,t%256]}function parseIPv6Chunk(e){if(e===""){return[]}const t=e.split(":").map((e=>parseIPv6Section(e)));const r=[];return r.concat(...t)}function isIPv6MappedIPv4(e){return(0,n.isIPv6)(e)&&e.toLowerCase().startsWith("::ffff:")&&(0,n.isIPv4)(e.substring(7))}function ipv4AddressStringToBuffer(e){return Buffer.from(Uint8Array.from(e.split(".").map((e=>Number.parseInt(e)))))}function ipAddressStringToBuffer(e){if((0,n.isIPv4)(e)){return ipv4AddressStringToBuffer(e)}else if(isIPv6MappedIPv4(e)){return ipv4AddressStringToBuffer(e.substring(7))}else if((0,n.isIPv6)(e)){let t;let r;const n=e.indexOf("::");if(n===-1){t=e;r=""}else{t=e.substring(0,n);r=e.substring(n+2)}const i=Buffer.from(parseIPv6Chunk(t));const s=Buffer.from(parseIPv6Chunk(r));const o=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,o,s])}else{return null}}function connectivityStateToMessage(e){switch(e){case s.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case s.ConnectivityState.IDLE:return{state:"IDLE"};case s.ConnectivityState.READY:return{state:"READY"};case s.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case s.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function dateToProtoTimestamp(e){if(!e){return null}const t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function getChannelMessage(e){const t=e.getInfo();const r=[];const n=[];t.children.channels.forEach((e=>{r.push(channelRefToMessage(e[1].ref))}));t.children.subchannels.forEach((e=>{n.push(subchannelRefToMessage(e[1].ref))}));return{ref:channelRefToMessage(e.ref),data:{target:t.target,state:connectivityStateToMessage(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:dateToProtoTimestamp(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:r,subchannel_ref:n}}function GetChannel(e,t){const r=parseInt(e.request.channel_id,10);const n=y["channel"].getElementByKey(r);if(n===undefined){t({code:o.Status.NOT_FOUND,details:"No channel data found for id "+r});return}t(null,{channel:getChannelMessage(n)})}function GetTopChannels(e,t){const r=parseInt(e.request.max_results,10)||m;const n=[];const i=parseInt(e.request.start_channel_id,10);const s=y["channel"];let o;for(o=s.lowerBound(i);!o.equals(s.end())&&n.length<r;o=o.next()){n.push(getChannelMessage(o.pointer[1]))}t(null,{channel:n,end:o.equals(s.end())})}function getServerMessage(e){const t=e.getInfo();const r=[];t.listenerChildren.sockets.forEach((e=>{r.push(socketRefToMessage(e[1].ref))}));return{ref:serverRefToMessage(e.ref),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:dateToProtoTimestamp(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:r}}function GetServer(e,t){const r=parseInt(e.request.server_id,10);const n=y["server"];const i=n.getElementByKey(r);if(i===undefined){t({code:o.Status.NOT_FOUND,details:"No server data found for id "+r});return}t(null,{server:getServerMessage(i)})}function GetServers(e,t){const r=parseInt(e.request.max_results,10)||m;const n=parseInt(e.request.start_server_id,10);const i=y["server"];const s=[];let o;for(o=i.lowerBound(n);!o.equals(i.end())&&s.length<r;o=o.next()){s.push(getServerMessage(o.pointer[1]))}t(null,{server:s,end:o.equals(i.end())})}function GetSubchannel(e,t){const r=parseInt(e.request.subchannel_id,10);const n=y["subchannel"].getElementByKey(r);if(n===undefined){t({code:o.Status.NOT_FOUND,details:"No subchannel data found for id "+r});return}const i=n.getInfo();const s=[];i.children.sockets.forEach((e=>{s.push(socketRefToMessage(e[1].ref))}));const l={ref:subchannelRefToMessage(n.ref),data:{target:i.target,state:connectivityStateToMessage(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:dateToProtoTimestamp(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:s};t(null,{subchannel:l})}function subchannelAddressToAddressMessage(e){var t;if((0,l.isTcpSubchannelAddress)(e)){return{address:"tcpip_address",tcpip_address:{ip_address:(t=ipAddressStringToBuffer(e.host))!==null&&t!==void 0?t:undefined,port:e.port}}}else{return{address:"uds_address",uds_address:{filename:e.path}}}}function GetSocket(e,t){var r,n,i,s,l;const u=parseInt(e.request.socket_id,10);const p=y["socket"].getElementByKey(u);if(p===undefined){t({code:o.Status.NOT_FOUND,details:"No socket data found for id "+u});return}const g=p.getInfo();const m=g.security?{model:"tls",tls:{cipher_suite:g.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:(r=g.security.cipherSuiteStandardName)!==null&&r!==void 0?r:undefined,other_name:(n=g.security.cipherSuiteOtherName)!==null&&n!==void 0?n:undefined,local_certificate:(i=g.security.localCertificate)!==null&&i!==void 0?i:undefined,remote_certificate:(s=g.security.remoteCertificate)!==null&&s!==void 0?s:undefined}}:null;const _={ref:socketRefToMessage(p.ref),local:g.localAddress?subchannelAddressToAddressMessage(g.localAddress):null,remote:g.remoteAddress?subchannelAddressToAddressMessage(g.remoteAddress):null,remote_name:(l=g.remoteName)!==null&&l!==void 0?l:undefined,security:m,data:{keep_alives_sent:g.keepAlivesSent,streams_started:g.streamsStarted,streams_succeeded:g.streamsSucceeded,streams_failed:g.streamsFailed,last_local_stream_created_timestamp:dateToProtoTimestamp(g.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:dateToProtoTimestamp(g.lastRemoteStreamCreatedTimestamp),messages_received:g.messagesReceived,messages_sent:g.messagesSent,last_message_received_timestamp:dateToProtoTimestamp(g.lastMessageReceivedTimestamp),last_message_sent_timestamp:dateToProtoTimestamp(g.lastMessageSentTimestamp),local_flow_control_window:g.localFlowControlWindow?{value:g.localFlowControlWindow}:null,remote_flow_control_window:g.remoteFlowControlWindow?{value:g.remoteFlowControlWindow}:null}};t(null,{socket:_})}function GetServerSockets(e,t){const r=parseInt(e.request.server_id,10);const n=y["server"].getElementByKey(r);if(n===undefined){t({code:o.Status.NOT_FOUND,details:"No server data found for id "+r});return}const i=parseInt(e.request.start_socket_id,10);const s=parseInt(e.request.max_results,10)||m;const l=n.getInfo();const u=l.sessionChildren.sockets;const p=[];let g;for(g=u.lowerBound(i);!g.equals(u.end())&&p.length<s;g=g.next()){p.push(socketRefToMessage(g.pointer[1].ref))}t(null,{socket_ref:p,end:g.equals(u.end())})}function getChannelzHandlers(){return{GetChannel:GetChannel,GetTopChannels:GetTopChannels,GetServer:GetServer,GetServers:GetServers,GetSubchannel:GetSubchannel,GetSocket:GetSocket,GetServerSockets:GetServerSockets}}let _=null;function getChannelzServiceDefinition(){if(_){return _}const e=r(6081).loadSync;const t=e("channelz.proto",{keepCase:true,longs:String,enums:String,defaults:true,oneofs:true,includeDirs:[r.ab+"proto"]});const n=(0,p.loadPackageDefinition)(t);_=n.grpc.channelz.v1.Channelz.service;return _}function setup(){(0,u.registerAdminService)(getChannelzServiceDefinition,getChannelzHandlers)}},2451:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0;t.getInterceptingCall=getInterceptingCall;const n=r(6100);const i=r(1803);const s=r(8288);const o=r(8219);class InterceptorConfigurationError extends Error{constructor(e){super(e);this.name="InterceptorConfigurationError";Error.captureStackTrace(this,InterceptorConfigurationError)}}t.InterceptorConfigurationError=InterceptorConfigurationError;class ListenerBuilder{constructor(){this.metadata=undefined;this.message=undefined;this.status=undefined}withOnReceiveMetadata(e){this.metadata=e;return this}withOnReceiveMessage(e){this.message=e;return this}withOnReceiveStatus(e){this.status=e;return this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}}t.ListenerBuilder=ListenerBuilder;class RequesterBuilder{constructor(){this.start=undefined;this.message=undefined;this.halfClose=undefined;this.cancel=undefined}withStart(e){this.start=e;return this}withSendMessage(e){this.message=e;return this}withHalfClose(e){this.halfClose=e;return this}withCancel(e){this.cancel=e;return this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}}t.RequesterBuilder=RequesterBuilder;const l={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}};const u={start:(e,t,r)=>{r(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};class InterceptingCall{constructor(e,t){var r,n,i,s;this.nextCall=e;this.processingMetadata=false;this.pendingMessageContext=null;this.processingMessage=false;this.pendingHalfClose=false;if(t){this.requester={start:(r=t.start)!==null&&r!==void 0?r:u.start,sendMessage:(n=t.sendMessage)!==null&&n!==void 0?n:u.sendMessage,halfClose:(i=t.halfClose)!==null&&i!==void 0?i:u.halfClose,cancel:(s=t.cancel)!==null&&s!==void 0?s:u.cancel}}else{this.requester=u}}cancelWithStatus(e,t){this.requester.cancel((()=>{this.nextCall.cancelWithStatus(e,t)}))}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){if(this.pendingMessageContext){this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage);this.pendingMessageContext=null;this.pendingMessage=null}}processPendingHalfClose(){if(this.pendingHalfClose){this.nextCall.halfClose()}}start(e,t){var r,n,s,o,u,p;const g={onReceiveMetadata:(n=(r=t===null||t===void 0?void 0:t.onReceiveMetadata)===null||r===void 0?void 0:r.bind(t))!==null&&n!==void 0?n:e=>{},onReceiveMessage:(o=(s=t===null||t===void 0?void 0:t.onReceiveMessage)===null||s===void 0?void 0:s.bind(t))!==null&&o!==void 0?o:e=>{},onReceiveStatus:(p=(u=t===null||t===void 0?void 0:t.onReceiveStatus)===null||u===void 0?void 0:u.bind(t))!==null&&p!==void 0?p:e=>{}};this.processingMetadata=true;this.requester.start(e,g,((e,t)=>{var r,n,s;this.processingMetadata=false;let o;if((0,i.isInterceptingListener)(t)){o=t}else{const e={onReceiveMetadata:(r=t.onReceiveMetadata)!==null&&r!==void 0?r:l.onReceiveMetadata,onReceiveMessage:(n=t.onReceiveMessage)!==null&&n!==void 0?n:l.onReceiveMessage,onReceiveStatus:(s=t.onReceiveStatus)!==null&&s!==void 0?s:l.onReceiveStatus};o=new i.InterceptingListenerImpl(e,g)}this.nextCall.start(e,o);this.processPendingMessage();this.processPendingHalfClose()}))}sendMessageWithContext(e,t){this.processingMessage=true;this.requester.sendMessage(t,(r=>{this.processingMessage=false;if(this.processingMetadata){this.pendingMessageContext=e;this.pendingMessage=t}else{this.nextCall.sendMessageWithContext(e,r);this.processPendingHalfClose()}}))}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose((()=>{if(this.processingMetadata||this.processingMessage){this.pendingHalfClose=true}else{this.nextCall.halfClose()}}))}}t.InterceptingCall=InterceptingCall;function getCall(e,t,r){var n,i;const s=(n=r.deadline)!==null&&n!==void 0?n:Infinity;const o=r.host;const l=(i=r.parent)!==null&&i!==void 0?i:null;const u=r.propagate_flags;const p=r.credentials;const g=e.createCall(t,s,o,l,u);if(p){g.setCredentials(p)}return g}class BaseInterceptingCall{constructor(e,t){this.call=e;this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(e){this.call.cancelWithStatus(s.Status.INTERNAL,`Request message serialization failure: ${(0,o.getErrorMessage)(e)}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:e=>{var r;(r=t===null||t===void 0?void 0:t.onReceiveMetadata)===null||r===void 0?void 0:r.call(t,e)},onReceiveMessage:e=>{var i;let l;try{l=this.methodDefinition.responseDeserialize(e)}catch(e){r={code:s.Status.INTERNAL,details:`Response message parsing error: ${(0,o.getErrorMessage)(e)}`,metadata:new n.Metadata};this.call.cancelWithStatus(r.code,r.details);return}(i=t===null||t===void 0?void 0:t.onReceiveMessage)===null||i===void 0?void 0:i.call(t,l)},onReceiveStatus:e=>{var n,i;if(r){(n=t===null||t===void 0?void 0:t.onReceiveStatus)===null||n===void 0?void 0:n.call(t,r)}else{(i=t===null||t===void 0?void 0:t.onReceiveStatus)===null||i===void 0?void 0:i.call(t,e)}}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class BaseUnaryInterceptingCall extends BaseInterceptingCall{constructor(e,t){super(e,t)}start(e,t){var r,n;let i=false;const s={onReceiveMetadata:(n=(r=t===null||t===void 0?void 0:t.onReceiveMetadata)===null||r===void 0?void 0:r.bind(t))!==null&&n!==void 0?n:e=>{},onReceiveMessage:e=>{var r;i=true;(r=t===null||t===void 0?void 0:t.onReceiveMessage)===null||r===void 0?void 0:r.call(t,e)},onReceiveStatus:e=>{var r,n;if(!i){(r=t===null||t===void 0?void 0:t.onReceiveMessage)===null||r===void 0?void 0:r.call(t,null)}(n=t===null||t===void 0?void 0:t.onReceiveStatus)===null||n===void 0?void 0:n.call(t,e)}};super.start(e,s);this.call.startRead()}}class BaseStreamingInterceptingCall extends BaseInterceptingCall{}function getBottomInterceptingCall(e,t,r){const n=getCall(e,r.path,t);if(r.responseStream){return new BaseStreamingInterceptingCall(n,r)}else{return new BaseUnaryInterceptingCall(n,r)}}function getInterceptingCall(e,t,r,n){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0){throw new InterceptorConfigurationError("Both interceptors and interceptor_providers were passed as options "+"to the client constructor. Only one of these is allowed.")}if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0){throw new InterceptorConfigurationError("Both interceptors and interceptor_providers were passed as call "+"options. Only one of these is allowed.")}let i=[];if(e.callInterceptors.length>0||e.callInterceptorProviders.length>0){i=[].concat(e.callInterceptors,e.callInterceptorProviders.map((e=>e(t)))).filter((e=>e))}else{i=[].concat(e.clientInterceptors,e.clientInterceptorProviders.map((e=>e(t)))).filter((e=>e))}const s=Object.assign({},r,{method_definition:t});const o=i.reduceRight(((e,t)=>r=>t(r,e)),(e=>getBottomInterceptingCall(n,e,t)));return o(s)}},4210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Client=void 0;const n=r(1161);const i=r(6918);const s=r(778);const o=r(8288);const l=r(6100);const u=r(2451);const p=Symbol();const g=Symbol();const m=Symbol();const y=Symbol();function isFunction(e){return typeof e==="function"}function getErrorStackString(e){var t;return((t=e.stack)===null||t===void 0?void 0:t.split("\n").slice(1).join("\n"))||"no stack trace available"}class Client{constructor(e,t,r={}){var n,s;r=Object.assign({},r);this[g]=(n=r.interceptors)!==null&&n!==void 0?n:[];delete r.interceptors;this[m]=(s=r.interceptor_providers)!==null&&s!==void 0?s:[];delete r.interceptor_providers;if(this[g].length>0&&this[m].length>0){throw new Error("Both interceptors and interceptor_providers were passed as options "+"to the client constructor. Only one of these is allowed.")}this[y]=r.callInvocationTransformer;delete r.callInvocationTransformer;if(r.channelOverride){this[p]=r.channelOverride}else if(r.channelFactoryOverride){const n=r.channelFactoryOverride;delete r.channelFactoryOverride;this[p]=n(e,t,r)}else{this[p]=new i.ChannelImplementation(e,t,r)}}close(){this[p].close()}getChannel(){return this[p]}waitForReady(e,t){const checkState=r=>{if(r){t(new Error("Failed to connect before the deadline"));return}let n;try{n=this[p].getConnectivityState(true)}catch(e){t(new Error("The channel has been closed"));return}if(n===s.ConnectivityState.READY){t()}else{try{this[p].watchConnectivityState(n,e,checkState)}catch(e){t(new Error("The channel has been closed"))}}};setImmediate(checkState)}checkOptionalUnaryResponseArguments(e,t,r){if(isFunction(e)){return{metadata:new l.Metadata,options:{},callback:e}}else if(isFunction(t)){if(e instanceof l.Metadata){return{metadata:e,options:{},callback:t}}else{return{metadata:new l.Metadata,options:e,callback:t}}}else{if(!(e instanceof l.Metadata&&t instanceof Object&&isFunction(r))){throw new Error("Incorrect arguments passed")}return{metadata:e,options:t,callback:r}}}makeUnaryRequest(e,t,r,i,s,l,_){var v,E;const b=this.checkOptionalUnaryResponseArguments(s,l,_);const C={path:e,requestStream:false,responseStream:false,requestSerialize:t,responseDeserialize:r};let w={argument:i,metadata:b.metadata,call:new n.ClientUnaryCallImpl,channel:this[p],methodDefinition:C,callOptions:b.options,callback:b.callback};if(this[y]){w=this[y](w)}const I=w.call;const T={clientInterceptors:this[g],clientInterceptorProviders:this[m],callInterceptors:(v=w.callOptions.interceptors)!==null&&v!==void 0?v:[],callInterceptorProviders:(E=w.callOptions.interceptor_providers)!==null&&E!==void 0?E:[]};const k=(0,u.getInterceptingCall)(T,w.methodDefinition,w.callOptions,w.channel);I.call=k;let R=null;let O=false;let P=new Error;k.start(w.metadata,{onReceiveMetadata:e=>{I.emit("metadata",e)},onReceiveMessage(e){if(R!==null){k.cancelWithStatus(o.Status.UNIMPLEMENTED,"Too many responses received")}R=e},onReceiveStatus(e){if(O){return}O=true;if(e.code===o.Status.OK){if(R===null){const t=getErrorStackString(P);w.callback((0,n.callErrorFromStatus)({code:o.Status.UNIMPLEMENTED,details:"No message received",metadata:e.metadata},t))}else{w.callback(null,R)}}else{const t=getErrorStackString(P);w.callback((0,n.callErrorFromStatus)(e,t))}P=null;I.emit("status",e)}});k.sendMessage(i);k.halfClose();return I}makeClientStreamRequest(e,t,r,i,s,l){var _,v;const E=this.checkOptionalUnaryResponseArguments(i,s,l);const b={path:e,requestStream:true,responseStream:false,requestSerialize:t,responseDeserialize:r};let C={metadata:E.metadata,call:new n.ClientWritableStreamImpl(t),channel:this[p],methodDefinition:b,callOptions:E.options,callback:E.callback};if(this[y]){C=this[y](C)}const w=C.call;const I={clientInterceptors:this[g],clientInterceptorProviders:this[m],callInterceptors:(_=C.callOptions.interceptors)!==null&&_!==void 0?_:[],callInterceptorProviders:(v=C.callOptions.interceptor_providers)!==null&&v!==void 0?v:[]};const T=(0,u.getInterceptingCall)(I,C.methodDefinition,C.callOptions,C.channel);w.call=T;let k=null;let R=false;let O=new Error;T.start(C.metadata,{onReceiveMetadata:e=>{w.emit("metadata",e)},onReceiveMessage(e){if(k!==null){T.cancelWithStatus(o.Status.UNIMPLEMENTED,"Too many responses received")}k=e;T.startRead()},onReceiveStatus(e){if(R){return}R=true;if(e.code===o.Status.OK){if(k===null){const t=getErrorStackString(O);C.callback((0,n.callErrorFromStatus)({code:o.Status.UNIMPLEMENTED,details:"No message received",metadata:e.metadata},t))}else{C.callback(null,k)}}else{const t=getErrorStackString(O);C.callback((0,n.callErrorFromStatus)(e,t))}O=null;w.emit("status",e)}});return w}checkMetadataAndOptions(e,t){let r;let n;if(e instanceof l.Metadata){r=e;if(t){n=t}else{n={}}}else{if(e){n=e}else{n={}}r=new l.Metadata}return{metadata:r,options:n}}makeServerStreamRequest(e,t,r,i,s,l){var _,v;const E=this.checkMetadataAndOptions(s,l);const b={path:e,requestStream:false,responseStream:true,requestSerialize:t,responseDeserialize:r};let C={argument:i,metadata:E.metadata,call:new n.ClientReadableStreamImpl(r),channel:this[p],methodDefinition:b,callOptions:E.options};if(this[y]){C=this[y](C)}const w=C.call;const I={clientInterceptors:this[g],clientInterceptorProviders:this[m],callInterceptors:(_=C.callOptions.interceptors)!==null&&_!==void 0?_:[],callInterceptorProviders:(v=C.callOptions.interceptor_providers)!==null&&v!==void 0?v:[]};const T=(0,u.getInterceptingCall)(I,C.methodDefinition,C.callOptions,C.channel);w.call=T;let k=false;let R=new Error;T.start(C.metadata,{onReceiveMetadata(e){w.emit("metadata",e)},onReceiveMessage(e){w.push(e)},onReceiveStatus(e){if(k){return}k=true;w.push(null);if(e.code!==o.Status.OK){const t=getErrorStackString(R);w.emit("error",(0,n.callErrorFromStatus)(e,t))}R=null;w.emit("status",e)}});T.sendMessage(i);T.halfClose();return w}makeBidiStreamRequest(e,t,r,i,s){var l,_;const v=this.checkMetadataAndOptions(i,s);const E={path:e,requestStream:true,responseStream:true,requestSerialize:t,responseDeserialize:r};let b={metadata:v.metadata,call:new n.ClientDuplexStreamImpl(t,r),channel:this[p],methodDefinition:E,callOptions:v.options};if(this[y]){b=this[y](b)}const C=b.call;const w={clientInterceptors:this[g],clientInterceptorProviders:this[m],callInterceptors:(l=b.callOptions.interceptors)!==null&&l!==void 0?l:[],callInterceptorProviders:(_=b.callOptions.interceptor_providers)!==null&&_!==void 0?_:[]};const I=(0,u.getInterceptingCall)(w,b.methodDefinition,b.callOptions,b.channel);C.call=I;let T=false;let k=new Error;I.start(b.metadata,{onReceiveMetadata(e){C.emit("metadata",e)},onReceiveMessage(e){C.push(e)},onReceiveStatus(e){if(T){return}T=true;C.push(null);if(e.code!==o.Status.OK){const t=getErrorStackString(k);C.emit("error",(0,n.callErrorFromStatus)(e,t))}k=null;C.emit("status",e)}});return C}}t.Client=Client},4130:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CompressionAlgorithms=void 0;var r;(function(e){e[e["identity"]=0]="identity";e[e["deflate"]=1]="deflate";e[e["gzip"]=2]="gzip"})(r||(t.CompressionAlgorithms=r={}))},3430:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CompressionFilterFactory=t.CompressionFilter=void 0;const n=r(3106);const i=r(4130);const s=r(8288);const o=r(1467);const l=r(8536);const isCompressionAlgorithmKey=e=>typeof e==="number"&&typeof i.CompressionAlgorithms[e]==="string";class CompressionHandler{async writeMessage(e,t){let r=e;if(t){r=await this.compressMessage(r)}const n=Buffer.allocUnsafe(r.length+5);n.writeUInt8(t?1:0,0);n.writeUInt32BE(r.length,1);r.copy(n,5);return n}async readMessage(e){const t=e.readUInt8(0)===1;let r=e.slice(5);if(t){r=await this.decompressMessage(r)}return r}}class IdentityHandler extends CompressionHandler{async compressMessage(e){return e}async writeMessage(e,t){const r=Buffer.allocUnsafe(e.length+5);r.writeUInt8(0,0);r.writeUInt32BE(e.length,1);e.copy(r,5);return r}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}}class DeflateHandler extends CompressionHandler{constructor(e){super();this.maxRecvMessageLength=e}compressMessage(e){return new Promise(((t,r)=>{n.deflate(e,((e,n)=>{if(e){r(e)}else{t(n)}}))}))}decompressMessage(e){return new Promise(((t,r)=>{let i=0;const o=[];const l=n.createInflate();l.on("data",(e=>{o.push(e);i+=e.byteLength;if(this.maxRecvMessageLength!==-1&&i>this.maxRecvMessageLength){l.destroy();r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`})}}));l.on("end",(()=>{t(Buffer.concat(o))}));l.write(e);l.end()}))}}class GzipHandler extends CompressionHandler{constructor(e){super();this.maxRecvMessageLength=e}compressMessage(e){return new Promise(((t,r)=>{n.gzip(e,((e,n)=>{if(e){r(e)}else{t(n)}}))}))}decompressMessage(e){return new Promise(((t,r)=>{let i=0;const o=[];const l=n.createGunzip();l.on("data",(e=>{o.push(e);i+=e.byteLength;if(this.maxRecvMessageLength!==-1&&i>this.maxRecvMessageLength){l.destroy();r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`})}}));l.on("end",(()=>{t(Buffer.concat(o))}));l.write(e);l.end()}))}}class UnknownHandler extends CompressionHandler{constructor(e){super();this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}}function getCompressionHandler(e,t){switch(e){case"identity":return new IdentityHandler;case"deflate":return new DeflateHandler(t);case"gzip":return new GzipHandler(t);default:return new UnknownHandler(e)}}class CompressionFilter extends o.BaseFilter{constructor(e,t){var r,n,o;super();this.sharedFilterConfig=t;this.sendCompression=new IdentityHandler;this.receiveCompression=new IdentityHandler;this.currentCompressionAlgorithm="identity";const u=e["grpc.default_compression_algorithm"];this.maxReceiveMessageLength=(r=e["grpc.max_receive_message_length"])!==null&&r!==void 0?r:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.maxSendMessageLength=(n=e["grpc.max_send_message_length"])!==null&&n!==void 0?n:s.DEFAULT_MAX_SEND_MESSAGE_LENGTH;if(u!==undefined){if(isCompressionAlgorithmKey(u)){const e=i.CompressionAlgorithms[u];const r=(o=t.serverSupportedEncodingHeader)===null||o===void 0?void 0:o.split(",");if(!r||r.includes(e)){this.currentCompressionAlgorithm=e;this.sendCompression=getCompressionHandler(this.currentCompressionAlgorithm,-1)}}else{l.log(s.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${u}`)}}}async sendMetadata(e){const t=await e;t.set("grpc-accept-encoding","identity,deflate,gzip");t.set("accept-encoding","identity");if(this.currentCompressionAlgorithm==="identity"){t.remove("grpc-encoding")}else{t.set("grpc-encoding",this.currentCompressionAlgorithm)}return t}receiveMetadata(e){const t=e.get("grpc-encoding");if(t.length>0){const e=t[0];if(typeof e==="string"){this.receiveCompression=getCompressionHandler(e,this.maxReceiveMessageLength)}}e.remove("grpc-encoding");const r=e.get("grpc-accept-encoding")[0];if(r){this.sharedFilterConfig.serverSupportedEncodingHeader=r;const e=r.split(",");if(!e.includes(this.currentCompressionAlgorithm)){this.sendCompression=new IdentityHandler;this.currentCompressionAlgorithm="identity"}}e.remove("grpc-accept-encoding");return e}async sendMessage(e){var t;const r=await e;if(this.maxSendMessageLength!==-1&&r.message.length>this.maxSendMessageLength){throw{code:s.Status.RESOURCE_EXHAUSTED,details:`Attempted to send message with a size larger than ${this.maxSendMessageLength}`}}let n;if(this.sendCompression instanceof IdentityHandler){n=false}else{n=(((t=r.flags)!==null&&t!==void 0?t:0)&2)===0}return{message:await this.sendCompression.writeMessage(r.message,n),flags:r.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=CompressionFilter;class CompressionFilterFactory{constructor(e,t){this.options=t;this.sharedFilterConfig={}}createFilter(){return new CompressionFilter(this.options,this.sharedFilterConfig)}}t.CompressionFilterFactory=CompressionFilterFactory},778:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ConnectivityState=void 0;var r;(function(e){e[e["IDLE"]=0]="IDLE";e[e["CONNECTING"]=1]="CONNECTING";e[e["READY"]=2]="READY";e[e["TRANSIENT_FAILURE"]=3]="TRANSIENT_FAILURE";e[e["SHUTDOWN"]=4]="SHUTDOWN"})(r||(t.ConnectivityState=r={}))},8288:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0;var r;(function(e){e[e["OK"]=0]="OK";e[e["CANCELLED"]=1]="CANCELLED";e[e["UNKNOWN"]=2]="UNKNOWN";e[e["INVALID_ARGUMENT"]=3]="INVALID_ARGUMENT";e[e["DEADLINE_EXCEEDED"]=4]="DEADLINE_EXCEEDED";e[e["NOT_FOUND"]=5]="NOT_FOUND";e[e["ALREADY_EXISTS"]=6]="ALREADY_EXISTS";e[e["PERMISSION_DENIED"]=7]="PERMISSION_DENIED";e[e["RESOURCE_EXHAUSTED"]=8]="RESOURCE_EXHAUSTED";e[e["FAILED_PRECONDITION"]=9]="FAILED_PRECONDITION";e[e["ABORTED"]=10]="ABORTED";e[e["OUT_OF_RANGE"]=11]="OUT_OF_RANGE";e[e["UNIMPLEMENTED"]=12]="UNIMPLEMENTED";e[e["INTERNAL"]=13]="INTERNAL";e[e["UNAVAILABLE"]=14]="UNAVAILABLE";e[e["DATA_LOSS"]=15]="DATA_LOSS";e[e["UNAUTHENTICATED"]=16]="UNAUTHENTICATED"})(r||(t.Status=r={}));var n;(function(e){e[e["DEBUG"]=0]="DEBUG";e[e["INFO"]=1]="INFO";e[e["ERROR"]=2]="ERROR";e[e["NONE"]=3]="NONE"})(n||(t.LogVerbosity=n={}));var i;(function(e){e[e["DEADLINE"]=1]="DEADLINE";e[e["CENSUS_STATS_CONTEXT"]=2]="CENSUS_STATS_CONTEXT";e[e["CENSUS_TRACING_CONTEXT"]=4]="CENSUS_TRACING_CONTEXT";e[e["CANCELLATION"]=8]="CANCELLATION";e[e["DEFAULTS"]=65535]="DEFAULTS"})(i||(t.Propagate=i={}));t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1;t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4*1024*1024},9962:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.restrictControlPlaneStatusCode=restrictControlPlaneStatusCode;const n=r(8288);const i=[n.Status.OK,n.Status.INVALID_ARGUMENT,n.Status.NOT_FOUND,n.Status.ALREADY_EXISTS,n.Status.FAILED_PRECONDITION,n.Status.ABORTED,n.Status.OUT_OF_RANGE,n.Status.DATA_LOSS];function restrictControlPlaneStatusCode(e,t){if(i.includes(e)){return{code:n.Status.INTERNAL,details:`Invalid status from control plane: ${e} ${n.Status[e]} ${t}`}}else{return{code:e,details:t}}}},2173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.minDeadline=minDeadline;t.getDeadlineTimeoutString=getDeadlineTimeoutString;t.getRelativeTimeout=getRelativeTimeout;t.deadlineToString=deadlineToString;t.formatDateDifference=formatDateDifference;function minDeadline(...e){let t=Infinity;for(const r of e){const e=r instanceof Date?r.getTime():r;if(e<t){t=e}}return t}const r=[["m",1],["S",1e3],["M",60*1e3],["H",60*60*1e3]];function getDeadlineTimeoutString(e){const t=(new Date).getTime();if(e instanceof Date){e=e.getTime()}const n=Math.max(e-t,0);for(const[e,t]of r){const r=n/t;if(r<1e8){return String(Math.ceil(r))+e}}throw new Error("Deadline is too far in the future")}const n=2147483647;function getRelativeTimeout(e){const t=e instanceof Date?e.getTime():e;const r=(new Date).getTime();const i=t-r;if(i<0){return 0}else if(i>n){return Infinity}else{return i}}function deadlineToString(e){if(e instanceof Date){return e.toISOString()}else{const t=new Date(e);if(Number.isNaN(t.getTime())){return""+e}else{return t.toISOString()}}}function formatDateDifference(e,t){return((t.getTime()-e.getTime())/1e3).toFixed(3)+"s"}},3929:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.msToDuration=msToDuration;t.durationToMs=durationToMs;t.isDuration=isDuration;t.parseDuration=parseDuration;function msToDuration(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}}function durationToMs(e){return e.seconds*1e3+e.nanos/1e6|0}function isDuration(e){return typeof e.seconds==="number"&&typeof e.nanos==="number"}const r=/^(\d+)(?:\.(\d+))?s$/;function parseDuration(e){const t=e.match(r);if(!t){return null}return{seconds:Number.parseInt(t[1],10),nanos:t[2]?Number.parseInt(t[2].padEnd(9,"0"),10):0}}},6964:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:true});t.GRPC_NODE_USE_ALTERNATIVE_RESOLVER=void 0;t.GRPC_NODE_USE_ALTERNATIVE_RESOLVER=((r=process.env.GRPC_NODE_USE_ALTERNATIVE_RESOLVER)!==null&&r!==void 0?r:"false")==="true"},8219:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getErrorMessage=getErrorMessage;t.getErrorCode=getErrorCode;function getErrorMessage(e){if(e instanceof Error){return e.message}else{return String(e)}}function getErrorCode(e){if(typeof e==="object"&&e!==null&&"code"in e&&typeof e.code==="number"){return e.code}else{return null}}},79:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=t.createCertificateProviderChannelCredentials=t.FileWatcherCertificateProvider=t.createCertificateProviderServerCredentials=t.createServerCredentialsWithInterceptors=t.BaseSubchannelWrapper=t.registerAdminService=t.FilterStackFactory=t.BaseFilter=t.PickResultType=t.QueuePicker=t.UnavailablePicker=t.ChildLoadBalancerHandler=t.EndpointMap=t.endpointHasAddress=t.endpointToString=t.subchannelAddressToString=t.LeafLoadBalancer=t.isLoadBalancerNameRegistered=t.parseLoadBalancingConfig=t.selectLbConfigFromList=t.registerLoadBalancerType=t.createChildChannelControlHelper=t.BackoffTimeout=t.parseDuration=t.durationToMs=t.splitHostPort=t.uriToString=t.createResolver=t.registerResolver=t.log=t.trace=void 0;var n=r(8536);Object.defineProperty(t,"trace",{enumerable:true,get:function(){return n.trace}});Object.defineProperty(t,"log",{enumerable:true,get:function(){return n.log}});var i=r(6255);Object.defineProperty(t,"registerResolver",{enumerable:true,get:function(){return i.registerResolver}});Object.defineProperty(t,"createResolver",{enumerable:true,get:function(){return i.createResolver}});var s=r(6027);Object.defineProperty(t,"uriToString",{enumerable:true,get:function(){return s.uriToString}});Object.defineProperty(t,"splitHostPort",{enumerable:true,get:function(){return s.splitHostPort}});var o=r(3929);Object.defineProperty(t,"durationToMs",{enumerable:true,get:function(){return o.durationToMs}});Object.defineProperty(t,"parseDuration",{enumerable:true,get:function(){return o.parseDuration}});var l=r(4643);Object.defineProperty(t,"BackoffTimeout",{enumerable:true,get:function(){return l.BackoffTimeout}});var u=r(7e3);Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:true,get:function(){return u.createChildChannelControlHelper}});Object.defineProperty(t,"registerLoadBalancerType",{enumerable:true,get:function(){return u.registerLoadBalancerType}});Object.defineProperty(t,"selectLbConfigFromList",{enumerable:true,get:function(){return u.selectLbConfigFromList}});Object.defineProperty(t,"parseLoadBalancingConfig",{enumerable:true,get:function(){return u.parseLoadBalancingConfig}});Object.defineProperty(t,"isLoadBalancerNameRegistered",{enumerable:true,get:function(){return u.isLoadBalancerNameRegistered}});var p=r(8639);Object.defineProperty(t,"LeafLoadBalancer",{enumerable:true,get:function(){return p.LeafLoadBalancer}});var g=r(7021);Object.defineProperty(t,"subchannelAddressToString",{enumerable:true,get:function(){return g.subchannelAddressToString}});Object.defineProperty(t,"endpointToString",{enumerable:true,get:function(){return g.endpointToString}});Object.defineProperty(t,"endpointHasAddress",{enumerable:true,get:function(){return g.endpointHasAddress}});Object.defineProperty(t,"EndpointMap",{enumerable:true,get:function(){return g.EndpointMap}});var m=r(9069);Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:true,get:function(){return m.ChildLoadBalancerHandler}});var y=r(1663);Object.defineProperty(t,"UnavailablePicker",{enumerable:true,get:function(){return y.UnavailablePicker}});Object.defineProperty(t,"QueuePicker",{enumerable:true,get:function(){return y.QueuePicker}});Object.defineProperty(t,"PickResultType",{enumerable:true,get:function(){return y.PickResultType}});var _=r(1467);Object.defineProperty(t,"BaseFilter",{enumerable:true,get:function(){return _.BaseFilter}});var v=r(5726);Object.defineProperty(t,"FilterStackFactory",{enumerable:true,get:function(){return v.FilterStackFactory}});var E=r(2914);Object.defineProperty(t,"registerAdminService",{enumerable:true,get:function(){return E.registerAdminService}});var b=r(98);Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:true,get:function(){return b.BaseSubchannelWrapper}});var C=r(6545);Object.defineProperty(t,"createServerCredentialsWithInterceptors",{enumerable:true,get:function(){return C.createServerCredentialsWithInterceptors}});Object.defineProperty(t,"createCertificateProviderServerCredentials",{enumerable:true,get:function(){return C.createCertificateProviderServerCredentials}});var w=r(7974);Object.defineProperty(t,"FileWatcherCertificateProvider",{enumerable:true,get:function(){return w.FileWatcherCertificateProvider}});var I=r(2257);Object.defineProperty(t,"createCertificateProviderChannelCredentials",{enumerable:true,get:function(){return I.createCertificateProviderChannelCredentials}});var T=r(114);Object.defineProperty(t,"SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX",{enumerable:true,get:function(){return T.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX}})},5726:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FilterStackFactory=t.FilterStack=void 0;class FilterStack{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++){t=this.filters[e].sendMetadata(t)}return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--){t=this.filters[e].receiveMetadata(t)}return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++){t=this.filters[e].sendMessage(t)}return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--){t=this.filters[e].receiveMessage(t)}return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--){t=this.filters[e].receiveTrailers(t)}return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=FilterStack;class FilterStackFactory{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new FilterStackFactory([...this.factories])}createFilter(){return new FilterStack(this.factories.map((e=>e.createFilter())))}}t.FilterStackFactory=FilterStackFactory},1467:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BaseFilter=void 0;class BaseFilter{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}}t.BaseFilter=BaseFilter},8954:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseCIDR=parseCIDR;t.mapProxyName=mapProxyName;t.getProxiedConnection=getProxiedConnection;const n=r(8536);const i=r(8288);const s=r(9278);const o=r(8611);const l=r(8536);const u=r(7021);const p=r(6027);const g=r(7016);const m=r(1149);const y="proxy";function trace(e){l.trace(i.LogVerbosity.DEBUG,y,e)}function getProxyInfo(){let e="";let t="";if(process.env.grpc_proxy){t="grpc_proxy";e=process.env.grpc_proxy}else if(process.env.https_proxy){t="https_proxy";e=process.env.https_proxy}else if(process.env.http_proxy){t="http_proxy";e=process.env.http_proxy}else{return{}}let r;try{r=new g.URL(e)}catch(e){(0,n.log)(i.LogVerbosity.ERROR,`cannot parse value of "${t}" env var`);return{}}if(r.protocol!=="http:"){(0,n.log)(i.LogVerbosity.ERROR,`"${r.protocol}" scheme not supported in proxy URI`);return{}}let s=null;if(r.username){if(r.password){(0,n.log)(i.LogVerbosity.INFO,"userinfo found in proxy URI");s=decodeURIComponent(`${r.username}:${r.password}`)}else{s=r.username}}const o=r.hostname;let l=r.port;if(l===""){l="80"}const u={address:`${o}:${l}`};if(s){u.creds=s}trace("Proxy server "+u.address+" set by environment variable "+t);return u}function getNoProxyHostList(){let e=process.env.no_grpc_proxy;let t="no_grpc_proxy";if(!e){e=process.env.no_proxy;t="no_proxy"}if(e){trace("No proxy server list set by environment variable "+t);return e.split(",")}else{return[]}}function parseCIDR(e){const t=e.split("/");if(t.length!==2){return null}const r=parseInt(t[1],10);if(!(0,s.isIPv4)(t[0])||Number.isNaN(r)||r<0||r>32){return null}return{ip:ipToInt(t[0]),prefixLength:r}}function ipToInt(e){return e.split(".").reduce(((e,t)=>(e<<8)+parseInt(t,10)),0)}function isIpInCIDR(e,t){const r=e.ip;const n=-1<<32-e.prefixLength;const i=ipToInt(t);return(i&n)===(r&n)}function hostMatchesNoProxyList(e){for(const t of getNoProxyHostList()){const r=parseCIDR(t);if((0,s.isIPv4)(e)&&r&&isIpInCIDR(r,e)){return true}else if(e.endsWith(t)){return true}}return false}function mapProxyName(e,t){var r;const n={target:e,extraOptions:{}};if(((r=t["grpc.enable_http_proxy"])!==null&&r!==void 0?r:1)===0){return n}if(e.scheme==="unix"){return n}const i=getProxyInfo();if(!i.address){return n}const s=(0,p.splitHostPort)(e.path);if(!s){return n}const o=s.host;if(hostMatchesNoProxyList(o)){trace("Not using proxy for target in no_proxy list: "+(0,p.uriToString)(e));return n}const l={"grpc.http_connect_target":(0,p.uriToString)(e)};if(i.creds){l["grpc.http_connect_creds"]=i.creds}return{target:{scheme:"dns",path:i.address},extraOptions:l}}function getProxiedConnection(e,t){var r;if(!("grpc.http_connect_target"in t)){return Promise.resolve(null)}const s=t["grpc.http_connect_target"];const l=(0,p.parseUri)(s);if(l===null){return Promise.resolve(null)}const g=(0,p.splitHostPort)(l.path);if(g===null){return Promise.resolve(null)}const y=`${g.host}:${(r=g.port)!==null&&r!==void 0?r:m.DEFAULT_PORT}`;const _={method:"CONNECT",path:y};const v={Host:y};if((0,u.isTcpSubchannelAddress)(e)){_.host=e.host;_.port=e.port}else{_.socketPath=e.path}if("grpc.http_connect_creds"in t){v["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")}_.headers=v;const E=(0,u.subchannelAddressToString)(e);trace("Using proxy "+E+" to connect to "+_.path);return new Promise(((e,t)=>{const r=o.request(_);r.once("connect",((s,o,l)=>{r.removeAllListeners();o.removeAllListeners();if(s.statusCode===200){trace("Successfully connected to "+_.path+" through proxy "+E);if(l.length>0){o.unshift(l)}trace("Successfully established a plaintext connection to "+_.path+" through proxy "+E);e(o)}else{(0,n.log)(i.LogVerbosity.ERROR,"Failed to connect to "+_.path+" through proxy "+E+" with status "+s.statusCode);t()}}));r.once("error",(e=>{r.removeAllListeners();(0,n.log)(i.LogVerbosity.ERROR,"Failed to connect to proxy "+E+" with error "+e.message);t()}));r.end()}))}},3033:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.experimental=t.ServerInterceptingCall=t.ResponderBuilder=t.ServerListenerBuilder=t.addAdminServicesToServer=t.getChannelzHandlers=t.getChannelzServiceDefinition=t.InterceptorConfigurationError=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.StatusBuilder=t.getClientChannel=t.ServerCredentials=t.Server=t.setLogVerbosity=t.setLogger=t.load=t.loadObject=t.CallCredentials=t.ChannelCredentials=t.waitForClientReady=t.closeClient=t.Channel=t.makeGenericClientConstructor=t.makeClientConstructor=t.loadPackageDefinition=t.Client=t.compressionAlgorithms=t.propagate=t.connectivityState=t.status=t.logVerbosity=t.Metadata=t.credentials=void 0;const n=r(9190);Object.defineProperty(t,"CallCredentials",{enumerable:true,get:function(){return n.CallCredentials}});const i=r(6918);Object.defineProperty(t,"Channel",{enumerable:true,get:function(){return i.ChannelImplementation}});const s=r(4130);Object.defineProperty(t,"compressionAlgorithms",{enumerable:true,get:function(){return s.CompressionAlgorithms}});const o=r(778);Object.defineProperty(t,"connectivityState",{enumerable:true,get:function(){return o.ConnectivityState}});const l=r(2257);Object.defineProperty(t,"ChannelCredentials",{enumerable:true,get:function(){return l.ChannelCredentials}});const u=r(4210);Object.defineProperty(t,"Client",{enumerable:true,get:function(){return u.Client}});const p=r(8288);Object.defineProperty(t,"logVerbosity",{enumerable:true,get:function(){return p.LogVerbosity}});Object.defineProperty(t,"status",{enumerable:true,get:function(){return p.Status}});Object.defineProperty(t,"propagate",{enumerable:true,get:function(){return p.Propagate}});const g=r(8536);const m=r(6983);Object.defineProperty(t,"loadPackageDefinition",{enumerable:true,get:function(){return m.loadPackageDefinition}});Object.defineProperty(t,"makeClientConstructor",{enumerable:true,get:function(){return m.makeClientConstructor}});Object.defineProperty(t,"makeGenericClientConstructor",{enumerable:true,get:function(){return m.makeClientConstructor}});const y=r(6100);Object.defineProperty(t,"Metadata",{enumerable:true,get:function(){return y.Metadata}});const _=r(2390);Object.defineProperty(t,"Server",{enumerable:true,get:function(){return _.Server}});const v=r(6545);Object.defineProperty(t,"ServerCredentials",{enumerable:true,get:function(){return v.ServerCredentials}});const E=r(7901);Object.defineProperty(t,"StatusBuilder",{enumerable:true,get:function(){return E.StatusBuilder}});t.credentials={combineChannelCredentials:(e,...t)=>t.reduce(((e,t)=>e.compose(t)),e),combineCallCredentials:(e,...t)=>t.reduce(((e,t)=>e.compose(t)),e),createInsecure:l.ChannelCredentials.createInsecure,createSsl:l.ChannelCredentials.createSsl,createFromSecureContext:l.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:n.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:n.CallCredentials.createFromGoogleCredential,createEmpty:n.CallCredentials.createEmpty};const closeClient=e=>e.close();t.closeClient=closeClient;const waitForClientReady=(e,t,r)=>e.waitForReady(t,r);t.waitForClientReady=waitForClientReady;const loadObject=(e,t)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};t.loadObject=loadObject;const load=(e,t,r)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};t.load=load;const setLogger=e=>{g.setLogger(e)};t.setLogger=setLogger;const setLogVerbosity=e=>{g.setLoggerVerbosity(e)};t.setLogVerbosity=setLogVerbosity;const getClientChannel=e=>u.Client.prototype.getChannel.call(e);t.getClientChannel=getClientChannel;var b=r(2451);Object.defineProperty(t,"ListenerBuilder",{enumerable:true,get:function(){return b.ListenerBuilder}});Object.defineProperty(t,"RequesterBuilder",{enumerable:true,get:function(){return b.RequesterBuilder}});Object.defineProperty(t,"InterceptingCall",{enumerable:true,get:function(){return b.InterceptingCall}});Object.defineProperty(t,"InterceptorConfigurationError",{enumerable:true,get:function(){return b.InterceptorConfigurationError}});var C=r(8198);Object.defineProperty(t,"getChannelzServiceDefinition",{enumerable:true,get:function(){return C.getChannelzServiceDefinition}});Object.defineProperty(t,"getChannelzHandlers",{enumerable:true,get:function(){return C.getChannelzHandlers}});var w=r(2914);Object.defineProperty(t,"addAdminServicesToServer",{enumerable:true,get:function(){return w.addAdminServicesToServer}});var I=r(2151);Object.defineProperty(t,"ServerListenerBuilder",{enumerable:true,get:function(){return I.ServerListenerBuilder}});Object.defineProperty(t,"ResponderBuilder",{enumerable:true,get:function(){return I.ResponderBuilder}});Object.defineProperty(t,"ServerInterceptingCall",{enumerable:true,get:function(){return I.ServerInterceptingCall}});const T=r(79);t.experimental=T;const k=r(1149);const R=r(9252);const O=r(2617);const P=r(8639);const B=r(1936);const D=r(5343);const L=r(8198);(()=>{k.setup();R.setup();O.setup();P.setup();B.setup();D.setup();L.setup()})()},114:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InternalChannel=t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX=void 0;const n=r(2257);const i=r(3962);const s=r(8695);const o=r(1663);const l=r(6100);const u=r(8288);const p=r(5726);const g=r(3430);const m=r(6255);const y=r(8536);const _=r(8954);const v=r(6027);const E=r(778);const b=r(8198);const C=r(8944);const w=r(2173);const I=r(8023);const T=r(8056);const k=r(9962);const R=r(2532);const O=r(98);const P=2147483647;const B=1e3;const D=30*60*1e3;const L=new Map;const x=1<<24;const U=1<<20;class ChannelSubchannelWrapper extends O.BaseSubchannelWrapper{constructor(e,t){super(e);this.channel=t;this.refCount=0;this.subchannelStateListener=(e,r,n,i)=>{t.throttleKeepalive(i)}}ref(){if(this.refCount===0){this.child.addConnectivityStateListener(this.subchannelStateListener);this.channel.addWrappedSubchannel(this)}this.child.ref();this.refCount+=1}unref(){this.child.unref();this.refCount-=1;if(this.refCount<=0){this.child.removeConnectivityStateListener(this.subchannelStateListener);this.channel.removeWrappedSubchannel(this)}}}class ShutdownPicker{pick(e){return{pickResultType:o.PickResultType.DROP,status:{code:u.Status.UNAVAILABLE,details:"Channel closed before call started",metadata:new l.Metadata},subchannel:null,onCallStarted:null,onCallEnded:null}}}t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX="grpc.internal.no_subchannel";class ChannelzInfoTracker{constructor(e){this.target=e;this.trace=new b.ChannelzTrace;this.callTracker=new b.ChannelzCallTracker;this.childrenTracker=new b.ChannelzChildrenTracker;this.state=E.ConnectivityState.IDLE}getChannelzInfoCallback(){return()=>({target:this.target,state:this.state,trace:this.trace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()})}}class InternalChannel{constructor(e,r,l){var C,w,I,T,O,P;this.credentials=r;this.options=l;this.connectivityState=E.ConnectivityState.IDLE;this.currentPicker=new o.UnavailablePicker;this.configSelectionQueue=[];this.pickQueue=[];this.connectivityStateWatchers=[];this.callRefTimer=null;this.configSelector=null;this.currentResolutionError=null;this.wrappedSubchannels=new Set;this.callCount=0;this.idleTimer=null;this.channelzEnabled=true;this.randomChannelId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER);if(typeof e!=="string"){throw new TypeError("Channel target must be a string")}if(!(r instanceof n.ChannelCredentials)){throw new TypeError("Channel credentials must be a ChannelCredentials object")}if(l){if(typeof l!=="object"){throw new TypeError("Channel options must be an object")}}this.channelzInfoTracker=new ChannelzInfoTracker(e);const j=(0,v.parseUri)(e);if(j===null){throw new Error(`Could not parse target name "${e}"`)}const W=(0,m.mapUriDefaultScheme)(j);if(W===null){throw new Error(`Could not find a default scheme for target name "${e}"`)}if(this.options["grpc.enable_channelz"]===0){this.channelzEnabled=false}this.channelzRef=(0,b.registerChannelzChannel)(e,this.channelzInfoTracker.getChannelzInfoCallback(),this.channelzEnabled);if(this.channelzEnabled){this.channelzInfoTracker.trace.addTrace("CT_INFO","Channel created")}if(this.options["grpc.default_authority"]){this.defaultAuthority=this.options["grpc.default_authority"]}else{this.defaultAuthority=(0,m.getDefaultAuthority)(W)}const Q=(0,_.mapProxyName)(W,l);this.target=Q.target;this.options=Object.assign({},this.options,Q.extraOptions);this.subchannelPool=(0,s.getSubchannelPool)(((C=this.options["grpc.use_local_subchannel_pool"])!==null&&C!==void 0?C:0)===0);this.retryBufferTracker=new R.MessageBufferTracker((w=this.options["grpc.retry_buffer_size"])!==null&&w!==void 0?w:x,(I=this.options["grpc.per_rpc_retry_buffer_size"])!==null&&I!==void 0?I:U);this.keepaliveTime=(T=this.options["grpc.keepalive_time_ms"])!==null&&T!==void 0?T:-1;this.idleTimeoutMs=Math.max((O=this.options["grpc.client_idle_timeout_ms"])!==null&&O!==void 0?O:D,B);const q={createSubchannel:(e,r)=>{const n={};for(const[e,i]of Object.entries(r)){if(!e.startsWith(t.SUBCHANNEL_ARGS_EXCLUDE_KEY_PREFIX)){n[e]=i}}const i=this.subchannelPool.getOrCreateSubchannel(this.target,e,n,this.credentials);i.throttleKeepalive(this.keepaliveTime);if(this.channelzEnabled){this.channelzInfoTracker.trace.addTrace("CT_INFO","Created subchannel or used existing subchannel",i.getChannelzRef())}const s=new ChannelSubchannelWrapper(i,this);return s},updateState:(e,t)=>{this.currentPicker=t;const r=this.pickQueue.slice();this.pickQueue=[];if(r.length>0){this.callRefTimerUnref()}for(const e of r){e.doPick()}this.updateState(e)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{if(this.channelzEnabled){this.channelzInfoTracker.childrenTracker.refChild(e)}},removeChannelzChild:e=>{if(this.channelzEnabled){this.channelzInfoTracker.childrenTracker.unrefChild(e)}}};this.resolvingLoadBalancer=new i.ResolvingLoadBalancer(this.target,q,this.options,((e,t)=>{var r;if(e.retryThrottling){L.set(this.getTarget(),new R.RetryThrottler(e.retryThrottling.maxTokens,e.retryThrottling.tokenRatio,L.get(this.getTarget())))}else{L.delete(this.getTarget())}if(this.channelzEnabled){this.channelzInfoTracker.trace.addTrace("CT_INFO","Address resolution succeeded")}(r=this.configSelector)===null||r===void 0?void 0:r.unref();this.configSelector=t;this.currentResolutionError=null;process.nextTick((()=>{const e=this.configSelectionQueue;this.configSelectionQueue=[];if(e.length>0){this.callRefTimerUnref()}for(const t of e){t.getConfig()}}))}),(e=>{if(this.channelzEnabled){this.channelzInfoTracker.trace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"')}if(this.configSelectionQueue.length>0){this.trace("Name resolution failed with calls queued for config selection")}if(this.configSelector===null){this.currentResolutionError=Object.assign(Object.assign({},(0,k.restrictControlPlaneStatusCode)(e.code,e.details)),{metadata:e.metadata})}const t=this.configSelectionQueue;this.configSelectionQueue=[];if(t.length>0){this.callRefTimerUnref()}for(const r of t){r.reportResolverError(e)}}));this.filterStackFactory=new p.FilterStackFactory([new g.CompressionFilterFactory(this,this.options)]);this.trace("Channel constructed with options "+JSON.stringify(l,undefined,2));const z=new Error;if((0,y.isTracerEnabled)("channel_stacktrace")){(0,y.trace)(u.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") "+"Channel constructed \n"+((P=z.stack)===null||P===void 0?void 0:P.substring(z.stack.indexOf("\n")+1)))}this.lastActivityTimestamp=new Date}trace(e,t){(0,y.trace)(t!==null&&t!==void 0?t:u.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,v.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,n;if(!this.callRefTimer){this.callRefTimer=setInterval((()=>{}),P)}if(!((t=(e=this.callRefTimer).hasRef)===null||t===void 0?void 0:t.call(e))){this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length);(n=(r=this.callRefTimer).ref)===null||n===void 0?void 0:n.call(r)}}callRefTimerUnref(){var e,t,r;if(!((e=this.callRefTimer)===null||e===void 0?void 0:e.hasRef)||this.callRefTimer.hasRef()){this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length);(r=(t=this.callRefTimer)===null||t===void 0?void 0:t.unref)===null||r===void 0?void 0:r.call(t)}}removeConnectivityStateWatcher(e){const t=this.connectivityStateWatchers.findIndex((t=>t===e));if(t>=0){this.connectivityStateWatchers.splice(t,1)}}updateState(e){(0,y.trace)(u.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,v.uriToString)(this.target)+" "+E.ConnectivityState[this.connectivityState]+" -> "+E.ConnectivityState[e]);if(this.channelzEnabled){this.channelzInfoTracker.trace.addTrace("CT_INFO","Connectivity state change to "+E.ConnectivityState[e])}this.connectivityState=e;this.channelzInfoTracker.state=e;const t=this.connectivityStateWatchers.slice();for(const r of t){if(e!==r.currentState){if(r.timer){clearTimeout(r.timer)}this.removeConnectivityStateWatcher(r);r.callback()}}if(e!==E.ConnectivityState.TRANSIENT_FAILURE){this.currentResolutionError=null}}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(const t of this.wrappedSubchannels){t.throttleKeepalive(e)}}}addWrappedSubchannel(e){this.wrappedSubchannels.add(e)}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e);this.callRefTimerRef()}getConfig(e,t){if(this.connectivityState!==E.ConnectivityState.SHUTDOWN){this.resolvingLoadBalancer.exitIdle()}if(this.configSelector){return{type:"SUCCESS",config:this.configSelector.invoke(e,t,this.randomChannelId)}}else{if(this.currentResolutionError){return{type:"ERROR",error:this.currentResolutionError}}else{return{type:"NONE"}}}}queueCallForConfig(e){this.configSelectionQueue.push(e);this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy();this.updateState(E.ConnectivityState.IDLE);this.currentPicker=new o.QueuePicker(this.resolvingLoadBalancer);if(this.idleTimer){clearTimeout(this.idleTimer);this.idleTimer=null}if(this.callRefTimer){clearInterval(this.callRefTimer);this.callRefTimer=null}}startIdleTimeout(e){var t,r;this.idleTimer=setTimeout((()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}const e=new Date;const t=e.valueOf()-this.lastActivityTimestamp.valueOf();if(t>=this.idleTimeoutMs){this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity");this.enterIdle()}else{this.startIdleTimeout(this.idleTimeoutMs-t)}}),e);(r=(t=this.idleTimer).unref)===null||r===void 0?void 0:r.call(t)}maybeStartIdleTimer(){if(this.connectivityState!==E.ConnectivityState.SHUTDOWN&&!this.idleTimer){this.startIdleTimeout(this.idleTimeoutMs)}}onCallStart(){if(this.channelzEnabled){this.channelzInfoTracker.callTracker.addCallStarted()}this.callCount+=1}onCallEnd(e){if(this.channelzEnabled){if(e.code===u.Status.OK){this.channelzInfoTracker.callTracker.addCallSucceeded()}else{this.channelzInfoTracker.callTracker.addCallFailed()}}this.callCount-=1;this.lastActivityTimestamp=new Date;this.maybeStartIdleTimer()}createLoadBalancingCall(e,t,r,n,i){const s=(0,T.getNextCallNumber)();this.trace("createLoadBalancingCall ["+s+'] method="'+t+'"');return new C.LoadBalancingCall(this,e,t,r,n,i,s)}createRetryingCall(e,t,r,n,i){const s=(0,T.getNextCallNumber)();this.trace("createRetryingCall ["+s+'] method="'+t+'"');return new R.RetryingCall(this,e,t,r,n,i,s,this.retryBufferTracker,L.get(this.getTarget()))}createResolvingCall(e,t,r,n,i){const s=(0,T.getNextCallNumber)();this.trace("createResolvingCall ["+s+'] method="'+e+'", deadline='+(0,w.deadlineToString)(t));const o={deadline:t,flags:i!==null&&i!==void 0?i:u.Propagate.DEFAULTS,host:r!==null&&r!==void 0?r:this.defaultAuthority,parentCall:n};const l=new I.ResolvingCall(this,e,o,this.filterStackFactory.clone(),s);this.onCallStart();l.addStatusWatcher((e=>{this.onCallEnd(e)}));return l}close(){var e;this.resolvingLoadBalancer.destroy();this.updateState(E.ConnectivityState.SHUTDOWN);this.currentPicker=new ShutdownPicker;for(const e of this.configSelectionQueue){e.cancelWithStatus(u.Status.UNAVAILABLE,"Channel closed before call started")}this.configSelectionQueue=[];for(const e of this.pickQueue){e.cancelWithStatus(u.Status.UNAVAILABLE,"Channel closed before call started")}this.pickQueue=[];if(this.callRefTimer){clearInterval(this.callRefTimer)}if(this.idleTimer){clearTimeout(this.idleTimer)}if(this.channelzEnabled){(0,b.unregisterChannelzRef)(this.channelzRef)}this.subchannelPool.unrefUnusedSubchannels();(e=this.configSelector)===null||e===void 0?void 0:e.unref();this.configSelector=null}getTarget(){return(0,v.uriToString)(this.target)}getConnectivityState(e){const t=this.connectivityState;if(e){this.resolvingLoadBalancer.exitIdle();this.lastActivityTimestamp=new Date;this.maybeStartIdleTimer()}return t}watchConnectivityState(e,t,r){if(this.connectivityState===E.ConnectivityState.SHUTDOWN){throw new Error("Channel has been shut down")}let n=null;if(t!==Infinity){const e=t instanceof Date?t:new Date(t);const s=new Date;if(t===-Infinity||e<=s){process.nextTick(r,new Error("Deadline passed without connectivity state change"));return}n=setTimeout((()=>{this.removeConnectivityStateWatcher(i);r(new Error("Deadline passed without connectivity state change"))}),e.getTime()-s.getTime())}const i={currentState:e,callback:r,timer:n};this.connectivityStateWatchers.push(i)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,n,i){if(typeof e!=="string"){throw new TypeError("Channel#createCall: method must be a string")}if(!(typeof t==="number"||t instanceof Date)){throw new TypeError("Channel#createCall: deadline must be a number or Date")}if(this.connectivityState===E.ConnectivityState.SHUTDOWN){throw new Error("Channel has been shut down")}return this.createResolvingCall(e,t,r,n,i)}getOptions(){return this.options}}t.InternalChannel=InternalChannel},9069:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChildLoadBalancerHandler=void 0;const n=r(7e3);const i=r(778);const s="child_load_balancer_helper";class ChildLoadBalancerHandler{constructor(e){this.channelControlHelper=e;this.currentChild=null;this.pendingChild=null;this.latestConfig=null;this.ChildPolicyHelper=class{constructor(e){this.parent=e;this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t,r){var n;if(this.calledByPendingChild()){if(e===i.ConnectivityState.CONNECTING){return}(n=this.parent.currentChild)===null||n===void 0?void 0:n.destroy();this.parent.currentChild=this.parent.pendingChild;this.parent.pendingChild=null}else if(!this.calledByCurrentChild()){return}this.parent.channelControlHelper.updateState(e,t,r)}requestReresolution(){var e;const t=(e=this.parent.pendingChild)!==null&&e!==void 0?e:this.parent.currentChild;if(this.child===t){this.parent.channelControlHelper.requestReresolution()}}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,t){return e.getLoadBalancerName()!==t.getLoadBalancerName()}updateAddressList(e,t,r){let i;if(this.currentChild===null||this.latestConfig===null||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,t)){const e=new this.ChildPolicyHelper(this);const r=(0,n.createLoadBalancer)(t,e);e.setChild(r);if(this.currentChild===null){this.currentChild=r;i=this.currentChild}else{if(this.pendingChild){this.pendingChild.destroy()}this.pendingChild=r;i=this.pendingChild}}else{if(this.pendingChild===null){i=this.currentChild}else{i=this.pendingChild}}this.latestConfig=t;i.updateAddressList(e,t,r)}exitIdle(){if(this.currentChild){this.currentChild.exitIdle();if(this.pendingChild){this.pendingChild.exitIdle()}}}resetBackoff(){if(this.currentChild){this.currentChild.resetBackoff();if(this.pendingChild){this.pendingChild.resetBackoff()}}}destroy(){if(this.currentChild){this.currentChild.destroy();this.currentChild=null}if(this.pendingChild){this.pendingChild.destroy();this.pendingChild=null}}getTypeName(){return s}}t.ChildLoadBalancerHandler=ChildLoadBalancerHandler},5343:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0;t.setup=setup;const i=r(778);const s=r(8288);const o=r(3929);const l=r(79);const u=r(7e3);const p=r(9069);const g=r(1663);const m=r(7021);const y=r(98);const _=r(8536);const v="outlier_detection";function trace(e){_.trace(s.LogVerbosity.DEBUG,v,e)}const E="outlier_detection";const b=((n=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)!==null&&n!==void 0?n:"true")==="true";const C={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100};const w={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function validateFieldType(e,t,r,n){if(t in e&&e[t]!==undefined&&typeof e[t]!==r){const i=n?`${n}.${t}`:t;throw new Error(`outlier detection config ${i} parse error: expected ${r}, got ${typeof e[t]}`)}}function validatePositiveDuration(e,t,r){const n=r?`${r}.${t}`:t;if(t in e&&e[t]!==undefined){if(!(0,o.isDuration)(e[t])){throw new Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof e[t]}`)}if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=999999999)){throw new Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}}function validatePercentage(e,t,r){const n=r?`${r}.${t}`:t;validateFieldType(e,t,"number",r);if(t in e&&e[t]!==undefined&&!(e[t]>=0&&e[t]<=100)){throw new Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}}class OutlierDetectionLoadBalancingConfig{constructor(e,t,r,n,i,s,o){this.childPolicy=o;if(o.getLoadBalancerName()==="pick_first"){throw new Error("outlier_detection LB policy cannot have a pick_first child policy")}this.intervalMs=e!==null&&e!==void 0?e:1e4;this.baseEjectionTimeMs=t!==null&&t!==void 0?t:3e4;this.maxEjectionTimeMs=r!==null&&r!==void 0?r:3e5;this.maxEjectionPercent=n!==null&&n!==void 0?n:10;this.successRateEjection=i?Object.assign(Object.assign({},C),i):null;this.failurePercentageEjection=s?Object.assign(Object.assign({},w),s):null}getLoadBalancerName(){return E}toJsonObject(){var e,t;return{outlier_detection:{interval:(0,o.msToDuration)(this.intervalMs),base_ejection_time:(0,o.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,o.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:(e=this.successRateEjection)!==null&&e!==void 0?e:undefined,failure_percentage_ejection:(t=this.failurePercentageEjection)!==null&&t!==void 0?t:undefined,child_policy:[this.childPolicy.toJsonObject()]}}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}static createFromJson(e){var t;validatePositiveDuration(e,"interval");validatePositiveDuration(e,"base_ejection_time");validatePositiveDuration(e,"max_ejection_time");validatePercentage(e,"max_ejection_percent");if("success_rate_ejection"in e&&e.success_rate_ejection!==undefined){if(typeof e.success_rate_ejection!=="object"){throw new Error("outlier detection config success_rate_ejection must be an object")}validateFieldType(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection");validatePercentage(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection");validateFieldType(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection");validateFieldType(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e&&e.failure_percentage_ejection!==undefined){if(typeof e.failure_percentage_ejection!=="object"){throw new Error("outlier detection config failure_percentage_ejection must be an object")}validatePercentage(e.failure_percentage_ejection,"threshold","failure_percentage_ejection");validatePercentage(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection");validateFieldType(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection");validateFieldType(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}if(!("child_policy"in e)||!Array.isArray(e.child_policy)){throw new Error("outlier detection config child_policy must be an array")}const r=(0,u.selectLbConfigFromList)(e.child_policy);if(!r){throw new Error("outlier detection config child_policy: no valid recognized policy found")}return new OutlierDetectionLoadBalancingConfig(e.interval?(0,o.durationToMs)(e.interval):null,e.base_ejection_time?(0,o.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,o.durationToMs)(e.max_ejection_time):null,(t=e.max_ejection_percent)!==null&&t!==void 0?t:null,e.success_rate_ejection,e.failure_percentage_ejection,r)}}t.OutlierDetectionLoadBalancingConfig=OutlierDetectionLoadBalancingConfig;class OutlierDetectionSubchannelWrapper extends y.BaseSubchannelWrapper{constructor(e,t){super(e);this.mapEntry=t;this.refCount=0}ref(){this.child.ref();this.refCount+=1}unref(){this.child.unref();this.refCount-=1;if(this.refCount<=0){if(this.mapEntry){const e=this.mapEntry.subchannelWrappers.indexOf(this);if(e>=0){this.mapEntry.subchannelWrappers.splice(e,1)}}}}eject(){this.setHealthy(false)}uneject(){this.setHealthy(true)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}function createEmptyBucket(){return{success:0,failure:0}}class CallCounter{constructor(){this.activeBucket=createEmptyBucket();this.inactiveBucket=createEmptyBucket()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket;this.activeBucket=createEmptyBucket()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class OutlierDetectionPicker{constructor(e,t){this.wrappedPicker=e;this.countCalls=t}pick(e){const t=this.wrappedPicker.pick(e);if(t.pickResultType===g.PickResultType.COMPLETE){const e=t.subchannel;const r=e.getMapEntry();if(r){let n=t.onCallEnded;if(this.countCalls){n=e=>{var n;if(e===s.Status.OK){r.counter.addSuccess()}else{r.counter.addFailure()}(n=t.onCallEnded)===null||n===void 0?void 0:n.call(t,e)}}return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),onCallEnded:n})}else{return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()})}}else{return t}}}class OutlierDetectionLoadBalancer{constructor(e){this.entryMap=new m.EndpointMap;this.latestConfig=null;this.timerStartTime=null;this.childBalancer=new p.ChildLoadBalancerHandler((0,l.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{const n=e.createSubchannel(t,r);const i=this.entryMap.getForSubchannelAddress(t);const s=new OutlierDetectionSubchannelWrapper(n,i);if((i===null||i===void 0?void 0:i.currentEjectionTimestamp)!==null){s.eject()}i===null||i===void 0?void 0:i.subchannelWrappers.push(s);return s},updateState:(t,r,n)=>{if(t===i.ConnectivityState.READY){e.updateState(t,new OutlierDetectionPicker(r,this.isCountingEnabled()),n)}else{e.updateState(t,r,n)}}}));this.ejectionTimer=setInterval((()=>{}),0);clearInterval(this.ejectionTimer)}isCountingEnabled(){return this.latestConfig!==null&&(this.latestConfig.getSuccessRateEjectionConfig()!==null||this.latestConfig.getFailurePercentageEjectionConfig()!==null)}getCurrentEjectionPercent(){let e=0;for(const t of this.entryMap.values()){if(t.currentEjectionTimestamp!==null){e+=1}}return e*100/this.entryMap.size}runSuccessRateCheck(e){if(!this.latestConfig){return}const t=this.latestConfig.getSuccessRateEjectionConfig();if(!t){return}trace("Running success rate check");const r=t.request_volume;let n=0;const i=[];for(const[e,t]of this.entryMap.entries()){const s=t.counter.getLastSuccesses();const o=t.counter.getLastFailures();trace("Stats for "+(0,m.endpointToString)(e)+": successes="+s+" failures="+o+" targetRequestVolume="+r);if(s+o>=r){n+=1;i.push(s/(s+o))}}trace("Found "+n+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+i+"]");if(n<t.minimum_hosts){return}const s=i.reduce(((e,t)=>e+t))/i.length;let o=0;for(const e of i){const t=e-s;o+=t*t}const l=o/i.length;const u=Math.sqrt(l);const p=s-u*(t.stdev_factor/1e3);trace("stdev="+u+" ejectionThreshold="+p);for(const[n,i]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent()){break}const s=i.counter.getLastSuccesses();const o=i.counter.getLastFailures();if(s+o<r){continue}const l=s/(s+o);trace("Checking candidate "+n+" successRate="+l);if(l<p){const r=Math.random()*100;trace("Candidate "+n+" randomNumber="+r+" enforcement_percentage="+t.enforcement_percentage);if(r<t.enforcement_percentage){trace("Ejecting candidate "+n);this.eject(i,e)}}}}runFailurePercentageCheck(e){if(!this.latestConfig){return}const t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t){return}trace("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(const e of this.entryMap.values()){const n=e.counter.getLastSuccesses();const i=e.counter.getLastFailures();if(n+i>=t.request_volume){r+=1}}if(r<t.minimum_hosts){return}for(const[r,n]of this.entryMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent()){break}const i=n.counter.getLastSuccesses();const s=n.counter.getLastFailures();trace("Candidate successes="+i+" failures="+s);if(i+s<t.request_volume){continue}const o=s*100/(s+i);if(o>t.threshold){const i=Math.random()*100;trace("Candidate "+r+" randomNumber="+i+" enforcement_percentage="+t.enforcement_percentage);if(i<t.enforcement_percentage){trace("Ejecting candidate "+r);this.eject(n,e)}}}}eject(e,t){e.currentEjectionTimestamp=new Date;e.ejectionTimeMultiplier+=1;for(const t of e.subchannelWrappers){t.eject()}}uneject(e){e.currentEjectionTimestamp=null;for(const t of e.subchannelWrappers){t.uneject()}}switchAllBuckets(){for(const e of this.entryMap.values()){e.counter.switchBuckets()}}startTimer(e){var t,r;this.ejectionTimer=setTimeout((()=>this.runChecks()),e);(r=(t=this.ejectionTimer).unref)===null||r===void 0?void 0:r.call(t)}runChecks(){const e=new Date;trace("Ejection timer running");this.switchAllBuckets();if(!this.latestConfig){return}this.timerStartTime=e;this.startTimer(this.latestConfig.getIntervalMs());this.runSuccessRateCheck(e);this.runFailurePercentageCheck(e);for(const[e,t]of this.entryMap.entries()){if(t.currentEjectionTimestamp===null){if(t.ejectionTimeMultiplier>0){t.ejectionTimeMultiplier-=1}}else{const r=this.latestConfig.getBaseEjectionTimeMs();const n=this.latestConfig.getMaxEjectionTimeMs();const i=new Date(t.currentEjectionTimestamp.getTime());i.setMilliseconds(i.getMilliseconds()+Math.min(r*t.ejectionTimeMultiplier,Math.max(r,n)));if(i<new Date){trace("Unejecting "+e);this.uneject(t)}}}}updateAddressList(e,t,r){if(!(t instanceof OutlierDetectionLoadBalancingConfig)){return}trace("Received update with config: "+JSON.stringify(t.toJsonObject(),undefined,2));for(const t of e){if(!this.entryMap.has(t)){trace("Adding map entry for "+(0,m.endpointToString)(t));this.entryMap.set(t,{counter:new CallCounter,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]})}}this.entryMap.deleteMissing(e);const n=t.getChildPolicy();this.childBalancer.updateAddressList(e,n,r);if(t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig()){if(this.timerStartTime){trace("Previous timer existed. Replacing timer");clearTimeout(this.ejectionTimer);const e=t.getIntervalMs()-((new Date).getTime()-this.timerStartTime.getTime());this.startTimer(e)}else{trace("Starting new timer");this.timerStartTime=new Date;this.startTimer(t.getIntervalMs());this.switchAllBuckets()}}else{trace("Counting disabled. Cancelling timer.");this.timerStartTime=null;clearTimeout(this.ejectionTimer);for(const e of this.entryMap.values()){this.uneject(e);e.ejectionTimeMultiplier=0}}this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer);this.childBalancer.destroy()}getTypeName(){return E}}t.OutlierDetectionLoadBalancer=OutlierDetectionLoadBalancer;function setup(){if(b){(0,l.registerLoadBalancerType)(E,OutlierDetectionLoadBalancer,OutlierDetectionLoadBalancingConfig)}}},8639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LeafLoadBalancer=t.PickFirstLoadBalancer=t.PickFirstLoadBalancingConfig=void 0;t.shuffled=shuffled;t.setup=setup;const n=r(7e3);const i=r(778);const s=r(1663);const o=r(7021);const l=r(8536);const u=r(8288);const p=r(7021);const g=r(9278);const m="pick_first";function trace(e){l.trace(u.LogVerbosity.DEBUG,m,e)}const y="pick_first";const _=250;class PickFirstLoadBalancingConfig{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return y}toJsonObject(){return{[y]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&!(typeof e.shuffleAddressList==="boolean")){throw new Error("pick_first config field shuffleAddressList must be a boolean if provided")}return new PickFirstLoadBalancingConfig(e.shuffleAddressList===true)}}t.PickFirstLoadBalancingConfig=PickFirstLoadBalancingConfig;class PickFirstPicker{constructor(e){this.subchannel=e}pick(e){return{pickResultType:s.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}function shuffled(e){const t=e.slice();for(let e=t.length-1;e>1;e--){const r=Math.floor(Math.random()*(e+1));const n=t[e];t[e]=t[r];t[r]=n}return t}function interleaveAddressFamilies(e){if(e.length===0){return[]}const t=[];const r=[];const n=[];const i=(0,p.isTcpSubchannelAddress)(e[0])&&(0,g.isIPv6)(e[0].host);for(const t of e){if((0,p.isTcpSubchannelAddress)(t)&&(0,g.isIPv6)(t.host)){r.push(t)}else{n.push(t)}}const s=i?r:n;const o=i?n:r;for(let e=0;e<Math.max(s.length,o.length);e++){if(e<s.length){t.push(s[e])}if(e<o.length){t.push(o[e])}}return t}const v="grpc-node.internal.pick-first.report_health_status";class PickFirstLoadBalancer{constructor(e){this.channelControlHelper=e;this.children=[];this.currentState=i.ConnectivityState.IDLE;this.currentSubchannelIndex=0;this.currentPick=null;this.subchannelStateListener=(e,t,r,n,i)=>{this.onSubchannelStateUpdate(e,t,r,i)};this.pickedSubchannelHealthListener=()=>this.calculateAndReportNewState();this.stickyTransientFailureMode=false;this.reportHealthStatus=false;this.lastError=null;this.latestAddressList=null;this.latestOptions={};this.connectionDelayTimeout=setTimeout((()=>{}),0);clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every((e=>e.hasReportedTransientFailure))}resetChildrenReportedTF(){this.children.every((e=>e.hasReportedTransientFailure=false))}calculateAndReportNewState(){var e;if(this.currentPick){if(this.reportHealthStatus&&!this.currentPick.isHealthy()){const e=`Picked subchannel ${this.currentPick.getAddress()} is unhealthy`;this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:e}),e)}else{this.updateState(i.ConnectivityState.READY,new PickFirstPicker(this.currentPick),null)}}else if(((e=this.latestAddressList)===null||e===void 0?void 0:e.length)===0){const e=`No connection established. Last error: ${this.lastError}`;this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:e}),e)}else if(this.children.length===0){this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this),null)}else{if(this.stickyTransientFailureMode){const e=`No connection established. Last error: ${this.lastError}`;this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:e}),e)}else{this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this),null)}}}requestReresolution(){this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(!this.allChildrenHaveReportedTF()){return}this.requestReresolution();this.resetChildrenReportedTF();if(this.stickyTransientFailureMode){this.calculateAndReportNewState();return}this.stickyTransientFailureMode=true;for(const{subchannel:e}of this.children){e.startConnecting()}this.calculateAndReportNewState()}removeCurrentPick(){if(this.currentPick!==null){this.currentPick.removeConnectivityStateListener(this.subchannelStateListener);this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef());this.currentPick.removeHealthStateWatcher(this.pickedSubchannelHealthListener);this.currentPick.unref();this.currentPick=null}}onSubchannelStateUpdate(e,t,r,n){var s;if((s=this.currentPick)===null||s===void 0?void 0:s.realSubchannelEquals(e)){if(r!==i.ConnectivityState.READY){this.removeCurrentPick();this.calculateAndReportNewState()}return}for(const[t,s]of this.children.entries()){if(e.realSubchannelEquals(s.subchannel)){if(r===i.ConnectivityState.READY){this.pickSubchannel(s.subchannel)}if(r===i.ConnectivityState.TRANSIENT_FAILURE){s.hasReportedTransientFailure=true;if(n){this.lastError=n}this.maybeEnterStickyTransientFailureMode();if(t===this.currentSubchannelIndex){this.startNextSubchannelConnecting(t+1)}}s.subchannel.startConnecting();return}}}startNextSubchannelConnecting(e){clearTimeout(this.connectionDelayTimeout);for(const[t,r]of this.children.entries()){if(t>=e){const e=r.subchannel.getConnectivityState();if(e===i.ConnectivityState.IDLE||e===i.ConnectivityState.CONNECTING){this.startConnecting(t);return}}}this.maybeEnterStickyTransientFailureMode()}startConnecting(e){var t,r;clearTimeout(this.connectionDelayTimeout);this.currentSubchannelIndex=e;if(this.children[e].subchannel.getConnectivityState()===i.ConnectivityState.IDLE){trace("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress());process.nextTick((()=>{var t;(t=this.children[e])===null||t===void 0?void 0:t.subchannel.startConnecting()}))}this.connectionDelayTimeout=setTimeout((()=>{this.startNextSubchannelConnecting(e+1)}),_);(r=(t=this.connectionDelayTimeout).unref)===null||r===void 0?void 0:r.call(t)}pickSubchannel(e){trace("Pick subchannel with address "+e.getAddress());this.stickyTransientFailureMode=false;e.ref();this.channelControlHelper.addChannelzChild(e.getChannelzRef());this.removeCurrentPick();this.resetSubchannelList();e.addConnectivityStateListener(this.subchannelStateListener);e.addHealthStateWatcher(this.pickedSubchannelHealthListener);this.currentPick=e;clearTimeout(this.connectionDelayTimeout);this.calculateAndReportNewState()}updateState(e,t,r){trace(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]);this.currentState=e;this.channelControlHelper.updateState(e,t,r)}resetSubchannelList(){for(const e of this.children){e.subchannel.removeConnectivityStateListener(this.subchannelStateListener);e.subchannel.unref();this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef())}this.currentSubchannelIndex=0;this.children=[]}connectToAddressList(e,t){trace("connectToAddressList(["+e.map((e=>(0,o.subchannelAddressToString)(e)))+"])");const r=e.map((e=>({subchannel:this.channelControlHelper.createSubchannel(e,t),hasReportedTransientFailure:false})));for(const{subchannel:e}of r){if(e.getConnectivityState()===i.ConnectivityState.READY){this.pickSubchannel(e);return}}for(const{subchannel:e}of r){e.ref();this.channelControlHelper.addChannelzChild(e.getChannelzRef())}this.resetSubchannelList();this.children=r;for(const{subchannel:e}of this.children){e.addConnectivityStateListener(this.subchannelStateListener)}for(const e of this.children){if(e.subchannel.getConnectivityState()===i.ConnectivityState.TRANSIENT_FAILURE){e.hasReportedTransientFailure=true}}this.startNextSubchannelConnecting(0);this.calculateAndReportNewState()}updateAddressList(e,t,r){if(!(t instanceof PickFirstLoadBalancingConfig)){return}this.reportHealthStatus=r[v];if(t.getShuffleAddressList()){e=shuffled(e)}const n=[].concat(...e.map((e=>e.addresses)));trace("updateAddressList(["+n.map((e=>(0,o.subchannelAddressToString)(e)))+"])");if(n.length===0){this.lastError="No addresses resolved"}const i=interleaveAddressFamilies(n);this.latestAddressList=i;this.latestOptions=r;this.connectToAddressList(i,r)}exitIdle(){if(this.currentState===i.ConnectivityState.IDLE&&this.latestAddressList){this.connectToAddressList(this.latestAddressList,this.latestOptions)}}resetBackoff(){}destroy(){this.resetSubchannelList();this.removeCurrentPick()}getTypeName(){return y}}t.PickFirstLoadBalancer=PickFirstLoadBalancer;const E=new PickFirstLoadBalancingConfig(false);class LeafLoadBalancer{constructor(e,t,r){this.endpoint=e;this.options=r;this.latestState=i.ConnectivityState.IDLE;const o=(0,n.createChildChannelControlHelper)(t,{updateState:(e,r,n)=>{this.latestState=e;this.latestPicker=r;t.updateState(e,r,n)}});this.pickFirstBalancer=new PickFirstLoadBalancer(o);this.latestPicker=new s.QueuePicker(this.pickFirstBalancer)}startConnecting(){this.pickFirstBalancer.updateAddressList([this.endpoint],E,Object.assign(Object.assign({},this.options),{[v]:true}))}updateEndpoint(e,t){this.options=t;this.endpoint=e;if(this.latestState!==i.ConnectivityState.IDLE){this.startConnecting()}}getConnectivityState(){return this.latestState}getPicker(){return this.latestPicker}getEndpoint(){return this.endpoint}exitIdle(){this.pickFirstBalancer.exitIdle()}destroy(){this.pickFirstBalancer.destroy()}}t.LeafLoadBalancer=LeafLoadBalancer;function setup(){(0,n.registerLoadBalancerType)(y,PickFirstLoadBalancer,PickFirstLoadBalancingConfig);(0,n.registerDefaultLoadBalancerType)(y)}},1936:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RoundRobinLoadBalancer=void 0;t.setup=setup;const n=r(7e3);const i=r(778);const s=r(1663);const o=r(8536);const l=r(8288);const u=r(7021);const p=r(8639);const g="round_robin";function trace(e){o.trace(l.LogVerbosity.DEBUG,g,e)}const m="round_robin";class RoundRobinLoadBalancingConfig{getLoadBalancerName(){return m}constructor(){}toJsonObject(){return{[m]:{}}}static createFromJson(e){return new RoundRobinLoadBalancingConfig}}class RoundRobinPicker{constructor(e,t=0){this.children=e;this.nextIndex=t}pick(e){const t=this.children[this.nextIndex].picker;this.nextIndex=(this.nextIndex+1)%this.children.length;return t.pick(e)}peekNextEndpoint(){return this.children[this.nextIndex].endpoint}}class RoundRobinLoadBalancer{constructor(e){this.channelControlHelper=e;this.children=[];this.currentState=i.ConnectivityState.IDLE;this.currentReadyPicker=null;this.updatesPaused=false;this.lastError=null;this.childChannelControlHelper=(0,n.createChildChannelControlHelper)(e,{updateState:(e,t,r)=>{if(this.currentState===i.ConnectivityState.READY&&e!==i.ConnectivityState.READY){this.channelControlHelper.requestReresolution()}if(r){this.lastError=r}this.calculateAndUpdateState()}})}countChildrenWithState(e){return this.children.filter((t=>t.getConnectivityState()===e)).length}calculateAndUpdateState(){if(this.updatesPaused){return}if(this.countChildrenWithState(i.ConnectivityState.READY)>0){const e=this.children.filter((e=>e.getConnectivityState()===i.ConnectivityState.READY));let t=0;if(this.currentReadyPicker!==null){const r=this.currentReadyPicker.peekNextEndpoint();t=e.findIndex((e=>(0,u.endpointEqual)(e.getEndpoint(),r)));if(t<0){t=0}}this.updateState(i.ConnectivityState.READY,new RoundRobinPicker(e.map((e=>({endpoint:e.getEndpoint(),picker:e.getPicker()}))),t),null)}else if(this.countChildrenWithState(i.ConnectivityState.CONNECTING)>0){this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this),null)}else if(this.countChildrenWithState(i.ConnectivityState.TRANSIENT_FAILURE)>0){const e=`round_robin: No connection established. Last error: ${this.lastError}`;this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:e}),e)}else{this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this),null)}for(const e of this.children){if(e.getConnectivityState()===i.ConnectivityState.IDLE){e.exitIdle()}}}updateState(e,t,r){trace(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]);if(e===i.ConnectivityState.READY){this.currentReadyPicker=t}else{this.currentReadyPicker=null}this.currentState=e;this.channelControlHelper.updateState(e,t,r)}resetSubchannelList(){for(const e of this.children){e.destroy()}}updateAddressList(e,t,r){this.resetSubchannelList();trace("Connect to endpoint list "+e.map(u.endpointToString));this.updatesPaused=true;this.children=e.map((e=>new p.LeafLoadBalancer(e,this.childChannelControlHelper,r)));for(const e of this.children){e.startConnecting()}this.updatesPaused=false;this.calculateAndUpdateState()}exitIdle(){}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return m}}t.RoundRobinLoadBalancer=RoundRobinLoadBalancer;function setup(){(0,n.registerLoadBalancerType)(m,RoundRobinLoadBalancer,RoundRobinLoadBalancingConfig)}},7e3:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createChildChannelControlHelper=createChildChannelControlHelper;t.registerLoadBalancerType=registerLoadBalancerType;t.registerDefaultLoadBalancerType=registerDefaultLoadBalancerType;t.createLoadBalancer=createLoadBalancer;t.isLoadBalancerNameRegistered=isLoadBalancerNameRegistered;t.parseLoadBalancingConfig=parseLoadBalancingConfig;t.getDefaultConfig=getDefaultConfig;t.selectLbConfigFromList=selectLbConfigFromList;const n=r(8536);const i=r(8288);function createChildChannelControlHelper(e,t){var r,n,i,s,o,l,u,p,g,m;return{createSubchannel:(n=(r=t.createSubchannel)===null||r===void 0?void 0:r.bind(t))!==null&&n!==void 0?n:e.createSubchannel.bind(e),updateState:(s=(i=t.updateState)===null||i===void 0?void 0:i.bind(t))!==null&&s!==void 0?s:e.updateState.bind(e),requestReresolution:(l=(o=t.requestReresolution)===null||o===void 0?void 0:o.bind(t))!==null&&l!==void 0?l:e.requestReresolution.bind(e),addChannelzChild:(p=(u=t.addChannelzChild)===null||u===void 0?void 0:u.bind(t))!==null&&p!==void 0?p:e.addChannelzChild.bind(e),removeChannelzChild:(m=(g=t.removeChannelzChild)===null||g===void 0?void 0:g.bind(t))!==null&&m!==void 0?m:e.removeChannelzChild.bind(e)}}const s={};let o=null;function registerLoadBalancerType(e,t,r){s[e]={LoadBalancer:t,LoadBalancingConfig:r}}function registerDefaultLoadBalancerType(e){o=e}function createLoadBalancer(e,t){const r=e.getLoadBalancerName();if(r in s){return new s[r].LoadBalancer(t)}else{return null}}function isLoadBalancerNameRegistered(e){return e in s}function parseLoadBalancingConfig(e){const t=Object.keys(e);if(t.length!==1){throw new Error("Provided load balancing config has multiple conflicting entries")}const r=t[0];if(r in s){try{return s[r].LoadBalancingConfig.createFromJson(e[r])}catch(e){throw new Error(`${r}: ${e.message}`)}}else{throw new Error(`Unrecognized load balancing config name ${r}`)}}function getDefaultConfig(){if(!o){throw new Error("No default load balancer type registered")}return new s[o].LoadBalancingConfig}function selectLbConfigFromList(e,t=false){for(const t of e){try{return parseLoadBalancingConfig(t)}catch(e){(0,n.log)(i.LogVerbosity.DEBUG,"Config parsing failed with error",e.message);continue}}if(t){if(o){return new s[o].LoadBalancingConfig}else{return null}}else{return null}}},8944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LoadBalancingCall=void 0;const n=r(778);const i=r(8288);const s=r(2173);const o=r(6100);const l=r(1663);const u=r(6027);const p=r(8536);const g=r(9962);const m=r(5675);const y="load_balancing_call";class LoadBalancingCall{constructor(e,t,r,n,i,s,o){var l,p;this.channel=e;this.callConfig=t;this.methodName=r;this.host=n;this.credentials=i;this.deadline=s;this.callNumber=o;this.child=null;this.readPending=false;this.pendingMessage=null;this.pendingHalfClose=false;this.ended=false;this.metadata=null;this.listener=null;this.onCallEnded=null;this.childStartTime=null;const g=this.methodName.split("/");let m="";if(g.length>=2){m=g[1]}const y=(p=(l=(0,u.splitHostPort)(this.host))===null||l===void 0?void 0:l.host)!==null&&p!==void 0?p:"localhost";this.serviceUrl=`https://${y}/${m}`;this.startTime=new Date}getDeadlineInfo(){var e,t;const r=[];if(this.childStartTime){if(this.childStartTime>this.startTime){if((e=this.metadata)===null||e===void 0?void 0:e.getOptions().waitForReady){r.push("wait_for_ready")}r.push(`LB pick: ${(0,s.formatDateDifference)(this.startTime,this.childStartTime)}`)}r.push(...this.child.getDeadlineInfo());return r}else{if((t=this.metadata)===null||t===void 0?void 0:t.getOptions().waitForReady){r.push("wait_for_ready")}r.push("Waiting for LB pick")}return r}trace(e){p.trace(i.LogVerbosity.DEBUG,y,"["+this.callNumber+"] "+e)}outputStatus(e,t){var r,n;if(!this.ended){this.ended=true;this.trace("ended with status: code="+e.code+' details="'+e.details+'" start time='+this.startTime.toISOString());const i=Object.assign(Object.assign({},e),{progress:t});(r=this.listener)===null||r===void 0?void 0:r.onReceiveStatus(i);(n=this.onCallEnded)===null||n===void 0?void 0:n.call(this,i.code)}}doPick(){var e,t;if(this.ended){return}if(!this.metadata){throw new Error("doPick called before start")}this.trace("Pick called");const r=this.metadata.clone();const u=this.channel.doPick(r,this.callConfig.pickInformation);const p=u.subchannel?"("+u.subchannel.getChannelzRef().id+") "+u.subchannel.getAddress():""+u.subchannel;this.trace("Pick result: "+l.PickResultType[u.pickResultType]+" subchannel: "+p+" status: "+((e=u.status)===null||e===void 0?void 0:e.code)+" "+((t=u.status)===null||t===void 0?void 0:t.details));switch(u.pickResultType){case l.PickResultType.COMPLETE:const e=this.credentials.compose(u.subchannel.getCallCredentials());e.generateMetadata({method_name:this.methodName,service_url:this.serviceUrl}).then((e=>{var t;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}r.merge(e);if(r.get("authorization").length>1){this.outputStatus({code:i.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new o.Metadata},"PROCESSED")}if(u.subchannel.getConnectivityState()!==n.ConnectivityState.READY){this.trace("Picked subchannel "+p+" has state "+n.ConnectivityState[u.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick");this.doPick();return}if(this.deadline!==Infinity){r.set("grpc-timeout",(0,s.getDeadlineTimeoutString)(this.deadline))}try{this.child=u.subchannel.getRealSubchannel().createCall(r,this.host,this.methodName,{onReceiveMetadata:e=>{this.trace("Received metadata");this.listener.onReceiveMetadata(e)},onReceiveMessage:e=>{this.trace("Received message");this.listener.onReceiveMessage(e)},onReceiveStatus:e=>{this.trace("Received status");if(e.rstCode===m.constants.NGHTTP2_REFUSED_STREAM){this.outputStatus(e,"REFUSED")}else{this.outputStatus(e,"PROCESSED")}}});this.childStartTime=new Date}catch(e){this.trace("Failed to start call on picked subchannel "+p+" with error "+e.message);this.outputStatus({code:i.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+e.message,metadata:new o.Metadata},"NOT_STARTED");return}(t=u.onCallStarted)===null||t===void 0?void 0:t.call(u);this.onCallEnded=u.onCallEnded;this.trace("Created child call ["+this.child.getCallNumber()+"]");if(this.readPending){this.child.startRead()}if(this.pendingMessage){this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message)}if(this.pendingHalfClose){this.child.halfClose()}}),(e=>{const{code:t,details:r}=(0,g.restrictControlPlaneStatusCode)(typeof e.code==="number"?e.code:i.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${e.message}`);this.outputStatus({code:t,details:r,metadata:new o.Metadata},"PROCESSED")}));break;case l.PickResultType.DROP:const{code:t,details:y}=(0,g.restrictControlPlaneStatusCode)(u.status.code,u.status.details);setImmediate((()=>{this.outputStatus({code:t,details:y,metadata:u.status.metadata},"DROP")}));break;case l.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady){this.channel.queueCallForPick(this)}else{const{code:e,details:t}=(0,g.restrictControlPlaneStatusCode)(u.status.code,u.status.details);setImmediate((()=>{this.outputStatus({code:e,details:t,metadata:u.status.metadata},"PROCESSED")}))}break;case l.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"');(r=this.child)===null||r===void 0?void 0:r.cancelWithStatus(e,t);this.outputStatus({code:e,details:t,metadata:new o.Metadata},"PROCESSED")}getPeer(){var e,t;return(t=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:this.channel.getTarget()}start(e,t){this.trace("start called");this.listener=t;this.metadata=e;this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);if(this.child){this.child.sendMessageWithContext(e,t)}else{this.pendingMessage={context:e,message:t}}}startRead(){this.trace("startRead called");if(this.child){this.child.startRead()}else{this.readPending=true}}halfClose(){this.trace("halfClose called");if(this.child){this.child.halfClose()}else{this.pendingHalfClose=true}}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}}t.LoadBalancingCall=LoadBalancingCall},8536:(e,t,r)=>{"use strict";var n,i,s,o;Object.defineProperty(t,"__esModule",{value:true});t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0;t.trace=trace;t.isTracerEnabled=isTracerEnabled;const l=r(8288);const u=r(932);const p=r(9943).rE;const g={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}};let m=g;let y=l.LogVerbosity.ERROR;const _=(i=(n=process.env.GRPC_NODE_VERBOSITY)!==null&&n!==void 0?n:process.env.GRPC_VERBOSITY)!==null&&i!==void 0?i:"";switch(_.toUpperCase()){case"DEBUG":y=l.LogVerbosity.DEBUG;break;case"INFO":y=l.LogVerbosity.INFO;break;case"ERROR":y=l.LogVerbosity.ERROR;break;case"NONE":y=l.LogVerbosity.NONE;break;default:}const getLogger=()=>m;t.getLogger=getLogger;const setLogger=e=>{m=e};t.setLogger=setLogger;const setLoggerVerbosity=e=>{y=e};t.setLoggerVerbosity=setLoggerVerbosity;const log=(e,...t)=>{let r;if(e>=y){switch(e){case l.LogVerbosity.DEBUG:r=m.debug;break;case l.LogVerbosity.INFO:r=m.info;break;case l.LogVerbosity.ERROR:r=m.error;break}if(!r){r=m.error}if(r){r.bind(m)(...t)}}};t.log=log;const v=(o=(s=process.env.GRPC_NODE_TRACE)!==null&&s!==void 0?s:process.env.GRPC_TRACE)!==null&&o!==void 0?o:"";const E=new Set;const b=new Set;for(const e of v.split(",")){if(e.startsWith("-")){b.add(e.substring(1))}else{E.add(e)}}const C=E.has("all");function trace(e,r,n){if(isTracerEnabled(r)){(0,t.log)(e,(new Date).toISOString()+" | v"+p+" "+u.pid+" | "+r+" | "+n)}}function isTracerEnabled(e){return!b.has(e)&&(C||E.has(e))}},6983:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.makeClientConstructor=makeClientConstructor;t.loadPackageDefinition=loadPackageDefinition;const n=r(4210);const i={unary:n.Client.prototype.makeUnaryRequest,server_stream:n.Client.prototype.makeServerStreamRequest,client_stream:n.Client.prototype.makeClientStreamRequest,bidi:n.Client.prototype.makeBidiStreamRequest};function isPrototypePolluted(e){return["__proto__","prototype","constructor"].includes(e)}function makeClientConstructor(e,t,r){if(!r){r={}}class ServiceClientImpl extends n.Client{}Object.keys(e).forEach((t=>{if(isPrototypePolluted(t)){return}const r=e[t];let n;if(typeof t==="string"&&t.charAt(0)==="$"){throw new Error("Method names cannot start with $")}if(r.requestStream){if(r.responseStream){n="bidi"}else{n="client_stream"}}else{if(r.responseStream){n="server_stream"}else{n="unary"}}const s=r.requestSerialize;const o=r.responseDeserialize;const l=partial(i[n],r.path,s,o);ServiceClientImpl.prototype[t]=l;Object.assign(ServiceClientImpl.prototype[t],r);if(r.originalName&&!isPrototypePolluted(r.originalName)){ServiceClientImpl.prototype[r.originalName]=ServiceClientImpl.prototype[t]}}));ServiceClientImpl.service=e;ServiceClientImpl.serviceName=t;return ServiceClientImpl}function partial(e,t,r,n){return function(...i){return e.call(this,t,r,n,...i)}}function isProtobufTypeDefinition(e){return"format"in e}function loadPackageDefinition(e){const t={};for(const r in e){if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r];const i=r.split(".");if(i.some((e=>isPrototypePolluted(e)))){continue}const s=i[i.length-1];let o=t;for(const e of i.slice(0,-1)){if(!o[e]){o[e]={}}o=o[e]}if(isProtobufTypeDefinition(n)){o[s]=n}else{o[s]=makeClientConstructor(n,s,{})}}}return t}},6100:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Metadata=void 0;const n=r(8536);const i=r(8288);const s=r(8219);const o=/^[0-9a-z_.-]+$/;const l=/^[ -~]*$/;function isLegalKey(e){return o.test(e)}function isLegalNonBinaryValue(e){return l.test(e)}function isBinaryKey(e){return e.endsWith("-bin")}function isCustomMetadata(e){return!e.startsWith("grpc-")}function normalizeKey(e){return e.toLowerCase()}function validate(e,t){if(!isLegalKey(e)){throw new Error('Metadata key "'+e+'" contains illegal characters')}if(t!==null&&t!==undefined){if(isBinaryKey(e)){if(!Buffer.isBuffer(t)){throw new Error("keys that end with '-bin' must have Buffer values")}}else{if(Buffer.isBuffer(t)){throw new Error("keys that don't end with '-bin' must have String values")}if(!isLegalNonBinaryValue(t)){throw new Error('Metadata string value "'+t+'" contains illegal characters')}}}}class Metadata{constructor(e={}){this.internalRepr=new Map;this.options=e}set(e,t){e=normalizeKey(e);validate(e,t);this.internalRepr.set(e,[t])}add(e,t){e=normalizeKey(e);validate(e,t);const r=this.internalRepr.get(e);if(r===undefined){this.internalRepr.set(e,[t])}else{r.push(t)}}remove(e){e=normalizeKey(e);this.internalRepr.delete(e)}get(e){e=normalizeKey(e);return this.internalRepr.get(e)||[]}getMap(){const e={};for(const[t,r]of this.internalRepr){if(r.length>0){const n=r[0];e[t]=Buffer.isBuffer(n)?Buffer.from(n):n}}return e}clone(){const e=new Metadata(this.options);const t=e.internalRepr;for(const[e,r]of this.internalRepr){const n=r.map((e=>{if(Buffer.isBuffer(e)){return Buffer.from(e)}else{return e}}));t.set(e,n)}return e}merge(e){for(const[t,r]of e.internalRepr){const e=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,e)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){const e={};for(const[t,r]of this.internalRepr){e[t]=r.map(bufToString)}return e}toJSON(){const e={};for(const[t,r]of this.internalRepr){e[t]=r}return e}static fromHttp2Headers(e){const t=new Metadata;for(const r of Object.keys(e)){if(r.charAt(0)===":"){continue}const o=e[r];try{if(isBinaryKey(r)){if(Array.isArray(o)){o.forEach((e=>{t.add(r,Buffer.from(e,"base64"))}))}else if(o!==undefined){if(isCustomMetadata(r)){o.split(",").forEach((e=>{t.add(r,Buffer.from(e.trim(),"base64"))}))}else{t.add(r,Buffer.from(o,"base64"))}}}else{if(Array.isArray(o)){o.forEach((e=>{t.add(r,e)}))}else if(o!==undefined){t.add(r,o)}}}catch(e){const t=`Failed to add metadata entry ${r}: ${o}. ${(0,s.getErrorMessage)(e)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,n.log)(i.LogVerbosity.ERROR,t)}}return t}}t.Metadata=Metadata;const bufToString=e=>Buffer.isBuffer(e)?e.toString("base64"):e},1663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;const n=r(6100);const i=r(8288);var s;(function(e){e[e["COMPLETE"]=0]="COMPLETE";e[e["QUEUE"]=1]="QUEUE";e[e["TRANSIENT_FAILURE"]=2]="TRANSIENT_FAILURE";e[e["DROP"]=3]="DROP"})(s||(t.PickResultType=s={}));class UnavailablePicker{constructor(e){this.status=Object.assign({code:i.Status.UNAVAILABLE,details:"No connection established",metadata:new n.Metadata},e)}pick(e){return{pickResultType:s.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}}t.UnavailablePicker=UnavailablePicker;class QueuePicker{constructor(e,t){this.loadBalancer=e;this.childPicker=t;this.calledExitIdle=false}pick(e){if(!this.calledExitIdle){process.nextTick((()=>{this.loadBalancer.exitIdle()}));this.calledExitIdle=true}if(this.childPicker){return this.childPicker.pick(e)}else{return{pickResultType:s.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}}t.QueuePicker=QueuePicker},1149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DEFAULT_PORT=void 0;t.setup=setup;const n=r(6255);const i=r(2250);const s=r(5);const o=r(8288);const l=r(6100);const u=r(8536);const p=r(8288);const g=r(6027);const m=r(9278);const y=r(4643);const _=r(6964);const v="dns_resolver";function trace(e){u.trace(p.LogVerbosity.DEBUG,v,e)}t.DEFAULT_PORT=443;const E=3e4;class DnsResolver{constructor(e,r,n){var s,u,p;this.target=e;this.listener=r;this.pendingLookupPromise=null;this.pendingTxtPromise=null;this.latestLookupResult=null;this.latestServiceConfig=null;this.latestServiceConfigError=null;this.continueResolving=false;this.isNextResolutionTimerRunning=false;this.isServiceConfigEnabled=true;this.returnedIpResult=false;this.alternativeResolver=new i.promises.Resolver;trace("Resolver constructed for target "+(0,g.uriToString)(e));if(e.authority){this.alternativeResolver.setServers([e.authority])}const _=(0,g.splitHostPort)(e.path);if(_===null){this.ipResult=null;this.dnsHostname=null;this.port=null}else{if((0,m.isIPv4)(_.host)||(0,m.isIPv6)(_.host)){this.ipResult=[{addresses:[{host:_.host,port:(s=_.port)!==null&&s!==void 0?s:t.DEFAULT_PORT}]}];this.dnsHostname=null;this.port=null}else{this.ipResult=null;this.dnsHostname=_.host;this.port=(u=_.port)!==null&&u!==void 0?u:t.DEFAULT_PORT}}this.percentage=Math.random()*100;if(n["grpc.service_config_disable_resolution"]===1){this.isServiceConfigEnabled=false}this.defaultResolutionError={code:o.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,g.uriToString)(this.target)}`,metadata:new l.Metadata};const v={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoff=new y.BackoffTimeout((()=>{if(this.continueResolving){this.startResolutionWithBackoff()}}),v);this.backoff.unref();this.minTimeBetweenResolutionsMs=(p=n["grpc.dns_min_time_between_resolutions_ms"])!==null&&p!==void 0?p:E;this.nextResolutionTimer=setTimeout((()=>{}),0);clearTimeout(this.nextResolutionTimer)}startResolution(){if(this.ipResult!==null){if(!this.returnedIpResult){trace("Returning IP address for target "+(0,g.uriToString)(this.target));setImmediate((()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}));this.returnedIpResult=true}this.backoff.stop();this.backoff.reset();this.stopNextResolutionTimer();return}if(this.dnsHostname===null){trace("Failed to parse DNS address "+(0,g.uriToString)(this.target));setImmediate((()=>{this.listener.onError({code:o.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,g.uriToString)(this.target)}`,metadata:new l.Metadata})}));this.stopNextResolutionTimer()}else{if(this.pendingLookupPromise!==null){return}trace("Looking up DNS hostname "+this.dnsHostname);this.latestLookupResult=null;const e=this.dnsHostname;this.pendingLookupPromise=this.lookup(e);this.pendingLookupPromise.then((e=>{if(this.pendingLookupPromise===null){return}this.pendingLookupPromise=null;this.backoff.reset();this.backoff.stop();this.latestLookupResult=e.map((e=>({addresses:[e]})));const t="["+e.map((e=>e.host+":"+e.port)).join(",")+"]";trace("Resolved addresses for target "+(0,g.uriToString)(this.target)+": "+t);if(this.latestLookupResult.length===0){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}),(e=>{if(this.pendingLookupPromise===null){return}trace("Resolution error for target "+(0,g.uriToString)(this.target)+": "+e.message);this.pendingLookupPromise=null;this.stopNextResolutionTimer();this.listener.onError(this.defaultResolutionError)}));if(this.isServiceConfigEnabled&&this.pendingTxtPromise===null){this.pendingTxtPromise=this.resolveTxt(e);this.pendingTxtPromise.then((e=>{if(this.pendingTxtPromise===null){return}this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,s.extractAndSelectServiceConfig)(e,this.percentage)}catch(e){this.latestServiceConfigError={code:o.Status.UNAVAILABLE,details:`Parsing service config failed with error ${e.message}`,metadata:new l.Metadata}}if(this.latestLookupResult!==null){this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}}),(e=>{}))}}}async lookup(e){if(_.GRPC_NODE_USE_ALTERNATIVE_RESOLVER){trace("Using alternative DNS resolver.");const t=await Promise.allSettled([this.alternativeResolver.resolve4(e),this.alternativeResolver.resolve6(e)]);if(t.every((e=>e.status==="rejected"))){throw new Error(t[0].reason)}return t.reduce(((e,t)=>t.status==="fulfilled"?[...e,...t.value]:e),[]).map((e=>({host:e,port:+this.port})))}const t=await i.promises.lookup(e,{all:true});return t.map((e=>({host:e.address,port:+this.port})))}async resolveTxt(e){if(_.GRPC_NODE_USE_ALTERNATIVE_RESOLVER){trace("Using alternative DNS resolver.");return this.alternativeResolver.resolveTxt(e)}return i.promises.resolveTxt(e)}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer);this.nextResolutionTimer=setTimeout((()=>{this.stopNextResolutionTimer();if(this.continueResolving){this.startResolutionWithBackoff()}}),this.minTimeBetweenResolutionsMs);(t=(e=this.nextResolutionTimer).unref)===null||t===void 0?void 0:t.call(e);this.isNextResolutionTimerRunning=true}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer);this.isNextResolutionTimerRunning=false}startResolutionWithBackoff(){if(this.pendingLookupPromise===null){this.continueResolving=false;this.backoff.runOnce();this.startNextResolutionTimer();this.startResolution()}}updateResolution(){if(this.pendingLookupPromise===null){if(this.isNextResolutionTimerRunning||this.backoff.isRunning()){if(this.isNextResolutionTimerRunning){trace('resolution update delayed by "min time between resolutions" rate limit')}else{trace("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString())}this.continueResolving=true}else{this.startResolutionWithBackoff()}}}destroy(){this.continueResolving=false;this.backoff.reset();this.backoff.stop();this.stopNextResolutionTimer();this.pendingLookupPromise=null;this.pendingTxtPromise=null;this.latestLookupResult=null;this.latestServiceConfig=null;this.latestServiceConfigError=null;this.returnedIpResult=false}static getDefaultAuthority(e){return e.path}}function setup(){(0,n.registerResolver)("dns",DnsResolver);(0,n.registerDefaultScheme)("dns")}},2617:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setup=setup;const n=r(9278);const i=r(8288);const s=r(6100);const o=r(6255);const l=r(6027);const u=r(8536);const p="ip_resolver";function trace(e){u.trace(i.LogVerbosity.DEBUG,p,e)}const g="ipv4";const m="ipv6";const y=443;class IpResolver{constructor(e,t,r){var o;this.listener=t;this.endpoints=[];this.error=null;this.hasReturnedResult=false;trace("Resolver constructed for target "+(0,l.uriToString)(e));const u=[];if(!(e.scheme===g||e.scheme===m)){this.error={code:i.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new s.Metadata};return}const p=e.path.split(",");for(const t of p){const r=(0,l.splitHostPort)(t);if(r===null){this.error={code:i.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata};return}if(e.scheme===g&&!(0,n.isIPv4)(r.host)||e.scheme===m&&!(0,n.isIPv6)(r.host)){this.error={code:i.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata};return}u.push({host:r.host,port:(o=r.port)!==null&&o!==void 0?o:y})}this.endpoints=u.map((e=>({addresses:[e]})));trace("Parsed "+e.scheme+" address list "+u)}updateResolution(){if(!this.hasReturnedResult){this.hasReturnedResult=true;process.nextTick((()=>{if(this.error){this.listener.onError(this.error)}else{this.listener.onSuccessfulResolution(this.endpoints,null,null,null,{})}}))}}destroy(){this.hasReturnedResult=false}static getDefaultAuthority(e){return e.path.split(",")[0]}}function setup(){(0,o.registerResolver)(g,IpResolver);(0,o.registerResolver)(m,IpResolver)}},9252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setup=setup;const n=r(6255);class UdsResolver{constructor(e,t,r){this.listener=t;this.hasReturnedResult=false;this.endpoints=[];let n;if(e.authority===""){n="/"+e.path}else{n=e.path}this.endpoints=[{addresses:[{path:n}]}]}updateResolution(){if(!this.hasReturnedResult){this.hasReturnedResult=true;process.nextTick(this.listener.onSuccessfulResolution,this.endpoints,null,null,null,{})}}destroy(){this.hasReturnedResult=false}static getDefaultAuthority(e){return"localhost"}}function setup(){(0,n.registerResolver)("unix",UdsResolver)}},6255:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.registerResolver=registerResolver;t.registerDefaultScheme=registerDefaultScheme;t.createResolver=createResolver;t.getDefaultAuthority=getDefaultAuthority;t.mapUriDefaultScheme=mapUriDefaultScheme;const n=r(6027);const i={};let s=null;function registerResolver(e,t){i[e]=t}function registerDefaultScheme(e){s=e}function createResolver(e,t,r){if(e.scheme!==undefined&&e.scheme in i){return new i[e.scheme](e,t,r)}else{throw new Error(`No resolver could be created for target ${(0,n.uriToString)(e)}`)}}function getDefaultAuthority(e){if(e.scheme!==undefined&&e.scheme in i){return i[e.scheme].getDefaultAuthority(e)}else{throw new Error(`Invalid target ${(0,n.uriToString)(e)}`)}}function mapUriDefaultScheme(e){if(e.scheme===undefined||!(e.scheme in i)){if(s!==null){return{scheme:s,authority:undefined,path:(0,n.uriToString)(e)}}else{return null}}return e}},8023:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ResolvingCall=void 0;const n=r(9190);const i=r(8288);const s=r(2173);const o=r(6100);const l=r(8536);const u=r(9962);const p="resolving_call";class ResolvingCall{constructor(e,t,r,o,l){this.channel=e;this.method=t;this.filterStackFactory=o;this.callNumber=l;this.child=null;this.readPending=false;this.pendingMessage=null;this.pendingHalfClose=false;this.ended=false;this.readFilterPending=false;this.writeFilterPending=false;this.pendingChildStatus=null;this.metadata=null;this.listener=null;this.statusWatchers=[];this.deadlineTimer=setTimeout((()=>{}),0);this.filterStack=null;this.deadlineStartTime=null;this.configReceivedTime=null;this.childStartTime=null;this.credentials=n.CallCredentials.createEmpty();this.deadline=r.deadline;this.host=r.host;if(r.parentCall){if(r.flags&i.Propagate.CANCELLATION){r.parentCall.on("cancelled",(()=>{this.cancelWithStatus(i.Status.CANCELLED,"Cancelled by parent call")}))}if(r.flags&i.Propagate.DEADLINE){this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline());this.deadline=(0,s.minDeadline)(this.deadline,r.parentCall.getDeadline())}}this.trace("Created");this.runDeadlineTimer()}trace(e){l.trace(i.LogVerbosity.DEBUG,p,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer);this.deadlineStartTime=new Date;this.trace("Deadline: "+(0,s.deadlineToString)(this.deadline));const e=(0,s.getRelativeTimeout)(this.deadline);if(e!==Infinity){this.trace("Deadline will be reached in "+e+"ms");const handleDeadline=()=>{if(!this.deadlineStartTime){this.cancelWithStatus(i.Status.DEADLINE_EXCEEDED,"Deadline exceeded");return}const e=[];const t=new Date;e.push(`Deadline exceeded after ${(0,s.formatDateDifference)(this.deadlineStartTime,t)}`);if(this.configReceivedTime){if(this.configReceivedTime>this.deadlineStartTime){e.push(`name resolution: ${(0,s.formatDateDifference)(this.deadlineStartTime,this.configReceivedTime)}`)}if(this.childStartTime){if(this.childStartTime>this.configReceivedTime){e.push(`metadata filters: ${(0,s.formatDateDifference)(this.configReceivedTime,this.childStartTime)}`)}}else{e.push("waiting for metadata filters")}}else{e.push("waiting for name resolution")}if(this.child){e.push(...this.child.getDeadlineInfo())}this.cancelWithStatus(i.Status.DEADLINE_EXCEEDED,e.join(","))};if(e<=0){process.nextTick(handleDeadline)}else{this.deadlineTimer=setTimeout(handleDeadline,e)}}}outputStatus(e){if(!this.ended){this.ended=true;if(!this.filterStack){this.filterStack=this.filterStackFactory.createFilter()}clearTimeout(this.deadlineTimer);const t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"');this.statusWatchers.forEach((e=>e(t)));process.nextTick((()=>{var e;(e=this.listener)===null||e===void 0?void 0:e.onReceiveStatus(t)}))}}sendMessageOnChild(e,t){if(!this.child){throw new Error("sendMessageonChild called with child not populated")}const r=this.child;this.writeFilterPending=true;this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then((t=>{this.writeFilterPending=false;r.sendMessageWithContext(e,t.message);if(this.pendingHalfClose){r.halfClose()}}),(e=>{this.cancelWithStatus(e.code,e.details)}))}getConfig(){if(this.ended){return}if(!this.metadata||!this.listener){throw new Error("getConfig called before start")}const e=this.channel.getConfig(this.method,this.metadata);if(e.type==="NONE"){this.channel.queueCallForConfig(this);return}else if(e.type==="ERROR"){if(this.metadata.getOptions().waitForReady){this.channel.queueCallForConfig(this)}else{this.outputStatus(e.error)}return}this.configReceivedTime=new Date;const t=e.config;if(t.status!==i.Status.OK){const{code:e,details:r}=(0,u.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);this.outputStatus({code:e,details:r,metadata:new o.Metadata});return}if(t.methodConfig.timeout){const e=new Date;e.setSeconds(e.getSeconds()+t.methodConfig.timeout.seconds);e.setMilliseconds(e.getMilliseconds()+t.methodConfig.timeout.nanos/1e6);this.deadline=(0,s.minDeadline)(this.deadline,e);this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories);this.filterStack=this.filterStackFactory.createFilter();this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then((e=>{this.child=this.channel.createRetryingCall(t,this.method,this.host,this.credentials,this.deadline);this.trace("Created child ["+this.child.getCallNumber()+"]");this.childStartTime=new Date;this.child.start(e,{onReceiveMetadata:e=>{this.trace("Received metadata");this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(e))},onReceiveMessage:e=>{this.trace("Received message");this.readFilterPending=true;this.filterStack.receiveMessage(e).then((e=>{this.trace("Finished filtering received message");this.readFilterPending=false;this.listener.onReceiveMessage(e);if(this.pendingChildStatus){this.outputStatus(this.pendingChildStatus)}}),(e=>{this.cancelWithStatus(e.code,e.details)}))},onReceiveStatus:e=>{this.trace("Received status");if(this.readFilterPending){this.pendingChildStatus=e}else{this.outputStatus(e)}}});if(this.readPending){this.child.startRead()}if(this.pendingMessage){this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message)}else if(this.pendingHalfClose){this.child.halfClose()}}),(e=>{this.outputStatus(e)}))}reportResolverError(e){var t;if((t=this.metadata)===null||t===void 0?void 0:t.getOptions().waitForReady){this.channel.queueCallForConfig(this)}else{this.outputStatus(e)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"');(r=this.child)===null||r===void 0?void 0:r.cancelWithStatus(e,t);this.outputStatus({code:e,details:t,metadata:new o.Metadata})}getPeer(){var e,t;return(t=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:this.channel.getTarget()}start(e,t){this.trace("start called");this.metadata=e.clone();this.listener=t;this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);if(this.child){this.sendMessageOnChild(e,t)}else{this.pendingMessage={context:e,message:t}}}startRead(){this.trace("startRead called");if(this.child){this.child.startRead()}else{this.readPending=true}}halfClose(){this.trace("halfClose called");if(this.child&&!this.writeFilterPending){this.child.halfClose()}else{this.pendingHalfClose=true}}setCredentials(e){this.credentials=e}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}}t.ResolvingCall=ResolvingCall},3962:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ResolvingLoadBalancer=void 0;const n=r(7e3);const i=r(5);const s=r(778);const o=r(6255);const l=r(1663);const u=r(4643);const p=r(8288);const g=r(6100);const m=r(8536);const y=r(8288);const _=r(6027);const v=r(9069);const E="resolving_load_balancer";function trace(e){m.trace(y.LogVerbosity.DEBUG,E,e)}const b=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function hasMatchingName(e,t,r,n){for(const i of r.name){switch(n){case"EMPTY":if(!i.service&&!i.method){return true}break;case"SERVICE":if(i.service===e&&!i.method){return true}break;case"SERVICE_AND_METHOD":if(i.service===e&&i.method===t){return true}}}return false}function findMatchingConfig(e,t,r,n){for(const i of r){if(hasMatchingName(e,t,i,n)){return i}}return null}function getDefaultConfigSelector(e){return{invoke(t,r){var n,i;const s=t.split("/").filter((e=>e.length>0));const o=(n=s[0])!==null&&n!==void 0?n:"";const l=(i=s[1])!==null&&i!==void 0?i:"";if(e&&e.methodConfig){for(const t of b){const r=findMatchingConfig(o,l,e.methodConfig,t);if(r){return{methodConfig:r,pickInformation:{},status:p.Status.OK,dynamicFilterFactories:[]}}}}return{methodConfig:{name:[]},pickInformation:{},status:p.Status.OK,dynamicFilterFactories:[]}},unref(){}}}class ResolvingLoadBalancer{constructor(e,t,r,m,y){this.target=e;this.channelControlHelper=t;this.channelOptions=r;this.onSuccessfulResolution=m;this.onFailedResolution=y;this.latestChildState=s.ConnectivityState.IDLE;this.latestChildPicker=new l.QueuePicker(this);this.latestChildErrorMessage=null;this.currentState=s.ConnectivityState.IDLE;this.previousServiceConfig=null;this.continueResolving=false;if(r["grpc.service_config"]){this.defaultServiceConfig=(0,i.validateServiceConfig)(JSON.parse(r["grpc.service_config"]))}else{this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]}}this.updateState(s.ConnectivityState.IDLE,new l.QueuePicker(this),null);this.childLoadBalancer=new v.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{if(this.backoffTimeout.isRunning()){trace("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString());this.continueResolving=true}else{this.updateResolution()}},updateState:(e,t,r)=>{this.latestChildState=e;this.latestChildPicker=t;this.latestChildErrorMessage=r;this.updateState(e,t,r)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)});this.innerResolver=(0,o.createResolver)(e,{onSuccessfulResolution:(e,t,r,i,s)=>{var o;this.backoffTimeout.stop();this.backoffTimeout.reset();let l=null;if(t===null){if(r===null){this.previousServiceConfig=null;l=this.defaultServiceConfig}else{if(this.previousServiceConfig===null){this.handleResolutionFailure(r)}else{l=this.previousServiceConfig}}}else{l=t;this.previousServiceConfig=t}const u=(o=l===null||l===void 0?void 0:l.loadBalancingConfig)!==null&&o!==void 0?o:[];const m=(0,n.selectLbConfigFromList)(u,true);if(m===null){this.handleResolutionFailure({code:p.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new g.Metadata});i===null||i===void 0?void 0:i.unref();return}this.childLoadBalancer.updateAddressList(e,m,Object.assign(Object.assign({},this.channelOptions),s));const y=l!==null&&l!==void 0?l:this.defaultServiceConfig;this.onSuccessfulResolution(y,i!==null&&i!==void 0?i:getDefaultConfigSelector(y))},onError:e=>{this.handleResolutionFailure(e)}},r);const _={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new u.BackoffTimeout((()=>{if(this.continueResolving){this.updateResolution();this.continueResolving=false}else{this.updateState(this.latestChildState,this.latestChildPicker,this.latestChildErrorMessage)}}),_);this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution();if(this.currentState===s.ConnectivityState.IDLE){this.updateState(s.ConnectivityState.CONNECTING,this.latestChildPicker,this.latestChildErrorMessage)}this.backoffTimeout.runOnce()}updateState(e,t,r){trace((0,_.uriToString)(this.target)+" "+s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]);if(e===s.ConnectivityState.IDLE){t=new l.QueuePicker(this,t)}this.currentState=e;this.channelControlHelper.updateState(e,t,r)}handleResolutionFailure(e){if(this.latestChildState===s.ConnectivityState.IDLE){this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new l.UnavailablePicker(e),e.details);this.onFailedResolution(e)}}exitIdle(){if(this.currentState===s.ConnectivityState.IDLE||this.currentState===s.ConnectivityState.TRANSIENT_FAILURE){if(this.backoffTimeout.isRunning()){this.continueResolving=true}else{this.updateResolution()}}this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset();this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy();this.innerResolver.destroy();this.backoffTimeout.reset();this.backoffTimeout.stop();this.latestChildState=s.ConnectivityState.IDLE;this.latestChildPicker=new l.QueuePicker(this);this.currentState=s.ConnectivityState.IDLE;this.previousServiceConfig=null;this.continueResolving=false}getTypeName(){return"resolving_load_balancer"}}t.ResolvingLoadBalancer=ResolvingLoadBalancer},2532:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RetryingCall=t.MessageBufferTracker=t.RetryThrottler=void 0;const n=r(8288);const i=r(2173);const s=r(6100);const o=r(8536);const l="retrying_call";class RetryThrottler{constructor(e,t,r){this.maxTokens=e;this.tokenRatio=t;if(r){this.tokens=r.tokens*(e/r.maxTokens)}else{this.tokens=e}}addCallSucceeded(){this.tokens=Math.min(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.max(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}}t.RetryThrottler=RetryThrottler;class MessageBufferTracker{constructor(e,t){this.totalLimit=e;this.limitPerCall=t;this.totalAllocated=0;this.allocatedPerCall=new Map}allocate(e,t){var r;const n=(r=this.allocatedPerCall.get(t))!==null&&r!==void 0?r:0;if(this.limitPerCall-n<e||this.totalLimit-this.totalAllocated<e){return false}this.allocatedPerCall.set(t,n+e);this.totalAllocated+=e;return true}free(e,t){var r;if(this.totalAllocated<e){throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`)}this.totalAllocated-=e;const n=(r=this.allocatedPerCall.get(t))!==null&&r!==void 0?r:0;if(n<e){throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${n}`)}this.allocatedPerCall.set(t,n-e)}freeAll(e){var t;const r=(t=this.allocatedPerCall.get(e))!==null&&t!==void 0?t:0;if(this.totalAllocated<r){throw new Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`)}this.totalAllocated-=r;this.allocatedPerCall.delete(e)}}t.MessageBufferTracker=MessageBufferTracker;const u="grpc-previous-rpc-attempts";const p=5;class RetryingCall{constructor(e,t,r,n,i,s,o,l,u){var g;this.channel=e;this.callConfig=t;this.methodName=r;this.host=n;this.credentials=i;this.deadline=s;this.callNumber=o;this.bufferTracker=l;this.retryThrottler=u;this.listener=null;this.initialMetadata=null;this.underlyingCalls=[];this.writeBuffer=[];this.writeBufferOffset=0;this.readStarted=false;this.transparentRetryUsed=false;this.attempts=0;this.hedgingTimer=null;this.committedCallIndex=null;this.initialRetryBackoffSec=0;this.nextRetryBackoffSec=0;const m=(g=e.getOptions()["grpc-node.retry_max_attempts_limit"])!==null&&g!==void 0?g:p;if(e.getOptions()["grpc.enable_retries"]===0){this.state="NO_RETRY";this.maxAttempts=1}else if(t.methodConfig.retryPolicy){this.state="RETRY";const e=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(e.initialBackoff.substring(0,e.initialBackoff.length-1));this.maxAttempts=Math.min(e.maxAttempts,m)}else if(t.methodConfig.hedgingPolicy){this.state="HEDGING";this.maxAttempts=Math.min(t.methodConfig.hedgingPolicy.maxAttempts,m)}else{this.state="TRANSPARENT_ONLY";this.maxAttempts=1}this.startTime=new Date}getDeadlineInfo(){if(this.underlyingCalls.length===0){return[]}const e=[];const t=this.underlyingCalls[this.underlyingCalls.length-1];if(this.underlyingCalls.length>1){e.push(`previous attempts: ${this.underlyingCalls.length-1}`)}if(t.startTime>this.startTime){e.push(`time to current attempt start: ${(0,i.formatDateDifference)(this.startTime,t.startTime)}`)}e.push(...t.call.getDeadlineInfo());return e}getCallNumber(){return this.callNumber}trace(e){o.trace(n.LogVerbosity.DEBUG,l,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'" start time='+this.startTime.toISOString());this.bufferTracker.freeAll(this.callNumber);this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length;this.writeBuffer=[];process.nextTick((()=>{var t;(t=this.listener)===null||t===void 0?void 0:t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})}))}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"');this.reportStatus({code:e,details:t,metadata:new s.Metadata});for(const{call:r}of this.underlyingCalls){r.cancelWithStatus(e,t)}}getPeer(){if(this.committedCallIndex!==null){return this.underlyingCalls[this.committedCallIndex].call.getPeer()}else{return"unknown"}}getBufferEntry(e){var t;return(t=this.writeBuffer[e-this.writeBufferOffset])!==null&&t!==void 0?t:{entryType:"FREED",allocated:false}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if(this.state!=="COMMITTED"){return}let e;if(this.underlyingCalls[this.committedCallIndex].state==="COMPLETED"){e=this.getNextBufferIndex()}else{e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend}for(let t=this.writeBufferOffset;t<e;t++){const e=this.getBufferEntry(t);if(e.allocated){this.bufferTracker.free(e.message.message.length,this.callNumber)}}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset);this.writeBufferOffset=e}commitCall(e){var t,r;if(this.state==="COMMITTED"){return}this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e);this.state="COMMITTED";(r=(t=this.callConfig).onCommitted)===null||r===void 0?void 0:r.call(t);this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++){if(t===e){continue}if(this.underlyingCalls[t].state==="COMPLETED"){continue}this.underlyingCalls[t].state="COMPLETED";this.underlyingCalls[t].call.cancelWithStatus(n.Status.CANCELLED,"Discarded in favor of other hedged attempt")}this.clearSentMessages()}commitCallWithMostMessages(){if(this.state==="COMMITTED"){return}let e=-1;let t=-1;for(const[r,n]of this.underlyingCalls.entries()){if(n.state==="ACTIVE"&&n.nextMessageToSend>e){e=n.nextMessageToSend;t=r}}if(t===-1){this.state="TRANSPARENT_ONLY"}else{this.commitCall(t)}}isStatusCodeInList(e,t){return e.some((e=>{var r;return e===t||e.toString().toLowerCase()===((r=n.Status[t])===null||r===void 0?void 0:r.toLowerCase())}))}getNextRetryBackoffMs(){var e;const t=(e=this.callConfig)===null||e===void 0?void 0:e.methodConfig.retryPolicy;if(!t){return 0}const r=Math.random()*this.nextRetryBackoffSec*1e3;const n=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,n);return r}maybeRetryCall(e,t){if(this.state!=="RETRY"){t(false);return}if(this.attempts>=this.maxAttempts){t(false);return}let r;if(e===null){r=this.getNextRetryBackoffMs()}else if(e<0){this.state="TRANSPARENT_ONLY";t(false);return}else{r=e;this.nextRetryBackoffSec=this.initialRetryBackoffSec}setTimeout((()=>{var e,r;if(this.state!=="RETRY"){t(false);return}if((r=(e=this.retryThrottler)===null||e===void 0?void 0:e.canRetryCall())!==null&&r!==void 0?r:true){t(true);this.attempts+=1;this.startNewAttempt()}else{this.trace("Retry attempt denied by throttling policy");t(false)}}),r)}countActiveCalls(){let e=0;for(const t of this.underlyingCalls){if((t===null||t===void 0?void 0:t.state)==="ACTIVE"){e+=1}}return e}handleProcessedStatus(e,t,r){var n,i,s;switch(this.state){case"COMMITTED":case"NO_RETRY":case"TRANSPARENT_ONLY":this.commitCall(t);this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList((n=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)!==null&&n!==void 0?n:[],e.code)){(i=this.retryThrottler)===null||i===void 0?void 0:i.addCallFailed();let n;if(r===null){n=0}else if(r<0){this.state="TRANSPARENT_ONLY";this.commitCall(t);this.reportStatus(e);return}else{n=r}setTimeout((()=>{this.maybeStartHedgingAttempt();if(this.countActiveCalls()===0){this.commitCall(t);this.reportStatus(e)}}),n)}else{this.commitCall(t);this.reportStatus(e)}break;case"RETRY":if(this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)){(s=this.retryThrottler)===null||s===void 0?void 0:s.addCallFailed();this.maybeRetryCall(r,(r=>{if(!r){this.commitCall(t);this.reportStatus(e)}}))}else{this.commitCall(t);this.reportStatus(e)}break}}getPushback(e){const t=e.get("grpc-retry-pushback-ms");if(t.length===0){return null}try{return parseInt(t[0])}catch(e){return-1}}handleChildStatus(e,t){var r;if(this.underlyingCalls[t].state==="COMPLETED"){return}this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state);this.underlyingCalls[t].state="COMPLETED";if(e.code===n.Status.OK){(r=this.retryThrottler)===null||r===void 0?void 0:r.addCallSucceeded();this.commitCall(t);this.reportStatus(e);return}if(this.state==="NO_RETRY"){this.commitCall(t);this.reportStatus(e);return}if(this.state==="COMMITTED"){this.reportStatus(e);return}const i=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":if(this.transparentRetryUsed){this.handleProcessedStatus(e,t,i)}else{this.transparentRetryUsed=true;this.startNewAttempt()}break;case"DROP":this.commitCall(t);this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,i);break}}maybeStartHedgingAttempt(){if(this.state!=="HEDGING"){return}if(!this.callConfig.methodConfig.hedgingPolicy){return}if(this.attempts>=this.maxAttempts){return}this.attempts+=1;this.startNewAttempt();this.maybeStartHedgingTimer()}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer){clearTimeout(this.hedgingTimer)}if(this.state!=="HEDGING"){return}if(!this.callConfig.methodConfig.hedgingPolicy){return}const n=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=this.maxAttempts){return}const i=(e=n.hedgingDelay)!==null&&e!==void 0?e:"0s";const s=Number(i.substring(0,i.length-1));this.hedgingTimer=setTimeout((()=>{this.maybeStartHedgingAttempt()}),s*1e3);(r=(t=this.hedgingTimer).unref)===null||r===void 0?void 0:r.call(t)}startNewAttempt(){const e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);const t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0,startTime:new Date});const r=this.attempts-1;const n=this.initialMetadata.clone();if(r>0){n.set(u,`${r}`)}let i=false;e.start(n,{onReceiveMetadata:n=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]");this.commitCall(t);i=true;if(r>0){n.set(u,`${r}`)}if(this.underlyingCalls[t].state==="ACTIVE"){this.listener.onReceiveMetadata(n)}},onReceiveMessage:r=>{this.trace("Received message from child ["+e.getCallNumber()+"]");this.commitCall(t);if(this.underlyingCalls[t].state==="ACTIVE"){this.listener.onReceiveMessage(r)}},onReceiveStatus:n=>{this.trace("Received status from child ["+e.getCallNumber()+"]");if(!i&&r>0){n.metadata.set(u,`${r}`)}this.handleChildStatus(n,t)}});this.sendNextChildMessage(t);if(this.readStarted){e.startRead()}}start(e,t){this.trace("start called");this.listener=t;this.initialMetadata=e;this.attempts+=1;this.startNewAttempt();this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var t,r;const n=this.underlyingCalls[e];const i=n.nextMessageToSend;(r=(t=this.getBufferEntry(i)).callback)===null||r===void 0?void 0:r.call(t);this.clearSentMessages();n.nextMessageToSend+=1;this.sendNextChildMessage(e)}sendNextChildMessage(e){const t=this.underlyingCalls[e];if(t.state==="COMPLETED"){return}if(this.getBufferEntry(t.nextMessageToSend)){const r=this.getBufferEntry(t.nextMessageToSend);switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":t.nextMessageToSend+=1;t.call.halfClose();break;case"FREED":break}}}sendMessageWithContext(e,t){var r;this.trace("write() called with message of length "+t.length);const n={message:t,flags:e.flags};const i=this.getNextBufferIndex();const s={entryType:"MESSAGE",message:n,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};this.writeBuffer.push(s);if(s.allocated){(r=e.callback)===null||r===void 0?void 0:r.call(e);for(const[e,r]of this.underlyingCalls.entries()){if(r.state==="ACTIVE"&&r.nextMessageToSend===i){r.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},t)}}}else{this.commitCallWithMostMessages();if(this.committedCallIndex===null){return}const r=this.underlyingCalls[this.committedCallIndex];s.callback=e.callback;if(r.state==="ACTIVE"&&r.nextMessageToSend===i){r.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(this.committedCallIndex)}},t)}}}startRead(){this.trace("startRead called");this.readStarted=true;for(const e of this.underlyingCalls){if((e===null||e===void 0?void 0:e.state)==="ACTIVE"){e.call.startRead()}}}halfClose(){this.trace("halfClose called");const e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:false});for(const t of this.underlyingCalls){if((t===null||t===void 0?void 0:t.state)==="ACTIVE"&&t.nextMessageToSend===e){t.nextMessageToSend+=1;t.call.halfClose()}}}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}}t.RetryingCall=RetryingCall},4615:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0;t.serverErrorToStatus=serverErrorToStatus;const n=r(4434);const i=r(2203);const s=r(8288);const o=r(6100);function serverErrorToStatus(e,t){var r;const n={code:s.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:(r=t!==null&&t!==void 0?t:e.metadata)!==null&&r!==void 0?r:null};if("code"in e&&typeof e.code==="number"&&Number.isInteger(e.code)){n.code=e.code;if("details"in e&&typeof e.details==="string"){n.details=e.details}}return n}class ServerUnaryCallImpl extends n.EventEmitter{constructor(e,t,r,n){super();this.path=e;this.call=t;this.metadata=r;this.request=n;this.cancelled=false}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}}t.ServerUnaryCallImpl=ServerUnaryCallImpl;class ServerReadableStreamImpl extends i.Readable{constructor(e,t,r){super({objectMode:true});this.path=e;this.call=t;this.metadata=r;this.cancelled=false}_read(e){this.call.startRead()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}}t.ServerReadableStreamImpl=ServerReadableStreamImpl;class ServerWritableStreamImpl extends i.Writable{constructor(e,t,r,n){super({objectMode:true});this.path=e;this.call=t;this.metadata=r;this.request=n;this.pendingStatus={code:s.Status.OK,details:"OK"};this.cancelled=false;this.trailingMetadata=new o.Metadata;this.on("error",(e=>{this.pendingStatus=serverErrorToStatus(e);this.end()}))}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}_write(e,t,r){this.call.sendMessage(e,r)}_final(e){var t;e(null);this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:(t=this.pendingStatus.metadata)!==null&&t!==void 0?t:this.trailingMetadata}))}end(e){if(e){this.trailingMetadata=e}return super.end()}}t.ServerWritableStreamImpl=ServerWritableStreamImpl;class ServerDuplexStreamImpl extends i.Duplex{constructor(e,t,r){super({objectMode:true});this.path=e;this.call=t;this.metadata=r;this.pendingStatus={code:s.Status.OK,details:"OK"};this.cancelled=false;this.trailingMetadata=new o.Metadata;this.on("error",(e=>{this.pendingStatus=serverErrorToStatus(e);this.end()}))}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.path}getHost(){return this.call.getHost()}_read(e){this.call.startRead()}_write(e,t,r){this.call.sendMessage(e,r)}_final(e){var t;e(null);this.call.sendStatus(Object.assign(Object.assign({},this.pendingStatus),{metadata:(t=this.pendingStatus.metadata)!==null&&t!==void 0?t:this.trailingMetadata}))}end(e){if(e){this.trailingMetadata=e}return super.end()}}t.ServerDuplexStreamImpl=ServerDuplexStreamImpl},6545:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ServerCredentials=void 0;t.createCertificateProviderServerCredentials=createCertificateProviderServerCredentials;t.createServerCredentialsWithInterceptors=createServerCredentialsWithInterceptors;const n=r(8876);class ServerCredentials{constructor(e,t){this.serverConstructorOptions=e;this.watchers=new Set;this.latestContextOptions=null;this.latestContextOptions=t!==null&&t!==void 0?t:null}_addWatcher(e){this.watchers.add(e)}_removeWatcher(e){this.watchers.delete(e)}getWatcherCount(){return this.watchers.size}updateSecureContextOptions(e){this.latestContextOptions=e;for(const e of this.watchers){e(this.latestContextOptions)}}_isSecure(){return this.serverConstructorOptions!==null}_getSecureContextOptions(){return this.latestContextOptions}_getConstructorOptions(){return this.serverConstructorOptions}_getInterceptors(){return[]}static createInsecure(){return new InsecureServerCredentials}static createSsl(e,t,r=false){var i;if(e!==null&&!Buffer.isBuffer(e)){throw new TypeError("rootCerts must be null or a Buffer")}if(!Array.isArray(t)){throw new TypeError("keyCertPairs must be an array")}if(typeof r!=="boolean"){throw new TypeError("checkClientCertificate must be a boolean")}const s=[];const o=[];for(let e=0;e<t.length;e++){const r=t[e];if(r===null||typeof r!=="object"){throw new TypeError(`keyCertPair[${e}] must be an object`)}if(!Buffer.isBuffer(r.private_key)){throw new TypeError(`keyCertPair[${e}].private_key must be a Buffer`)}if(!Buffer.isBuffer(r.cert_chain)){throw new TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`)}s.push(r.cert_chain);o.push(r.private_key)}return new SecureServerCredentials({requestCert:r,ciphers:n.CIPHER_SUITES},{ca:(i=e!==null&&e!==void 0?e:(0,n.getDefaultRootsData)())!==null&&i!==void 0?i:undefined,cert:s,key:o})}}t.ServerCredentials=ServerCredentials;class InsecureServerCredentials extends ServerCredentials{constructor(){super(null)}_getSettings(){return null}_equals(e){return e instanceof InsecureServerCredentials}}class SecureServerCredentials extends ServerCredentials{constructor(e,t){super(e,t);this.options=Object.assign(Object.assign({},e),t)}_equals(e){if(this===e){return true}if(!(e instanceof SecureServerCredentials)){return false}if(Buffer.isBuffer(this.options.ca)&&Buffer.isBuffer(e.options.ca)){if(!this.options.ca.equals(e.options.ca)){return false}}else{if(this.options.ca!==e.options.ca){return false}}if(Array.isArray(this.options.cert)&&Array.isArray(e.options.cert)){if(this.options.cert.length!==e.options.cert.length){return false}for(let t=0;t<this.options.cert.length;t++){const r=this.options.cert[t];const n=e.options.cert[t];if(Buffer.isBuffer(r)&&Buffer.isBuffer(n)){if(!r.equals(n)){return false}}else{if(r!==n){return false}}}}else{if(this.options.cert!==e.options.cert){return false}}if(Array.isArray(this.options.key)&&Array.isArray(e.options.key)){if(this.options.key.length!==e.options.key.length){return false}for(let t=0;t<this.options.key.length;t++){const r=this.options.key[t];const n=e.options.key[t];if(Buffer.isBuffer(r)&&Buffer.isBuffer(n)){if(!r.equals(n)){return false}}else{if(r!==n){return false}}}}else{if(this.options.key!==e.options.key){return false}}if(this.options.requestCert!==e.options.requestCert){return false}return true}}class CertificateProviderServerCredentials extends ServerCredentials{constructor(e,t,r){super({requestCert:t!==null,rejectUnauthorized:r,ciphers:n.CIPHER_SUITES});this.identityCertificateProvider=e;this.caCertificateProvider=t;this.requireClientCertificate=r;this.latestCaUpdate=null;this.latestIdentityUpdate=null;this.caCertificateUpdateListener=this.handleCaCertificateUpdate.bind(this);this.identityCertificateUpdateListener=this.handleIdentityCertitificateUpdate.bind(this)}_addWatcher(e){var t;if(this.getWatcherCount()===0){(t=this.caCertificateProvider)===null||t===void 0?void 0:t.addCaCertificateListener(this.caCertificateUpdateListener);this.identityCertificateProvider.addIdentityCertificateListener(this.identityCertificateUpdateListener)}super._addWatcher(e)}_removeWatcher(e){var t;super._removeWatcher(e);if(this.getWatcherCount()===0){(t=this.caCertificateProvider)===null||t===void 0?void 0:t.removeCaCertificateListener(this.caCertificateUpdateListener);this.identityCertificateProvider.removeIdentityCertificateListener(this.identityCertificateUpdateListener)}}_equals(e){if(this===e){return true}if(!(e instanceof CertificateProviderServerCredentials)){return false}return this.caCertificateProvider===e.caCertificateProvider&&this.identityCertificateProvider===e.identityCertificateProvider&&this.requireClientCertificate===e.requireClientCertificate}calculateSecureContextOptions(){var e;if(this.latestIdentityUpdate===null){return null}if(this.caCertificateProvider!==null&&this.latestCaUpdate===null){return null}return{ca:(e=this.latestCaUpdate)===null||e===void 0?void 0:e.caCertificate,cert:[this.latestIdentityUpdate.certificate],key:[this.latestIdentityUpdate.privateKey]}}finalizeUpdate(){const e=this.calculateSecureContextOptions();this.updateSecureContextOptions(e)}handleCaCertificateUpdate(e){this.latestCaUpdate=e;this.finalizeUpdate()}handleIdentityCertitificateUpdate(e){this.latestIdentityUpdate=e;this.finalizeUpdate()}}function createCertificateProviderServerCredentials(e,t,r){return new CertificateProviderServerCredentials(e,t,r)}class InterceptorServerCredentials extends ServerCredentials{constructor(e,t){super({});this.childCredentials=e;this.interceptors=t}_isSecure(){return this.childCredentials._isSecure()}_equals(e){if(!(e instanceof InterceptorServerCredentials)){return false}if(!this.childCredentials._equals(e.childCredentials)){return false}if(this.interceptors.length!==e.interceptors.length){return false}for(let t=0;t<this.interceptors.length;t++){if(this.interceptors[t]!==e.interceptors[t]){return false}}return true}_getInterceptors(){return this.interceptors}_addWatcher(e){this.childCredentials._addWatcher(e)}_removeWatcher(e){this.childCredentials._removeWatcher(e)}_getConstructorOptions(){return this.childCredentials._getConstructorOptions()}_getSecureContextOptions(){return this.childCredentials._getSecureContextOptions()}}function createServerCredentialsWithInterceptors(e,t){return new InterceptorServerCredentials(e,t)}},2151:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BaseServerInterceptingCall=t.ServerInterceptingCall=t.ResponderBuilder=t.ServerListenerBuilder=void 0;t.isInterceptingServerListener=isInterceptingServerListener;t.getServerInterceptingCall=getServerInterceptingCall;const n=r(6100);const i=r(8288);const s=r(5675);const o=r(8219);const l=r(3106);const u=r(7956);const p=r(8536);const g="server_call";function trace(e){p.trace(i.LogVerbosity.DEBUG,g,e)}class ServerListenerBuilder{constructor(){this.metadata=undefined;this.message=undefined;this.halfClose=undefined;this.cancel=undefined}withOnReceiveMetadata(e){this.metadata=e;return this}withOnReceiveMessage(e){this.message=e;return this}withOnReceiveHalfClose(e){this.halfClose=e;return this}withOnCancel(e){this.cancel=e;return this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveHalfClose:this.halfClose,onCancel:this.cancel}}}t.ServerListenerBuilder=ServerListenerBuilder;function isInterceptingServerListener(e){return e.onReceiveMetadata!==undefined&&e.onReceiveMetadata.length===1}class InterceptingServerListenerImpl{constructor(e,t){this.listener=e;this.nextListener=t;this.cancelled=false;this.processingMetadata=false;this.hasPendingMessage=false;this.pendingMessage=null;this.processingMessage=false;this.hasPendingHalfClose=false}processPendingMessage(){if(this.hasPendingMessage){this.nextListener.onReceiveMessage(this.pendingMessage);this.pendingMessage=null;this.hasPendingMessage=false}}processPendingHalfClose(){if(this.hasPendingHalfClose){this.nextListener.onReceiveHalfClose();this.hasPendingHalfClose=false}}onReceiveMetadata(e){if(this.cancelled){return}this.processingMetadata=true;this.listener.onReceiveMetadata(e,(e=>{this.processingMetadata=false;if(this.cancelled){return}this.nextListener.onReceiveMetadata(e);this.processPendingMessage();this.processPendingHalfClose()}))}onReceiveMessage(e){if(this.cancelled){return}this.processingMessage=true;this.listener.onReceiveMessage(e,(e=>{this.processingMessage=false;if(this.cancelled){return}if(this.processingMetadata){this.pendingMessage=e;this.hasPendingMessage=true}else{this.nextListener.onReceiveMessage(e);this.processPendingHalfClose()}}))}onReceiveHalfClose(){if(this.cancelled){return}this.listener.onReceiveHalfClose((()=>{if(this.cancelled){return}if(this.processingMetadata||this.processingMessage){this.hasPendingHalfClose=true}else{this.nextListener.onReceiveHalfClose()}}))}onCancel(){this.cancelled=true;this.listener.onCancel();this.nextListener.onCancel()}}class ResponderBuilder{constructor(){this.start=undefined;this.metadata=undefined;this.message=undefined;this.status=undefined}withStart(e){this.start=e;return this}withSendMetadata(e){this.metadata=e;return this}withSendMessage(e){this.message=e;return this}withSendStatus(e){this.status=e;return this}build(){return{start:this.start,sendMetadata:this.metadata,sendMessage:this.message,sendStatus:this.status}}}t.ResponderBuilder=ResponderBuilder;const m={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveHalfClose:e=>{e()},onCancel:()=>{}};const y={start:e=>{e()},sendMetadata:(e,t)=>{t(e)},sendMessage:(e,t)=>{t(e)},sendStatus:(e,t)=>{t(e)}};class ServerInterceptingCall{constructor(e,t){var r,n,i,s;this.nextCall=e;this.processingMetadata=false;this.sentMetadata=false;this.processingMessage=false;this.pendingMessage=null;this.pendingMessageCallback=null;this.pendingStatus=null;this.responder={start:(r=t===null||t===void 0?void 0:t.start)!==null&&r!==void 0?r:y.start,sendMetadata:(n=t===null||t===void 0?void 0:t.sendMetadata)!==null&&n!==void 0?n:y.sendMetadata,sendMessage:(i=t===null||t===void 0?void 0:t.sendMessage)!==null&&i!==void 0?i:y.sendMessage,sendStatus:(s=t===null||t===void 0?void 0:t.sendStatus)!==null&&s!==void 0?s:y.sendStatus}}processPendingMessage(){if(this.pendingMessageCallback){this.nextCall.sendMessage(this.pendingMessage,this.pendingMessageCallback);this.pendingMessage=null;this.pendingMessageCallback=null}}processPendingStatus(){if(this.pendingStatus){this.nextCall.sendStatus(this.pendingStatus);this.pendingStatus=null}}start(e){this.responder.start((t=>{var r,n,i,s;const o={onReceiveMetadata:(r=t===null||t===void 0?void 0:t.onReceiveMetadata)!==null&&r!==void 0?r:m.onReceiveMetadata,onReceiveMessage:(n=t===null||t===void 0?void 0:t.onReceiveMessage)!==null&&n!==void 0?n:m.onReceiveMessage,onReceiveHalfClose:(i=t===null||t===void 0?void 0:t.onReceiveHalfClose)!==null&&i!==void 0?i:m.onReceiveHalfClose,onCancel:(s=t===null||t===void 0?void 0:t.onCancel)!==null&&s!==void 0?s:m.onCancel};const l=new InterceptingServerListenerImpl(o,e);this.nextCall.start(l)}))}sendMetadata(e){this.processingMetadata=true;this.sentMetadata=true;this.responder.sendMetadata(e,(e=>{this.processingMetadata=false;this.nextCall.sendMetadata(e);this.processPendingMessage();this.processPendingStatus()}))}sendMessage(e,t){this.processingMessage=true;if(!this.sentMetadata){this.sendMetadata(new n.Metadata)}this.responder.sendMessage(e,(e=>{this.processingMessage=false;if(this.processingMetadata){this.pendingMessage=e;this.pendingMessageCallback=t}else{this.nextCall.sendMessage(e,t)}}))}sendStatus(e){this.responder.sendStatus(e,(e=>{if(this.processingMetadata||this.processingMessage){this.pendingStatus=e}else{this.nextCall.sendStatus(e)}}))}startRead(){this.nextCall.startRead()}getPeer(){return this.nextCall.getPeer()}getDeadline(){return this.nextCall.getDeadline()}getHost(){return this.nextCall.getHost()}}t.ServerInterceptingCall=ServerInterceptingCall;const _="grpc-accept-encoding";const v="grpc-encoding";const E="grpc-message";const b="grpc-status";const C="grpc-timeout";const w=/(\d{1,8})\s*([HMSmun])/;const I={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6};const T={[_]:"identity,deflate,gzip",[v]:"identity"};const k={[s.constants.HTTP2_HEADER_STATUS]:s.constants.HTTP_STATUS_OK,[s.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"};const R={waitForTrailers:true};class BaseServerInterceptingCall{constructor(e,t,r,o,l){var m;this.stream=e;this.callEventTracker=r;this.handler=o;this.listener=null;this.deadlineTimer=null;this.deadline=Infinity;this.maxSendMessageSize=i.DEFAULT_MAX_SEND_MESSAGE_LENGTH;this.maxReceiveMessageSize=i.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.cancelled=false;this.metadataSent=false;this.wantTrailers=false;this.cancelNotified=false;this.incomingEncoding="identity";this.readQueue=[];this.isReadPending=false;this.receivedHalfClose=false;this.streamEnded=false;this.stream.once("error",(e=>{}));this.stream.once("close",(()=>{var e;trace("Request to method "+((e=this.handler)===null||e===void 0?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode);if(this.callEventTracker&&!this.streamEnded){this.streamEnded=true;this.callEventTracker.onStreamEnd(false);this.callEventTracker.onCallEnd({code:i.Status.CANCELLED,details:"Stream closed before sending status",metadata:null})}this.notifyOnCancel()}));this.stream.on("data",(e=>{this.handleDataFrame(e)}));this.stream.pause();this.stream.on("end",(()=>{this.handleEndEvent()}));if("grpc.max_send_message_length"in l){this.maxSendMessageSize=l["grpc.max_send_message_length"]}if("grpc.max_receive_message_length"in l){this.maxReceiveMessageSize=l["grpc.max_receive_message_length"]}this.host=(m=t[":authority"])!==null&&m!==void 0?m:t.host;this.decoder=new u.StreamDecoder(this.maxReceiveMessageSize);const y=n.Metadata.fromHttp2Headers(t);if(p.isTracerEnabled(g)){trace("Request to "+this.handler.path+" received headers "+JSON.stringify(y.toJSON()))}const E=y.get(C);if(E.length>0){this.handleTimeoutHeader(E[0])}const b=y.get(v);if(b.length>0){this.incomingEncoding=b[0]}y.remove(C);y.remove(v);y.remove(_);y.remove(s.constants.HTTP2_HEADER_ACCEPT_ENCODING);y.remove(s.constants.HTTP2_HEADER_TE);y.remove(s.constants.HTTP2_HEADER_CONTENT_TYPE);this.metadata=y}handleTimeoutHeader(e){const t=e.toString().match(w);if(t===null){const t={code:i.Status.INTERNAL,details:`Invalid ${C} value "${e}"`,metadata:null};process.nextTick((()=>{this.sendStatus(t)}));return}const r=+t[1]*I[t[2]]|0;const n=new Date;this.deadline=n.setMilliseconds(n.getMilliseconds()+r);this.deadlineTimer=setTimeout((()=>{const e={code:i.Status.DEADLINE_EXCEEDED,details:"Deadline exceeded",metadata:null};this.sendStatus(e)}),r)}checkCancelled(){if(!this.cancelled&&(this.stream.destroyed||this.stream.closed)){this.notifyOnCancel();this.cancelled=true}return this.cancelled}notifyOnCancel(){if(this.cancelNotified){return}this.cancelNotified=true;this.cancelled=true;process.nextTick((()=>{var e;(e=this.listener)===null||e===void 0?void 0:e.onCancel()}));if(this.deadlineTimer){clearTimeout(this.deadlineTimer)}this.stream.resume()}maybeSendMetadata(){if(!this.metadataSent){this.sendMetadata(new n.Metadata)}}serializeMessage(e){const t=this.handler.serialize(e);const r=t.byteLength;const n=Buffer.allocUnsafe(r+5);n.writeUInt8(0,0);n.writeUInt32BE(r,1);t.copy(n,5);return n}decompressMessage(e,t){const r=e.subarray(5);if(t==="identity"){return r}else if(t==="deflate"||t==="gzip"){let e;if(t==="deflate"){e=l.createInflate()}else{e=l.createGunzip()}return new Promise(((t,n)=>{let s=0;const o=[];e.on("data",(t=>{o.push(t);s+=t.byteLength;if(this.maxReceiveMessageSize!==-1&&s>this.maxReceiveMessageSize){e.destroy();n({code:i.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`})}}));e.on("end",(()=>{t(Buffer.concat(o))}));e.write(r);e.end()}))}else{return Promise.reject({code:i.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`})}}async decompressAndMaybePush(e){if(e.type!=="COMPRESSED"){throw new Error(`Invalid queue entry type: ${e.type}`)}const t=e.compressedMessage.readUInt8(0)===1;const r=t?this.incomingEncoding:"identity";let n;try{n=await this.decompressMessage(e.compressedMessage,r)}catch(e){this.sendStatus(e);return}try{e.parsedMessage=this.handler.deserialize(n)}catch(e){this.sendStatus({code:i.Status.INTERNAL,details:`Error deserializing request: ${e.message}`});return}e.type="READABLE";this.maybePushNextMessage()}maybePushNextMessage(){if(this.listener&&this.isReadPending&&this.readQueue.length>0&&this.readQueue[0].type!=="COMPRESSED"){this.isReadPending=false;const e=this.readQueue.shift();if(e.type==="READABLE"){this.listener.onReceiveMessage(e.parsedMessage)}else{this.listener.onReceiveHalfClose()}}}handleDataFrame(e){var t;if(this.checkCancelled()){return}trace("Request to "+this.handler.path+" received data frame of size "+e.length);let r;try{r=this.decoder.write(e)}catch(e){this.sendStatus({code:i.Status.RESOURCE_EXHAUSTED,details:e.message});return}for(const e of r){this.stream.pause();const r={type:"COMPRESSED",compressedMessage:e,parsedMessage:null};this.readQueue.push(r);this.decompressAndMaybePush(r);(t=this.callEventTracker)===null||t===void 0?void 0:t.addMessageReceived()}}handleEndEvent(){this.readQueue.push({type:"HALF_CLOSE",compressedMessage:null,parsedMessage:null});this.receivedHalfClose=true;this.maybePushNextMessage()}start(e){trace("Request to "+this.handler.path+" start called");if(this.checkCancelled()){return}this.listener=e;e.onReceiveMetadata(this.metadata)}sendMetadata(e){if(this.checkCancelled()){return}if(this.metadataSent){return}this.metadataSent=true;const t=e?e.toHttp2Headers():null;const r=Object.assign(Object.assign(Object.assign({},k),T),t);this.stream.respond(r,R)}sendMessage(e,t){if(this.checkCancelled()){return}let r;try{r=this.serializeMessage(e)}catch(e){this.sendStatus({code:i.Status.INTERNAL,details:`Error serializing response: ${(0,o.getErrorMessage)(e)}`,metadata:null});return}if(this.maxSendMessageSize!==-1&&r.length-5>this.maxSendMessageSize){this.sendStatus({code:i.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${r.length} vs. ${this.maxSendMessageSize})`,metadata:null});return}this.maybeSendMetadata();trace("Request to "+this.handler.path+" sent data frame of size "+r.length);this.stream.write(r,(e=>{var r;if(e){this.sendStatus({code:i.Status.INTERNAL,details:`Error writing message: ${(0,o.getErrorMessage)(e)}`,metadata:null});return}(r=this.callEventTracker)===null||r===void 0?void 0:r.addMessageSent();t()}))}sendStatus(e){var t,r;if(this.checkCancelled()){return}trace("Request to method "+((t=this.handler)===null||t===void 0?void 0:t.path)+" ended with status code: "+i.Status[e.code]+" details: "+e.details);if(this.metadataSent){if(!this.wantTrailers){this.wantTrailers=true;this.stream.once("wantTrailers",(()=>{var t;if(this.callEventTracker&&!this.streamEnded){this.streamEnded=true;this.callEventTracker.onStreamEnd(true);this.callEventTracker.onCallEnd(e)}const r=Object.assign({[b]:e.code,[E]:encodeURI(e.details)},(t=e.metadata)===null||t===void 0?void 0:t.toHttp2Headers());this.stream.sendTrailers(r);this.notifyOnCancel()}));this.stream.end()}else{this.notifyOnCancel()}}else{if(this.callEventTracker&&!this.streamEnded){this.streamEnded=true;this.callEventTracker.onStreamEnd(true);this.callEventTracker.onCallEnd(e)}const t=Object.assign(Object.assign({[b]:e.code,[E]:encodeURI(e.details)},k),(r=e.metadata)===null||r===void 0?void 0:r.toHttp2Headers());this.stream.respond(t,{endStream:true});this.notifyOnCancel()}}startRead(){trace("Request to "+this.handler.path+" startRead called");if(this.checkCancelled()){return}this.isReadPending=true;if(this.readQueue.length===0){if(!this.receivedHalfClose){this.stream.resume()}}else{this.maybePushNextMessage()}}getPeer(){var e;const t=(e=this.stream.session)===null||e===void 0?void 0:e.socket;if(t===null||t===void 0?void 0:t.remoteAddress){if(t.remotePort){return`${t.remoteAddress}:${t.remotePort}`}else{return t.remoteAddress}}else{return"unknown"}}getDeadline(){return this.deadline}getHost(){return this.host}}t.BaseServerInterceptingCall=BaseServerInterceptingCall;function getServerInterceptingCall(e,t,r,n,i,s){const o={path:i.path,requestStream:i.type==="clientStream"||i.type==="bidi",responseStream:i.type==="serverStream"||i.type==="bidi",requestDeserialize:i.deserialize,responseSerialize:i.serialize};const l=new BaseServerInterceptingCall(t,r,n,i,s);return e.reduce(((e,t)=>t(o,e)),l)}},2390:function(e,t,r){"use strict";var n=this&&this.__runInitializers||function(e,t,r){var n=arguments.length>2;for(var i=0;i<t.length;i++){r=n?t[i].call(e,r):t[i].call(e)}return n?r:void 0};var i=this&&this.__esDecorate||function(e,t,r,n,i,s){function accept(e){if(e!==void 0&&typeof e!=="function")throw new TypeError("Function expected");return e}var o=n.kind,l=o==="getter"?"get":o==="setter"?"set":"value";var u=!t&&e?n["static"]?e:e.prototype:null;var p=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{});var g,m=false;for(var y=r.length-1;y>=0;y--){var _={};for(var v in n)_[v]=v==="access"?{}:n[v];for(var v in n.access)_.access[v]=n.access[v];_.addInitializer=function(e){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(accept(e||null))};var E=(0,r[y])(o==="accessor"?{get:p.get,set:p.set}:p[l],_);if(o==="accessor"){if(E===void 0)continue;if(E===null||typeof E!=="object")throw new TypeError("Object expected");if(g=accept(E.get))p.get=g;if(g=accept(E.set))p.set=g;if(g=accept(E.init))i.unshift(g)}else if(g=accept(E)){if(o==="field")i.unshift(g);else p[l]=g}}if(u)Object.defineProperty(u,n.name,p);m=true};Object.defineProperty(t,"__esModule",{value:true});t.Server=void 0;const s=r(5675);const o=r(9023);const l=r(8288);const u=r(4615);const p=r(6545);const g=r(6255);const m=r(8536);const y=r(7021);const _=r(6027);const v=r(8198);const E=r(2151);const b=~(1<<31);const C=~(1<<31);const w=2e4;const I=~(1<<31);const{HTTP2_HEADER_PATH:T}=s.constants;const k="server";const R=Buffer.from("max_age");function serverCallTrace(e){m.trace(l.LogVerbosity.DEBUG,"server_call",e)}function noop(){}function deprecate(e){return function(t,r){return o.deprecate(t,e)}}function getUnimplementedStatusResponse(e){return{code:l.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`}}function getDefaultHandler(e,t){const r=getUnimplementedStatusResponse(t);switch(e){case"unary":return(e,t)=>{t(r,null)};case"clientStream":return(e,t)=>{t(r,null)};case"serverStream":return e=>{e.emit("error",r)};case"bidi":return e=>{e.emit("error",r)};default:throw new Error(`Invalid handlerType ${e}`)}}let O=(()=>{var e;let t=[];let r;return e=class Server{constructor(e){var r,i,s,o,l,u;this.boundPorts=(n(this,t),new Map);this.http2Servers=new Map;this.sessionIdleTimeouts=new Map;this.handlers=new Map;this.sessions=new Map;this.started=false;this.shutdown=false;this.serverAddressString="null";this.channelzEnabled=true;this.options=e!==null&&e!==void 0?e:{};if(this.options["grpc.enable_channelz"]===0){this.channelzEnabled=false;this.channelzTrace=new v.ChannelzTraceStub;this.callTracker=new v.ChannelzCallTrackerStub;this.listenerChildrenTracker=new v.ChannelzChildrenTrackerStub;this.sessionChildrenTracker=new v.ChannelzChildrenTrackerStub}else{this.channelzTrace=new v.ChannelzTrace;this.callTracker=new v.ChannelzCallTracker;this.listenerChildrenTracker=new v.ChannelzChildrenTracker;this.sessionChildrenTracker=new v.ChannelzChildrenTracker}this.channelzRef=(0,v.registerChannelzServer)("server",(()=>this.getChannelzInfo()),this.channelzEnabled);this.channelzTrace.addTrace("CT_INFO","Server created");this.maxConnectionAgeMs=(r=this.options["grpc.max_connection_age_ms"])!==null&&r!==void 0?r:b;this.maxConnectionAgeGraceMs=(i=this.options["grpc.max_connection_age_grace_ms"])!==null&&i!==void 0?i:b;this.keepaliveTimeMs=(s=this.options["grpc.keepalive_time_ms"])!==null&&s!==void 0?s:C;this.keepaliveTimeoutMs=(o=this.options["grpc.keepalive_timeout_ms"])!==null&&o!==void 0?o:w;this.sessionIdleTimeout=(l=this.options["grpc.max_connection_idle_ms"])!==null&&l!==void 0?l:I;this.commonServerOptions={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};if("grpc-node.max_session_memory"in this.options){this.commonServerOptions.maxSessionMemory=this.options["grpc-node.max_session_memory"]}else{this.commonServerOptions.maxSessionMemory=Number.MAX_SAFE_INTEGER}if("grpc.max_concurrent_streams"in this.options){this.commonServerOptions.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]}}this.interceptors=(u=this.options.interceptors)!==null&&u!==void 0?u:[];this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfo(e){var t,r,n;const i=this.sessions.get(e);const s=e.socket;const o=s.remoteAddress?(0,y.stringToSubchannelAddress)(s.remoteAddress,s.remotePort):null;const l=s.localAddress?(0,y.stringToSubchannelAddress)(s.localAddress,s.localPort):null;let u;if(e.encrypted){const e=s;const r=e.getCipher();const n=e.getCertificate();const i=e.getPeerCertificate();u={cipherSuiteStandardName:(t=r.standardName)!==null&&t!==void 0?t:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:n&&"raw"in n?n.raw:null,remoteCertificate:i&&"raw"in i?i.raw:null}}else{u=null}const p={remoteAddress:o,localAddress:l,security:u,remoteName:null,streamsStarted:i.streamTracker.callsStarted,streamsSucceeded:i.streamTracker.callsSucceeded,streamsFailed:i.streamTracker.callsFailed,messagesSent:i.messagesSent,messagesReceived:i.messagesReceived,keepAlivesSent:i.keepAlivesSent,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:i.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:i.lastMessageSentTimestamp,lastMessageReceivedTimestamp:i.lastMessageReceivedTimestamp,localFlowControlWindow:(r=e.state.localWindowSize)!==null&&r!==void 0?r:null,remoteFlowControlWindow:(n=e.state.remoteWindowSize)!==null&&n!==void 0?n:null};return p}trace(e){m.trace(l.LogVerbosity.DEBUG,k,"("+this.channelzRef.id+") "+e)}keepaliveTrace(e){m.trace(l.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,t){if(e===null||typeof e!=="object"||t===null||typeof t!=="object"){throw new Error("addService() requires two objects as arguments")}const r=Object.keys(e);if(r.length===0){throw new Error("Cannot add an empty service to a server")}r.forEach((r=>{const n=e[r];let i;if(n.requestStream){if(n.responseStream){i="bidi"}else{i="clientStream"}}else{if(n.responseStream){i="serverStream"}else{i="unary"}}let s=t[r];let o;if(s===undefined&&typeof n.originalName==="string"){s=t[n.originalName]}if(s!==undefined){o=s.bind(t)}else{o=getDefaultHandler(i,r)}const l=this.register(n.path,o,n.responseSerialize,n.requestDeserialize,i);if(l===false){throw new Error(`Method handler for ${n.path} already provided.`)}}))}removeService(e){if(e===null||typeof e!=="object"){throw new Error("removeService() requires object as argument")}const t=Object.keys(e);t.forEach((t=>{const r=e[t];this.unregister(r.path)}))}bind(e,t){throw new Error("Not implemented. Use bindAsync() instead")}experimentalRegisterListenerToChannelz(e){return(0,v.registerChannelzSocket)((0,y.subchannelAddressToString)(e),(()=>({localAddress:e,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null})),this.channelzEnabled)}experimentalUnregisterListenerFromChannelz(e){(0,v.unregisterChannelzRef)(e)}createHttp2Server(e){let t;if(e._isSecure()){const r=e._getConstructorOptions();const n=e._getSecureContextOptions();const i=Object.assign(Object.assign(Object.assign(Object.assign({},this.commonServerOptions),r),n),{enableTrace:this.options["grpc-node.tls_enable_trace"]===1});let o=n!==null;this.trace("Initial credentials valid: "+o);t=s.createSecureServer(i);t.prependListener("connection",(e=>{if(!o){this.trace("Dropped connection from "+JSON.stringify(e.address())+" due to unloaded credentials");e.destroy()}}));t.on("secureConnection",(e=>{e.on("error",(e=>{this.trace("An incoming TLS connection closed with error: "+e.message)}))}));const credsWatcher=e=>{if(e){const r=t;try{r.setSecureContext(e)}catch(t){m.log(l.LogVerbosity.ERROR,"Failed to set secure context with error "+t.message);e=null}}o=e!==null;this.trace("Post-update credentials valid: "+o)};e._addWatcher(credsWatcher);t.on("close",(()=>{e._removeWatcher(credsWatcher)}))}else{t=s.createServer(this.commonServerOptions)}t.setTimeout(0,noop);this._setupHandlers(t,e._getInterceptors());return t}bindOneAddress(e,t){this.trace("Attempting to bind "+(0,y.subchannelAddressToString)(e));const r=this.createHttp2Server(t.credentials);return new Promise(((n,i)=>{const onError=t=>{this.trace("Failed to bind "+(0,y.subchannelAddressToString)(e)+" with error "+t.message);n({port:"port"in e?e.port:1,error:t.message})};r.once("error",onError);r.listen(e,(()=>{const e=r.address();let i;if(typeof e==="string"){i={path:e}}else{i={host:e.address,port:e.port}}const s=this.experimentalRegisterListenerToChannelz(i);this.listenerChildrenTracker.refChild(s);this.http2Servers.set(r,{channelzRef:s,sessions:new Set,ownsChannelzRef:true});t.listeningServers.add(r);this.trace("Successfully bound "+(0,y.subchannelAddressToString)(i));n({port:"port"in i?i.port:1});r.removeListener("error",onError)}))}))}async bindManyPorts(e,t){if(e.length===0){return{count:0,port:0,errors:[]}}if((0,y.isTcpSubchannelAddress)(e[0])&&e[0].port===0){const r=await this.bindOneAddress(e[0],t);if(r.error){const n=await this.bindManyPorts(e.slice(1),t);return Object.assign(Object.assign({},n),{errors:[r.error,...n.errors]})}else{const n=e.slice(1).map((e=>(0,y.isTcpSubchannelAddress)(e)?{host:e.host,port:r.port}:e));const i=await Promise.all(n.map((e=>this.bindOneAddress(e,t))));const s=[r,...i];return{count:s.filter((e=>e.error===undefined)).length,port:r.port,errors:s.filter((e=>e.error)).map((e=>e.error))}}}else{const r=await Promise.all(e.map((e=>this.bindOneAddress(e,t))));return{count:r.filter((e=>e.error===undefined)).length,port:r[0].port,errors:r.filter((e=>e.error)).map((e=>e.error))}}}async bindAddressList(e,t){const r=await this.bindManyPorts(e,t);if(r.count>0){if(r.count<e.length){m.log(l.LogVerbosity.INFO,`WARNING Only ${r.count} addresses added out of total ${e.length} resolved`)}return r.port}else{const t=`No address added out of total ${e.length} resolved`;m.log(l.LogVerbosity.ERROR,t);throw new Error(`${t} errors: [${r.errors.join(",")}]`)}}resolvePort(e){return new Promise(((t,r)=>{const n={onSuccessfulResolution:(i,s,o)=>{n.onSuccessfulResolution=()=>{};const l=[].concat(...i.map((e=>e.addresses)));if(l.length===0){r(new Error(`No addresses resolved for port ${e}`));return}t(l)},onError:e=>{r(new Error(e.details))}};const i=(0,g.createResolver)(e,n,this.options);i.updateResolution()}))}async bindPort(e,t){const r=await this.resolvePort(e);if(t.cancelled){this.completeUnbind(t);throw new Error("bindAsync operation cancelled by unbind call")}const n=await this.bindAddressList(r,t);if(t.cancelled){this.completeUnbind(t);throw new Error("bindAsync operation cancelled by unbind call")}return n}normalizePort(e){const t=(0,_.parseUri)(e);if(t===null){throw new Error(`Could not parse port "${e}"`)}const r=(0,g.mapUriDefaultScheme)(t);if(r===null){throw new Error(`Could not get a default scheme for port "${e}"`)}return r}bindAsync(e,t,r){if(this.shutdown){throw new Error("bindAsync called after shutdown")}if(typeof e!=="string"){throw new TypeError("port must be a string")}if(t===null||!(t instanceof p.ServerCredentials)){throw new TypeError("creds must be a ServerCredentials object")}if(typeof r!=="function"){throw new TypeError("callback must be a function")}this.trace("bindAsync port="+e);const n=this.normalizePort(e);const deferredCallback=(e,t)=>{process.nextTick((()=>r(e,t)))};let i=this.boundPorts.get((0,_.uriToString)(n));if(i){if(!t._equals(i.credentials)){deferredCallback(new Error(`${e} already bound with incompatible credentials`),0);return}i.cancelled=false;if(i.completionPromise){i.completionPromise.then((e=>r(null,e)),(e=>r(e,0)))}else{deferredCallback(null,i.portNumber)}return}i={mapKey:(0,_.uriToString)(n),originalUri:n,completionPromise:null,cancelled:false,portNumber:0,credentials:t,listeningServers:new Set};const s=(0,_.splitHostPort)(n.path);const o=this.bindPort(n,i);i.completionPromise=o;if((s===null||s===void 0?void 0:s.port)===0){o.then((e=>{const t={scheme:n.scheme,authority:n.authority,path:(0,_.combineHostPort)({host:s.host,port:e})};i.mapKey=(0,_.uriToString)(t);i.completionPromise=null;i.portNumber=e;this.boundPorts.set(i.mapKey,i);r(null,e)}),(e=>{r(e,0)}))}else{this.boundPorts.set(i.mapKey,i);o.then((e=>{i.completionPromise=null;i.portNumber=e;r(null,e)}),(e=>{r(e,0)}))}}registerInjectorToChannelz(){return(0,v.registerChannelzSocket)("injector",(()=>({localAddress:null,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null})),this.channelzEnabled)}experimentalCreateConnectionInjectorWithChannelzRef(e,t,r=false){if(e===null||!(e instanceof p.ServerCredentials)){throw new TypeError("creds must be a ServerCredentials object")}if(this.channelzEnabled){this.listenerChildrenTracker.refChild(t)}const n=this.createHttp2Server(e);const i=new Set;this.http2Servers.set(n,{channelzRef:t,sessions:i,ownsChannelzRef:r});return{injectConnection:e=>{n.emit("connection",e)},drain:e=>{var t,r;for(const e of i){this.closeSession(e)}(r=(t=setTimeout((()=>{for(const e of i){e.destroy(s.constants.NGHTTP2_CANCEL)}}),e)).unref)===null||r===void 0?void 0:r.call(t)},destroy:()=>{this.closeServer(n);for(const e of i){this.closeSession(e)}}}}createConnectionInjector(e){if(e===null||!(e instanceof p.ServerCredentials)){throw new TypeError("creds must be a ServerCredentials object")}const t=this.registerInjectorToChannelz();return this.experimentalCreateConnectionInjectorWithChannelzRef(e,t,true)}closeServer(e,t){this.trace("Closing server with address "+JSON.stringify(e.address()));const r=this.http2Servers.get(e);e.close((()=>{if(r&&r.ownsChannelzRef){this.listenerChildrenTracker.unrefChild(r.channelzRef);(0,v.unregisterChannelzRef)(r.channelzRef)}this.http2Servers.delete(e);t===null||t===void 0?void 0:t()}))}closeSession(e,t){var r;this.trace("Closing session initiated by "+((r=e.socket)===null||r===void 0?void 0:r.remoteAddress));const n=this.sessions.get(e);const closeCallback=()=>{if(n){this.sessionChildrenTracker.unrefChild(n.ref);(0,v.unregisterChannelzRef)(n.ref)}t===null||t===void 0?void 0:t()};if(e.closed){queueMicrotask(closeCallback)}else{e.close(closeCallback)}}completeUnbind(e){for(const t of e.listeningServers){const r=this.http2Servers.get(t);this.closeServer(t,(()=>{e.listeningServers.delete(t)}));if(r){for(const e of r.sessions){this.closeSession(e)}}}this.boundPorts.delete(e.mapKey)}unbind(e){this.trace("unbind port="+e);const t=this.normalizePort(e);const r=(0,_.splitHostPort)(t.path);if((r===null||r===void 0?void 0:r.port)===0){throw new Error("Cannot unbind port 0")}const n=this.boundPorts.get((0,_.uriToString)(t));if(n){this.trace("unbinding "+n.mapKey+" originally bound as "+(0,_.uriToString)(n.originalUri));if(n.completionPromise){n.cancelled=true}else{this.completeUnbind(n)}}}drain(e,t){var r,n;this.trace("drain port="+e+" graceTimeMs="+t);const i=this.normalizePort(e);const o=(0,_.splitHostPort)(i.path);if((o===null||o===void 0?void 0:o.port)===0){throw new Error("Cannot drain port 0")}const l=this.boundPorts.get((0,_.uriToString)(i));if(!l){return}const u=new Set;for(const e of l.listeningServers){const t=this.http2Servers.get(e);if(t){for(const e of t.sessions){u.add(e);this.closeSession(e,(()=>{u.delete(e)}))}}}(n=(r=setTimeout((()=>{for(const e of u){e.destroy(s.constants.NGHTTP2_CANCEL)}}),t)).unref)===null||n===void 0?void 0:n.call(r)}forceShutdown(){for(const e of this.boundPorts.values()){e.cancelled=true}this.boundPorts.clear();for(const e of this.http2Servers.keys()){this.closeServer(e)}this.sessions.forEach(((e,t)=>{this.closeSession(t);t.destroy(s.constants.NGHTTP2_CANCEL)}));this.sessions.clear();(0,v.unregisterChannelzRef)(this.channelzRef);this.shutdown=true}register(e,t,r,n,i){if(this.handlers.has(e)){return false}this.handlers.set(e,{func:t,serialize:r,deserialize:n,type:i,path:e});return true}unregister(e){return this.handlers.delete(e)}start(){if(this.http2Servers.size===0||[...this.http2Servers.keys()].every((e=>!e.listening))){throw new Error("server must be bound in order to start")}if(this.started===true){throw new Error("server is already started")}this.started=true}tryShutdown(e){var t;const wrappedCallback=t=>{(0,v.unregisterChannelzRef)(this.channelzRef);e(t)};let r=0;function maybeCallback(){r--;if(r===0){wrappedCallback()}}this.shutdown=true;for(const[e,n]of this.http2Servers.entries()){r++;const i=n.channelzRef.name;this.trace("Waiting for server "+i+" to close");this.closeServer(e,(()=>{this.trace("Server "+i+" finished closing");maybeCallback()}));for(const e of n.sessions.keys()){r++;const n=(t=e.socket)===null||t===void 0?void 0:t.remoteAddress;this.trace("Waiting for session "+n+" to close");this.closeSession(e,(()=>{this.trace("Session "+n+" finished closing");maybeCallback()}))}}if(r===0){wrappedCallback()}}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){const r=t[s.constants.HTTP2_HEADER_CONTENT_TYPE];if(typeof r!=="string"||!r.startsWith("application/grpc")){e.respond({[s.constants.HTTP2_HEADER_STATUS]:s.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:true});return false}return true}_retrieveHandler(e){serverCallTrace("Received call to method "+e+" at address "+this.serverAddressString);const t=this.handlers.get(e);if(t===undefined){serverCallTrace("No handler registered for method "+e+". Sending UNIMPLEMENTED status.");return null}return t}_respondWithError(e,t,r=null){var n,i;const o=Object.assign({"grpc-status":(n=e.code)!==null&&n!==void 0?n:l.Status.INTERNAL,"grpc-message":e.details,[s.constants.HTTP2_HEADER_STATUS]:s.constants.HTTP_STATUS_OK,[s.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},(i=e.metadata)===null||i===void 0?void 0:i.toHttp2Headers());t.respond(o,{endStream:true});this.callTracker.addCallFailed();r===null||r===void 0?void 0:r.streamTracker.addCallFailed()}_channelzHandler(e,t,r){this.onStreamOpened(t);const n=this.sessions.get(t.session);this.callTracker.addCallStarted();n===null||n===void 0?void 0:n.streamTracker.addCallStarted();if(!this._verifyContentType(t,r)){this.callTracker.addCallFailed();n===null||n===void 0?void 0:n.streamTracker.addCallFailed();return}const i=r[T];const s=this._retrieveHandler(i);if(!s){this._respondWithError(getUnimplementedStatusResponse(i),t,n);return}const o={addMessageSent:()=>{if(n){n.messagesSent+=1;n.lastMessageSentTimestamp=new Date}},addMessageReceived:()=>{if(n){n.messagesReceived+=1;n.lastMessageReceivedTimestamp=new Date}},onCallEnd:e=>{if(e.code===l.Status.OK){this.callTracker.addCallSucceeded()}else{this.callTracker.addCallFailed()}},onStreamEnd:e=>{if(n){if(e){n.streamTracker.addCallSucceeded()}else{n.streamTracker.addCallFailed()}}}};const u=(0,E.getServerInterceptingCall)([...e,...this.interceptors],t,r,o,s,this.options);if(!this._runHandlerForCall(u,s)){this.callTracker.addCallFailed();n===null||n===void 0?void 0:n.streamTracker.addCallFailed();u.sendStatus({code:l.Status.INTERNAL,details:`Unknown handler type: ${s.type}`})}}_streamHandler(e,t,r){this.onStreamOpened(t);if(this._verifyContentType(t,r)!==true){return}const n=r[T];const i=this._retrieveHandler(n);if(!i){this._respondWithError(getUnimplementedStatusResponse(n),t,null);return}const s=(0,E.getServerInterceptingCall)([...e,...this.interceptors],t,r,null,i,this.options);if(!this._runHandlerForCall(s,i)){s.sendStatus({code:l.Status.INTERNAL,details:`Unknown handler type: ${i.type}`})}}_runHandlerForCall(e,t){const{type:r}=t;if(r==="unary"){handleUnary(e,t)}else if(r==="clientStream"){handleClientStreaming(e,t)}else if(r==="serverStream"){handleServerStreaming(e,t)}else if(r==="bidi"){handleBidiStreaming(e,t)}else{return false}return true}_setupHandlers(e,t){if(e===null){return}const r=e.address();let n="null";if(r){if(typeof r==="string"){n=r}else{n=r.address+":"+r.port}}this.serverAddressString=n;const i=this.channelzEnabled?this._channelzHandler:this._streamHandler;const s=this.channelzEnabled?this._channelzSessionHandler(e):this._sessionHandler(e);e.on("stream",i.bind(this,t));e.on("session",s)}_sessionHandler(e){return t=>{var r,n;(r=this.http2Servers.get(e))===null||r===void 0?void 0:r.sessions.add(t);let i=null;let o=null;let l=null;let u=false;const p=this.enableIdleTimeout(t);if(this.maxConnectionAgeMs!==b){const e=this.maxConnectionAgeMs/10;const r=Math.random()*e*2-e;i=setTimeout((()=>{var e,r;u=true;this.trace("Connection dropped by max connection age: "+((e=t.socket)===null||e===void 0?void 0:e.remoteAddress));try{t.goaway(s.constants.NGHTTP2_NO_ERROR,~(1<<31),R)}catch(e){t.destroy();return}t.close();if(this.maxConnectionAgeGraceMs!==b){o=setTimeout((()=>{t.destroy()}),this.maxConnectionAgeGraceMs);(r=o.unref)===null||r===void 0?void 0:r.call(o)}}),this.maxConnectionAgeMs+r);(n=i.unref)===null||n===void 0?void 0:n.call(i)}const clearKeepaliveTimeout=()=>{if(l){clearTimeout(l);l=null}};const canSendPing=()=>!t.destroyed&&this.keepaliveTimeMs<C&&this.keepaliveTimeMs>0;let g;const maybeStartKeepalivePingTimer=()=>{var e;if(!canSendPing()){return}this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms");l=setTimeout((()=>{clearKeepaliveTimeout();g()}),this.keepaliveTimeMs);(e=l.unref)===null||e===void 0?void 0:e.call(l)};g=()=>{var e;if(!canSendPing()){return}this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let r="";try{const e=t.ping(((e,r,n)=>{clearKeepaliveTimeout();if(e){this.keepaliveTrace("Ping failed with error: "+e.message);u=true;t.close()}else{this.keepaliveTrace("Received ping response");maybeStartKeepalivePingTimer()}}));if(!e){r="Ping returned false"}}catch(e){r=(e instanceof Error?e.message:"")||"Unknown error"}if(r){this.keepaliveTrace("Ping send failed: "+r);this.trace("Connection dropped due to ping send error: "+r);u=true;t.close();return}l=setTimeout((()=>{clearKeepaliveTimeout();this.keepaliveTrace("Ping timeout passed without response");this.trace("Connection dropped by keepalive timeout");u=true;t.close()}),this.keepaliveTimeoutMs);(e=l.unref)===null||e===void 0?void 0:e.call(l)};maybeStartKeepalivePingTimer();t.on("close",(()=>{var r,n;if(!u){this.trace(`Connection dropped by client ${(r=t.socket)===null||r===void 0?void 0:r.remoteAddress}`)}if(i){clearTimeout(i)}if(o){clearTimeout(o)}clearKeepaliveTimeout();if(p!==null){clearTimeout(p.timeout);this.sessionIdleTimeouts.delete(t)}(n=this.http2Servers.get(e))===null||n===void 0?void 0:n.sessions.delete(t)}))}}_channelzSessionHandler(e){return t=>{var r,n,i,o;const l=(0,v.registerChannelzSocket)((n=(r=t.socket)===null||r===void 0?void 0:r.remoteAddress)!==null&&n!==void 0?n:"unknown",this.getChannelzSessionInfo.bind(this,t),this.channelzEnabled);const u={ref:l,streamTracker:new v.ChannelzCallTracker,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};(i=this.http2Servers.get(e))===null||i===void 0?void 0:i.sessions.add(t);this.sessions.set(t,u);const p=`${t.socket.remoteAddress}:${t.socket.remotePort}`;this.channelzTrace.addTrace("CT_INFO","Connection established by client "+p);this.trace("Connection established by client "+p);this.sessionChildrenTracker.refChild(l);let g=null;let m=null;let y=null;let _=false;const E=this.enableIdleTimeout(t);if(this.maxConnectionAgeMs!==b){const e=this.maxConnectionAgeMs/10;const r=Math.random()*e*2-e;g=setTimeout((()=>{var e;_=true;this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+p);try{t.goaway(s.constants.NGHTTP2_NO_ERROR,~(1<<31),R)}catch(e){t.destroy();return}t.close();if(this.maxConnectionAgeGraceMs!==b){m=setTimeout((()=>{t.destroy()}),this.maxConnectionAgeGraceMs);(e=m.unref)===null||e===void 0?void 0:e.call(m)}}),this.maxConnectionAgeMs+r);(o=g.unref)===null||o===void 0?void 0:o.call(g)}const clearKeepaliveTimeout=()=>{if(y){clearTimeout(y);y=null}};const canSendPing=()=>!t.destroyed&&this.keepaliveTimeMs<C&&this.keepaliveTimeMs>0;let w;const maybeStartKeepalivePingTimer=()=>{var e;if(!canSendPing()){return}this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms");y=setTimeout((()=>{clearKeepaliveTimeout();w()}),this.keepaliveTimeMs);(e=y.unref)===null||e===void 0?void 0:e.call(y)};w=()=>{var e;if(!canSendPing()){return}this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");let r="";try{const e=t.ping(((e,r,n)=>{clearKeepaliveTimeout();if(e){this.keepaliveTrace("Ping failed with error: "+e.message);this.channelzTrace.addTrace("CT_INFO","Connection dropped due to error of a ping frame "+e.message+" return in "+r);_=true;t.close()}else{this.keepaliveTrace("Received ping response");maybeStartKeepalivePingTimer()}}));if(!e){r="Ping returned false"}}catch(e){r=(e instanceof Error?e.message:"")||"Unknown error"}if(r){this.keepaliveTrace("Ping send failed: "+r);this.channelzTrace.addTrace("CT_INFO","Connection dropped due to ping send error: "+r);_=true;t.close();return}u.keepAlivesSent+=1;y=setTimeout((()=>{clearKeepaliveTimeout();this.keepaliveTrace("Ping timeout passed without response");this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+p);_=true;t.close()}),this.keepaliveTimeoutMs);(e=y.unref)===null||e===void 0?void 0:e.call(y)};maybeStartKeepalivePingTimer();t.on("close",(()=>{var r;if(!_){this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+p)}this.sessionChildrenTracker.unrefChild(l);(0,v.unregisterChannelzRef)(l);if(g){clearTimeout(g)}if(m){clearTimeout(m)}clearKeepaliveTimeout();if(E!==null){clearTimeout(E.timeout);this.sessionIdleTimeouts.delete(t)}(r=this.http2Servers.get(e))===null||r===void 0?void 0:r.sessions.delete(t);this.sessions.delete(t)}))}}enableIdleTimeout(e){var t,r;if(this.sessionIdleTimeout>=I){return null}const n={activeStreams:0,lastIdle:Date.now(),onClose:this.onStreamClose.bind(this,e),timeout:setTimeout(this.onIdleTimeout,this.sessionIdleTimeout,this,e)};(r=(t=n.timeout).unref)===null||r===void 0?void 0:r.call(t);this.sessionIdleTimeouts.set(e,n);const{socket:i}=e;this.trace("Enable idle timeout for "+i.remoteAddress+":"+i.remotePort);return n}onIdleTimeout(e,t){const{socket:r}=t;const n=e.sessionIdleTimeouts.get(t);if(n!==undefined&&n.activeStreams===0){if(Date.now()-n.lastIdle>=e.sessionIdleTimeout){e.trace("Session idle timeout triggered for "+(r===null||r===void 0?void 0:r.remoteAddress)+":"+(r===null||r===void 0?void 0:r.remotePort)+" last idle at "+n.lastIdle);e.closeSession(t)}else{n.timeout.refresh()}}}onStreamOpened(e){const t=e.session;const r=this.sessionIdleTimeouts.get(t);if(r){r.activeStreams+=1;e.once("close",r.onClose)}}onStreamClose(e){var t,r;const n=this.sessionIdleTimeouts.get(e);if(n){n.activeStreams-=1;if(n.activeStreams===0){n.lastIdle=Date.now();n.timeout.refresh();this.trace("Session onStreamClose"+((t=e.socket)===null||t===void 0?void 0:t.remoteAddress)+":"+((r=e.socket)===null||r===void 0?void 0:r.remotePort)+" at "+n.lastIdle)}}}},(()=>{const n=typeof Symbol==="function"&&Symbol.metadata?Object.create(null):void 0;r=[deprecate("Calling start() is no longer necessary. It can be safely omitted.")];i(e,null,r,{kind:"method",name:"start",static:false,private:false,access:{has:e=>"start"in e,get:e=>e.start},metadata:n},null,t);if(n)Object.defineProperty(e,Symbol.metadata,{enumerable:true,configurable:true,writable:true,value:n})})(),e})();t.Server=O;async function handleUnary(e,t){let r;function respond(t,r,n,i){if(t){e.sendStatus((0,u.serverErrorToStatus)(t,n));return}e.sendMessage(r,(()=>{e.sendStatus({code:l.Status.OK,details:"OK",metadata:n!==null&&n!==void 0?n:null})}))}let n;let i=null;e.start({onReceiveMetadata(t){n=t;e.startRead()},onReceiveMessage(r){if(i){e.sendStatus({code:l.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${t.path}`,metadata:null});return}i=r;e.startRead()},onReceiveHalfClose(){if(!i){e.sendStatus({code:l.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${t.path}`,metadata:null});return}r=new u.ServerWritableStreamImpl(t.path,e,n,i);try{t.func(r,respond)}catch(t){e.sendStatus({code:l.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}},onCancel(){if(r){r.cancelled=true;r.emit("cancelled","cancelled")}}})}function handleClientStreaming(e,t){let r;function respond(t,r,n,i){if(t){e.sendStatus((0,u.serverErrorToStatus)(t,n));return}e.sendMessage(r,(()=>{e.sendStatus({code:l.Status.OK,details:"OK",metadata:n!==null&&n!==void 0?n:null})}))}e.start({onReceiveMetadata(n){r=new u.ServerDuplexStreamImpl(t.path,e,n);try{t.func(r,respond)}catch(t){e.sendStatus({code:l.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}},onReceiveMessage(e){r.push(e)},onReceiveHalfClose(){r.push(null)},onCancel(){if(r){r.cancelled=true;r.emit("cancelled","cancelled");r.destroy()}}})}function handleServerStreaming(e,t){let r;let n;let i=null;e.start({onReceiveMetadata(t){n=t;e.startRead()},onReceiveMessage(r){if(i){e.sendStatus({code:l.Status.UNIMPLEMENTED,details:`Received a second request message for server streaming method ${t.path}`,metadata:null});return}i=r;e.startRead()},onReceiveHalfClose(){if(!i){e.sendStatus({code:l.Status.UNIMPLEMENTED,details:`Received no request message for server streaming method ${t.path}`,metadata:null});return}r=new u.ServerWritableStreamImpl(t.path,e,n,i);try{t.func(r)}catch(t){e.sendStatus({code:l.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}},onCancel(){if(r){r.cancelled=true;r.emit("cancelled","cancelled");r.destroy()}}})}function handleBidiStreaming(e,t){let r;e.start({onReceiveMetadata(n){r=new u.ServerDuplexStreamImpl(t.path,e,n);try{t.func(r)}catch(t){e.sendStatus({code:l.Status.UNKNOWN,details:`Server method handler threw error ${t.message}`,metadata:null})}},onReceiveMessage(e){r.push(e)},onReceiveHalfClose(){r.push(null)},onCancel(){if(r){r.cancelled=true;r.emit("cancelled","cancelled");r.destroy()}}})}},5:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.validateRetryThrottling=validateRetryThrottling;t.validateServiceConfig=validateServiceConfig;t.extractAndSelectServiceConfig=extractAndSelectServiceConfig;const n=r(857);const i=r(8288);const s=/^\d+(\.\d{1,9})?s$/;const o="node";function validateName(e){if("service"in e&&e.service!==""){if(typeof e.service!=="string"){throw new Error(`Invalid method config name: invalid service: expected type string, got ${typeof e.service}`)}if("method"in e&&e.method!==""){if(typeof e.method!=="string"){throw new Error(`Invalid method config name: invalid method: expected type string, got ${typeof e.service}`)}return{service:e.service,method:e.method}}else{return{service:e.service}}}else{if("method"in e&&e.method!==undefined){throw new Error(`Invalid method config name: method set with empty or unset service`)}return{}}}function validateRetryPolicy(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2){throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2")}if(!("initialBackoff"in e)||typeof e.initialBackoff!=="string"||!s.test(e.initialBackoff)){throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer or decimal followed by s")}if(!("maxBackoff"in e)||typeof e.maxBackoff!=="string"||!s.test(e.maxBackoff)){throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer or decimal followed by s")}if(!("backoffMultiplier"in e)||typeof e.backoffMultiplier!=="number"||e.backoffMultiplier<=0){throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0")}if(!("retryableStatusCodes"in e&&Array.isArray(e.retryableStatusCodes))){throw new Error("Invalid method config retry policy: retryableStatusCodes is required")}if(e.retryableStatusCodes.length===0){throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty")}for(const t of e.retryableStatusCodes){if(typeof t==="number"){if(!Object.values(i.Status).includes(t)){throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}}else if(typeof t==="string"){if(!Object.values(i.Status).includes(t.toUpperCase())){throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}}else{throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number")}}return{maxAttempts:e.maxAttempts,initialBackoff:e.initialBackoff,maxBackoff:e.maxBackoff,backoffMultiplier:e.backoffMultiplier,retryableStatusCodes:e.retryableStatusCodes}}function validateHedgingPolicy(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2){throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2")}if("hedgingDelay"in e&&(typeof e.hedgingDelay!=="string"||!s.test(e.hedgingDelay))){throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s")}if("nonFatalStatusCodes"in e&&Array.isArray(e.nonFatalStatusCodes)){for(const t of e.nonFatalStatusCodes){if(typeof t==="number"){if(!Object.values(i.Status).includes(t)){throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value not in status code range")}}else if(typeof t==="string"){if(!Object.values(i.Status).includes(t.toUpperCase())){throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value not a status code name")}}else{throw new Error("Invalid method config hedging policy: nonFatalStatusCodes value must be a string or number")}}}const t={maxAttempts:e.maxAttempts};if(e.hedgingDelay){t.hedgingDelay=e.hedgingDelay}if(e.nonFatalStatusCodes){t.nonFatalStatusCodes=e.nonFatalStatusCodes}return t}function validateMethodConfig(e){var t;const r={name:[]};if(!("name"in e)||!Array.isArray(e.name)){throw new Error("Invalid method config: invalid name array")}for(const t of e.name){r.name.push(validateName(t))}if("waitForReady"in e){if(typeof e.waitForReady!=="boolean"){throw new Error("Invalid method config: invalid waitForReady")}r.waitForReady=e.waitForReady}if("timeout"in e){if(typeof e.timeout==="object"){if(!("seconds"in e.timeout)||!(typeof e.timeout.seconds==="number")){throw new Error("Invalid method config: invalid timeout.seconds")}if(!("nanos"in e.timeout)||!(typeof e.timeout.nanos==="number")){throw new Error("Invalid method config: invalid timeout.nanos")}r.timeout=e.timeout}else if(typeof e.timeout==="string"&&s.test(e.timeout)){const n=e.timeout.substring(0,e.timeout.length-1).split(".");r.timeout={seconds:n[0]|0,nanos:((t=n[1])!==null&&t!==void 0?t:0)|0}}else{throw new Error("Invalid method config: invalid timeout")}}if("maxRequestBytes"in e){if(typeof e.maxRequestBytes!=="number"){throw new Error("Invalid method config: invalid maxRequestBytes")}r.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if(typeof e.maxResponseBytes!=="number"){throw new Error("Invalid method config: invalid maxRequestBytes")}r.maxResponseBytes=e.maxResponseBytes}if("retryPolicy"in e){if("hedgingPolicy"in e){throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified")}else{r.retryPolicy=validateRetryPolicy(e.retryPolicy)}}else if("hedgingPolicy"in e){r.hedgingPolicy=validateHedgingPolicy(e.hedgingPolicy)}return r}function validateRetryThrottling(e){if(!("maxTokens"in e)||typeof e.maxTokens!=="number"||e.maxTokens<=0||e.maxTokens>1e3){throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]")}if(!("tokenRatio"in e)||typeof e.tokenRatio!=="number"||e.tokenRatio<=0){throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0")}return{maxTokens:+e.maxTokens.toFixed(3),tokenRatio:+e.tokenRatio.toFixed(3)}}function validateLoadBalancingConfig(e){if(!(typeof e==="object"&&e!==null)){throw new Error(`Invalid loadBalancingConfig: unexpected type ${typeof e}`)}const t=Object.keys(e);if(t.length>1){throw new Error(`Invalid loadBalancingConfig: unexpected multiple keys ${t}`)}if(t.length===0){throw new Error("Invalid loadBalancingConfig: load balancing policy name required")}return{[t[0]]:e[t[0]]}}function validateServiceConfig(e){const t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e){if(typeof e.loadBalancingPolicy==="string"){t.loadBalancingPolicy=e.loadBalancingPolicy}else{throw new Error("Invalid service config: invalid loadBalancingPolicy")}}if("loadBalancingConfig"in e){if(Array.isArray(e.loadBalancingConfig)){for(const r of e.loadBalancingConfig){t.loadBalancingConfig.push(validateLoadBalancingConfig(r))}}else{throw new Error("Invalid service config: invalid loadBalancingConfig")}}if("methodConfig"in e){if(Array.isArray(e.methodConfig)){for(const r of e.methodConfig){t.methodConfig.push(validateMethodConfig(r))}}}if("retryThrottling"in e){t.retryThrottling=validateRetryThrottling(e.retryThrottling)}const r=[];for(const e of t.methodConfig){for(const t of e.name){for(const e of r){if(t.service===e.service&&t.method===e.method){throw new Error(`Invalid service config: duplicate name ${t.service}/${t.method}`)}}r.push(t)}}return t}function validateCanaryConfig(e){if(!("serviceConfig"in e)){throw new Error("Invalid service config choice: missing service config")}const t={serviceConfig:validateServiceConfig(e.serviceConfig)};if("clientLanguage"in e){if(Array.isArray(e.clientLanguage)){t.clientLanguage=[];for(const r of e.clientLanguage){if(typeof r==="string"){t.clientLanguage.push(r)}else{throw new Error("Invalid service config choice: invalid clientLanguage")}}}else{throw new Error("Invalid service config choice: invalid clientLanguage")}}if("clientHostname"in e){if(Array.isArray(e.clientHostname)){t.clientHostname=[];for(const r of e.clientHostname){if(typeof r==="string"){t.clientHostname.push(r)}else{throw new Error("Invalid service config choice: invalid clientHostname")}}}else{throw new Error("Invalid service config choice: invalid clientHostname")}}if("percentage"in e){if(typeof e.percentage==="number"&&0<=e.percentage&&e.percentage<=100){t.percentage=e.percentage}else{throw new Error("Invalid service config choice: invalid percentage")}}const r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(const t in e){if(!r.includes(t)){throw new Error(`Invalid service config choice: unexpected field ${t}`)}}return t}function validateAndSelectCanaryConfig(e,t){if(!Array.isArray(e)){throw new Error("Invalid service config list")}for(const r of e){const e=validateCanaryConfig(r);if(typeof e.percentage==="number"&&t>e.percentage){continue}if(Array.isArray(e.clientHostname)){let t=false;for(const r of e.clientHostname){if(r===n.hostname()){t=true}}if(!t){continue}}if(Array.isArray(e.clientLanguage)){let t=false;for(const r of e.clientLanguage){if(r===o){t=true}}if(!t){continue}}return e.serviceConfig}throw new Error("No matching service config found")}function extractAndSelectServiceConfig(e,t){for(const r of e){if(r.length>0&&r[0].startsWith("grpc_config=")){const e=r.join("").substring("grpc_config=".length);const n=JSON.parse(e);return validateAndSelectCanaryConfig(n,t)}}return null}},7901:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StatusBuilder=void 0;class StatusBuilder{constructor(){this.code=null;this.details=null;this.metadata=null}withCode(e){this.code=e;return this}withDetails(e){this.details=e;return this}withMetadata(e){this.metadata=e;return this}build(){const e={};if(this.code!==null){e.code=this.code}if(this.details!==null){e.details=this.details}if(this.metadata!==null){e.metadata=this.metadata}return e}}t.StatusBuilder=StatusBuilder},7956:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StreamDecoder=void 0;var r;(function(e){e[e["NO_DATA"]=0]="NO_DATA";e[e["READING_SIZE"]=1]="READING_SIZE";e[e["READING_MESSAGE"]=2]="READING_MESSAGE"})(r||(r={}));class StreamDecoder{constructor(e){this.maxReadMessageLength=e;this.readState=r.NO_DATA;this.readCompressFlag=Buffer.alloc(1);this.readPartialSize=Buffer.alloc(4);this.readSizeRemaining=4;this.readMessageSize=0;this.readPartialMessage=[];this.readMessageRemaining=0}write(e){let t=0;let n;const i=[];while(t<e.length){switch(this.readState){case r.NO_DATA:this.readCompressFlag=e.slice(t,t+1);t+=1;this.readState=r.READING_SIZE;this.readPartialSize.fill(0);this.readSizeRemaining=4;this.readMessageSize=0;this.readMessageRemaining=0;this.readPartialMessage=[];break;case r.READING_SIZE:n=Math.min(e.length-t,this.readSizeRemaining);e.copy(this.readPartialSize,4-this.readSizeRemaining,t,t+n);this.readSizeRemaining-=n;t+=n;if(this.readSizeRemaining===0){this.readMessageSize=this.readPartialSize.readUInt32BE(0);if(this.maxReadMessageLength!==-1&&this.readMessageSize>this.maxReadMessageLength){throw new Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`)}this.readMessageRemaining=this.readMessageSize;if(this.readMessageRemaining>0){this.readState=r.READING_MESSAGE}else{const e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=r.NO_DATA;i.push(e)}}break;case r.READING_MESSAGE:n=Math.min(e.length-t,this.readMessageRemaining);this.readPartialMessage.push(e.slice(t,t+n));this.readMessageRemaining-=n;t+=n;if(this.readMessageRemaining===0){const e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage);const t=Buffer.concat(e,this.readMessageSize+5);this.readState=r.NO_DATA;i.push(t)}break;default:throw new Error("Unexpected read state")}}return i}}t.StreamDecoder=StreamDecoder},7021:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EndpointMap=void 0;t.isTcpSubchannelAddress=isTcpSubchannelAddress;t.subchannelAddressEqual=subchannelAddressEqual;t.subchannelAddressToString=subchannelAddressToString;t.stringToSubchannelAddress=stringToSubchannelAddress;t.endpointEqual=endpointEqual;t.endpointToString=endpointToString;t.endpointHasAddress=endpointHasAddress;const n=r(9278);function isTcpSubchannelAddress(e){return"port"in e}function subchannelAddressEqual(e,t){if(!e&&!t){return true}if(!e||!t){return false}if(isTcpSubchannelAddress(e)){return isTcpSubchannelAddress(t)&&e.host===t.host&&e.port===t.port}else{return!isTcpSubchannelAddress(t)&&e.path===t.path}}function subchannelAddressToString(e){if(isTcpSubchannelAddress(e)){if((0,n.isIPv6)(e.host)){return"["+e.host+"]:"+e.port}else{return e.host+":"+e.port}}else{return e.path}}const i=443;function stringToSubchannelAddress(e,t){if((0,n.isIP)(e)){return{host:e,port:t!==null&&t!==void 0?t:i}}else{return{path:e}}}function endpointEqual(e,t){if(e.addresses.length!==t.addresses.length){return false}for(let r=0;r<e.addresses.length;r++){if(!subchannelAddressEqual(e.addresses[r],t.addresses[r])){return false}}return true}function endpointToString(e){return"["+e.addresses.map(subchannelAddressToString).join(", ")+"]"}function endpointHasAddress(e,t){for(const r of e.addresses){if(subchannelAddressEqual(r,t)){return true}}return false}function endpointEqualUnordered(e,t){if(e.addresses.length!==t.addresses.length){return false}for(const r of e.addresses){let e=false;for(const n of t.addresses){if(subchannelAddressEqual(r,n)){e=true;break}}if(!e){return false}}return true}class EndpointMap{constructor(){this.map=new Set}get size(){return this.map.size}getForSubchannelAddress(e){for(const t of this.map){if(endpointHasAddress(t.key,e)){return t.value}}return undefined}deleteMissing(e){const t=[];for(const r of this.map){let n=false;for(const t of e){if(endpointEqualUnordered(t,r.key)){n=true}}if(!n){t.push(r.value);this.map.delete(r)}}return t}get(e){for(const t of this.map){if(endpointEqualUnordered(e,t.key)){return t.value}}return undefined}set(e,t){for(const r of this.map){if(endpointEqualUnordered(e,r.key)){r.value=t;return}}this.map.add({key:e,value:t})}delete(e){for(const t of this.map){if(endpointEqualUnordered(e,t.key)){this.map.delete(t);return}}}has(e){for(const t of this.map){if(endpointEqualUnordered(e,t.key)){return true}}return false}clear(){this.map.clear()}*keys(){for(const e of this.map){yield e.key}}*values(){for(const e of this.map){yield e.value}}*entries(){for(const e of this.map){yield[e.key,e.value]}}}t.EndpointMap=EndpointMap},7953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Http2SubchannelCall=void 0;const n=r(5675);const i=r(857);const s=r(8288);const o=r(6100);const l=r(7956);const u=r(8536);const p=r(8288);const g="subchannel_call";function getSystemErrorName(e){for(const[t,r]of Object.entries(i.constants.errno)){if(r===e){return t}}return"Unknown system error "+e}function mapHttpStatusCode(e){const t=`Received HTTP status code ${e}`;let r;switch(e){case 400:r=s.Status.INTERNAL;break;case 401:r=s.Status.UNAUTHENTICATED;break;case 403:r=s.Status.PERMISSION_DENIED;break;case 404:r=s.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:r=s.Status.UNAVAILABLE;break;default:r=s.Status.UNKNOWN}return{code:r,details:t,metadata:new o.Metadata}}class Http2SubchannelCall{constructor(e,t,r,i,u){var p;this.http2Stream=e;this.callEventTracker=t;this.listener=r;this.transport=i;this.callId=u;this.isReadFilterPending=false;this.isPushPending=false;this.canPush=false;this.readsClosed=false;this.statusOutput=false;this.unpushedReadMessages=[];this.finalStatus=null;this.internalError=null;this.serverEndedCall=false;this.connectionDropped=false;const g=(p=i.getOptions()["grpc.max_receive_message_length"])!==null&&p!==void 0?p:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new l.StreamDecoder(g);e.on("response",((e,t)=>{let r="";for(const t of Object.keys(e)){r+="\t\t"+t+": "+e[t]+"\n"}this.trace("Received server headers:\n"+r);this.httpStatusCode=e[":status"];if(t&n.constants.NGHTTP2_FLAG_END_STREAM){this.handleTrailers(e)}else{let t;try{t=o.Metadata.fromHttp2Headers(e)}catch(e){this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new o.Metadata});return}this.listener.onReceiveMetadata(t)}}));e.on("trailers",(e=>{this.handleTrailers(e)}));e.on("data",(e=>{if(this.statusOutput){return}this.trace("receive HTTP/2 data frame of length "+e.length);let t;try{t=this.decoder.write(e)}catch(e){if(this.httpStatusCode!==undefined&&this.httpStatusCode!==200){const e=mapHttpStatusCode(this.httpStatusCode);this.cancelWithStatus(e.code,e.details)}else{this.cancelWithStatus(s.Status.RESOURCE_EXHAUSTED,e.message)}return}for(const e of t){this.trace("parsed message of length "+e.length);this.callEventTracker.addMessageReceived();this.tryPush(e)}}));e.on("end",(()=>{this.readsClosed=true;this.maybeOutputStatus()}));e.on("close",(()=>{this.serverEndedCall=true;process.nextTick((()=>{var t;this.trace("HTTP/2 stream closed with code "+e.rstCode);if(((t=this.finalStatus)===null||t===void 0?void 0:t.code)===s.Status.OK){return}let r;let i="";switch(e.rstCode){case n.constants.NGHTTP2_NO_ERROR:if(this.finalStatus!==null){return}if(this.httpStatusCode&&this.httpStatusCode!==200){const e=mapHttpStatusCode(this.httpStatusCode);r=e.code;i=e.details}else{r=s.Status.INTERNAL;i=`Received RST_STREAM with code ${e.rstCode} (Call ended without gRPC status)`}break;case n.constants.NGHTTP2_REFUSED_STREAM:r=s.Status.UNAVAILABLE;i="Stream refused by server";break;case n.constants.NGHTTP2_CANCEL:if(this.connectionDropped){r=s.Status.UNAVAILABLE;i="Connection dropped"}else{r=s.Status.CANCELLED;i="Call cancelled"}break;case n.constants.NGHTTP2_ENHANCE_YOUR_CALM:r=s.Status.RESOURCE_EXHAUSTED;i="Bandwidth exhausted or memory limit exceeded";break;case n.constants.NGHTTP2_INADEQUATE_SECURITY:r=s.Status.PERMISSION_DENIED;i="Protocol not secure enough";break;case n.constants.NGHTTP2_INTERNAL_ERROR:r=s.Status.INTERNAL;if(this.internalError===null){i=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`}else{if(this.internalError.code==="ECONNRESET"||this.internalError.code==="ETIMEDOUT"){r=s.Status.UNAVAILABLE;i=this.internalError.message}else{i=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`}}break;default:r=s.Status.INTERNAL;i=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:r,details:i,metadata:new o.Metadata,rstCode:e.rstCode})}))}));e.on("error",(e=>{if(e.code!=="ERR_HTTP2_STREAM_ERROR"){this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+getSystemErrorName(e.errno)+" syscall="+e.syscall);this.internalError=e}this.callEventTracker.onStreamEnd(false)}))}getDeadlineInfo(){return[`remote_addr=${this.getPeer()}`]}onDisconnect(){this.connectionDropped=true;setImmediate((()=>{this.endCall({code:s.Status.UNAVAILABLE,details:"Connection dropped",metadata:new o.Metadata})}))}outputStatus(){if(!this.statusOutput){this.statusOutput=true;this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"');this.callEventTracker.onCallEnd(this.finalStatus);process.nextTick((()=>{this.listener.onReceiveStatus(this.finalStatus)}));this.http2Stream.resume()}}trace(e){u.trace(p.LogVerbosity.DEBUG,g,"["+this.callId+"] "+e)}endCall(e){if(this.finalStatus===null||this.finalStatus.code===s.Status.OK){this.finalStatus=e;this.maybeOutputStatus()}this.destroyHttp2Stream()}maybeOutputStatus(){if(this.finalStatus!==null){if(this.finalStatus.code!==s.Status.OK||this.readsClosed&&this.unpushedReadMessages.length===0&&!this.isReadFilterPending&&!this.isPushPending){this.outputStatus()}}}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null));this.canPush=false;this.isPushPending=true;process.nextTick((()=>{this.isPushPending=false;if(this.statusOutput){return}this.listener.onReceiveMessage(e);this.maybeOutputStatus()}))}tryPush(e){if(this.canPush){this.http2Stream.pause();this.push(e)}else{this.trace("unpushedReadMessages.push message of length "+e.length);this.unpushedReadMessages.push(e)}}handleTrailers(e){this.serverEndedCall=true;this.callEventTracker.onStreamEnd(true);let t="";for(const r of Object.keys(e)){t+="\t\t"+r+": "+e[r]+"\n"}this.trace("Received server trailers:\n"+t);let r;try{r=o.Metadata.fromHttp2Headers(e)}catch(e){r=new o.Metadata}const n=r.getMap();let i;if(typeof n["grpc-status"]==="string"){const e=Number(n["grpc-status"]);this.trace("received status code "+e+" from server");r.remove("grpc-status");let t="";if(typeof n["grpc-message"]==="string"){try{t=decodeURI(n["grpc-message"])}catch(e){t=n["grpc-message"]}r.remove("grpc-message");this.trace('received status details string "'+t+'" from server')}i={code:e,details:t,metadata:r}}else if(this.httpStatusCode){i=mapHttpStatusCode(this.httpStatusCode);i.metadata=r}else{i={code:s.Status.UNKNOWN,details:"No status information received",metadata:r}}this.endCall(i)}destroyHttp2Stream(){var e;if(this.http2Stream.destroyed){return}if(this.serverEndedCall){this.http2Stream.end()}else{let t;if(((e=this.finalStatus)===null||e===void 0?void 0:e.code)===s.Status.OK){t=n.constants.NGHTTP2_NO_ERROR}else{t=n.constants.NGHTTP2_CANCEL}this.trace("close http2 stream with code "+t);this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"');this.endCall({code:e,details:t,metadata:new o.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(this.finalStatus!==null&&this.finalStatus.code!==s.Status.OK){this.readsClosed=true;this.maybeOutputStatus();return}this.canPush=true;if(this.unpushedReadMessages.length>0){const e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);const cb=t=>{process.nextTick((()=>{var r;let n=s.Status.UNAVAILABLE;if((t===null||t===void 0?void 0:t.code)==="ERR_STREAM_WRITE_AFTER_END"){n=s.Status.INTERNAL}if(t){this.cancelWithStatus(n,`Write error: ${t.message}`)}(r=e.callback)===null||r===void 0?void 0:r.call(e)}))};this.trace("sending data chunk of length "+t.length);this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,cb)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new o.Metadata})}}halfClose(){this.trace("end() called");this.trace("calling end() on HTTP/2 stream");this.http2Stream.end()}}t.Http2SubchannelCall=Http2SubchannelCall},98:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BaseSubchannelWrapper=void 0;class BaseSubchannelWrapper{constructor(e){this.child=e;this.healthy=true;this.healthListeners=new Set;e.addHealthStateWatcher((e=>{if(this.healthy){this.updateHealthListeners()}}))}updateHealthListeners(){for(const e of this.healthListeners){e(this.isHealthy())}}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}isHealthy(){return this.healthy&&this.child.isHealthy()}addHealthStateWatcher(e){this.healthListeners.add(e)}removeHealthStateWatcher(e){this.healthListeners.delete(e)}setHealthy(e){if(e!==this.healthy){this.healthy=e;if(this.child.isHealthy()){this.updateHealthListeners()}}}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}getCallCredentials(){return this.child.getCallCredentials()}}t.BaseSubchannelWrapper=BaseSubchannelWrapper},8695:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SubchannelPool=void 0;t.getSubchannelPool=getSubchannelPool;const n=r(6793);const i=r(8416);const s=r(7021);const o=r(6027);const l=r(3860);const u=1e4;class SubchannelPool{constructor(){this.pool=Object.create(null);this.cleanupTimer=null}unrefUnusedSubchannels(){let e=true;for(const t in this.pool){const r=this.pool[t];const n=r.filter((e=>!e.subchannel.unrefIfOneRef()));if(n.length>0){e=false}this.pool[t]=n}if(e&&this.cleanupTimer!==null){clearInterval(this.cleanupTimer);this.cleanupTimer=null}}ensureCleanupTask(){var e,t;if(this.cleanupTimer===null){this.cleanupTimer=setInterval((()=>{this.unrefUnusedSubchannels()}),u);(t=(e=this.cleanupTimer).unref)===null||t===void 0?void 0:t.call(e)}}getOrCreateSubchannel(e,t,r,u){this.ensureCleanupTask();const p=(0,o.uriToString)(e);if(p in this.pool){const e=this.pool[p];for(const i of e){if((0,s.subchannelAddressEqual)(t,i.subchannelAddress)&&(0,n.channelOptionsEqual)(r,i.channelArguments)&&u._equals(i.channelCredentials)){return i.subchannel}}}const g=new i.Subchannel(e,t,r,u,new l.Http2SubchannelConnector(e));if(!(p in this.pool)){this.pool[p]=[]}this.pool[p].push({subchannelAddress:t,channelArguments:r,channelCredentials:u,subchannel:g});g.ref();return g}}t.SubchannelPool=SubchannelPool;const p=new SubchannelPool;function getSubchannelPool(e){if(e){return p}else{return new SubchannelPool}}},8416:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Subchannel=void 0;const n=r(778);const i=r(4643);const s=r(8536);const o=r(8288);const l=r(6027);const u=r(7021);const p=r(8198);const g="subchannel";const m=~(1<<31);class Subchannel{constructor(e,t,r,s,o){var l;this.channelTarget=e;this.subchannelAddress=t;this.options=r;this.connector=o;this.connectivityState=n.ConnectivityState.IDLE;this.transport=null;this.continueConnecting=false;this.stateListeners=new Set;this.refcount=0;this.channelzEnabled=true;const g={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new i.BackoffTimeout((()=>{this.handleBackoffTimer()}),g);this.backoffTimeout.unref();this.subchannelAddressString=(0,u.subchannelAddressToString)(t);this.keepaliveTime=(l=r["grpc.keepalive_time_ms"])!==null&&l!==void 0?l:-1;if(r["grpc.enable_channelz"]===0){this.channelzEnabled=false;this.channelzTrace=new p.ChannelzTraceStub;this.callTracker=new p.ChannelzCallTrackerStub;this.childrenTracker=new p.ChannelzChildrenTrackerStub;this.streamTracker=new p.ChannelzCallTrackerStub}else{this.channelzTrace=new p.ChannelzTrace;this.callTracker=new p.ChannelzCallTracker;this.childrenTracker=new p.ChannelzChildrenTracker;this.streamTracker=new p.ChannelzCallTracker}this.channelzRef=(0,p.registerChannelzSubchannel)(this.subchannelAddressString,(()=>this.getChannelzInfo()),this.channelzEnabled);this.channelzTrace.addTrace("CT_INFO","Subchannel created");this.trace("Subchannel constructed with options "+JSON.stringify(r,undefined,2));this.secureConnector=s._createSecureConnector(e,r)}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){s.trace(o.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){s.trace(o.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){if(this.continueConnecting){this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING)}else{this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.IDLE)}}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop();this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){const t=Math.min(this.keepaliveTime,m);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.secureConnector,e).then((e=>{if(this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.READY)){this.transport=e;if(this.channelzEnabled){this.childrenTracker.refChild(e.getChannelzRef())}e.addDisconnectListener((e=>{this.transitionToState([n.ConnectivityState.READY],n.ConnectivityState.IDLE);if(e&&this.keepaliveTime>0){this.keepaliveTime*=2;s.log(o.LogVerbosity.ERROR,`Connection to ${(0,l.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`)}}))}else{e.shutdown()}}),(e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.TRANSIENT_FAILURE,`${e}`)}))}transitionToState(e,t,r){var i,s;if(e.indexOf(this.connectivityState)===-1){return false}if(r){this.trace(n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]+' with error "'+r+'"')}else{this.trace(n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t])}if(this.channelzEnabled){this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+n.ConnectivityState[t])}const o=this.connectivityState;this.connectivityState=t;switch(t){case n.ConnectivityState.READY:this.stopBackoff();break;case n.ConnectivityState.CONNECTING:this.startBackoff();this.startConnectingInternal();this.continueConnecting=false;break;case n.ConnectivityState.TRANSIENT_FAILURE:if(this.channelzEnabled&&this.transport){this.childrenTracker.unrefChild(this.transport.getChannelzRef())}(i=this.transport)===null||i===void 0?void 0:i.shutdown();this.transport=null;if(!this.backoffTimeout.isRunning()){process.nextTick((()=>{this.handleBackoffTimer()}))}break;case n.ConnectivityState.IDLE:if(this.channelzEnabled&&this.transport){this.childrenTracker.unrefChild(this.transport.getChannelzRef())}(s=this.transport)===null||s===void 0?void 0:s.shutdown();this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${t}`)}for(const e of this.stateListeners){e(this,o,t,this.keepaliveTime,r)}return true}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1));this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1));this.refcount-=1;if(this.refcount===0){this.channelzTrace.addTrace("CT_INFO","Shutting down");(0,p.unregisterChannelzRef)(this.channelzRef);this.secureConnector.destroy();process.nextTick((()=>{this.transitionToState([n.ConnectivityState.CONNECTING,n.ConnectivityState.READY],n.ConnectivityState.IDLE)}))}}unrefIfOneRef(){if(this.refcount===1){this.unref();return true}return false}createCall(e,t,r,n){if(!this.transport){throw new Error("Cannot create call, subchannel not READY")}let i;if(this.channelzEnabled){this.callTracker.addCallStarted();this.streamTracker.addCallStarted();i={onCallEnd:e=>{if(e.code===o.Status.OK){this.callTracker.addCallSucceeded()}else{this.callTracker.addCallFailed()}}}}else{i={}}return this.transport.createCall(e,t,r,n,i)}startConnecting(){process.nextTick((()=>{if(!this.transitionToState([n.ConnectivityState.IDLE],n.ConnectivityState.CONNECTING)){if(this.connectivityState===n.ConnectivityState.TRANSIENT_FAILURE){this.continueConnecting=true}}}))}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick((()=>{this.backoffTimeout.reset();this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING)}))}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}isHealthy(){return true}addHealthStateWatcher(e){}removeHealthStateWatcher(e){}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e}}getCallCredentials(){return this.secureConnector.getCallCredentials()}}t.Subchannel=Subchannel},8876:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CIPHER_SUITES=void 0;t.getDefaultRootsData=getDefaultRootsData;const n=r(9896);t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;const i=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH;let s=null;function getDefaultRootsData(){if(i){if(s===null){s=n.readFileSync(i)}return s}return null}},3860:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Http2SubchannelConnector=void 0;const n=r(5675);const i=r(8198);const s=r(8288);const o=r(8954);const l=r(8536);const u=r(6255);const p=r(7021);const g=r(6027);const m=r(9278);const y=r(7953);const _=r(8056);const v="transport";const E="transport_flowctrl";const b=r(9943).rE;const{HTTP2_HEADER_AUTHORITY:C,HTTP2_HEADER_CONTENT_TYPE:w,HTTP2_HEADER_METHOD:I,HTTP2_HEADER_PATH:T,HTTP2_HEADER_TE:k,HTTP2_HEADER_USER_AGENT:R}=n.constants;const O=2e4;const P=Buffer.from("too_many_pings","ascii");class Http2Transport{constructor(e,t,r,s){this.session=e;this.options=r;this.remoteName=s;this.keepaliveTimer=null;this.pendingSendKeepalivePing=false;this.activeCalls=new Set;this.disconnectListeners=[];this.disconnectHandled=false;this.channelzEnabled=true;this.keepalivesSent=0;this.messagesSent=0;this.messagesReceived=0;this.lastMessageSentTimestamp=null;this.lastMessageReceivedTimestamp=null;this.subchannelAddressString=(0,p.subchannelAddressToString)(t);if(r["grpc.enable_channelz"]===0){this.channelzEnabled=false;this.streamTracker=new i.ChannelzCallTrackerStub}else{this.streamTracker=new i.ChannelzCallTracker}this.channelzRef=(0,i.registerChannelzSocket)(this.subchannelAddressString,(()=>this.getChannelzInfo()),this.channelzEnabled);this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${b}`,r["grpc.secondary_user_agent"]].filter((e=>e)).join(" ");if("grpc.keepalive_time_ms"in r){this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]}else{this.keepaliveTimeMs=-1}if("grpc.keepalive_timeout_ms"in r){this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]}else{this.keepaliveTimeoutMs=O}if("grpc.keepalive_permit_without_calls"in r){this.keepaliveWithoutCalls=r["grpc.keepalive_permit_without_calls"]===1}else{this.keepaliveWithoutCalls=false}e.once("close",(()=>{this.trace("session closed");this.handleDisconnect()}));e.once("goaway",((e,t,r)=>{let i=false;if(e===n.constants.NGHTTP2_ENHANCE_YOUR_CALM&&r&&r.equals(P)){i=true}this.trace("connection closed by GOAWAY with code "+e+" and data "+(r===null||r===void 0?void 0:r.toString()));this.reportDisconnectToOwner(i)}));e.once("error",(e=>{this.trace("connection closed with error "+e.message);this.handleDisconnect()}));e.socket.once("close",(e=>{this.trace("connection closed. hadError="+e);this.handleDisconnect()}));if(l.isTracerEnabled(v)){e.on("remoteSettings",(t=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))}));e.on("localSettings",(t=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))}))}if(this.keepaliveWithoutCalls){this.maybeStartKeepalivePingTimer()}}getChannelzInfo(){var e,t,r;const n=this.session.socket;const i=n.remoteAddress?(0,p.stringToSubchannelAddress)(n.remoteAddress,n.remotePort):null;const s=n.localAddress?(0,p.stringToSubchannelAddress)(n.localAddress,n.localPort):null;let o;if(this.session.encrypted){const t=n;const r=t.getCipher();const i=t.getCertificate();const s=t.getPeerCertificate();o={cipherSuiteStandardName:(e=r.standardName)!==null&&e!==void 0?e:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:i&&"raw"in i?i.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else{o=null}const l={remoteAddress:i,localAddress:s,security:o,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:(t=this.session.state.localWindowSize)!==null&&t!==void 0?t:null,remoteFlowControlWindow:(r=this.session.state.remoteWindowSize)!==null&&r!==void 0?r:null};return l}trace(e){l.trace(s.LogVerbosity.DEBUG,v,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){l.trace(s.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){l.trace(s.LogVerbosity.DEBUG,E,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){l.trace(s.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){if(this.disconnectHandled){return}this.disconnectHandled=true;this.disconnectListeners.forEach((t=>t(e)))}handleDisconnect(){this.clearKeepaliveTimeout();this.reportDisconnectToOwner(false);for(const e of this.activeCalls){e.onDisconnect()}setImmediate((()=>{this.session.destroy()}))}addDisconnectListener(e){this.disconnectListeners.push(e)}canSendPing(){return!this.session.destroyed&&this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,t;if(!this.canSendPing()){this.pendingSendKeepalivePing=true;return}if(this.keepaliveTimer){console.error("keepaliveTimeout is not null");return}if(this.channelzEnabled){this.keepalivesSent+=1}this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");this.keepaliveTimer=setTimeout((()=>{this.keepaliveTimer=null;this.keepaliveTrace("Ping timeout passed without response");this.handleDisconnect()}),this.keepaliveTimeoutMs);(t=(e=this.keepaliveTimer).unref)===null||t===void 0?void 0:t.call(e);let r="";try{const e=this.session.ping(((e,t,r)=>{this.clearKeepaliveTimeout();if(e){this.keepaliveTrace("Ping failed with error "+e.message);this.handleDisconnect()}else{this.keepaliveTrace("Received ping response");this.maybeStartKeepalivePingTimer()}}));if(!e){r="Ping returned false"}}catch(e){r=(e instanceof Error?e.message:"")||"Unknown error"}if(r){this.keepaliveTrace("Ping send failed: "+r);this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var e,t;if(!this.canSendPing()){return}if(this.pendingSendKeepalivePing){this.pendingSendKeepalivePing=false;this.maybeSendPing()}else if(!this.keepaliveTimer){this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms");this.keepaliveTimer=setTimeout((()=>{this.keepaliveTimer=null;this.maybeSendPing()}),this.keepaliveTimeMs);(t=(e=this.keepaliveTimer).unref)===null||t===void 0?void 0:t.call(e)}}clearKeepaliveTimeout(){if(this.keepaliveTimer){clearTimeout(this.keepaliveTimer);this.keepaliveTimer=null}}removeActiveCall(e){this.activeCalls.delete(e);if(this.activeCalls.size===0){this.session.unref()}}addActiveCall(e){this.activeCalls.add(e);if(this.activeCalls.size===1){this.session.ref();if(!this.keepaliveWithoutCalls){this.maybeStartKeepalivePingTimer()}}}createCall(e,t,r,n,i){const s=e.toHttp2Headers();s[C]=t;s[R]=this.userAgent;s[w]="application/grpc";s[I]="POST";s[T]=r;s[k]="trailers";let o;try{o=this.session.request(s)}catch(e){this.handleDisconnect();throw e}this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize);this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed);let l;let u;if(this.channelzEnabled){this.streamTracker.addCallStarted();l={addMessageSent:()=>{var e;this.messagesSent+=1;this.lastMessageSentTimestamp=new Date;(e=i.addMessageSent)===null||e===void 0?void 0:e.call(i)},addMessageReceived:()=>{var e;this.messagesReceived+=1;this.lastMessageReceivedTimestamp=new Date;(e=i.addMessageReceived)===null||e===void 0?void 0:e.call(i)},onCallEnd:e=>{var t;(t=i.onCallEnd)===null||t===void 0?void 0:t.call(i,e);this.removeActiveCall(u)},onStreamEnd:e=>{var t;if(e){this.streamTracker.addCallSucceeded()}else{this.streamTracker.addCallFailed()}(t=i.onStreamEnd)===null||t===void 0?void 0:t.call(i,e)}}}else{l={addMessageSent:()=>{var e;(e=i.addMessageSent)===null||e===void 0?void 0:e.call(i)},addMessageReceived:()=>{var e;(e=i.addMessageReceived)===null||e===void 0?void 0:e.call(i)},onCallEnd:e=>{var t;(t=i.onCallEnd)===null||t===void 0?void 0:t.call(i,e);this.removeActiveCall(u)},onStreamEnd:e=>{var t;(t=i.onStreamEnd)===null||t===void 0?void 0:t.call(i,e)}}}u=new y.Http2SubchannelCall(o,l,n,this,(0,_.getNextCallNumber)());this.addActiveCall(u);return u}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}shutdown(){this.session.close();(0,i.unregisterChannelzRef)(this.channelzRef)}}class Http2SubchannelConnector{constructor(e){this.channelTarget=e;this.session=null;this.isShutdown=false}trace(e){l.trace(s.LogVerbosity.DEBUG,v,(0,g.uriToString)(this.channelTarget)+" "+e)}createSession(e,t,r){if(this.isShutdown){return Promise.reject()}if(e.socket.closed){return Promise.reject("Connection closed before starting HTTP/2 handshake")}return new Promise(((i,s)=>{let o=null;let l=this.channelTarget;if("grpc.http_connect_target"in r){const e=(0,g.parseUri)(r["grpc.http_connect_target"]);if(e){l=e;o=(0,g.uriToString)(e)}}const p=e.secure?"https":"http";const m=(0,u.getDefaultAuthority)(l);const closeHandler=()=>{var e;(e=this.session)===null||e===void 0?void 0:e.destroy();this.session=null;setImmediate((()=>{if(!E){E=true;s(`${v.trim()} (${(new Date).toISOString()})`)}}))};const errorHandler=e=>{var t;(t=this.session)===null||t===void 0?void 0:t.destroy();v=e.message;this.trace("connection failed with error "+v);if(!E){E=true;s(`${v} (${(new Date).toISOString()})`)}};const y={createConnection:(t,r)=>e.socket};if(r["grpc-node.flow_control_window"]!==undefined){y.settings={initialWindowSize:r["grpc-node.flow_control_window"]}}const _=n.connect(`${p}://${m}`,y);this.session=_;let v="Failed to connect";let E=false;_.unref();_.once("remoteSettings",(()=>{_.removeAllListeners();e.socket.removeListener("close",closeHandler);e.socket.removeListener("error",errorHandler);i(new Http2Transport(_,t,r,o));this.session=null}));_.once("close",closeHandler);_.once("error",errorHandler);e.socket.once("close",closeHandler);e.socket.once("error",errorHandler)}))}tcpConnect(e,t){return(0,o.getProxiedConnection)(e,t).then((t=>{if(t){return t}else{return new Promise(((t,r)=>{const closeCallback=()=>{r(new Error("Socket closed"))};const errorCallback=e=>{r(e)};const n=m.connect(e,(()=>{n.removeListener("close",closeCallback);n.removeListener("error",errorCallback);t(n)}));n.once("close",closeCallback);n.once("error",errorCallback)}))}}))}async connect(e,t,r){if(this.isShutdown){return Promise.reject()}let n=null;let i=null;const s=(0,p.subchannelAddressToString)(e);try{this.trace(s+" Waiting for secureConnector to be ready");await t.waitForReady();this.trace(s+" secureConnector is ready");n=await this.tcpConnect(e,r);n.setNoDelay();this.trace(s+" Established TCP connection");i=await t.connect(n);this.trace(s+" Established secure connection");return this.createSession(i,e,r)}catch(e){n===null||n===void 0?void 0:n.destroy();i===null||i===void 0?void 0:i.socket.destroy();throw e}}shutdown(){var e;this.isShutdown=true;(e=this.session)===null||e===void 0?void 0:e.close();this.session=null}}t.Http2SubchannelConnector=Http2SubchannelConnector},6027:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseUri=parseUri;t.splitHostPort=splitHostPort;t.combineHostPort=combineHostPort;t.uriToString=uriToString;const r=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function parseUri(e){const t=r.exec(e);if(t===null){return null}return{scheme:t[1],authority:t[2],path:t[3]}}const n=/^\d+$/;function splitHostPort(e){if(e.startsWith("[")){const t=e.indexOf("]");if(t===-1){return null}const r=e.substring(1,t);if(r.indexOf(":")===-1){return null}if(e.length>t+1){if(e[t+1]===":"){const i=e.substring(t+2);if(n.test(i)){return{host:r,port:+i}}else{return null}}else{return null}}else{return{host:r}}}else{const t=e.split(":");if(t.length===2){if(n.test(t[1])){return{host:t[0],port:+t[1]}}else{return null}}else{return{host:e}}}}function combineHostPort(e){if(e.port===undefined){return e.host}else{if(e.host.includes(":")){return`[${e.host}]:${e.port}`}else{return`${e.host}:${e.port}`}}}function uriToString(e){let t="";if(e.scheme!==undefined){t+=e.scheme+":"}if(e.authority!==undefined){t+="//"+e.authority+"/"}t+=e.path;return t}},6081:(e,t,r)=>{"use strict";
/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty(t,"__esModule",{value:true});t.loadFileDescriptorSetFromObject=t.loadFileDescriptorSetFromBuffer=t.fromJSON=t.loadSync=t.load=t.IdempotencyLevel=t.isAnyExtension=t.Long=void 0;const n=r(4277);const i=r(3928);const s=r(6412);const o=r(8057);const l=r(6390);t.Long=l;function isAnyExtension(e){return"@type"in e&&typeof e["@type"]==="string"}t.isAnyExtension=isAnyExtension;var u;(function(e){e["IDEMPOTENCY_UNKNOWN"]="IDEMPOTENCY_UNKNOWN";e["NO_SIDE_EFFECTS"]="NO_SIDE_EFFECTS";e["IDEMPOTENT"]="IDEMPOTENT"})(u=t.IdempotencyLevel||(t.IdempotencyLevel={}));const p={longs:String,enums:String,bytes:String,defaults:true,oneofs:true,json:true};function joinName(e,t){if(e===""){return t}else{return e+"."+t}}function isHandledReflectionObject(e){return e instanceof i.Service||e instanceof i.Type||e instanceof i.Enum}function isNamespaceBase(e){return e instanceof i.Namespace||e instanceof i.Root}function getAllHandledReflectionObjects(e,t){const r=joinName(t,e.name);if(isHandledReflectionObject(e)){return[[r,e]]}else{if(isNamespaceBase(e)&&typeof e.nested!=="undefined"){return Object.keys(e.nested).map((t=>getAllHandledReflectionObjects(e.nested[t],r))).reduce(((e,t)=>e.concat(t)),[])}}return[]}function createDeserializer(e,t){return function deserialize(r){return e.toObject(e.decode(r),t)}}function createSerializer(e){return function serialize(t){if(Array.isArray(t)){throw new Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`)}const r=e.fromObject(t);return e.encode(r).finish()}}function mapMethodOptions(e){return(e||[]).reduce(((e,t)=>{for(const[r,n]of Object.entries(t)){switch(r){case"uninterpreted_option":e.uninterpreted_option.push(t.uninterpreted_option);break;default:e[r]=n}}return e}),{deprecated:false,idempotency_level:u.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function createMethodDefinition(e,t,r,i){const s=e.resolvedRequestType;const o=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:createSerializer(s),requestDeserialize:createDeserializer(s,r),responseSerialize:createSerializer(o),responseDeserialize:createDeserializer(o,r),originalName:n(e.name),requestType:createMessageDefinition(s,i),responseType:createMessageDefinition(o,i),options:mapMethodOptions(e.parsedOptions)}}function createServiceDefinition(e,t,r,n){const i={};for(const s of e.methodsArray){i[s.name]=createMethodDefinition(s,t,r,n)}return i}function createMessageDefinition(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,p),fileDescriptorProtos:t}}function createEnumDefinition(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,p),fileDescriptorProtos:t}}function createDefinition(e,t,r,n){if(e instanceof i.Service){return createServiceDefinition(e,t,r,n)}else if(e instanceof i.Type){return createMessageDefinition(e,n)}else if(e instanceof i.Enum){return createEnumDefinition(e,n)}else{throw new Error("Type mismatch in reflection object handling")}}function createPackageDefinition(e,t){const r={};e.resolveAll();const n=e.toDescriptor("proto3").file;const i=n.map((e=>Buffer.from(s.FileDescriptorProto.encode(e).finish())));for(const[n,s]of getAllHandledReflectionObjects(e,"")){r[n]=createDefinition(s,n,t,i)}return r}function createPackageDefinitionFromDescriptorSet(e,t){t=t||{};const r=i.Root.fromDescriptor(e);r.resolveAll();return createPackageDefinition(r,t)}function load(e,t){return(0,o.loadProtosWithOptions)(e,t).then((e=>createPackageDefinition(e,t)))}t.load=load;function loadSync(e,t){const r=(0,o.loadProtosWithOptionsSync)(e,t);return createPackageDefinition(r,t)}t.loadSync=loadSync;function fromJSON(e,t){t=t||{};const r=i.Root.fromJSON(e);r.resolveAll();return createPackageDefinition(r,t)}t.fromJSON=fromJSON;function loadFileDescriptorSetFromBuffer(e,t){const r=s.FileDescriptorSet.decode(e);return createPackageDefinitionFromDescriptorSet(r,t)}t.loadFileDescriptorSetFromBuffer=loadFileDescriptorSetFromBuffer;function loadFileDescriptorSetFromObject(e,t){const r=s.FileDescriptorSet.fromObject(e);return createPackageDefinitionFromDescriptorSet(r,t)}t.loadFileDescriptorSetFromObject=loadFileDescriptorSetFromObject;(0,o.addCommonProtos)()},8057:(e,t,r)=>{"use strict";
/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty(t,"__esModule",{value:true});t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;const n=r(9896);const i=r(6928);const s=r(3928);function addIncludePathResolver(e,t){const r=e.resolvePath;e.resolvePath=(e,s)=>{if(i.isAbsolute(s)){return s}for(const e of t){const t=i.join(e,s);try{n.accessSync(t,n.constants.R_OK);return t}catch(e){continue}}process.emitWarning(`${s} not found in any of the include paths ${t}`);return r(e,s)}}async function loadProtosWithOptions(e,t){const r=new s.Root;t=t||{};if(!!t.includeDirs){if(!Array.isArray(t.includeDirs)){return Promise.reject(new Error("The includeDirs option must be an array"))}addIncludePathResolver(r,t.includeDirs)}const n=await r.load(e,t);n.resolveAll();return n}t.loadProtosWithOptions=loadProtosWithOptions;function loadProtosWithOptionsSync(e,t){const r=new s.Root;t=t||{};if(!!t.includeDirs){if(!Array.isArray(t.includeDirs)){throw new Error("The includeDirs option must be an array")}addIncludePathResolver(r,t.includeDirs)}const n=r.loadSync(e,t);n.resolveAll();return n}t.loadProtosWithOptionsSync=loadProtosWithOptionsSync;function addCommonProtos(){const e=r(5434);const t=r(3951);const n=r(2939);const i=r(6710);s.common("api",e.nested.google.nested.protobuf.nested);s.common("descriptor",t.nested.google.nested.protobuf.nested);s.common("source_context",n.nested.google.nested.protobuf.nested);s.common("type",i.nested.google.nested.protobuf.nested)}t.addCommonProtos=addCommonProtos},2518:(e,t)=>{"use strict";Object.defineProperty(t,"t",{value:true});class TreeNode{constructor(e,t,r=1){this.i=undefined;this.h=undefined;this.o=undefined;this.u=e;this.l=t;this.p=r}I(){let e=this;const t=e.o.o===e;if(t&&e.p===1){e=e.h}else if(e.i){e=e.i;while(e.h){e=e.h}}else{if(t){return e.o}let r=e.o;while(r.i===e){e=r;r=e.o}e=r}return e}B(){let e=this;if(e.h){e=e.h;while(e.i){e=e.i}return e}else{let t=e.o;while(t.h===e){e=t;t=e.o}if(e.h!==t){return t}else return e}}_(){const e=this.o;const t=this.h;const r=t.i;if(e.o===this)e.o=t;else if(e.i===this)e.i=t;else e.h=t;t.o=e;t.i=this;this.o=t;this.h=r;if(r)r.o=this;return t}g(){const e=this.o;const t=this.i;const r=t.h;if(e.o===this)e.o=t;else if(e.i===this)e.i=t;else e.h=t;t.o=e;t.h=this;this.o=t;this.i=r;if(r)r.o=this;return t}}class TreeNodeEnableIndex extends TreeNode{constructor(){super(...arguments);this.M=1}_(){const e=super._();this.O();e.O();return e}g(){const e=super.g();this.O();e.O();return e}O(){this.M=1;if(this.i){this.M+=this.i.M}if(this.h){this.M+=this.h.M}}}class ContainerIterator{constructor(e=0){this.iteratorType=e}equals(e){return this.T===e.T}}class Base{constructor(){this.m=0}get length(){return this.m}size(){return this.m}empty(){return this.m===0}}class Container extends Base{}function throwIteratorAccessError(){throw new RangeError("Iterator access denied!")}class TreeContainer extends Container{constructor(e=function(e,t){if(e<t)return-1;if(e>t)return 1;return 0},t=false){super();this.v=undefined;this.A=e;this.enableIndex=t;this.N=t?TreeNodeEnableIndex:TreeNode;this.C=new this.N}R(e,t){let r=this.C;while(e){const n=this.A(e.u,t);if(n<0){e=e.h}else if(n>0){r=e;e=e.i}else return e}return r}K(e,t){let r=this.C;while(e){const n=this.A(e.u,t);if(n<=0){e=e.h}else{r=e;e=e.i}}return r}L(e,t){let r=this.C;while(e){const n=this.A(e.u,t);if(n<0){r=e;e=e.h}else if(n>0){e=e.i}else return e}return r}k(e,t){let r=this.C;while(e){const n=this.A(e.u,t);if(n<0){r=e;e=e.h}else{e=e.i}}return r}P(e){while(true){const t=e.o;if(t===this.C)return;if(e.p===1){e.p=0;return}if(e===t.i){const r=t.h;if(r.p===1){r.p=0;t.p=1;if(t===this.v){this.v=t._()}else t._()}else{if(r.h&&r.h.p===1){r.p=t.p;t.p=0;r.h.p=0;if(t===this.v){this.v=t._()}else t._();return}else if(r.i&&r.i.p===1){r.p=1;r.i.p=0;r.g()}else{r.p=1;e=t}}}else{const r=t.i;if(r.p===1){r.p=0;t.p=1;if(t===this.v){this.v=t.g()}else t.g()}else{if(r.i&&r.i.p===1){r.p=t.p;t.p=0;r.i.p=0;if(t===this.v){this.v=t.g()}else t.g();return}else if(r.h&&r.h.p===1){r.p=1;r.h.p=0;r._()}else{r.p=1;e=t}}}}}S(e){if(this.m===1){this.clear();return}let t=e;while(t.i||t.h){if(t.h){t=t.h;while(t.i)t=t.i}else{t=t.i}const r=e.u;e.u=t.u;t.u=r;const n=e.l;e.l=t.l;t.l=n;e=t}if(this.C.i===t){this.C.i=t.o}else if(this.C.h===t){this.C.h=t.o}this.P(t);let r=t.o;if(t===r.i){r.i=undefined}else r.h=undefined;this.m-=1;this.v.p=0;if(this.enableIndex){while(r!==this.C){r.M-=1;r=r.o}}}U(e){const t=typeof e==="number"?e:undefined;const r=typeof e==="function"?e:undefined;const n=typeof e==="undefined"?[]:undefined;let i=0;let s=this.v;const o=[];while(o.length||s){if(s){o.push(s);s=s.i}else{s=o.pop();if(i===t)return s;n&&n.push(s);r&&r(s,i,this);i+=1;s=s.h}}return n}j(e){while(true){const t=e.o;if(t.p===0)return;const r=t.o;if(t===r.i){const n=r.h;if(n&&n.p===1){n.p=t.p=0;if(r===this.v)return;r.p=1;e=r;continue}else if(e===t.h){e.p=0;if(e.i){e.i.o=t}if(e.h){e.h.o=r}t.h=e.i;r.i=e.h;e.i=t;e.h=r;if(r===this.v){this.v=e;this.C.o=e}else{const t=r.o;if(t.i===r){t.i=e}else t.h=e}e.o=r.o;t.o=e;r.o=e;r.p=1}else{t.p=0;if(r===this.v){this.v=r.g()}else r.g();r.p=1;return}}else{const n=r.i;if(n&&n.p===1){n.p=t.p=0;if(r===this.v)return;r.p=1;e=r;continue}else if(e===t.i){e.p=0;if(e.i){e.i.o=r}if(e.h){e.h.o=t}r.h=e.i;t.i=e.h;e.i=r;e.h=t;if(r===this.v){this.v=e;this.C.o=e}else{const t=r.o;if(t.i===r){t.i=e}else t.h=e}e.o=r.o;t.o=e;r.o=e;r.p=1}else{t.p=0;if(r===this.v){this.v=r._()}else r._();r.p=1;return}}if(this.enableIndex){t.O();r.O();e.O()}return}}q(e,t,r){if(this.v===undefined){this.m+=1;this.v=new this.N(e,t,0);this.v.o=this.C;this.C.o=this.C.i=this.C.h=this.v;return this.m}let n;const i=this.C.i;const s=this.A(i.u,e);if(s===0){i.l=t;return this.m}else if(s>0){i.i=new this.N(e,t);i.i.o=i;n=i.i;this.C.i=n}else{const i=this.C.h;const s=this.A(i.u,e);if(s===0){i.l=t;return this.m}else if(s<0){i.h=new this.N(e,t);i.h.o=i;n=i.h;this.C.h=n}else{if(r!==undefined){const i=r.T;if(i!==this.C){const r=this.A(i.u,e);if(r===0){i.l=t;return this.m}else if(r>0){const r=i.I();const s=this.A(r.u,e);if(s===0){r.l=t;return this.m}else if(s<0){n=new this.N(e,t);if(r.h===undefined){r.h=n;n.o=r}else{i.i=n;n.o=i}}}}}if(n===undefined){n=this.v;while(true){const r=this.A(n.u,e);if(r>0){if(n.i===undefined){n.i=new this.N(e,t);n.i.o=n;n=n.i;break}n=n.i}else if(r<0){if(n.h===undefined){n.h=new this.N(e,t);n.h.o=n;n=n.h;break}n=n.h}else{n.l=t;return this.m}}}}}if(this.enableIndex){let e=n.o;while(e!==this.C){e.M+=1;e=e.o}}this.j(n);this.m+=1;return this.m}H(e,t){while(e){const r=this.A(e.u,t);if(r<0){e=e.h}else if(r>0){e=e.i}else return e}return e||this.C}clear(){this.m=0;this.v=undefined;this.C.o=undefined;this.C.i=this.C.h=undefined}updateKeyByIterator(e,t){const r=e.T;if(r===this.C){throwIteratorAccessError()}if(this.m===1){r.u=t;return true}const n=r.B().u;if(r===this.C.i){if(this.A(n,t)>0){r.u=t;return true}return false}const i=r.I().u;if(r===this.C.h){if(this.A(i,t)<0){r.u=t;return true}return false}if(this.A(i,t)>=0||this.A(n,t)<=0)return false;r.u=t;return true}eraseElementByPos(e){if(e<0||e>this.m-1){throw new RangeError}const t=this.U(e);this.S(t);return this.m}eraseElementByKey(e){if(this.m===0)return false;const t=this.H(this.v,e);if(t===this.C)return false;this.S(t);return true}eraseElementByIterator(e){const t=e.T;if(t===this.C){throwIteratorAccessError()}const r=t.h===undefined;const n=e.iteratorType===0;if(n){if(r)e.next()}else{if(!r||t.i===undefined)e.next()}this.S(t);return e}getHeight(){if(this.m===0)return 0;function traversal(e){if(!e)return 0;return Math.max(traversal(e.i),traversal(e.h))+1}return traversal(this.v)}}class TreeIterator extends ContainerIterator{constructor(e,t,r){super(r);this.T=e;this.C=t;if(this.iteratorType===0){this.pre=function(){if(this.T===this.C.i){throwIteratorAccessError()}this.T=this.T.I();return this};this.next=function(){if(this.T===this.C){throwIteratorAccessError()}this.T=this.T.B();return this}}else{this.pre=function(){if(this.T===this.C.h){throwIteratorAccessError()}this.T=this.T.B();return this};this.next=function(){if(this.T===this.C){throwIteratorAccessError()}this.T=this.T.I();return this}}}get index(){let e=this.T;const t=this.C.o;if(e===this.C){if(t){return t.M-1}return 0}let r=0;if(e.i){r+=e.i.M}while(e!==t){const t=e.o;if(e===t.h){r+=1;if(t.i){r+=t.i.M}}e=t}return r}isAccessible(){return this.T!==this.C}}class OrderedMapIterator extends TreeIterator{constructor(e,t,r,n){super(e,t,n);this.container=r}get pointer(){if(this.T===this.C){throwIteratorAccessError()}const e=this;return new Proxy([],{get(t,r){if(r==="0")return e.T.u;else if(r==="1")return e.T.l;t[0]=e.T.u;t[1]=e.T.l;return t[r]},set(t,r,n){if(r!=="1"){throw new TypeError("prop must be 1")}e.T.l=n;return true}})}copy(){return new OrderedMapIterator(this.T,this.C,this.container,this.iteratorType)}}class OrderedMap extends TreeContainer{constructor(e=[],t,r){super(t,r);const n=this;e.forEach((function(e){n.setElement(e[0],e[1])}))}begin(){return new OrderedMapIterator(this.C.i||this.C,this.C,this)}end(){return new OrderedMapIterator(this.C,this.C,this)}rBegin(){return new OrderedMapIterator(this.C.h||this.C,this.C,this,1)}rEnd(){return new OrderedMapIterator(this.C,this.C,this,1)}front(){if(this.m===0)return;const e=this.C.i;return[e.u,e.l]}back(){if(this.m===0)return;const e=this.C.h;return[e.u,e.l]}lowerBound(e){const t=this.R(this.v,e);return new OrderedMapIterator(t,this.C,this)}upperBound(e){const t=this.K(this.v,e);return new OrderedMapIterator(t,this.C,this)}reverseLowerBound(e){const t=this.L(this.v,e);return new OrderedMapIterator(t,this.C,this)}reverseUpperBound(e){const t=this.k(this.v,e);return new OrderedMapIterator(t,this.C,this)}forEach(e){this.U((function(t,r,n){e([t.u,t.l],r,n)}))}setElement(e,t,r){return this.q(e,t,r)}getElementByPos(e){if(e<0||e>this.m-1){throw new RangeError}const t=this.U(e);return[t.u,t.l]}find(e){const t=this.H(this.v,e);return new OrderedMapIterator(t,this.C,this)}getElementByKey(e){const t=this.H(this.v,e);return t.l}union(e){const t=this;e.forEach((function(e){t.setElement(e[0],e[1])}));return this.m}*[Symbol.iterator](){const e=this.m;const t=this.U();for(let r=0;r<e;++r){const e=t[r];yield[e.u,e.l]}}}t.OrderedMap=OrderedMap},2222:e=>{"use strict";e.exports=asPromise;function asPromise(e,t){var r=new Array(arguments.length-1),n=0,i=2,s=true;while(i<arguments.length)r[n++]=arguments[i++];return new Promise((function executor(i,o){r[n]=function callback(e){if(s){s=false;if(e)o(e);else{var t=new Array(arguments.length-1),r=0;while(r<t.length)t[r++]=arguments[r];i.apply(null,t)}}};try{e.apply(t||null,r)}catch(e){if(s){s=false;o(e)}}}))}},5478:(e,t)=>{"use strict";var r=t;r.length=function length(e){var t=e.length;if(!t)return 0;var r=0;while(--t%4>1&&e.charAt(t)==="=")++r;return Math.ceil(e.length*3)/4-r};var n=new Array(64);var i=new Array(123);for(var s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function encode(e,t,r){var i=null,s=[];var o=0,l=0,u;while(t<r){var p=e[t++];switch(l){case 0:s[o++]=n[p>>2];u=(p&3)<<4;l=1;break;case 1:s[o++]=n[u|p>>4];u=(p&15)<<2;l=2;break;case 2:s[o++]=n[u|p>>6];s[o++]=n[p&63];l=0;break}if(o>8191){(i||(i=[])).push(String.fromCharCode.apply(String,s));o=0}}if(l){s[o++]=n[u];s[o++]=61;if(l===1)s[o++]=61}if(i){if(o)i.push(String.fromCharCode.apply(String,s.slice(0,o)));return i.join("")}return String.fromCharCode.apply(String,s.slice(0,o))};var o="invalid encoding";r.decode=function decode(e,t,r){var n=r;var s=0,l;for(var u=0;u<e.length;){var p=e.charCodeAt(u++);if(p===61&&s>1)break;if((p=i[p])===undefined)throw Error(o);switch(s){case 0:l=p;s=1;break;case 1:t[r++]=l<<2|(p&48)>>4;l=p;s=2;break;case 2:t[r++]=(l&15)<<4|(p&60)>>2;l=p;s=3;break;case 3:t[r++]=(l&3)<<6|p;s=0;break}}if(s===1)throw Error(o);return r-n};r.test=function test(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},5346:e=>{"use strict";e.exports=codegen;function codegen(e,t){if(typeof e==="string"){t=e;e=undefined}var r=[];function Codegen(e){if(typeof e!=="string"){var t=toString();if(codegen.verbose)console.log("codegen: "+t);t="return "+t;if(e){var n=Object.keys(e),i=new Array(n.length+1),s=new Array(n.length),o=0;while(o<n.length){i[o]=n[o];s[o]=e[n[o++]]}i[o]=t;return Function.apply(null,i).apply(null,s)}return Function(t)()}var l=new Array(arguments.length-1),u=0;while(u<l.length)l[u]=arguments[++u];u=0;e=e.replace(/%([%dfijs])/g,(function replace(e,t){var r=l[u++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}));if(u!==l.length)throw Error("parameter count mismatch");r.push(e);return Codegen}function toString(n){return"function "+(n||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}Codegen.toString=toString;return Codegen}codegen.verbose=false},2491:e=>{"use strict";e.exports=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function on(e,t,r){(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this});return this};EventEmitter.prototype.off=function off(e,t){if(e===undefined)this._listeners={};else{if(t===undefined)this._listeners[e]=[];else{var r=this._listeners[e];for(var n=0;n<r.length;)if(r[n].fn===t)r.splice(n,1);else++n}}return this};EventEmitter.prototype.emit=function emit(e){var t=this._listeners[e];if(t){var r=[],n=1;for(;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},4279:(e,t,r)=>{"use strict";e.exports=fetch;var n=r(2222),i=r(7206);var s=i("fs");function fetch(e,t,r){if(typeof t==="function"){r=t;t={}}else if(!t)t={};if(!r)return n(fetch,this,e,t);if(!t.xhr&&s&&s.readFile)return s.readFile(e,(function fetchReadFileCallback(n,i){return n&&typeof XMLHttpRequest!=="undefined"?fetch.xhr(e,t,r):n?r(n):r(null,t.binary?i:i.toString("utf8"))}));return fetch.xhr(e,t,r)}fetch.xhr=function fetch_xhr(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function fetchOnReadyStateChange(){if(n.readyState!==4)return undefined;if(n.status!==0&&n.status!==200)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(n.responseText.charCodeAt(i)&255)}return r(null,typeof Uint8Array!=="undefined"?new Uint8Array(e):e)}return r(null,n.responseText)};if(t.binary){if("overrideMimeType"in n)n.overrideMimeType("text/plain; charset=x-user-defined");n.responseType="arraybuffer"}n.open("GET",e);n.send()}},8597:e=>{"use strict";e.exports=factory(factory);function factory(e){if(typeof Float32Array!=="undefined")(function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function writeFloat_f32_cpy(e,n,i){t[0]=e;n[i]=r[0];n[i+1]=r[1];n[i+2]=r[2];n[i+3]=r[3]}function writeFloat_f32_rev(e,n,i){t[0]=e;n[i]=r[3];n[i+1]=r[2];n[i+2]=r[1];n[i+3]=r[0]}e.writeFloatLE=n?writeFloat_f32_cpy:writeFloat_f32_rev;e.writeFloatBE=n?writeFloat_f32_rev:writeFloat_f32_cpy;function readFloat_f32_cpy(e,n){r[0]=e[n];r[1]=e[n+1];r[2]=e[n+2];r[3]=e[n+3];return t[0]}function readFloat_f32_rev(e,n){r[3]=e[n];r[2]=e[n+1];r[1]=e[n+2];r[0]=e[n+3];return t[0]}e.readFloatLE=n?readFloat_f32_cpy:readFloat_f32_rev;e.readFloatBE=n?readFloat_f32_rev:readFloat_f32_cpy})();else(function(){function writeFloat_ieee754(e,t,r,n){var i=t<0?1:0;if(i)t=-t;if(t===0)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2),o=Math.round(t*Math.pow(2,-s)*8388608)&8388607;e((i<<31|s+127<<23|o)>>>0,r,n)}}e.writeFloatLE=writeFloat_ieee754.bind(null,writeUintLE);e.writeFloatBE=writeFloat_ieee754.bind(null,writeUintBE);function readFloat_ieee754(e,t,r){var n=e(t,r),i=(n>>31)*2+1,s=n>>>23&255,o=n&8388607;return s===255?o?NaN:i*Infinity:s===0?i*1401298464324817e-60*o:i*Math.pow(2,s-150)*(o+8388608)}e.readFloatLE=readFloat_ieee754.bind(null,readUintLE);e.readFloatBE=readFloat_ieee754.bind(null,readUintBE)})();if(typeof Float64Array!=="undefined")(function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function writeDouble_f64_cpy(e,n,i){t[0]=e;n[i]=r[0];n[i+1]=r[1];n[i+2]=r[2];n[i+3]=r[3];n[i+4]=r[4];n[i+5]=r[5];n[i+6]=r[6];n[i+7]=r[7]}function writeDouble_f64_rev(e,n,i){t[0]=e;n[i]=r[7];n[i+1]=r[6];n[i+2]=r[5];n[i+3]=r[4];n[i+4]=r[3];n[i+5]=r[2];n[i+6]=r[1];n[i+7]=r[0]}e.writeDoubleLE=n?writeDouble_f64_cpy:writeDouble_f64_rev;e.writeDoubleBE=n?writeDouble_f64_rev:writeDouble_f64_cpy;function readDouble_f64_cpy(e,n){r[0]=e[n];r[1]=e[n+1];r[2]=e[n+2];r[3]=e[n+3];r[4]=e[n+4];r[5]=e[n+5];r[6]=e[n+6];r[7]=e[n+7];return t[0]}function readDouble_f64_rev(e,n){r[7]=e[n];r[6]=e[n+1];r[5]=e[n+2];r[4]=e[n+3];r[3]=e[n+4];r[2]=e[n+5];r[1]=e[n+6];r[0]=e[n+7];return t[0]}e.readDoubleLE=n?readDouble_f64_cpy:readDouble_f64_rev;e.readDoubleBE=n?readDouble_f64_rev:readDouble_f64_cpy})();else(function(){function writeDouble_ieee754(e,t,r,n,i,s){var o=n<0?1:0;if(o)n=-n;if(n===0){e(0,i,s+t);e(1/n>0?0:2147483648,i,s+r)}else if(isNaN(n)){e(0,i,s+t);e(2146959360,i,s+r)}else if(n>17976931348623157e292){e(0,i,s+t);e((o<<31|2146435072)>>>0,i,s+r)}else{var l;if(n<22250738585072014e-324){l=n/5e-324;e(l>>>0,i,s+t);e((o<<31|l/4294967296)>>>0,i,s+r)}else{var u=Math.floor(Math.log(n)/Math.LN2);if(u===1024)u=1023;l=n*Math.pow(2,-u);e(l*4503599627370496>>>0,i,s+t);e((o<<31|u+1023<<20|l*1048576&1048575)>>>0,i,s+r)}}}e.writeDoubleLE=writeDouble_ieee754.bind(null,writeUintLE,0,4);e.writeDoubleBE=writeDouble_ieee754.bind(null,writeUintBE,4,0);function readDouble_ieee754(e,t,r,n,i){var s=e(n,i+t),o=e(n,i+r);var l=(o>>31)*2+1,u=o>>>20&2047,p=4294967296*(o&1048575)+s;return u===2047?p?NaN:l*Infinity:u===0?l*5e-324*p:l*Math.pow(2,u-1075)*(p+4503599627370496)}e.readDoubleLE=readDouble_ieee754.bind(null,readUintLE,0,4);e.readDoubleBE=readDouble_ieee754.bind(null,readUintBE,4,0)})();return e}function writeUintLE(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24;t[r+1]=e>>>16&255;t[r+2]=e>>>8&255;t[r+3]=e&255}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}},7206:module=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}},6090:(e,t)=>{"use strict";var r=t;var n=r.isAbsolute=function isAbsolute(e){return/^(?:\/|\w+:)/.test(e)};var i=r.normalize=function normalize(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var t=e.split("/"),r=n(e),i="";if(r)i=t.shift()+"/";for(var s=0;s<t.length;){if(t[s]===".."){if(s>0&&t[s-1]!=="..")t.splice(--s,2);else if(r)t.splice(s,1);else++s}else if(t[s]===".")t.splice(s,1);else++s}return i+t.join("/")};r.resolve=function resolve(e,t,r){if(!r)t=i(t);if(n(t))return t;if(!r)e=i(e);return(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t}},6239:e=>{"use strict";e.exports=pool;function pool(e,t,r){var n=r||8192;var i=n>>>1;var s=null;var o=n;return function pool_alloc(r){if(r<1||r>i)return e(r);if(o+r>n){s=e(n);o=0}var l=t.call(s,o,o+=r);if(o&7)o=(o|7)+1;return l}}},958:(e,t)=>{"use strict";var r=t;r.length=function utf8_length(e){var t=0,r=0;for(var n=0;n<e.length;++n){r=e.charCodeAt(n);if(r<128)t+=1;else if(r<2048)t+=2;else if((r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320){++n;t+=4}else t+=3}return t};r.read=function utf8_read(e,t,r){var n=r-t;if(n<1)return"";var i=null,s=[],o=0,l;while(t<r){l=e[t++];if(l<128)s[o++]=l;else if(l>191&&l<224)s[o++]=(l&31)<<6|e[t++]&63;else if(l>239&&l<365){l=((l&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536;s[o++]=55296+(l>>10);s[o++]=56320+(l&1023)}else s[o++]=(l&15)<<12|(e[t++]&63)<<6|e[t++]&63;if(o>8191){(i||(i=[])).push(String.fromCharCode.apply(String,s));o=0}}if(i){if(o)i.push(String.fromCharCode.apply(String,s.slice(0,o)));return i.join("")}return String.fromCharCode.apply(String,s.slice(0,o))};r.write=function utf8_write(e,t,r){var n=r,i,s;for(var o=0;o<e.length;++o){i=e.charCodeAt(o);if(i<128){t[r++]=i}else if(i<2048){t[r++]=i>>6|192;t[r++]=i&63|128}else if((i&64512)===55296&&((s=e.charCodeAt(o+1))&64512)===56320){i=65536+((i&1023)<<10)+(s&1023);++o;t[r++]=i>>18|240;t[r++]=i>>12&63|128;t[r++]=i>>6&63|128;t[r++]=i&63|128}else{t[r++]=i>>12|224;t[r++]=i>>6&63|128;t[r++]=i&63|128}}return r-n}},6656:e=>{e.exports={newInvalidAsn1Error:function(e){var t=new Error;t.name="InvalidAsn1Error";t.message=e||"";return t}}},7703:(e,t,r)=>{var n=r(6656);var i=r(254);var s=r(1996);var o=r(9816);e.exports={Reader:s,Writer:o};for(var l in i){if(i.hasOwnProperty(l))e.exports[l]=i[l]}for(var u in n){if(n.hasOwnProperty(u))e.exports[u]=n[u]}},1996:(e,t,r)=>{var n=r(2613);var i=r(2803).Buffer;var s=r(254);var o=r(6656);var l=o.newInvalidAsn1Error;function Reader(e){if(!e||!i.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e;this._size=e.length;this._len=0;this._offset=0}Object.defineProperty(Reader.prototype,"length",{enumerable:true,get:function(){return this._len}});Object.defineProperty(Reader.prototype,"offset",{enumerable:true,get:function(){return this._offset}});Object.defineProperty(Reader.prototype,"remain",{get:function(){return this._size-this._offset}});Object.defineProperty(Reader.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}});Reader.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=this._buf[this._offset]&255;if(!e)this._offset+=1;return t};Reader.prototype.peek=function(){return this.readByte(true)};Reader.prototype.readLength=function(e){if(e===undefined)e=this._offset;if(e>=this._size)return null;var t=this._buf[e++]&255;if(t===null)return null;if((t&128)===128){t&=127;if(t===0)throw l("Indefinite length not supported");if(t>4)throw l("encoding too long");if(this._size-e<t)return null;this._len=0;for(var r=0;r<t;r++)this._len=(this._len<<8)+(this._buf[e++]&255)}else{this._len=t}return e};Reader.prototype.readSequence=function(e){var t=this.peek();if(t===null)return null;if(e!==undefined&&e!==t)throw l("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);if(r===null)return null;this._offset=r;return t};Reader.prototype.readInt=function(){return this._readTag(s.Integer)};Reader.prototype.readBoolean=function(){return this._readTag(s.Boolean)===0?false:true};Reader.prototype.readEnumeration=function(){return this._readTag(s.Enumeration)};Reader.prototype.readString=function(e,t){if(!e)e=s.OctetString;var r=this.peek();if(r===null)return null;if(r!==e)throw l("Expected 0x"+e.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(n===null)return null;if(this.length>this._size-n)return null;this._offset=n;if(this.length===0)return t?i.alloc(0):"";var o=this._buf.slice(this._offset,this._offset+this.length);this._offset+=this.length;return t?o:o.toString("utf8")};Reader.prototype.readOID=function(e){if(!e)e=s.OID;var t=this.readString(e,true);if(t===null)return null;var r=[];var n=0;for(var i=0;i<t.length;i++){var o=t[i]&255;n<<=7;n+=o&127;if((o&128)===0){r.push(n);n=0}}n=r.shift();r.unshift(n%40);r.unshift(n/40>>0);return r.join(".")};Reader.prototype._readTag=function(e){n.ok(e!==undefined);var t=this.peek();if(t===null)return null;if(t!==e)throw l("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);if(r===null)return null;if(this.length>4)throw l("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;var i=this._buf[this._offset];var s=0;for(var o=0;o<this.length;o++){s<<=8;s|=this._buf[this._offset++]&255}if((i&128)===128&&o!==4)s-=1<<o*8;return s>>0};e.exports=Reader},254:e=>{e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},9816:(e,t,r)=>{var n=r(2613);var i=r(2803).Buffer;var s=r(254);var o=r(6656);var l=o.newInvalidAsn1Error;var u={size:1024,growthFactor:8};function merge(e,t){n.ok(e);n.equal(typeof e,"object");n.ok(t);n.equal(typeof t,"object");var r=Object.getOwnPropertyNames(e);r.forEach((function(r){if(t[r])return;var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n)}));return t}function Writer(e){e=merge(u,e||{});this._buf=i.alloc(e.size||1024);this._size=this._buf.length;this._offset=0;this._options=e;this._seq=[]}Object.defineProperty(Writer.prototype,"buffer",{get:function(){if(this._seq.length)throw l(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}});Writer.prototype.writeByte=function(e){if(typeof e!=="number")throw new TypeError("argument must be a Number");this._ensure(1);this._buf[this._offset++]=e};Writer.prototype.writeInt=function(e,t){if(typeof e!=="number")throw new TypeError("argument must be a Number");if(typeof t!=="number")t=s.Integer;var r=4;while(((e&4286578688)===0||(e&4286578688)===4286578688>>0)&&r>1){r--;e<<=8}if(r>4)throw l("BER ints cannot be > 0xffffffff");this._ensure(2+r);this._buf[this._offset++]=t;this._buf[this._offset++]=r;while(r-- >0){this._buf[this._offset++]=(e&4278190080)>>>24;e<<=8}};Writer.prototype.writeNull=function(){this.writeByte(s.Null);this.writeByte(0)};Writer.prototype.writeEnumeration=function(e,t){if(typeof e!=="number")throw new TypeError("argument must be a Number");if(typeof t!=="number")t=s.Enumeration;return this.writeInt(e,t)};Writer.prototype.writeBoolean=function(e,t){if(typeof e!=="boolean")throw new TypeError("argument must be a Boolean");if(typeof t!=="number")t=s.Boolean;this._ensure(3);this._buf[this._offset++]=t;this._buf[this._offset++]=1;this._buf[this._offset++]=e?255:0};Writer.prototype.writeString=function(e,t){if(typeof e!=="string")throw new TypeError("argument must be a string (was: "+typeof e+")");if(typeof t!=="number")t=s.OctetString;var r=i.byteLength(e);this.writeByte(t);this.writeLength(r);if(r){this._ensure(r);this._buf.write(e,this._offset);this._offset+=r}};Writer.prototype.writeBuffer=function(e,t){if(typeof t!=="number")throw new TypeError("tag must be a number");if(!i.isBuffer(e))throw new TypeError("argument must be a buffer");this.writeByte(t);this.writeLength(e.length);this._ensure(e.length);e.copy(this._buf,this._offset,0,e.length);this._offset+=e.length};Writer.prototype.writeStringArray=function(e){if(!e instanceof Array)throw new TypeError("argument must be an Array[String]");var t=this;e.forEach((function(e){t.writeString(e)}))};Writer.prototype.writeOID=function(e,t){if(typeof e!=="string")throw new TypeError("argument must be a string");if(typeof t!=="number")t=s.OID;if(!/^([0-9]+\.){3,}[0-9]+$/.test(e))throw new Error("argument is not a valid OID string");function encodeOctet(e,t){if(t<128){e.push(t)}else if(t<16384){e.push(t>>>7|128);e.push(t&127)}else if(t<2097152){e.push(t>>>14|128);e.push((t>>>7|128)&255);e.push(t&127)}else if(t<268435456){e.push(t>>>21|128);e.push((t>>>14|128)&255);e.push((t>>>7|128)&255);e.push(t&127)}else{e.push((t>>>28|128)&255);e.push((t>>>21|128)&255);e.push((t>>>14|128)&255);e.push((t>>>7|128)&255);e.push(t&127)}}var r=e.split(".");var n=[];n.push(parseInt(r[0],10)*40+parseInt(r[1],10));r.slice(2).forEach((function(e){encodeOctet(n,parseInt(e,10))}));var i=this;this._ensure(2+n.length);this.writeByte(t);this.writeLength(n.length);n.forEach((function(e){i.writeByte(e)}))};Writer.prototype.writeLength=function(e){if(typeof e!=="number")throw new TypeError("argument must be a Number");this._ensure(4);if(e<=127){this._buf[this._offset++]=e}else if(e<=255){this._buf[this._offset++]=129;this._buf[this._offset++]=e}else if(e<=65535){this._buf[this._offset++]=130;this._buf[this._offset++]=e>>8;this._buf[this._offset++]=e}else if(e<=16777215){this._buf[this._offset++]=131;this._buf[this._offset++]=e>>16;this._buf[this._offset++]=e>>8;this._buf[this._offset++]=e}else{throw l("Length too long (> 4 bytes)")}};Writer.prototype.startSequence=function(e){if(typeof e!=="number")e=s.Sequence|s.Constructor;this.writeByte(e);this._seq.push(this._offset);this._ensure(3);this._offset+=3};Writer.prototype.endSequence=function(){var e=this._seq.pop();var t=e+3;var r=this._offset-t;if(r<=127){this._shift(t,r,-2);this._buf[e]=r}else if(r<=255){this._shift(t,r,-1);this._buf[e]=129;this._buf[e+1]=r}else if(r<=65535){this._buf[e]=130;this._buf[e+1]=r>>8;this._buf[e+2]=r}else if(r<=16777215){this._shift(t,r,1);this._buf[e]=131;this._buf[e+1]=r>>16;this._buf[e+2]=r>>8;this._buf[e+3]=r}else{throw l("Sequence too long")}};Writer.prototype._shift=function(e,t,r){n.ok(e!==undefined);n.ok(t!==undefined);n.ok(r);this._buf.copy(this._buf,e+r,e,e+t);this._offset+=r};Writer.prototype._ensure=function(e){n.ok(e);if(this._size-this._offset<e){var t=this._size*this._options.growthFactor;if(t-this._offset<e)t+=e;var r=i.alloc(t);this._buf.copy(r,0,0,this._offset);this._buf=r;this._size=t}};e.exports=Writer},9837:(e,t,r)=>{var n=r(7703);e.exports={Ber:n,BerReader:n.Reader,BerWriter:n.Writer}},686:(e,t,r)=>{"use strict";var n=r(668).lowlevel.crypto_hash;var i=0;var Blowfish=function(){this.S=[new Uint32Array([3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946]),new Uint32Array([1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055]),new Uint32Array([3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504]),new Uint32Array([976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462])];this.P=new Uint32Array([608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731])};function F(e,t,r){return(e[0][t[r+3]]+e[1][t[r+2]]^e[2][t[r+1]])+e[3][t[r]]}Blowfish.prototype.encipher=function(e,t){if(t===undefined){t=new Uint8Array(e.buffer);if(e.byteOffset!==0)t=t.subarray(e.byteOffset)}e[0]^=this.P[0];for(var r=1;r<16;r+=2){e[1]^=F(this.S,t,0)^this.P[r];e[0]^=F(this.S,t,4)^this.P[r+1]}var n=e[0];e[0]=e[1]^this.P[17];e[1]=n};Blowfish.prototype.decipher=function(e){var t=new Uint8Array(e.buffer);if(e.byteOffset!==0)t=t.subarray(e.byteOffset);e[0]^=this.P[17];for(var r=16;r>0;r-=2){e[1]^=F(this.S,t,0)^this.P[r];e[0]^=F(this.S,t,4)^this.P[r-1]}var n=e[0];e[0]=e[1]^this.P[0];e[1]=n};function stream2word(e,t){var r,n=0;for(r=0;r<4;r++,i++){if(i>=t)i=0;n=n<<8|e[i]}return n}Blowfish.prototype.expand0state=function(e,t){var r=new Uint32Array(2),n,s;var o=new Uint8Array(r.buffer);for(n=0,i=0;n<18;n++){this.P[n]^=stream2word(e,t)}i=0;for(n=0;n<18;n+=2){this.encipher(r,o);this.P[n]=r[0];this.P[n+1]=r[1]}for(n=0;n<4;n++){for(s=0;s<256;s+=2){this.encipher(r,o);this.S[n][s]=r[0];this.S[n][s+1]=r[1]}}};Blowfish.prototype.expandstate=function(e,t,r,n){var s=new Uint32Array(2),o,l;for(o=0,i=0;o<18;o++){this.P[o]^=stream2word(r,n)}for(o=0,i=0;o<18;o+=2){s[0]^=stream2word(e,t);s[1]^=stream2word(e,t);this.encipher(s);this.P[o]=s[0];this.P[o+1]=s[1]}for(o=0;o<4;o++){for(l=0;l<256;l+=2){s[0]^=stream2word(e,t);s[1]^=stream2word(e,t);this.encipher(s);this.S[o][l]=s[0];this.S[o][l+1]=s[1]}}i=0};Blowfish.prototype.enc=function(e,t){for(var r=0;r<t;r++){this.encipher(e.subarray(r*2))}};Blowfish.prototype.dec=function(e,t){for(var r=0;r<t;r++){this.decipher(e.subarray(r*2))}};var s=8,o=32;function bcrypt_hash(e,t,r){var n=new Blowfish,i=new Uint32Array(s),o,l=new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,105,116,101]);n.expandstate(t,64,e,64);for(o=0;o<64;o++){n.expand0state(t,64);n.expand0state(e,64)}for(o=0;o<s;o++)i[o]=stream2word(l,l.byteLength);for(o=0;o<64;o++)n.enc(i,i.byteLength/8);for(o=0;o<s;o++){r[4*o+3]=i[o]>>>24;r[4*o+2]=i[o]>>>16;r[4*o+1]=i[o]>>>8;r[4*o+0]=i[o]}}function bcrypt_pbkdf(e,t,r,i,s,l,u){var p=new Uint8Array(64),g=new Uint8Array(64),m=new Uint8Array(o),y=new Uint8Array(o),_=new Uint8Array(i+4),v,E,b,C,w,I,T=l;if(u<1)return-1;if(t===0||i===0||l===0||l>m.byteLength*m.byteLength||i>1<<20)return-1;C=Math.floor((l+m.byteLength-1)/m.byteLength);b=Math.floor((l+C-1)/C);for(v=0;v<i;v++)_[v]=r[v];n(p,e,t);for(I=1;l>0;I++){_[i+0]=I>>>24;_[i+1]=I>>>16;_[i+2]=I>>>8;_[i+3]=I;n(g,_,i+4);bcrypt_hash(p,g,y);for(v=m.byteLength;v--;)m[v]=y[v];for(v=1;v<u;v++){n(g,y,y.byteLength);bcrypt_hash(p,g,y);for(E=0;E<m.byteLength;E++)m[E]^=y[E]}b=Math.min(b,l);for(v=0;v<b;v++){w=v*C+(I-1);if(w>=T)break;s[w]=m[v]}l-=v}return 0}e.exports={BLOCKS:s,HASHSIZE:o,hash:bcrypt_hash,pbkdf:bcrypt_pbkdf}},5234:(e,t,r)=>{"use strict";const{Buffer:n}=r(181);const i=Symbol.for("BufferList");function BufferList(e){if(!(this instanceof BufferList)){return new BufferList(e)}BufferList._init.call(this,e)}BufferList._init=function _init(e){Object.defineProperty(this,i,{value:true});this._bufs=[];this.length=0;if(e){this.append(e)}};BufferList.prototype._new=function _new(e){return new BufferList(e)};BufferList.prototype._offset=function _offset(e){if(e===0){return[0,0]}let t=0;for(let r=0;r<this._bufs.length;r++){const n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1){return[r,e-t]}t=n}};BufferList.prototype._reverseOffset=function(e){const t=e[0];let r=e[1];for(let e=0;e<t;e++){r+=this._bufs[e].length}return r};BufferList.prototype.get=function get(e){if(e>this.length||e<0){return undefined}const t=this._offset(e);return this._bufs[t[0]][t[1]]};BufferList.prototype.slice=function slice(e,t){if(typeof e==="number"&&e<0){e+=this.length}if(typeof t==="number"&&t<0){t+=this.length}return this.copy(null,0,e,t)};BufferList.prototype.copy=function copy(e,t,r,i){if(typeof r!=="number"||r<0){r=0}if(typeof i!=="number"||i>this.length){i=this.length}if(r>=this.length){return e||n.alloc(0)}if(i<=0){return e||n.alloc(0)}const copy=!!e;const s=this._offset(r);const o=i-r;let l=o;let u=copy&&t||0;let p=s[1];if(r===0&&i===this.length){if(!copy){return this._bufs.length===1?this._bufs[0]:n.concat(this._bufs,this.length)}for(let t=0;t<this._bufs.length;t++){this._bufs[t].copy(e,u);u+=this._bufs[t].length}return e}if(l<=this._bufs[s[0]].length-p){return copy?this._bufs[s[0]].copy(e,t,p,p+l):this._bufs[s[0]].slice(p,p+l)}if(!copy){e=n.allocUnsafe(o)}for(let t=s[0];t<this._bufs.length;t++){const r=this._bufs[t].length-p;if(l>r){this._bufs[t].copy(e,u,p);u+=r}else{this._bufs[t].copy(e,u,p,p+l);u+=r;break}l-=r;if(p){p=0}}if(e.length>u)return e.slice(0,u);return e};BufferList.prototype.shallowSlice=function shallowSlice(e,t){e=e||0;t=typeof t!=="number"?this.length:t;if(e<0){e+=this.length}if(t<0){t+=this.length}if(e===t){return this._new()}const r=this._offset(e);const n=this._offset(t);const i=this._bufs.slice(r[0],n[0]+1);if(n[1]===0){i.pop()}else{i[i.length-1]=i[i.length-1].slice(0,n[1])}if(r[1]!==0){i[0]=i[0].slice(r[1])}return this._new(i)};BufferList.prototype.toString=function toString(e,t,r){return this.slice(t,r).toString(e)};BufferList.prototype.consume=function consume(e){e=Math.trunc(e);if(Number.isNaN(e)||e<=0)return this;while(this._bufs.length){if(e>=this._bufs[0].length){e-=this._bufs[0].length;this.length-=this._bufs[0].length;this._bufs.shift()}else{this._bufs[0]=this._bufs[0].slice(e);this.length-=e;break}}return this};BufferList.prototype.duplicate=function duplicate(){const e=this._new();for(let t=0;t<this._bufs.length;t++){e.append(this._bufs[t])}return e};BufferList.prototype.append=function append(e){if(e==null){return this}if(e.buffer){this._appendBuffer(n.from(e.buffer,e.byteOffset,e.byteLength))}else if(Array.isArray(e)){for(let t=0;t<e.length;t++){this.append(e[t])}}else if(this._isBufferList(e)){for(let t=0;t<e._bufs.length;t++){this.append(e._bufs[t])}}else{if(typeof e==="number"){e=e.toString()}this._appendBuffer(n.from(e))}return this};BufferList.prototype._appendBuffer=function appendBuffer(e){this._bufs.push(e);this.length+=e.length};BufferList.prototype.indexOf=function(e,t,r){if(r===undefined&&typeof t==="string"){r=t;t=undefined}if(typeof e==="function"||Array.isArray(e)){throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.')}else if(typeof e==="number"){e=n.from([e])}else if(typeof e==="string"){e=n.from(e,r)}else if(this._isBufferList(e)){e=e.slice()}else if(Array.isArray(e.buffer)){e=n.from(e.buffer,e.byteOffset,e.byteLength)}else if(!n.isBuffer(e)){e=n.from(e)}t=Number(t||0);if(isNaN(t)){t=0}if(t<0){t=this.length+t}if(t<0){t=0}if(e.length===0){return t>this.length?this.length:t}const i=this._offset(t);let s=i[0];let o=i[1];for(;s<this._bufs.length;s++){const t=this._bufs[s];while(o<t.length){const r=t.length-o;if(r>=e.length){const r=t.indexOf(e,o);if(r!==-1){return this._reverseOffset([s,r])}o=t.length-e.length+1}else{const t=this._reverseOffset([s,o]);if(this._match(t,e)){return t}o++}}o=0}return-1};BufferList.prototype._match=function(e,t){if(this.length-e<t.length){return false}for(let r=0;r<t.length;r++){if(this.get(e+r)!==t[r]){return false}}return true};(function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e){(function(t){if(e[t]===null){BufferList.prototype[t]=function(e,r){return this.slice(e,e+r)[t](0,r)}}else{BufferList.prototype[t]=function(r=0){return this.slice(r,r+e[t])[t](0)}}})(t)}})();BufferList.prototype._isBufferList=function _isBufferList(e){return e instanceof BufferList||BufferList.isBufferList(e)};BufferList.isBufferList=function isBufferList(e){return e!=null&&e[i]};e.exports=BufferList},794:(e,t,r)=>{"use strict";const n=r(6131).Duplex;const i=r(9598);const s=r(5234);function BufferListStream(e){if(!(this instanceof BufferListStream)){return new BufferListStream(e)}if(typeof e==="function"){this._callback=e;const t=function piper(e){if(this._callback){this._callback(e);this._callback=null}}.bind(this);this.on("pipe",(function onPipe(e){e.on("error",t)}));this.on("unpipe",(function onUnpipe(e){e.removeListener("error",t)}));e=null}s._init.call(this,e);n.call(this)}i(BufferListStream,n);Object.assign(BufferListStream.prototype,s.prototype);BufferListStream.prototype._new=function _new(e){return new BufferListStream(e)};BufferListStream.prototype._write=function _write(e,t,r){this._appendBuffer(e);if(typeof r==="function"){r()}};BufferListStream.prototype._read=function _read(e){if(!this.length){return this.push(null)}e=Math.min(e,this.length);this.push(this.slice(0,e));this.consume(e)};BufferListStream.prototype.end=function end(e){n.prototype.end.call(this,e);if(this._callback){this._callback(null,this.slice());this._callback=null}};BufferListStream.prototype._destroy=function _destroy(e,t){this._bufs.length=0;this.length=0;t(e)};BufferListStream.prototype._isBufferList=function _isBufferList(e){return e instanceof BufferListStream||e instanceof s||BufferListStream.isBufferList(e)};BufferListStream.isBufferList=s.isBufferList;e.exports=BufferListStream;e.exports.BufferListStream=BufferListStream;e.exports.BufferList=s},507:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NodeFsHandler=t.EVENTS=t.isIBMi=t.isFreeBSD=t.isLinux=t.isMacos=t.isWindows=t.IDENTITY_FN=t.EMPTY_FN=t.STR_CLOSE=t.STR_END=t.STR_DATA=void 0;const n=r(9896);const i=r(1943);const s=r(6928);const o=r(857);t.STR_DATA="data";t.STR_END="end";t.STR_CLOSE="close";const EMPTY_FN=()=>{};t.EMPTY_FN=EMPTY_FN;const IDENTITY_FN=e=>e;t.IDENTITY_FN=IDENTITY_FN;const l=process.platform;t.isWindows=l==="win32";t.isMacos=l==="darwin";t.isLinux=l==="linux";t.isFreeBSD=l==="freebsd";t.isIBMi=(0,o.type)()==="OS400";t.EVENTS={ALL:"all",READY:"ready",ADD:"add",CHANGE:"change",ADD_DIR:"addDir",UNLINK:"unlink",UNLINK_DIR:"unlinkDir",RAW:"raw",ERROR:"error"};const u=t.EVENTS;const p="watch";const g={lstat:i.lstat,stat:i.stat};const m="listeners";const y="errHandlers";const _="rawEmitters";const v=[m,y,_];const E=new Set(["3dm","3ds","3g2","3gp","7z","a","aac","adp","afdesign","afphoto","afpub","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"]);const isBinaryPath=e=>E.has(s.extname(e).slice(1).toLowerCase());const foreach=(e,t)=>{if(e instanceof Set){e.forEach(t)}else{t(e)}};const addAndConvert=(e,t,r)=>{let n=e[t];if(!(n instanceof Set)){e[t]=n=new Set([n])}n.add(r)};const clearItem=e=>t=>{const r=e[t];if(r instanceof Set){r.clear()}else{delete e[t]}};const delFromSet=(e,t,r)=>{const n=e[t];if(n instanceof Set){n.delete(r)}else if(n===r){delete e[t]}};const isEmptySet=e=>e instanceof Set?e.size===0:!e;const b=new Map;function createFsWatchInstance(e,t,r,i,o){const handleEvent=(t,n)=>{r(e);o(t,n,{watchedPath:e});if(n&&e!==n){fsWatchBroadcast(s.resolve(e,n),m,s.join(e,n))}};try{return(0,n.watch)(e,{persistent:t.persistent},handleEvent)}catch(e){i(e);return undefined}}const fsWatchBroadcast=(e,t,r,n,i)=>{const s=b.get(e);if(!s)return;foreach(s[t],(e=>{e(r,n,i)}))};const setFsWatchListener=(e,r,n,s)=>{const{listener:o,errHandler:l,rawEmitter:p}=s;let g=b.get(r);let E;if(!n.persistent){E=createFsWatchInstance(e,n,o,l,p);if(!E)return;return E.close.bind(E)}if(g){addAndConvert(g,m,o);addAndConvert(g,y,l);addAndConvert(g,_,p)}else{E=createFsWatchInstance(e,n,fsWatchBroadcast.bind(null,r,m),l,fsWatchBroadcast.bind(null,r,_));if(!E)return;E.on(u.ERROR,(async n=>{const s=fsWatchBroadcast.bind(null,r,y);if(g)g.watcherUnusable=true;if(t.isWindows&&n.code==="EPERM"){try{const t=await(0,i.open)(e,"r");await t.close();s(n)}catch(e){}}else{s(n)}}));g={listeners:o,errHandlers:l,rawEmitters:p,watcher:E};b.set(r,g)}return()=>{delFromSet(g,m,o);delFromSet(g,y,l);delFromSet(g,_,p);if(isEmptySet(g.listeners)){g.watcher.close();b.delete(r);v.forEach(clearItem(g));g.watcher=undefined;Object.freeze(g)}}};const C=new Map;const setFsWatchFileListener=(e,t,r,i)=>{const{listener:s,rawEmitter:o}=i;let l=C.get(t);const p=l&&l.options;if(p&&(p.persistent<r.persistent||p.interval>r.interval)){(0,n.unwatchFile)(t);l=undefined}if(l){addAndConvert(l,m,s);addAndConvert(l,_,o)}else{l={listeners:s,rawEmitters:o,options:r,watcher:(0,n.watchFile)(t,r,((r,n)=>{foreach(l.rawEmitters,(e=>{e(u.CHANGE,t,{curr:r,prev:n})}));const i=r.mtimeMs;if(r.size!==n.size||i>n.mtimeMs||i===0){foreach(l.listeners,(t=>t(e,r)))}}))};C.set(t,l)}return()=>{delFromSet(l,m,s);delFromSet(l,_,o);if(isEmptySet(l.listeners)){C.delete(t);(0,n.unwatchFile)(t);l.options=l.watcher=undefined;Object.freeze(l)}}};class NodeFsHandler{constructor(e){this.fsw=e;this._boundHandleError=t=>e._handleError(t)}_watchWithNodeFs(e,r){const n=this.fsw.options;const i=s.dirname(e);const o=s.basename(e);const l=this.fsw._getWatchedDir(i);l.add(o);const u=s.resolve(e);const p={persistent:n.persistent};if(!r)r=t.EMPTY_FN;let g;if(n.usePolling){const t=n.interval!==n.binaryInterval;p.interval=t&&isBinaryPath(o)?n.binaryInterval:n.interval;g=setFsWatchFileListener(e,u,p,{listener:r,rawEmitter:this.fsw._emitRaw})}else{g=setFsWatchListener(e,u,p,{listener:r,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw})}return g}_handleFile(e,r,n){if(this.fsw.closed){return}const o=s.dirname(e);const l=s.basename(e);const g=this.fsw._getWatchedDir(o);let m=r;if(g.has(l))return;const listener=async(r,n)=>{if(!this.fsw._throttle(p,e,5))return;if(!n||n.mtimeMs===0){try{const n=await(0,i.stat)(e);if(this.fsw.closed)return;const s=n.atimeMs;const o=n.mtimeMs;if(!s||s<=o||o!==m.mtimeMs){this.fsw._emit(u.CHANGE,e,n)}if((t.isMacos||t.isLinux||t.isFreeBSD)&&m.ino!==n.ino){this.fsw._closeFile(r);m=n;const t=this._watchWithNodeFs(e,listener);if(t)this.fsw._addPathCloser(r,t)}else{m=n}}catch(e){this.fsw._remove(o,l)}}else if(g.has(l)){const t=n.atimeMs;const r=n.mtimeMs;if(!t||t<=r||r!==m.mtimeMs){this.fsw._emit(u.CHANGE,e,n)}m=n}};const y=this._watchWithNodeFs(e,listener);if(!(n&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(u.ADD,e,0))return;this.fsw._emit(u.ADD,e,r)}return y}async _handleSymlink(e,t,r,n){if(this.fsw.closed){return}const s=e.fullPath;const o=this.fsw._getWatchedDir(t);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let t;try{t=await(0,i.realpath)(r)}catch(e){this.fsw._emitReady();return true}if(this.fsw.closed)return;if(o.has(n)){if(this.fsw._symlinkPaths.get(s)!==t){this.fsw._symlinkPaths.set(s,t);this.fsw._emit(u.CHANGE,r,e.stats)}}else{o.add(n);this.fsw._symlinkPaths.set(s,t);this.fsw._emit(u.ADD,r,e.stats)}this.fsw._emitReady();return true}if(this.fsw._symlinkPaths.has(s)){return true}this.fsw._symlinkPaths.set(s,true)}_handleRead(e,r,n,i,o,l,p){e=s.join(e,"");p=this.fsw._throttle("readdir",e,1e3);if(!p)return;const g=this.fsw._getWatchedDir(n.path);const m=new Set;let y=this.fsw._readdirp(e,{fileFilter:e=>n.filterPath(e),directoryFilter:e=>n.filterDir(e)});if(!y)return;y.on(t.STR_DATA,(async t=>{if(this.fsw.closed){y=undefined;return}const u=t.path;let p=s.join(e,u);m.add(u);if(t.stats.isSymbolicLink()&&await this._handleSymlink(t,e,p,u)){return}if(this.fsw.closed){y=undefined;return}if(u===i||!i&&!g.has(u)){this.fsw._incrReadyCount();p=s.join(o,s.relative(o,p));this._addToNodeFs(p,r,n,l+1)}})).on(u.ERROR,this._boundHandleError);return new Promise(((r,s)=>{if(!y)return s();y.once(t.STR_END,(()=>{if(this.fsw.closed){y=undefined;return}const t=p?p.clear():false;r(undefined);g.getChildren().filter((t=>t!==e&&!m.has(t))).forEach((t=>{this.fsw._remove(e,t)}));y=undefined;if(t)this._handleRead(e,false,n,i,o,l,p)}))}))}async _handleDir(e,t,r,n,i,o,l){const p=this.fsw._getWatchedDir(s.dirname(e));const g=p.has(s.basename(e));if(!(r&&this.fsw.options.ignoreInitial)&&!i&&!g){this.fsw._emit(u.ADD_DIR,e,t)}p.add(s.basename(e));this.fsw._getWatchedDir(e);let m;let y;const _=this.fsw.options.depth;if((_==null||n<=_)&&!this.fsw._symlinkPaths.has(l)){if(!i){await this._handleRead(e,r,o,i,e,n,m);if(this.fsw.closed)return}y=this._watchWithNodeFs(e,((t,r)=>{if(r&&r.mtimeMs===0)return;this._handleRead(t,false,o,i,e,n,m)}))}return y}async _addToNodeFs(e,t,r,n,o){const l=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed){l();return false}const p=this.fsw._getWatchHelpers(e);if(r){p.filterPath=e=>r.filterPath(e);p.filterDir=e=>r.filterDir(e)}try{const r=await g[p.statMethod](p.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(p.watchPath,r)){l();return false}const m=this.fsw.options.followSymlinks;let y;if(r.isDirectory()){const l=s.resolve(e);const u=m?await(0,i.realpath)(e):e;if(this.fsw.closed)return;y=await this._handleDir(p.watchPath,r,t,n,o,p,u);if(this.fsw.closed)return;if(l!==u&&u!==undefined){this.fsw._symlinkPaths.set(l,u)}}else if(r.isSymbolicLink()){const o=m?await(0,i.realpath)(e):e;if(this.fsw.closed)return;const l=s.dirname(p.watchPath);this.fsw._getWatchedDir(l).add(p.watchPath);this.fsw._emit(u.ADD,p.watchPath,r);y=await this._handleDir(l,r,t,n,e,p,o);if(this.fsw.closed)return;if(o!==undefined){this.fsw._symlinkPaths.set(s.resolve(e),o)}}else{y=this._handleFile(p.watchPath,r,t)}l();if(y)this.fsw._addPathCloser(e,y);return false}catch(t){if(this.fsw._handleError(t)){l();return e}}}}t.NodeFsHandler=NodeFsHandler},5315:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FSWatcher=t.WatchHelper=void 0;t.watch=watch;
/*! chokidar - MIT License (c) 2012 Paul Miller (paulmillr.com) */const n=r(9896);const i=r(1943);const s=r(4434);const o=r(6928);const l=r(7525);const u=r(507);const p="/";const g="//";const m=".";const y="..";const _="string";const v=/\\/g;const E=/\/\//;const b=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/;const C=/^\.[/\\]/;function arrify(e){return Array.isArray(e)?e:[e]}const isMatcherObject=e=>typeof e==="object"&&e!==null&&!(e instanceof RegExp);function createPattern(e){if(typeof e==="function")return e;if(typeof e==="string")return t=>e===t;if(e instanceof RegExp)return t=>e.test(t);if(typeof e==="object"&&e!==null){return t=>{if(e.path===t)return true;if(e.recursive){const r=o.relative(e.path,t);if(!r){return false}return!r.startsWith("..")&&!o.isAbsolute(r)}return false}}return()=>false}function normalizePath(e){if(typeof e!=="string")throw new Error("string expected");e=o.normalize(e);e=e.replace(/\\/g,"/");let t=false;if(e.startsWith("//"))t=true;const r=/\/\//;while(e.match(r))e=e.replace(r,"/");if(t)e="/"+e;return e}function matchPatterns(e,t,r){const n=normalizePath(t);for(let t=0;t<e.length;t++){const i=e[t];if(i(n,r)){return true}}return false}function anymatch(e,t){if(e==null){throw new TypeError("anymatch: specify first argument")}const r=arrify(e);const n=r.map((e=>createPattern(e)));if(t==null){return(e,t)=>matchPatterns(n,e,t)}return matchPatterns(n,t)}const unifyPaths=e=>{const t=arrify(e).flat();if(!t.every((e=>typeof e===_))){throw new TypeError(`Non-string provided as watch path: ${t}`)}return t.map(normalizePathToUnix)};const toUnix=e=>{let t=e.replace(v,p);let r=false;if(t.startsWith(g)){r=true}while(t.match(E)){t=t.replace(E,p)}if(r){t=p+t}return t};const normalizePathToUnix=e=>toUnix(o.normalize(toUnix(e)));const normalizeIgnored=(e="")=>t=>{if(typeof t==="string"){return normalizePathToUnix(o.isAbsolute(t)?t:o.join(e,t))}else{return t}};const getAbsolutePath=(e,t)=>{if(o.isAbsolute(e)){return e}return o.join(t,e)};const w=Object.freeze(new Set);class DirEntry{constructor(e,t){this.path=e;this._removeWatcher=t;this.items=new Set}add(e){const{items:t}=this;if(!t)return;if(e!==m&&e!==y)t.add(e)}async remove(e){const{items:t}=this;if(!t)return;t.delete(e);if(t.size>0)return;const r=this.path;try{await(0,i.readdir)(r)}catch(e){if(this._removeWatcher){this._removeWatcher(o.dirname(r),o.basename(r))}}}has(e){const{items:t}=this;if(!t)return;return t.has(e)}getChildren(){const{items:e}=this;if(!e)return[];return[...e.values()]}dispose(){this.items.clear();this.path="";this._removeWatcher=u.EMPTY_FN;this.items=w;Object.freeze(this)}}const I="stat";const T="lstat";class WatchHelper{constructor(e,t,r){this.fsw=r;const n=e;this.path=e=e.replace(C,"");this.watchPath=n;this.fullWatchPath=o.resolve(n);this.dirParts=[];this.dirParts.forEach((e=>{if(e.length>1)e.pop()}));this.followSymlinks=t;this.statMethod=t?I:T}entryPath(e){return o.join(this.watchPath,o.relative(this.watchPath,e.fullPath))}filterPath(e){const{stats:t}=e;if(t&&t.isSymbolicLink())return this.filterDir(e);const r=this.entryPath(e);return this.fsw._isntIgnored(r,t)&&this.fsw._hasReadPermissions(t)}filterDir(e){return this.fsw._isntIgnored(this.entryPath(e),e.stats)}}t.WatchHelper=WatchHelper;class FSWatcher extends s.EventEmitter{constructor(e={}){super();this.closed=false;this._closers=new Map;this._ignoredPaths=new Set;this._throttled=new Map;this._streams=new Set;this._symlinkPaths=new Map;this._watched=new Map;this._pendingWrites=new Map;this._pendingUnlinks=new Map;this._readyCount=0;this._readyEmitted=false;const t=e.awaitWriteFinish;const r={stabilityThreshold:2e3,pollInterval:100};const n={persistent:true,ignoreInitial:false,ignorePermissionErrors:false,interval:100,binaryInterval:300,followSymlinks:true,usePolling:false,atomic:true,...e,ignored:e.ignored?arrify(e.ignored):arrify([]),awaitWriteFinish:t===true?r:typeof t==="object"?{...r,...t}:false};if(u.isIBMi)n.usePolling=true;if(n.atomic===undefined)n.atomic=!n.usePolling;const i=process.env.CHOKIDAR_USEPOLLING;if(i!==undefined){const e=i.toLowerCase();if(e==="false"||e==="0")n.usePolling=false;else if(e==="true"||e==="1")n.usePolling=true;else n.usePolling=!!e}const s=process.env.CHOKIDAR_INTERVAL;if(s)n.interval=Number.parseInt(s,10);let o=0;this._emitReady=()=>{o++;if(o>=this._readyCount){this._emitReady=u.EMPTY_FN;this._readyEmitted=true;process.nextTick((()=>this.emit(u.EVENTS.READY)))}};this._emitRaw=(...e)=>this.emit(u.EVENTS.RAW,...e);this._boundRemove=this._remove.bind(this);this.options=n;this._nodeFsHandler=new u.NodeFsHandler(this);Object.freeze(n)}_addIgnoredPath(e){if(isMatcherObject(e)){for(const t of this._ignoredPaths){if(isMatcherObject(t)&&t.path===e.path&&t.recursive===e.recursive){return}}}this._ignoredPaths.add(e)}_removeIgnoredPath(e){this._ignoredPaths.delete(e);if(typeof e==="string"){for(const t of this._ignoredPaths){if(isMatcherObject(t)&&t.path===e){this._ignoredPaths.delete(t)}}}}add(e,t,r){const{cwd:n}=this.options;this.closed=false;this._closePromise=undefined;let i=unifyPaths(e);if(n){i=i.map((e=>{const t=getAbsolutePath(e,n);return t}))}i.forEach((e=>{this._removeIgnoredPath(e)}));this._userIgnored=undefined;if(!this._readyCount)this._readyCount=0;this._readyCount+=i.length;Promise.all(i.map((async e=>{const n=await this._nodeFsHandler._addToNodeFs(e,!r,undefined,0,t);if(n)this._emitReady();return n}))).then((e=>{if(this.closed)return;e.forEach((e=>{if(e)this.add(o.dirname(e),o.basename(t||e))}))}));return this}unwatch(e){if(this.closed)return this;const t=unifyPaths(e);const{cwd:r}=this.options;t.forEach((e=>{if(!o.isAbsolute(e)&&!this._closers.has(e)){if(r)e=o.join(r,e);e=o.resolve(e)}this._closePath(e);this._addIgnoredPath(e);if(this._watched.has(e)){this._addIgnoredPath({path:e,recursive:true})}this._userIgnored=undefined}));return this}close(){if(this._closePromise){return this._closePromise}this.closed=true;this.removeAllListeners();const e=[];this._closers.forEach((t=>t.forEach((t=>{const r=t();if(r instanceof Promise)e.push(r)}))));this._streams.forEach((e=>e.destroy()));this._userIgnored=undefined;this._readyCount=0;this._readyEmitted=false;this._watched.forEach((e=>e.dispose()));this._closers.clear();this._watched.clear();this._streams.clear();this._symlinkPaths.clear();this._throttled.clear();this._closePromise=e.length?Promise.all(e).then((()=>undefined)):Promise.resolve();return this._closePromise}getWatched(){const e={};this._watched.forEach(((t,r)=>{const n=this.options.cwd?o.relative(this.options.cwd,r):r;const i=n||m;e[i]=t.getChildren().sort()}));return e}emitWithAll(e,t){this.emit(e,...t);if(e!==u.EVENTS.ERROR)this.emit(u.EVENTS.ALL,e,...t)}async _emit(e,t,r){if(this.closed)return;const n=this.options;if(u.isWindows)t=o.normalize(t);if(n.cwd)t=o.relative(n.cwd,t);const s=[t];if(r!=null)s.push(r);const l=n.awaitWriteFinish;let p;if(l&&(p=this._pendingWrites.get(t))){p.lastChange=new Date;return this}if(n.atomic){if(e===u.EVENTS.UNLINK){this._pendingUnlinks.set(t,[e,...s]);setTimeout((()=>{this._pendingUnlinks.forEach(((e,t)=>{this.emit(...e);this.emit(u.EVENTS.ALL,...e);this._pendingUnlinks.delete(t)}))}),typeof n.atomic==="number"?n.atomic:100);return this}if(e===u.EVENTS.ADD&&this._pendingUnlinks.has(t)){e=u.EVENTS.CHANGE;this._pendingUnlinks.delete(t)}}if(l&&(e===u.EVENTS.ADD||e===u.EVENTS.CHANGE)&&this._readyEmitted){const awfEmit=(t,r)=>{if(t){e=u.EVENTS.ERROR;s[0]=t;this.emitWithAll(e,s)}else if(r){if(s.length>1){s[1]=r}else{s.push(r)}this.emitWithAll(e,s)}};this._awaitWriteFinish(t,l.stabilityThreshold,e,awfEmit);return this}if(e===u.EVENTS.CHANGE){const e=!this._throttle(u.EVENTS.CHANGE,t,50);if(e)return this}if(n.alwaysStat&&r===undefined&&(e===u.EVENTS.ADD||e===u.EVENTS.ADD_DIR||e===u.EVENTS.CHANGE)){const e=n.cwd?o.join(n.cwd,t):t;let r;try{r=await(0,i.stat)(e)}catch(e){}if(!r||this.closed)return;s.push(r)}this.emitWithAll(e,s);return this}_handleError(e){const t=e&&e.code;if(e&&t!=="ENOENT"&&t!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||t!=="EPERM"&&t!=="EACCES")){this.emit(u.EVENTS.ERROR,e)}return e||this.closed}_throttle(e,t,r){if(!this._throttled.has(e)){this._throttled.set(e,new Map)}const n=this._throttled.get(e);if(!n)throw new Error("invalid throttle");const i=n.get(t);if(i){i.count++;return false}let s;const clear=()=>{const e=n.get(t);const r=e?e.count:0;n.delete(t);clearTimeout(s);if(e)clearTimeout(e.timeoutObject);return r};s=setTimeout(clear,r);const o={timeoutObject:s,clear:clear,count:0};n.set(t,o);return o}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,t,r,i){const s=this.options.awaitWriteFinish;if(typeof s!=="object")return;const l=s.pollInterval;let u;let p=e;if(this.options.cwd&&!o.isAbsolute(e)){p=o.join(this.options.cwd,e)}const g=new Date;const m=this._pendingWrites;function awaitWriteFinishFn(r){(0,n.stat)(p,((n,s)=>{if(n||!m.has(e)){if(n&&n.code!=="ENOENT")i(n);return}const o=Number(new Date);if(r&&s.size!==r.size){m.get(e).lastChange=o}const p=m.get(e);const g=o-p.lastChange;if(g>=t){m.delete(e);i(undefined,s)}else{u=setTimeout(awaitWriteFinishFn,l,s)}}))}if(!m.has(e)){m.set(e,{lastChange:g,cancelWait:()=>{m.delete(e);clearTimeout(u);return r}});u=setTimeout(awaitWriteFinishFn,l)}}_isIgnored(e,t){if(this.options.atomic&&b.test(e))return true;if(!this._userIgnored){const{cwd:e}=this.options;const t=this.options.ignored;const r=(t||[]).map(normalizeIgnored(e));const n=[...this._ignoredPaths];const i=[...n.map(normalizeIgnored(e)),...r];this._userIgnored=anymatch(i,undefined)}return this._userIgnored(e,t)}_isntIgnored(e,t){return!this._isIgnored(e,t)}_getWatchHelpers(e){return new WatchHelper(e,this.options.followSymlinks,this)}_getWatchedDir(e){const t=o.resolve(e);if(!this._watched.has(t))this._watched.set(t,new DirEntry(t,this._boundRemove));return this._watched.get(t)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return true;return Boolean(Number(e.mode)&256)}_remove(e,t,r){const n=o.join(e,t);const i=o.resolve(n);r=r!=null?r:this._watched.has(n)||this._watched.has(i);if(!this._throttle("remove",n,100))return;if(!r&&this._watched.size===1){this.add(e,t,true)}const s=this._getWatchedDir(n);const l=s.getChildren();l.forEach((e=>this._remove(n,e)));const p=this._getWatchedDir(e);const g=p.has(t);p.remove(t);if(this._symlinkPaths.has(i)){this._symlinkPaths.delete(i)}let m=n;if(this.options.cwd)m=o.relative(this.options.cwd,n);if(this.options.awaitWriteFinish&&this._pendingWrites.has(m)){const e=this._pendingWrites.get(m).cancelWait();if(e===u.EVENTS.ADD)return}this._watched.delete(n);this._watched.delete(i);const y=r?u.EVENTS.UNLINK_DIR:u.EVENTS.UNLINK;if(g&&!this._isIgnored(n))this._emit(y,n);this._closePath(n)}_closePath(e){this._closeFile(e);const t=o.dirname(e);this._getWatchedDir(t).remove(o.basename(e))}_closeFile(e){const t=this._closers.get(e);if(!t)return;t.forEach((e=>e()));this._closers.delete(e)}_addPathCloser(e,t){if(!t)return;let r=this._closers.get(e);if(!r){r=[];this._closers.set(e,r)}r.push(t)}_readdirp(e,t){if(this.closed)return;const r={type:u.EVENTS.ALL,alwaysStat:true,lstat:true,...t,depth:0};let n=(0,l.readdirp)(e,r);this._streams.add(n);n.once(u.STR_CLOSE,(()=>{n=undefined}));n.once(u.STR_END,(()=>{if(n){this._streams.delete(n);n=undefined}}));return n}}t.FSWatcher=FSWatcher;function watch(e,t={}){const r=new FSWatcher(t);r.add(e);return r}t["default"]={watch:watch,FSWatcher:FSWatcher}},5384:(e,t,r)=>{"use strict";const n=r(9896);const i=r(6928);const s=n.lchown?"lchown":"chown";const o=n.lchownSync?"lchownSync":"chownSync";const l=n.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/);const lchownSync=(e,t,r)=>{try{return n[o](e,t,r)}catch(e){if(e.code!=="ENOENT")throw e}};const chownSync=(e,t,r)=>{try{return n.chownSync(e,t,r)}catch(e){if(e.code!=="ENOENT")throw e}};const u=l?(e,t,r,i)=>s=>{if(!s||s.code!=="EISDIR")i(s);else n.chown(e,t,r,i)}:(e,t,r,n)=>n;const p=l?(e,t,r)=>{try{return lchownSync(e,t,r)}catch(n){if(n.code!=="EISDIR")throw n;chownSync(e,t,r)}}:(e,t,r)=>lchownSync(e,t,r);const g=process.version;let readdir=(e,t,r)=>n.readdir(e,t,r);let readdirSync=(e,t)=>n.readdirSync(e,t);if(/^v4\./.test(g))readdir=(e,t,r)=>n.readdir(e,r);const chown=(e,t,r,i)=>{n[s](e,t,r,u(e,t,r,(e=>{i(e&&e.code!=="ENOENT"?e:null)})))};const chownrKid=(e,t,r,s,o)=>{if(typeof t==="string")return n.lstat(i.resolve(e,t),((n,i)=>{if(n)return o(n.code!=="ENOENT"?n:null);i.name=t;chownrKid(e,i,r,s,o)}));if(t.isDirectory()){chownr(i.resolve(e,t.name),r,s,(n=>{if(n)return o(n);const l=i.resolve(e,t.name);chown(l,r,s,o)}))}else{const n=i.resolve(e,t.name);chown(n,r,s,o)}};const chownr=(e,t,r,n)=>{readdir(e,{withFileTypes:true},((i,s)=>{if(i){if(i.code==="ENOENT")return n();else if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!s.length)return chown(e,t,r,n);let o=s.length;let l=null;const then=i=>{if(l)return;if(i)return n(l=i);if(--o===0)return chown(e,t,r,n)};s.forEach((n=>chownrKid(e,n,t,r,then)))}))};const chownrKidSync=(e,t,r,s)=>{if(typeof t==="string"){try{const r=n.lstatSync(i.resolve(e,t));r.name=t;t=r}catch(e){if(e.code==="ENOENT")return;else throw e}}if(t.isDirectory())chownrSync(i.resolve(e,t.name),r,s);p(i.resolve(e,t.name),r,s)};const chownrSync=(e,t,r)=>{let n;try{n=readdirSync(e,{withFileTypes:true})}catch(n){if(n.code==="ENOENT")return;else if(n.code==="ENOTDIR"||n.code==="ENOTSUP")return p(e,t,r);else throw n}if(n&&n.length)n.forEach((n=>chownrKidSync(e,n,t,r)));return p(e,t,r)};e.exports=chownr;chownr.sync=chownrSync},4982:(e,t,r)=>{"use strict";const n=r(5243);e.exports=n.getCPUInfo},6110:(e,t,r)=>{t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.storage=localstorage();t.destroy=(()=>{let e=false;return()=>{if(!e){e=true;console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}}})();t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}let e;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function formatArgs(t){t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff);if(!this.useColors){return}const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0;let i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{if(e==="%%"){return}n++;if(e==="%c"){i=n}}));t.splice(i,0,r)}t.log=console.debug||console.log||(()=>{});function save(e){try{if(e){t.storage.setItem("debug",e)}else{t.storage.removeItem("debug")}}catch(e){}}function load(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch(e){}if(!e&&typeof process!=="undefined"&&"env"in process){e=process.env.DEBUG}return e}function localstorage(){try{return localStorage}catch(e){}}e.exports=r(897)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},897:(e,t,r)=>{function setup(e){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=r(744);createDebug.destroy=destroy;Object.keys(e).forEach((t=>{createDebug[t]=e[t]}));createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(e){let t=0;for(let r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r);t|=0}return createDebug.colors[Math.abs(t)%createDebug.colors.length]}createDebug.selectColor=selectColor;function createDebug(e){let t;let r=null;let n;let i;function debug(...e){if(!debug.enabled){return}const r=debug;const n=Number(new Date);const i=n-(t||n);r.diff=i;r.prev=t;r.curr=n;t=n;e[0]=createDebug.coerce(e[0]);if(typeof e[0]!=="string"){e.unshift("%O")}let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,n)=>{if(t==="%%"){return"%"}s++;const i=createDebug.formatters[n];if(typeof i==="function"){const n=e[s];t=i.call(r,n);e.splice(s,1);s--}return t}));createDebug.formatArgs.call(r,e);const o=r.log||createDebug.log;o.apply(r,e)}debug.namespace=e;debug.useColors=createDebug.useColors();debug.color=createDebug.selectColor(e);debug.extend=extend;debug.destroy=createDebug.destroy;Object.defineProperty(debug,"enabled",{enumerable:true,configurable:false,get:()=>{if(r!==null){return r}if(n!==createDebug.namespaces){n=createDebug.namespaces;i=createDebug.enabled(e)}return i},set:e=>{r=e}});if(typeof createDebug.init==="function"){createDebug.init(debug)}return debug}function extend(e,t){const r=createDebug(this.namespace+(typeof t==="undefined"?":":t)+e);r.log=this.log;return r}function enable(e){createDebug.save(e);createDebug.namespaces=e;createDebug.names=[];createDebug.skips=[];const t=(typeof e==="string"?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const e of t){if(e[0]==="-"){createDebug.skips.push(e.slice(1))}else{createDebug.names.push(e)}}}function matchesTemplate(e,t){let r=0;let n=0;let i=-1;let s=0;while(r<e.length){if(n<t.length&&(t[n]===e[r]||t[n]==="*")){if(t[n]==="*"){i=n;s=r;n++}else{r++;n++}}else if(i!==-1){n=i+1;s++;r=s}else{return false}}while(n<t.length&&t[n]==="*"){n++}return n===t.length}function disable(){const e=[...createDebug.names,...createDebug.skips.map((e=>"-"+e))].join(",");createDebug.enable("");return e}function enabled(e){for(const t of createDebug.skips){if(matchesTemplate(e,t)){return false}}for(const t of createDebug.names){if(matchesTemplate(e,t)){return true}}return false}function coerce(e){if(e instanceof Error){return e.stack||e.message}return e}function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}createDebug.enable(createDebug.load());return createDebug}e.exports=setup},2830:(e,t,r)=>{if(typeof process==="undefined"||process.type==="renderer"||process.browser===true||process.__nwjs){e.exports=r(6110)}else{e.exports=r(5108)}},5108:(e,t,r)=>{const n=r(2018);const i=r(9023);t.init=init;t.log=log;t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");t.colors=[6,2,3,4,5,1];try{const e=r(1450);if(e&&(e.stderr||e).level>=2){t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let n=process.env[t];if(/^(yes|on|true|enabled)$/i.test(n)){n=true}else if(/^(no|off|false|disabled)$/i.test(n)){n=false}else if(n==="null"){n=null}else{n=Number(n)}e[r]=n;return e}),{});function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)}function formatArgs(t){const{namespace:r,useColors:n}=this;if(n){const n=this.color;const i="[3"+(n<8?n:"8;5;"+n);const s=`  ${i};1m${r} [0m`;t[0]=s+t[0].split("\n").join("\n"+s);t.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else{t[0]=getDate()+r+" "+t[0]}}function getDate(){if(t.inspectOpts.hideDate){return""}return(new Date).toISOString()+" "}function log(...e){return process.stderr.write(i.formatWithOptions(t.inspectOpts,...e)+"\n")}function save(e){if(e){process.env.DEBUG=e}else{delete process.env.DEBUG}}function load(){return process.env.DEBUG}function init(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++){e.inspectOpts[r[n]]=t.inspectOpts[r[n]]}}e.exports=r(897)(t);const{formatters:s}=e.exports;s.o=function(e){this.inspectOpts.colors=this.useColors;return i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")};s.O=function(e){this.inspectOpts.colors=this.useColors;return i.inspect(e,this.inspectOpts)}},9167:(e,t,r)=>{var n=r(5692),i=r(8611),s=r(7016),o=r(4510);var l=e.exports.maxRedirects=5;var u={https:n,http:i};for(var p in u){var h=function(){};h.prototype=u[p];h=new h;h.request=function(r){return function(n,i,l){l=l||{};var u=typeof n==="object"&&"maxRedirects"in n?n.maxRedirects:t.maxRedirects;var g=o.extend({count:0,max:u,clientRequest:null,userCallback:i},l);if(g.count>g.max){var m=new Error("Max redirects exceeded. To allow more redirects, pass options.maxRedirects property.");g.clientRequest.emit("error",m);return g.clientRequest}g.count++;var y;if(typeof n==="string"){y=n}else{y=s.format(o.extend({protocol:p},n))}var _=Object.getPrototypeOf(r).request(n,redirectCallback(y,g));if(!g.clientRequest)g.clientRequest=_;function redirectCallback(t,r){return function(n){if(n.statusCode<300||n.statusCode>399){return r.userCallback(n)}if(!("location"in n.headers)){return r.userCallback(n)}var i=s.resolve(t,n.headers.location);var o=s.parse(i).protocol;o=o.substr(0,o.length-1);return e.exports[o].get(i,redirectCallback(t,r),r)}}return _}}(h);h.get=function(e){return function(t,r,n){var i=e.request(t,r,n);i.end();return i}}(h);e.exports[p]=h}},9976:(e,t,r)=>{e.exports=HttpDuplex;var n=r(9023),i=r(6131);n.inherits(HttpDuplex,i.Duplex);function HttpDuplex(e,t,r){var n=this;if(!(n instanceof HttpDuplex))return new HttpDuplex(e,t,r);i.Duplex.call(n,r);n._output=null;n.connect(e,t)}HttpDuplex.prototype.connect=function(e,t){var r=this;r.req=e;r._output=t;r.emit("response",t);t.on("data",(function(e){if(!r.push(e))r._output.pause()}));t.on("end",(function(){r.push(null)}))};HttpDuplex.prototype._read=function(e){if(this._output)this._output.resume()};HttpDuplex.prototype._write=function(e,t,r){this.req.write(e,t);r()};HttpDuplex.prototype.end=function(e,t,r){this._output.socket.destroySoon();return this.req.end(e,t,r)};HttpDuplex.prototype.destroy=function(){this.req.destroy();this._output.socket.destroy()};HttpDuplex.prototype.destroySoon=function(){this.req.destroy();this._output.socket.destroy()}},7133:(e,t,r)=>{var n=r(3480),i=r(9167),s=r(9896),o=r(6928),l=r(7016),u=r(8573),p=r(9976),g=r(2830)("modem"),m=r(4510),y=r(9023),_=r(4087),v=r(857),E=v.type()==="Windows_NT",b=r(2203);var defaultOpts=function(){var e;var t={};if(!process.env.DOCKER_HOST){t.socketPath=E?"//./pipe/docker_engine":findDefaultUnixSocket}else if(process.env.DOCKER_HOST.indexOf("unix://")===0){t.socketPath=process.env.DOCKER_HOST.substring(7)||findDefaultUnixSocket}else if(process.env.DOCKER_HOST.indexOf("npipe://")===0){t.socketPath=process.env.DOCKER_HOST.substring(8)||"//./pipe/docker_engine"}else{var r=process.env.DOCKER_HOST;if(r.indexOf("//")<0){r="tcp://"+r}try{e=new l.URL(r)}catch(e){throw new Error("DOCKER_HOST env variable should be something like tcp://localhost:1234")}t.port=e.port;if(process.env.DOCKER_TLS_VERIFY==="1"||t.port==="2376"){t.protocol="https"}else if(e.protocol==="ssh:"){t.protocol="ssh";t.username=e.username;t.sshOptions={agent:process.env.SSH_AUTH_SOCK}}else{t.protocol="http"}if(process.env.DOCKER_PATH_PREFIX){t.pathPrefix=process.env.DOCKER_PATH_PREFIX}else{t.pathPrefix="/"}t.host=e.hostname;if(process.env.DOCKER_CERT_PATH){t.ca=_(o.join(process.env.DOCKER_CERT_PATH,"ca.pem"));t.cert=s.readFileSync(o.join(process.env.DOCKER_CERT_PATH,"cert.pem"));t.key=s.readFileSync(o.join(process.env.DOCKER_CERT_PATH,"key.pem"))}if(process.env.DOCKER_CLIENT_TIMEOUT){t.timeout=parseInt(process.env.DOCKER_CLIENT_TIMEOUT,10)}}return t};var findDefaultUnixSocket=function(){return new Promise((function(e){var t=o.join(v.homedir(),".docker","run","docker.sock");s.access(t,(function(r){if(r)e("/var/run/docker.sock");else e(t)}))}))};var Modem=function(e){var t=defaultOpts();var r=Object.assign({},t,e);this.host=r.host;if(!this.host){this.socketPath=r.socketPath}this.port=r.port;this.pathPrefix=r.pathPrefix;this.username=r.username;this.password=r.password;this.version=r.version;this.key=r.key;this.cert=r.cert;this.ca=r.ca;this.timeout=r.timeout;this.connectionTimeout=r.connectionTimeout;this.checkServerIdentity=r.checkServerIdentity;this.agent=r.agent;this.headers=r.headers||{};this.sshOptions=Object.assign({},e?e.sshOptions:{},t.sshOptions);if(this.sshOptions.agentForward===undefined){this.sshOptions.agentForward=r.agentForward}if(this.key&&this.cert&&this.ca){this.protocol="https"}this.protocol=r.protocol||this.protocol||"http"};Modem.prototype.dial=function(e,t){var r,n,i;if(e.options){r=e.options}if(r&&r.authconfig){delete r.authconfig}if(r&&r.abortSignal){delete r.abortSignal}if(this.version){e.path="/"+this.version+e.path}if(this.host){var u=l.parse(this.host);n=l.format({protocol:u.protocol||this.protocol,hostname:u.hostname||this.host,port:this.port,pathname:u.pathname||this.pathPrefix});n=l.resolve(n,e.path)}else{n=e.path}if(e.path.indexOf("?")!==-1){if(r&&Object.keys(r).length>0){n+=this.buildQuerystring(r._query||r)}else{n=n.substring(0,n.length-1)}}var p={path:n,method:e.method,headers:e.headers||Object.assign({},this.headers),key:this.key,cert:this.cert,ca:this.ca};if(this.checkServerIdentity){p.checkServerIdentity=this.checkServerIdentity}if(this.agent){p.agent=this.agent}if(e.authconfig){p.headers["X-Registry-Auth"]=e.authconfig.key||e.authconfig.base64||Buffer.from(JSON.stringify(e.authconfig)).toString("base64").replace(/\+/g,"-").replace(/\//g,"_")}if(e.registryconfig){p.headers["X-Registry-Config"]=e.registryconfig.base64||Buffer.from(JSON.stringify(e.registryconfig)).toString("base64")}if(e.abortSignal){p.signal=e.abortSignal}if(e.file){if(typeof e.file==="string"){i=s.createReadStream(o.resolve(e.file))}else{i=e.file}p.headers["Content-Type"]="application/tar"}else if(r&&e.method==="POST"){i=JSON.stringify(r._body||r);if(e.allowEmpty){p.headers["Content-Type"]="application/json"}else{if(i!=="{}"&&i!=='""'){p.headers["Content-Type"]="application/json"}else{i=undefined}}}if(typeof i==="string"){p.headers["Content-Length"]=Buffer.byteLength(i)}else if(Buffer.isBuffer(i)===true){p.headers["Content-Length"]=i.length}else if(p.method==="PUT"||e.hijack||e.openStdin){p.headers["Transfer-Encoding"]="chunked"}if(e.hijack){p.headers.Connection="Upgrade";p.headers.Upgrade=p.headers.Upgrade??"tcp"}if(this.socketPath){this.getSocketPath().then((r=>{p.socketPath=r;this.buildRequest(p,e,i,t)}))}else{var g=l.parse(n);p.hostname=g.hostname;p.port=g.port;p.path=g.path;this.buildRequest(p,e,i,t)}};Modem.prototype.getSocketPath=function(){if(!this.socketPath)return;if(this.socketPathCache)return Promise.resolve(this.socketPathCache);var e=typeof this.socketPath==="function"?this.socketPath():this.socketPath;this.socketPathCache=e;return Promise.resolve(e)};Modem.prototype.buildRequest=function(e,t,r,n){var s=this;var o;var l=false;var p=s.protocol==="ssh"?Object.assign(e,{agent:u(Object.assign({},s.sshOptions,{host:s.host,port:s.port,username:s.username,password:s.password})),protocol:"http:"}):e;var _=i[s.protocol==="ssh"?"http":s.protocol].request(p,(function(){}));g("Sending: %s",y.inspect(e,{showHidden:true,depth:null}));if(s.connectionTimeout){o=setTimeout((function(){g("Connection Timeout of %s ms exceeded",s.connectionTimeout);_.destroy()}),s.connectionTimeout)}if(s.timeout){_.setTimeout(s.timeout);_.on("timeout",(function(){g("Timeout of %s ms exceeded",s.timeout);_.destroy()}))}if(t.hijack===true){clearTimeout(o);_.on("upgrade",(function(e,t,r){if(l===false){l=true;if(r.length>0){t.unshift(r)}return n(null,t)}}))}_.on("connect",(function(){clearTimeout(o)}));_.on("disconnect",(function(){clearTimeout(o)}));_.on("response",(function(r){clearTimeout(o);if(t.isStream===true){if(l===false){l=true;s.buildPayload(null,t.isStream,t.statusCodes,t.openStdin,_,r,null,n)}}else{if(e.signal!=null){b.addAbortSignal(e.signal,r)}var i=[];r.on("data",(function(e){i.push(e)}));r.on("end",(function(){var e=Buffer.concat(i);var o=e.toString();g("Received: %s",o);var u=m.parseJSON(o)||e;if(l===false){l=true;s.buildPayload(null,t.isStream,t.statusCodes,false,_,r,u,n)}}))}}));_.on("error",(function(e){clearTimeout(o);if(l===false){l=true;s.buildPayload(e,t.isStream,t.statusCodes,false,{},{},null,n)}}));if(typeof r==="string"||Buffer.isBuffer(r)){_.write(r)}else if(r){r.on("error",(function(e){_.destroy(e)}));r.pipe(_)}if(!t.openStdin&&(typeof r==="string"||r===undefined||Buffer.isBuffer(r))){_.end()}};Modem.prototype.buildPayload=function(e,t,r,n,i,s,o,l){if(e)return l(e,null);if(r[s.statusCode]!==true){getCause(t,s,o,(function(e,t){if(e){return l(e,null)}var n=new Error("(HTTP code "+s.statusCode+") "+(r[s.statusCode]||"unexpected")+" - "+(t.message||t.error||t)+" ");n.reason=r[s.statusCode];n.statusCode=s.statusCode;n.json=o;l(n,null)}))}else{if(n){l(null,new p(i,s))}else if(t){l(null,s)}else{l(null,o)}}function getCause(e,t,r,n){var i="";var s=false;if(e){t.on("data",(function(e){i+=e}));t.on("error",(function(e){handler(e,null)}));t.on("end",(function(){handler(null,m.parseJSON(i)||i)}))}else{n(null,r)}function handler(e,t){if(s===false){if(e){n(e)}else{n(null,t)}}s=true}}};Modem.prototype.demuxStream=function(e,t,r){var n=null;var i=null;var s=Buffer.from("");function processData(e){if(e){s=Buffer.concat([s,e])}if(!n){if(s.length>=8){var o=bufferSlice(8);n=o.readUInt8(0);i=o.readUInt32BE(4);processData()}}else{if(s.length>=i){var l=bufferSlice(i);if(n===1){t.write(l)}else{r.write(l)}n=null;processData()}}}function bufferSlice(e){var t=s.subarray(0,e);s=Buffer.from(s.subarray(e,s.length));return t}e.on("data",processData)};Modem.prototype.followProgress=function(e,t,r){var n="";var i=[];var s=false;e.on("data",onStreamEvent);e.on("error",onStreamError);e.on("end",onStreamEnd);e.on("close",onStreamEnd);function onStreamEvent(e){n+=e.toString();pump();function pump(){var e;while((e=n.indexOf("\n"))>=0){if(e==0){n=n.slice(1);continue}processLine(n.slice(0,e));n=n.slice(e+1)}}function processLine(e){if(e[e.length-1]=="\r")e=e.substr(0,e.length-1);if(e.length>0){var t=JSON.parse(e);i.push(t);if(r){r(t)}}}}function onStreamError(r){s=true;e.removeListener("data",onStreamEvent);e.removeListener("error",onStreamError);e.removeListener("end",onStreamEnd);e.removeListener("close",onStreamEnd);t(r,i)}function onStreamEnd(){if(!s)t(null,i);s=true}};Modem.prototype.buildQuerystring=function(e){var t={};Object.keys(e).map((function(r,n){if(e[r]&&typeof e[r]==="object"&&!Array.isArray(e[r])){t[r]=JSON.stringify(e[r])}else{t[r]=e[r]}}));return n.stringify(t)};e.exports=Modem},8573:(e,t,r)=>{var n=r(5472).Client,i=r(8611);e.exports=function(e){var t=new n;var r=new i.Agent;r.createConnection=function(n,i){try{t.once("ready",(function(){t.exec("docker system dial-stdio",(function(e,n){if(e){handleError(e,i)}i(null,n);n.addListener("error",(e=>{handleError(e,i)}));n.once("close",(()=>{t.end();r.destroy()}))}))})).on("error",(e=>{handleError(e,i)})).connect(e);t.once("end",(()=>r.destroy()))}catch(e){handleError(e)}};function handleError(e,n){t.end();r.destroy();if(n){n(e)}else{throw e}}return r}},4510:e=>{var t=[];var r=t.forEach;var n=t.slice;e.exports.extend=function(e){r.call(n.call(arguments,1),(function(t){if(t){for(var r in t){e[r]=t[r]}}}));return e};e.exports.parseJSON=function(e){try{return JSON.parse(e)}catch(e){return null}}},2474:(e,t,r)=>{var n=r(8300);var Config=function(e,t){this.modem=e;this.id=t};Config.prototype[r(9023).inspect.custom]=function(){return this};Config.prototype.inspect=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/configs/"+this.id,method:"GET",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"config not found",500:"server error",503:"node is not part of a swarm"}};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Config.prototype.update=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/configs/"+this.id+"/update?",method:"POST",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"config not found",500:"server error",503:"node is not part of a swarm"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Config.prototype.remove=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/configs/"+this.id,method:"DELETE",abortSignal:i.opts.abortSignal,statusCodes:{200:true,204:true,404:"config not found",500:"server error",503:"node is not part of a swarm"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};e.exports=Config},8521:(e,t,r)=>{var n=r(8300).extend,i=r(209),s=r(8300);var Container=function(e,t){this.modem=e;this.id=t;this.defaultOptions={top:{},start:{},commit:{},stop:{},pause:{},unpause:{},restart:{},resize:{},attach:{},remove:{},copy:{},kill:{},exec:{},rename:{},log:{},stats:{},getArchive:{},infoArchive:{},putArchive:{},update:{},wait:{}}};Container.prototype[r(9023).inspect.custom]=function(){return this};Container.prototype.inspect=function(e,t){var r=this;var n=s.processArgs(e,t);var i={path:"/containers/"+this.id+"/json?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,404:"no such container",500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.rename=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.rename);var i={path:"/containers/"+this.id+"/rename?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,204:true,404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.update=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.update);var i={path:"/containers/"+this.id+"/update",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,204:true,400:"bad parameter",404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.top=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.top);var i={path:"/containers/"+this.id+"/top?",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:true,404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.changes=function(e,t){var r=this;var n=s.processArgs(e,t);var i={path:"/containers/"+this.id+"/changes",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:true,404:"no such container",500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.listCheckpoint=function(e,t){var r=this;var n=s.processArgs(e,t);var i={path:"/containers/"+this.id+"/checkpoints?",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:true,404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.deleteCheckpoint=function(e,t,r){var n=this;var i=s.processArgs(t,r);var o={path:"/containers/"+this.id+"/checkpoints/"+e+"?",method:"DELETE",abortSignal:i.opts.abortSignal,statusCodes:{200:true,204:true,404:"no such container",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){n.modem.dial(o,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(o,(function(e,t){i.callback(e,t)}))}};Container.prototype.createCheckpoint=function(e,t){var r=this;var n=s.processArgs(e,t);var i={path:"/containers/"+this.id+"/checkpoints",method:"POST",abortSignal:n.opts.abortSignal,allowEmpty:true,statusCodes:{200:true,201:true,204:true,404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.export=function(e,t){var r=this;var n=s.processArgs(e,t);var i={path:"/containers/"+this.id+"/export",method:"GET",abortSignal:n.opts.abortSignal,isStream:true,statusCodes:{200:true,404:"no such container",500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.start=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.start);var i={path:"/containers/"+this.id+"/start?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,204:true,304:"container already started",404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.pause=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.pause);var i={path:"/containers/"+this.id+"/pause",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,204:true,500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.unpause=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.unpause);var i={path:"/containers/"+this.id+"/unpause",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,204:true,404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.exec=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.exec);var o={path:"/containers/"+this.id+"/exec",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,201:true,404:"no such container",409:"container stopped/paused",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(o,(function(n,s){if(n){return t(n)}e(new i(r.modem,s.Id))}))}))}else{this.modem.dial(o,(function(e,t){if(e)return n.callback(e,t);n.callback(e,new i(r.modem,t.Id))}))}};Container.prototype.commit=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.commit);n.opts.container=this.id;var i={path:"/commit?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,201:true,404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.stop=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.stop);var i={path:"/containers/"+this.id+"/stop?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,204:true,304:"container already stopped",404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.restart=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.restart);var i={path:"/containers/"+this.id+"/restart?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,204:true,404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.kill=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.kill);var i={path:"/containers/"+this.id+"/kill?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,204:true,404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.resize=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.resize);var i={path:"/containers/"+this.id+"/resize?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,400:"bad parameter",404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.attach=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.attach);var i={path:"/containers/"+this.id+"/attach?",method:"POST",abortSignal:n.opts.abortSignal,isStream:true,hijack:n.opts.hijack,openStdin:n.opts.stdin,statusCodes:{200:true,404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.wait=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.wait);var i={path:"/containers/"+this.id+"/wait?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,400:"bad parameter",404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.remove=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.remove);var i={path:"/containers/"+this.id+"?",method:"DELETE",abortSignal:n.opts.abortSignal,statusCodes:{200:true,204:true,400:"bad parameter",404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.copy=function(e,t){var r=this;console.log("container.copy is deprecated since Docker v1.8.x");var n=s.processArgs(e,t,this.defaultOptions.copy);var i={path:"/containers/"+this.id+"/copy",method:"POST",abortSignal:n.opts.abortSignal,isStream:true,statusCodes:{200:true,404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.getArchive=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.getArchive);var i={path:"/containers/"+this.id+"/archive?",method:"GET",abortSignal:n.opts.abortSignal,isStream:true,statusCodes:{200:true,400:"client error, bad parameters",404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.infoArchive=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.infoArchive);var i={path:"/containers/"+this.id+"/archive?",method:"HEAD",abortSignal:n.opts.abortSignal,isStream:true,statusCodes:{200:true,400:"client error, bad parameters",404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.putArchive=function(e,t,r){var n=this;var i=s.processArgs(t,r,this.defaultOptions.putArchive);var o={path:"/containers/"+this.id+"/archive?",method:"PUT",file:e,abortSignal:i.opts.abortSignal,statusCodes:{200:true,400:"client error, bad parameters",403:"client error, permission denied",404:"no such container",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){n.modem.dial(o,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(o,(function(e,t){i.callback(e,t)}))}};Container.prototype.logs=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.log);var i={path:"/containers/"+this.id+"/logs?",method:"GET",abortSignal:n.opts.abortSignal,isStream:n.opts.follow||false,statusCodes:{200:true,404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Container.prototype.stats=function(e,t){var r=this;var n=s.processArgs(e,t,this.defaultOptions.stats);var i=true;if(n.opts.stream===false){i=false}var o={path:"/containers/"+this.id+"/stats?",method:"GET",abortSignal:n.opts.abortSignal,isStream:i,statusCodes:{200:true,404:"no such container",500:"server error"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(o,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(o,(function(e,t){n.callback(e,t)}))}};e.exports=Container},9040:(e,t,r)=>{var n=r(4434).EventEmitter,i=r(7133),s=r(8521),o=r(9607),l=r(8302),u=r(8224),p=r(4769),g=r(8247),m=r(6080),y=r(2474),_=r(5325),v=r(6680),E=r(209),b=r(8300),C=r(638),w=b.extend;var Docker=function(e){if(!(this instanceof Docker))return new Docker(e);var t=global.Promise;if(e&&e.Promise){t=e.Promise;if(Object.keys(e).length===1){e=undefined}}if(e&&e.modem){this.modem=e.modem}else{this.modem=new i(e)}this.modem.Promise=t};Docker.prototype.createContainer=function(e,t){var r=this;var n={path:"/containers/create?",method:"POST",options:e,authconfig:e.authconfig,abortSignal:e.abortSignal,statusCodes:{200:true,201:true,400:"bad parameter",404:"no such container",406:"impossible to attach",500:"server error"}};delete e.authconfig;if(t===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(n,(function(n,i){if(n){return t(n)}e(r.getContainer(i.Id))}))}))}else{this.modem.dial(n,(function(e,n){if(e)return t(e,n);t(e,r.getContainer(n.Id))}))}};Docker.prototype.createImage=function(e,t,r){var n=this;if(!r&&typeof t==="function"){r=t;t=e;e=t.authconfig||undefined}else if(!r&&!t){t=e;e=t.authconfig}var i={path:"/images/create?",method:"POST",options:t,authconfig:e,abortSignal:t.abortSignal,isStream:true,statusCodes:{200:true,500:"server error"}};if(r===undefined){return new this.modem.Promise((function(e,t){n.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){r(e,t)}))}};Docker.prototype.loadImage=function(e,t,r){var n=this;if(!r&&typeof t==="function"){r=t;t=null}var i={path:"/images/load?",method:"POST",options:t,file:e,abortSignal:t&&t.abortSignal,isStream:true,statusCodes:{200:true,500:"server error"}};if(r===undefined){return new this.modem.Promise((function(e,t){n.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){r(e,t)}))}};Docker.prototype.importImage=function(e,t,r){var n=this;if(!r&&typeof t==="function"){r=t;t=undefined}if(!t)t={};t.fromSrc="-";var i={path:"/images/create?",method:"POST",options:t,file:e,abortSignal:t.abortSignal,isStream:true,statusCodes:{200:true,500:"server error"}};if(r===undefined){return new this.modem.Promise((function(e,t){n.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){r(e,t)}))}};Docker.prototype.checkAuth=function(e,t){var r=this;var n={path:"/auth",method:"POST",options:e,abortSignal:e.abortSignal,statusCodes:{200:true,204:true,500:"server error"}};if(t===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(n,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(n,(function(e,r){t(e,r)}))}};Docker.prototype.buildImage=function(e,t,r){var n=this;if(!r&&typeof t==="function"){r=t;t=null}var i={path:"/build?",method:"POST",file:undefined,options:t,abortSignal:t&&t.abortSignal,isStream:true,statusCodes:{200:true,500:"server error"}};if(t){if(t.registryconfig){i.registryconfig=i.options.registryconfig;delete i.options.registryconfig}if(t.authconfig){i.authconfig=i.options.authconfig;delete i.options.authconfig}if(t.cachefrom&&Array.isArray(t.cachefrom)){i.options.cachefrom=JSON.stringify(t.cachefrom)}}function dial(t){b.prepareBuildContext(e,(e=>{i.file=e;n.modem.dial(i,t)}))}function dialWithSession(e){if(t?.version==="2"){C(n,i.authconfig,((t,r,n)=>{if(t){return e(t)}i.options.session=r;dial(((t,r)=>{e(t,r);if(r){r.on("end",n)}}))}))}else{dial(e)}}if(r===undefined){return new n.modem.Promise((function(e,t){dialWithSession((function(r,n){if(r){return t(r)}e(n)}))}))}else{dialWithSession(r)}};Docker.prototype.getContainer=function(e){return new s(this.modem,e)};Docker.prototype.getImage=function(e){return new o(this.modem,e)};Docker.prototype.getVolume=function(e){return new l(this.modem,e)};Docker.prototype.getPlugin=function(e,t){return new g(this.modem,e,t)};Docker.prototype.getService=function(e){return new p(this.modem,e)};Docker.prototype.getTask=function(e){return new _(this.modem,e)};Docker.prototype.getNode=function(e){return new v(this.modem,e)};Docker.prototype.getNetwork=function(e){return new u(this.modem,e)};Docker.prototype.getSecret=function(e){return new m(this.modem,e)};Docker.prototype.getConfig=function(e){return new y(this.modem,e)};Docker.prototype.getExec=function(e){return new E(this.modem,e)};Docker.prototype.listContainers=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/containers/json?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,400:"bad parameter",500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.listImages=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/images/json?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,400:"bad parameter",500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.getImages=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/images/get?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,isStream:true,statusCodes:{200:true,400:"bad parameter",500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.listServices=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/services?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.listNodes=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/nodes?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,400:"bad parameter",404:"no such node",500:"server error",503:"node is not part of a swarm"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.listTasks=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/tasks?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.createSecret=function(e,t){var r=b.processArgs(e,t);var n=this;var i={path:"/secrets/create?",method:"POST",options:r.opts,abortSignal:r.opts.abortSignal,statusCodes:{200:true,201:true,406:"server error or node is not part of a swarm",409:"name conflicts with an existing object",500:"server error"}};if(r.callback===undefined){return new this.modem.Promise((function(e,t){n.modem.dial(i,(function(r,i){if(r){return t(r)}e(n.getSecret(i.ID))}))}))}else{this.modem.dial(i,(function(e,t){if(e)return r.callback(e,t);r.callback(e,n.getSecret(t.ID))}))}};Docker.prototype.createConfig=function(e,t){var r=b.processArgs(e,t);var n=this;var i={path:"/configs/create?",method:"POST",options:r.opts,abortSignal:r.opts.abortSignal,statusCodes:{200:true,201:true,406:"server error or node is not part of a swarm",409:"name conflicts with an existing object",500:"server error"}};if(r.callback===undefined){return new this.modem.Promise((function(e,t){n.modem.dial(i,(function(r,i){if(r){return t(r)}e(n.getConfig(i.ID))}))}))}else{this.modem.dial(i,(function(e,t){if(e)return r.callback(e,t);r.callback(e,n.getConfig(t.ID))}))}};Docker.prototype.listSecrets=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/secrets?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.listConfigs=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/configs?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.createPlugin=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/plugins/create?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,204:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(i,s){if(i){return t(i)}e(r.getPlugin(n.opts.name))}))}))}else{this.modem.dial(i,(function(e,t){if(e)return n.callback(e,t);n.callback(e,r.getPlugin(n.opts.name))}))}};Docker.prototype.listPlugins=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/plugins?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.pruneImages=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/images/prune?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.pruneBuilder=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/build/prune",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.pruneContainers=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/containers/prune?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.pruneVolumes=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/volumes/prune?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.pruneNetworks=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/networks/prune?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.createVolume=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/volumes/create?",method:"POST",allowEmpty:true,options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,201:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(n,i){if(n){return t(n)}e(r.getVolume(i.Name))}))}))}else{this.modem.dial(i,(function(e,t){if(e)return n.callback(e,t);n.callback(e,r.getVolume(t.Name))}))}};Docker.prototype.createService=function(e,t,r){if(!r&&typeof t==="function"){r=t;t=e;e=t.authconfig||undefined}else if(!t&&!r){t=e}var n=this;var i={path:"/services/create",method:"POST",options:t,authconfig:e,abortSignal:t&&t.abortSignal,statusCodes:{200:true,201:true,500:"server error"}};if(r===undefined){return new this.modem.Promise((function(e,t){n.modem.dial(i,(function(r,i){if(r){return t(r)}e(n.getService(i.ID||i.Id))}))}))}else{this.modem.dial(i,(function(e,t){if(e)return r(e,t);r(e,n.getService(t.ID||t.Id))}))}};Docker.prototype.listVolumes=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/volumes?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,400:"bad parameter",500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.createNetwork=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/networks/create?",method:"POST",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,201:true,404:"driver not found",500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(n,i){if(n){return t(n)}e(r.getNetwork(i.Id))}))}))}else{this.modem.dial(i,(function(e,t){if(e)return n.callback(e,t);n.callback(e,r.getNetwork(t.Id))}))}};Docker.prototype.listNetworks=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/networks?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,statusCodes:{200:true,400:"bad parameter",500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.searchImages=function(e,t){var r=this;var n={path:"/images/search?",method:"GET",options:e,authconfig:e.authconfig,abortSignal:e.abortSignal,statusCodes:{200:true,500:"server error"}};if(t===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(n,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(n,(function(e,r){t(e,r)}))}};Docker.prototype.info=function(e,t){var r=this;var n=b.processArgs(e,t);var e={path:"/info",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(t,n){r.modem.dial(e,(function(e,r){if(e){return n(e)}t(r)}))}))}else{this.modem.dial(e,(function(e,t){n.callback(e,t)}))}};Docker.prototype.version=function(e,t){var r=this;var n=b.processArgs(e,t);var e={path:"/version",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(t,n){r.modem.dial(e,(function(e,r){if(e){return n(e)}t(r)}))}))}else{this.modem.dial(e,(function(e,t){n.callback(e,t)}))}};Docker.prototype.ping=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/_ping",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.df=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/system/df",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.getEvents=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/events?",method:"GET",options:n.opts,abortSignal:n.opts.abortSignal,isStream:true,statusCodes:{200:true,500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.pull=function(e,t,r,n){var i=b.processArgs(t,r);var s=b.parseRepositoryTag(e);i.opts.fromImage=s.repository;i.opts.tag=s.tag||"latest";var o=[i.opts,i.callback];if(n){o=[n,i.opts,i.callback]}return this.createImage.apply(this,o)};Docker.prototype.pullAll=function(e,t,r,n){var i=b.processArgs(t,r);var s=b.parseRepositoryTag(e);i.opts.fromImage=s.repository;var o=[i.opts,i.callback];if(n){o=[n,i.opts,i.callback]}return this.createImage.apply(this,o)};Docker.prototype.run=function(e,t,r,n,i,s){if(typeof arguments[arguments.length-1]==="function"){return this.runCallback(e,t,r,n,i,s)}else{return this.runPromise(e,t,r,n,i)}};Docker.prototype.runCallback=function(e,t,r,i,s,o){if(!o&&typeof i==="function"){o=i;i={};s={}}else if(!o&&typeof s==="function"){o=s;s={}}var l=new n;function handler(e,t){if(e)return o(e,null,t);l.emit("container",t);t.attach({stream:true,stdout:true,stderr:true},(function handler(e,n){if(e)return o(e,null,t);l.emit("stream",n);if(r){if(r instanceof Array){n.on("end",(function(){try{r[0].end()}catch(e){}try{r[1].end()}catch(e){}}));t.modem.demuxStream(n,r[0],r[1])}else{n.setEncoding("utf8");n.pipe(r,{end:true})}}t.start(s,(function(e,r){if(e)return o(e,r,t);l.emit("start",t);t.wait((function(e,r){l.emit("data",r);o(e,r,t)}))}))}))}var u={Hostname:"",User:"",AttachStdin:false,AttachStdout:true,AttachStderr:true,Tty:true,OpenStdin:false,StdinOnce:false,Env:null,Cmd:t,Image:e,Volumes:{},VolumesFrom:[]};w(u,i);this.createContainer(u,handler);return l};Docker.prototype.runPromise=function(e,t,r,n,i){var s=this;n=n||{};i=i||{};var o={Hostname:"",User:"",AttachStdin:false,AttachStdout:true,AttachStderr:true,Tty:true,OpenStdin:false,StdinOnce:false,Env:null,Cmd:t,Image:e,Volumes:{},VolumesFrom:[]};w(o,n);var l;return new this.modem.Promise((function(e,t){s.createContainer(o).then((function(e){l=e;return e.attach({stream:true,stdout:true,stderr:true})})).then((function(e){if(r){if(r instanceof Array){e.on("end",(function(){try{r[0].end()}catch(e){}try{r[1].end()}catch(e){}}));l.modem.demuxStream(e,r[0],r[1])}else{e.setEncoding("utf8");e.pipe(r,{end:true})}}return l.start(i)})).then((function(e){return l.wait()})).then((function(t){e([t,l])})).catch((function(e){t(e)}))}))};Docker.prototype.swarmInit=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/swarm/init",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,400:"bad parameter",406:"node is already part of a Swarm"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.swarmJoin=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/swarm/join",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,400:"bad parameter",406:"node is already part of a Swarm"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.swarmLeave=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/swarm/leave?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,406:"node is not part of a Swarm"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.swarmUpdate=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/swarm/update?",method:"POST",abortSignal:n.opts.abortSignal,statusCodes:{200:true,400:"bad parameter",406:"node is already part of a Swarm"},options:n.opts};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.prototype.swarmInspect=function(e,t){var r=this;var n=b.processArgs(e,t);var i={path:"/swarm",method:"GET",abortSignal:n.opts.abortSignal,statusCodes:{200:true,406:"This node is not a swarm manager",500:"server error"}};if(n.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){n.callback(e,t)}))}};Docker.Container=s;Docker.Image=o;Docker.Volume=l;Docker.Network=u;Docker.Service=p;Docker.Plugin=g;Docker.Secret=m;Docker.Task=_;Docker.Node=v;Docker.Exec=E;e.exports=Docker},209:(e,t,r)=>{var n=r(8300);var Exec=function(e,t){this.modem=e;this.id=t};Exec.prototype[r(9023).inspect.custom]=function(){return this};Exec.prototype.start=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/exec/"+this.id+"/start",method:"POST",abortSignal:i.opts.abortSignal,isStream:true,allowEmpty:true,hijack:i.opts.hijack,openStdin:i.opts.stdin,statusCodes:{200:true,204:true,404:"no such exec",409:"container stopped/paused",500:"container not running"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){if(e)return i.callback(e,t);i.callback(e,t)}))}};Exec.prototype.resize=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/exec/"+this.id+"/resize?",method:"POST",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"no such exec",500:"container not running"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){if(e)return i.callback(e,t);i.callback(e,t)}))}};Exec.prototype.inspect=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/exec/"+this.id+"/json",method:"GET",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"no such exec",500:"server error"}};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){if(e)return i.callback(e,t);i.callback(e,t)}))}};e.exports=Exec},9607:(e,t,r)=>{var n=r(8300);var Image=function(e,t){this.modem=e;this.name=t};Image.prototype[r(9023).inspect.custom]=function(){return this};Image.prototype.inspect=function(e,t){var r=n.processArgs(e,t);var i=this;var e={path:"/images/"+this.name+"/json",method:"GET",options:r.opts,statusCodes:{200:true,404:"no such image",500:"server error"}};if(r.callback===undefined){return new this.modem.Promise((function(t,r){i.modem.dial(e,(function(e,n){if(e){return r(e)}t(n)}))}))}else{this.modem.dial(e,(function(e,t){if(e)return r.callback(e,t);r.callback(e,t)}))}};Image.prototype.distribution=function(e,t){var r=n.processArgs(e,t);var i=this;var s={path:"/distribution/"+this.name+"/json",method:"GET",statusCodes:{200:true,401:"no such image",500:"server error"},authconfig:r.opts?r.opts.authconfig:undefined};if(r.callback===undefined){return new this.modem.Promise((function(e,t){i.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){if(e)return r.callback(e,t);r.callback(e,t)}))}};Image.prototype.history=function(e){var t=this;var r={path:"/images/"+this.name+"/history",method:"GET",statusCodes:{200:true,404:"no such image",500:"server error"}};if(e===undefined){return new this.modem.Promise((function(e,n){t.modem.dial(r,(function(t,r){if(t){return n(t)}e(r)}))}))}else{this.modem.dial(r,(function(t,r){if(t)return e(t,r);e(t,r)}))}};Image.prototype.get=function(e){var t=this;var r={path:"/images/"+this.name+"/get",method:"GET",isStream:true,statusCodes:{200:true,500:"server error"}};if(e===undefined){return new this.modem.Promise((function(e,n){t.modem.dial(r,(function(t,r){if(t){return n(t)}e(r)}))}))}else{this.modem.dial(r,(function(t,r){if(t)return e(t,r);e(t,r)}))}};Image.prototype.push=function(e,t,r){var i=this;var s=n.processArgs(e,t);var o=true;if(s.opts.stream===false){o=false}var l={path:"/images/"+this.name+"/push?",method:"POST",options:s.opts,authconfig:s.opts.authconfig||r,abortSignal:s.opts.abortSignal,isStream:o,statusCodes:{200:true,404:"no such image",500:"server error"}};delete l.options.authconfig;if(t===undefined){return new this.modem.Promise((function(e,t){i.modem.dial(l,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(l,(function(e,r){t(e,r)}))}};Image.prototype.tag=function(e,t){var r=this;var n={path:"/images/"+this.name+"/tag?",method:"POST",options:e,abortSignal:e&&e.abortSignal,statusCodes:{200:true,201:true,400:"bad parameter",404:"no such image",409:"conflict",500:"server error"}};if(t===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(n,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(n,(function(e,r){t(e,r)}))}};Image.prototype.remove=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/images/"+this.name+"?",method:"DELETE",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"no such image",409:"conflict",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};e.exports=Image},8224:(e,t,r)=>{var n=r(8300);var Network=function(e,t){this.modem=e;this.id=t};Network.prototype[r(9023).inspect.custom]=function(){return this};Network.prototype.inspect=function(e,t){var r=this;var i=n.processArgs(e,t);var e={path:"/networks/"+this.id+"?",method:"GET",statusCodes:{200:true,404:"no such network",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(t,n){r.modem.dial(e,(function(e,r){if(e){return n(e)}t(r)}))}))}else{this.modem.dial(e,(function(e,t){i.callback(e,t)}))}};Network.prototype.remove=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/networks/"+this.id,method:"DELETE",abortSignal:i.opts.abortSignal,statusCodes:{200:true,204:true,404:"no such network",409:"conflict",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Network.prototype.connect=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/networks/"+this.id+"/connect",method:"POST",abortSignal:i.opts.abortSignal,statusCodes:{200:true,201:true,404:"network or container is not found",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Network.prototype.disconnect=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/networks/"+this.id+"/disconnect",method:"POST",abortSignal:i.opts.abortSignal,statusCodes:{200:true,201:true,404:"network or container is not found",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};e.exports=Network},6680:(e,t,r)=>{var n=r(8300);var Node=function(e,t){this.modem=e;this.id=t};Node.prototype[r(9023).inspect.custom]=function(){return this};Node.prototype.inspect=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/nodes/"+this.id,method:"GET",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"no such node",500:"server error"}};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Node.prototype.update=function(e,t){var r=this;if(!t&&typeof e==="function"){t=e}var n={path:"/nodes/"+this.id+"/update?",method:"POST",abortSignal:e&&e.abortSignal,statusCodes:{200:true,404:"no such node",406:"node is not part of a swarm",500:"server error"},options:e};if(t===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(n,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(n,(function(e,r){t(e,r)}))}};Node.prototype.remove=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/nodes/"+this.id+"?",method:"DELETE",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"no such node",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};e.exports=Node},8247:(e,t,r)=>{var n=r(8300);var Plugin=function(e,t,r){this.modem=e;this.name=t;this.remote=r||t};Plugin.prototype[r(9023).inspect.custom]=function(){return this};Plugin.prototype.inspect=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/plugins/"+this.name+"/json",method:"GET",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"plugin is not installed",500:"server error"}};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Plugin.prototype.remove=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/plugins/"+this.name+"?",method:"DELETE",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"plugin is not installed",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){if(e)return i.callback(e,t);i.callback(e,t)}))}};Plugin.prototype.privileges=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/plugins/privileges?",method:"GET",options:{remote:this.remote},abortSignal:i.opts.abortSignal,statusCodes:{200:true,500:"server error"}};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Plugin.prototype.pull=function(e,t){var r=this;var i=n.processArgs(e,t);if(i.opts._query&&!i.opts._query.name){i.opts._query.name=this.name}if(i.opts._query&&!i.opts._query.remote){i.opts._query.remote=this.remote}var s={path:"/plugins/pull?",method:"POST",abortSignal:i.opts.abortSignal,isStream:true,options:i.opts,statusCodes:{200:true,204:true,500:"server error"}};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Plugin.prototype.enable=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/plugins/"+this.name+"/enable?",method:"POST",abortSignal:i.opts.abortSignal,statusCodes:{200:true,500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Plugin.prototype.disable=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/plugins/"+this.name+"/disable",method:"POST",abortSignal:i.opts.abortSignal,statusCodes:{200:true,500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Plugin.prototype.push=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/plugins/"+this.name+"/push",method:"POST",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"plugin not installed",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Plugin.prototype.configure=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/plugins/"+this.name+"/set",method:"POST",abortSignal:i.opts.abortSignal,statusCodes:{200:true,204:true,404:"plugin not installed",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Plugin.prototype.upgrade=function(e,t,r){var n=this;if(!r&&typeof t==="function"){r=t;t=e;e=t.authconfig||undefined}var i={path:"/plugins/"+this.name+"/upgrade?",method:"POST",abortSignal:t&&t.abortSignal,statusCodes:{200:true,204:true,404:"plugin not installed",500:"server error"},authconfig:e,options:t};if(r===undefined){return new this.modem.Promise((function(e,t){n.modem.dial(i,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(i,(function(e,t){r(e,t)}))}};e.exports=Plugin},6080:(e,t,r)=>{var n=r(8300);var Secret=function(e,t){this.modem=e;this.id=t};Secret.prototype[r(9023).inspect.custom]=function(){return this};Secret.prototype.inspect=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/secrets/"+this.id,method:"GET",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"secret not found",406:"node is not part of a swarm",500:"server error"}};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Secret.prototype.update=function(e,t){var r=this;if(!t&&typeof e==="function"){t=e}var n={path:"/secrets/"+this.id+"/update?",method:"POST",abortSignal:e&&e.abortSignal,statusCodes:{200:true,404:"secret not found",500:"server error"},options:e};if(t===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(n,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(n,(function(e,r){t(e,r)}))}};Secret.prototype.remove=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/secrets/"+this.id,method:"DELETE",abortSignal:i.opts.abortSignal,statusCodes:{200:true,204:true,404:"secret not found",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};e.exports=Secret},4769:(e,t,r)=>{var n=r(8300);var Service=function(e,t){this.modem=e;this.id=t};Service.prototype[r(9023).inspect.custom]=function(){return this};Service.prototype.inspect=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/services/"+this.id,method:"GET",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"no such service",500:"server error"}};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Service.prototype.remove=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/services/"+this.id,method:"DELETE",abortSignal:i.opts.abortSignal,statusCodes:{200:true,204:true,404:"no such service",500:"server error"}};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Service.prototype.update=function(e,t,r){var n=this;if(!r){var i=typeof t;if(i==="function"){r=t;t=e;e=t.authconfig||undefined}else if(i==="undefined"){t=e;e=t.authconfig||undefined}}var s={path:"/services/"+this.id+"/update?",method:"POST",abortSignal:t&&t.abortSignal,statusCodes:{200:true,404:"no such service",500:"server error"},authconfig:e,options:t};if(r===undefined){return new this.modem.Promise((function(e,t){n.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){r(e,t)}))}};Service.prototype.logs=function(e,t){var r=this;var i=n.processArgs(e,t,{});var s={path:"/services/"+this.id+"/logs?",method:"GET",abortSignal:i.opts.abortSignal,isStream:i.opts.follow||false,statusCodes:{200:true,404:"no such service",500:"server error",503:"node is not part of a swarm"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};e.exports=Service},638:(e,t,r)=>{var n=r(3033),i=r(6081),s=r(6928),o=r(2048).v4;function withSession(e,t,s){const l=o();const u={method:"POST",path:"/session",hijack:true,headers:{Upgrade:"h2c","X-Docker-Expose-Session-Uuid":l,"X-Docker-Expose-Session-Name":"testcontainers"},statusCodes:{200:true,500:"server error"}};e.modem.dial(u,(function(e,o){if(e){return s(e,null,(()=>undefined))}const u=new n.Server;const p=n.ServerCredentials.createInsecure();const g=u.createConnectionInjector(p);g.injectConnection(o);const m=i.loadSync(r.ab+"auth.proto");const y=n.loadPackageDefinition(m);u.addService(y.moby.filesync.v1.Auth.service,{Credentials({request:e},r){if(t){r(null,{Username:t.username,Secret:t.password})}else{r(null,{})}}});function done(){u.forceShutdown();o.end()}s(null,l,done)}))}e.exports=withSession},5325:(e,t,r)=>{var n=r(8300);var Task=function(e,t){this.modem=e;this.id=t;this.defaultOptions={log:{}}};Task.prototype[r(9023).inspect.custom]=function(){return this};Task.prototype.inspect=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/tasks/"+this.id,method:"GET",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"unknown task",500:"server error"}};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Task.prototype.logs=function(e,t){var r=this;var i=n.processArgs(e,t,this.defaultOptions.log);var s={path:"/tasks/"+this.id+"/logs?",method:"GET",abortSignal:i.opts.abortSignal,isStream:i.opts.follow||false,statusCodes:{101:true,200:true,404:"no such container",500:"server error",503:"node is not part of a swarm"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};e.exports=Task},8300:(e,t,r)=>{var n=r(4158);var i=r(9896);var s=r(6928);var o=r(5645);var l=r(3106);var u=[];var p=u.forEach;var g=u.slice;e.exports.extend=function(e){p.call(g.call(arguments,1),(function(t){if(t){for(var r in t){e[r]=t[r]}}}));return e};e.exports.processArgs=function(t,r,n){if(!r&&typeof t==="function"){r=t;t=null}return{callback:r,opts:e.exports.extend({},n,t)}};e.exports.parseRepositoryTag=function(e){var t;var r=e.indexOf("@");var n=e.lastIndexOf(":");if(r>=0){t=r}else if(n>=0){t=n}else{return{repository:e}}var i=e.slice(t+1);if(i.indexOf("/")===-1){return{repository:e.slice(0,t),tag:i}}return{repository:e}};e.exports.prepareBuildContext=function(e,t){if(e&&e.context){i.readFile(s.join(e.context,".dockerignore"),((r,i)=>{let s;let u;if(!r){const e=n({ignorecase:false}).add(i.toString());u=e.createFilter();s=e=>!u(e)}const p=e.src.slice()||[];const g=o.pack(e.context,{entries:u?p.filter(u):p,ignore:s});t(g.pipe(l.createGzip()))}))}else{t(e)}}},8302:(e,t,r)=>{var n=r(8300);var Volume=function(e,t){this.modem=e;this.name=t};Volume.prototype[r(9023).inspect.custom]=function(){return this};Volume.prototype.inspect=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/volumes/"+this.name,method:"GET",abortSignal:i.opts.abortSignal,statusCodes:{200:true,404:"no such volume",500:"server error"}};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};Volume.prototype.remove=function(e,t){var r=this;var i=n.processArgs(e,t);var s={path:"/volumes/"+this.name,method:"DELETE",abortSignal:i.opts.abortSignal,statusCodes:{204:true,404:"no such volume",409:"conflict",500:"server error"},options:i.opts};if(i.callback===undefined){return new this.modem.Promise((function(e,t){r.modem.dial(s,(function(r,n){if(r){return t(r)}e(n)}))}))}else{this.modem.dial(s,(function(e,t){i.callback(e,t)}))}};e.exports=Volume},1424:(e,t,r)=>{var n=r(5560);var noop=function(){};var i=global.Bare?queueMicrotask:process.nextTick.bind(process);var isRequest=function(e){return e.setHeader&&typeof e.abort==="function"};var isChildProcess=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3};var eos=function(e,t,r){if(typeof t==="function")return eos(e,null,t);if(!t)t={};r=n(r||noop);var s=e._writableState;var o=e._readableState;var l=t.readable||t.readable!==false&&e.readable;var u=t.writable||t.writable!==false&&e.writable;var p=false;var onlegacyfinish=function(){if(!e.writable)onfinish()};var onfinish=function(){u=false;if(!l)r.call(e)};var onend=function(){l=false;if(!u)r.call(e)};var onexit=function(t){r.call(e,t?new Error("exited with error code: "+t):null)};var onerror=function(t){r.call(e,t)};var onclose=function(){i(onclosenexttick)};var onclosenexttick=function(){if(p)return;if(l&&!(o&&(o.ended&&!o.destroyed)))return r.call(e,new Error("premature close"));if(u&&!(s&&(s.ended&&!s.destroyed)))return r.call(e,new Error("premature close"))};var onrequest=function(){e.req.on("finish",onfinish)};if(isRequest(e)){e.on("complete",onfinish);e.on("abort",onclose);if(e.req)onrequest();else e.on("request",onrequest)}else if(u&&!s){e.on("end",onlegacyfinish);e.on("close",onlegacyfinish)}if(isChildProcess(e))e.on("exit",onexit);e.on("end",onend);e.on("finish",onfinish);if(t.error!==false)e.on("error",onerror);e.on("close",onclose);return function(){p=true;e.removeListener("complete",onfinish);e.removeListener("abort",onclose);e.removeListener("request",onrequest);if(e.req)e.req.removeListener("finish",onfinish);e.removeListener("end",onlegacyfinish);e.removeListener("close",onlegacyfinish);e.removeListener("finish",onfinish);e.removeListener("exit",onexit);e.removeListener("end",onend);e.removeListener("error",onerror);e.removeListener("close",onclose)}};e.exports=eos},2147:(e,t,r)=>{e.exports=r(9896).constants||r(9140)},3813:e=>{"use strict";e.exports=(e,t=process.argv)=>{const r=e.startsWith("-")?"":e.length===1?"-":"--";const n=t.indexOf(r+e);const i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}},9598:(e,t,r)=>{try{var n=r(9023);if(typeof n.inherits!=="function")throw"";e.exports=n.inherits}catch(t){e.exports=r(6589)}},6589:e=>{if(typeof Object.create==="function"){e.exports=function inherits(e,t){if(t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}}else{e.exports=function inherits(e,t){if(t){e.super_=t;var TempCtor=function(){};TempCtor.prototype=t.prototype;e.prototype=new TempCtor;e.prototype.constructor=e}}}},4277:e=>{var t=1/0;var r="[object Symbol]";var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var s="\\ud800-\\udfff",o="\\u0300-\\u036f\\ufe20-\\ufe23",l="\\u20d0-\\u20f0",u="\\u2700-\\u27bf",p="a-z\\xdf-\\xf6\\xf8-\\xff",g="\\xac\\xb1\\xd7\\xf7",m="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",y="\\u2000-\\u206f",_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",v="A-Z\\xc0-\\xd6\\xd8-\\xde",E="\\ufe0e\\ufe0f",b=g+m+y+_;var C="[']",w="["+s+"]",I="["+b+"]",T="["+o+l+"]",k="\\d+",R="["+u+"]",O="["+p+"]",P="[^"+s+b+k+u+p+v+"]",B="\\ud83c[\\udffb-\\udfff]",D="(?:"+T+"|"+B+")",L="[^"+s+"]",x="(?:\\ud83c[\\udde6-\\uddff]){2}",U="[\\ud800-\\udbff][\\udc00-\\udfff]",j="["+v+"]",W="\\u200d";var Q="(?:"+O+"|"+P+")",q="(?:"+j+"|"+P+")",z="(?:"+C+"(?:d|ll|m|re|s|t|ve))?",G="(?:"+C+"(?:D|LL|M|RE|S|T|VE))?",$=D+"?",Y="["+E+"]?",V="(?:"+W+"(?:"+[L,x,U].join("|")+")"+Y+$+")*",J=Y+$+V,ee="(?:"+[R,x,U].join("|")+")"+J,te="(?:"+[L+T+"?",T,x,U,w].join("|")+")";var re=RegExp(C,"g");var ne=RegExp(T,"g");var ie=RegExp(B+"(?="+B+")|"+te+J,"g");var se=RegExp([j+"?"+O+"+"+z+"(?="+[I,j,"$"].join("|")+")",q+"+"+G+"(?="+[I,j+Q,"$"].join("|")+")",j+"?"+Q+"+"+z,j+"+"+G,k,ee].join("|"),"g");var oe=RegExp("["+W+s+o+l+E+"]");var ae=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var le={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"ss"};var ce=typeof global=="object"&&global&&global.Object===Object&&global;var ue=typeof self=="object"&&self&&self.Object===Object&&self;var fe=ce||ue||Function("return this")();function arrayReduce(e,t,r,n){var i=-1,s=e?e.length:0;if(n&&s){r=e[++i]}while(++i<s){r=t(r,e[i],i,e)}return r}function asciiToArray(e){return e.split("")}function asciiWords(e){return e.match(n)||[]}function basePropertyOf(e){return function(t){return e==null?undefined:e[t]}}var de=basePropertyOf(le);function hasUnicode(e){return oe.test(e)}function hasUnicodeWord(e){return ae.test(e)}function stringToArray(e){return hasUnicode(e)?unicodeToArray(e):asciiToArray(e)}function unicodeToArray(e){return e.match(ie)||[]}function unicodeWords(e){return e.match(se)||[]}var he=Object.prototype;var pe=he.toString;var ge=fe.Symbol;var me=ge?ge.prototype:undefined,ye=me?me.toString:undefined;function baseSlice(e,t,r){var n=-1,i=e.length;if(t<0){t=-t>i?0:i+t}r=r>i?i:r;if(r<0){r+=i}i=t>r?0:r-t>>>0;t>>>=0;var s=Array(i);while(++n<i){s[n]=e[n+t]}return s}function baseToString(e){if(typeof e=="string"){return e}if(isSymbol(e)){return ye?ye.call(e):""}var r=e+"";return r=="0"&&1/e==-t?"-0":r}function castSlice(e,t,r){var n=e.length;r=r===undefined?n:r;return!t&&r>=n?e:baseSlice(e,t,r)}function createCaseFirst(e){return function(t){t=toString(t);var r=hasUnicode(t)?stringToArray(t):undefined;var n=r?r[0]:t.charAt(0);var i=r?castSlice(r,1).join(""):t.slice(1);return n[e]()+i}}function createCompounder(e){return function(t){return arrayReduce(words(deburr(t).replace(re,"")),e,"")}}function isObjectLike(e){return!!e&&typeof e=="object"}function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&pe.call(e)==r}function toString(e){return e==null?"":baseToString(e)}var _e=createCompounder((function(e,t,r){t=t.toLowerCase();return e+(r?capitalize(t):t)}));function capitalize(e){return ve(toString(e).toLowerCase())}function deburr(e){e=toString(e);return e&&e.replace(i,de).replace(ne,"")}var ve=createCaseFirst("toUpperCase");function words(e,t,r){e=toString(e);t=r?undefined:t;if(t===undefined){return hasUnicodeWord(e)?unicodeWords(e):asciiWords(e)}return e.match(t)||[]}e.exports=_e},9200:(e,t,r)=>{var n=r(6928);var i=r(9896);var s=parseInt("0777",8);e.exports=mkdirP.mkdirp=mkdirP.mkdirP=mkdirP;function mkdirP(e,t,r,o){if(typeof t==="function"){r=t;t={}}else if(!t||typeof t!=="object"){t={mode:t}}var l=t.mode;var u=t.fs||i;if(l===undefined){l=s&~process.umask()}if(!o)o=null;var p=r||function(){};e=n.resolve(e);u.mkdir(e,l,(function(r){if(!r){o=o||e;return p(null,o)}switch(r.code){case"ENOENT":mkdirP(n.dirname(e),t,(function(r,n){if(r)p(r,n);else mkdirP(e,t,p,n)}));break;default:u.stat(e,(function(e,t){if(e||!t.isDirectory())p(r,o);else p(null,o)}));break}}))}mkdirP.sync=function sync(e,t,r){if(!t||typeof t!=="object"){t={mode:t}}var o=t.mode;var l=t.fs||i;if(o===undefined){o=s&~process.umask()}if(!r)r=null;e=n.resolve(e);try{l.mkdirSync(e,o);r=r||e}catch(i){switch(i.code){case"ENOENT":r=sync(n.dirname(e),t,r);sync(e,t,r);break;default:var u;try{u=l.statSync(e)}catch(e){throw i}if(!u.isDirectory())throw i;break}}return r}},744:e=>{var t=1e3;var r=t*60;var n=r*60;var i=n*24;var s=i*7;var o=i*365.25;e.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0){return parse(e)}else if(r==="number"&&isFinite(e)){return t.long?fmtLong(e):fmtShort(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){e=String(e);if(e.length>100){return}var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!l){return}var u=parseFloat(l[1]);var p=(l[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"weeks":case"week":case"w":return u*s;case"days":case"day":case"d":return u*i;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return undefined}}function fmtShort(e){var s=Math.abs(e);if(s>=i){return Math.round(e/i)+"d"}if(s>=n){return Math.round(e/n)+"h"}if(s>=r){return Math.round(e/r)+"m"}if(s>=t){return Math.round(e/t)+"s"}return e+"ms"}function fmtLong(e){var s=Math.abs(e);if(s>=i){return plural(e,s,i,"day")}if(s>=n){return plural(e,s,n,"hour")}if(s>=r){return plural(e,s,r,"minute")}if(s>=t){return plural(e,s,t,"second")}return e+" ms"}function plural(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}},5560:(e,t,r)=>{var n=r(8264);e.exports=n(once);e.exports.strict=n(onceStrict);once.proto=once((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:true});Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:true})}));function once(e){var f=function(){if(f.called)return f.value;f.called=true;return f.value=e.apply(this,arguments)};f.called=false;return f}function onceStrict(e){var f=function(){if(f.called)throw new Error(f.onceError);f.called=true;return f.value=e.apply(this,arguments)};var t=e.name||"Function wrapped with `once`";f.onceError=t+" shouldn't be called more than once";f.called=false;return f}},6412:(e,t,r)=>{"use strict";var n=r(3928);e.exports=t=n.descriptor=n.Root.fromJSON(r(3951)).lookup(".google.protobuf");var i=n.Namespace,s=n.Root,o=n.Enum,l=n.Type,u=n.Field,p=n.MapField,g=n.OneOf,m=n.Service,y=n.Method;s.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.FileDescriptorSet.decode(e);var r=new s;if(e.file){var n,i;for(var p=0,g;p<e.file.length;++p){i=r;if((n=e.file[p])["package"]&&n["package"].length)i=r.define(n["package"]);var y=editionFromDescriptor(n);if(n.name&&n.name.length)r.files.push(i.filename=n.name);if(n.messageType)for(g=0;g<n.messageType.length;++g)i.add(l.fromDescriptor(n.messageType[g],y));if(n.enumType)for(g=0;g<n.enumType.length;++g)i.add(o.fromDescriptor(n.enumType[g],y));if(n.extension)for(g=0;g<n.extension.length;++g)i.add(u.fromDescriptor(n.extension[g],y));if(n.service)for(g=0;g<n.service.length;++g)i.add(m.fromDescriptor(n.service[g],y));var _=fromDescriptorOptions(n.options,t.FileOptions);if(_){var v=Object.keys(_);for(g=0;g<v.length;++g)i.setOption(v[g],_[v[g]])}}}return r.resolveAll()};s.prototype.toDescriptor=function toDescriptor(e){var r=t.FileDescriptorSet.create();Root_toDescriptorRecursive(this,r.file,e);return r};function Root_toDescriptorRecursive(e,r,n){var p=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});editionToDescriptor(n,p);if(!(e instanceof s))p["package"]=e.fullName.substring(1);for(var g=0,y;g<e.nestedArray.length;++g)if((y=e._nestedArray[g])instanceof l)p.messageType.push(y.toDescriptor(n));else if(y instanceof o)p.enumType.push(y.toDescriptor());else if(y instanceof u)p.extension.push(y.toDescriptor(n));else if(y instanceof m)p.service.push(y.toDescriptor());else if(y instanceof i)Root_toDescriptorRecursive(y,r,n);p.options=toDescriptorOptions(e.options,t.FileOptions);if(p.messageType.length+p.enumType.length+p.extension.length+p.service.length)r.push(p)}var _=0;l.fromDescriptor=function fromDescriptor(e,r,n){if(typeof e.length==="number")e=t.DescriptorProto.decode(e);var i=new l(e.name.length?e.name:"Type"+_++,fromDescriptorOptions(e.options,t.MessageOptions)),s;if(!n)i._edition=r;if(e.oneofDecl)for(s=0;s<e.oneofDecl.length;++s)i.add(g.fromDescriptor(e.oneofDecl[s]));if(e.field)for(s=0;s<e.field.length;++s){var p=u.fromDescriptor(e.field[s],r,true);i.add(p);if(e.field[s].hasOwnProperty("oneofIndex"))i.oneofsArray[e.field[s].oneofIndex].add(p)}if(e.extension)for(s=0;s<e.extension.length;++s)i.add(u.fromDescriptor(e.extension[s],r,true));if(e.nestedType)for(s=0;s<e.nestedType.length;++s){i.add(l.fromDescriptor(e.nestedType[s],r,true));if(e.nestedType[s].options&&e.nestedType[s].options.mapEntry)i.setOption("map_entry",true)}if(e.enumType)for(s=0;s<e.enumType.length;++s)i.add(o.fromDescriptor(e.enumType[s],r,true));if(e.extensionRange&&e.extensionRange.length){i.extensions=[];for(s=0;s<e.extensionRange.length;++s)i.extensions.push([e.extensionRange[s].start,e.extensionRange[s].end])}if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){i.reserved=[];if(e.reservedRange)for(s=0;s<e.reservedRange.length;++s)i.reserved.push([e.reservedRange[s].start,e.reservedRange[s].end]);if(e.reservedName)for(s=0;s<e.reservedName.length;++s)i.reserved.push(e.reservedName[s])}return i};l.prototype.toDescriptor=function toDescriptor(e){var r=t.DescriptorProto.create({name:this.name}),n;for(n=0;n<this.fieldsArray.length;++n){var i;r.field.push(i=this._fieldsArray[n].toDescriptor(e));if(this._fieldsArray[n]instanceof p){var s=toDescriptorType(this._fieldsArray[n].keyType,this._fieldsArray[n].resolvedKeyType,false),g=toDescriptorType(this._fieldsArray[n].type,this._fieldsArray[n].resolvedType,false),m=g===11||g===14?this._fieldsArray[n].resolvedType&&shortname(this.parent,this._fieldsArray[n].resolvedType)||this._fieldsArray[n].type:undefined;r.nestedType.push(t.DescriptorProto.create({name:i.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:g,typeName:m})],options:t.MessageOptions.create({mapEntry:true})}))}}for(n=0;n<this.oneofsArray.length;++n)r.oneofDecl.push(this._oneofsArray[n].toDescriptor());for(n=0;n<this.nestedArray.length;++n){if(this._nestedArray[n]instanceof u)r.field.push(this._nestedArray[n].toDescriptor(e));else if(this._nestedArray[n]instanceof l)r.nestedType.push(this._nestedArray[n].toDescriptor(e));else if(this._nestedArray[n]instanceof o)r.enumType.push(this._nestedArray[n].toDescriptor())}if(this.extensions)for(n=0;n<this.extensions.length;++n)r.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[n][0],end:this.extensions[n][1]}));if(this.reserved)for(n=0;n<this.reserved.length;++n)if(typeof this.reserved[n]==="string")r.reservedName.push(this.reserved[n]);else r.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[n][0],end:this.reserved[n][1]}));r.options=toDescriptorOptions(this.options,t.MessageOptions);return r};var v=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;u.fromDescriptor=function fromDescriptor(e,r,n){if(typeof e.length==="number")e=t.DescriptorProto.decode(e);if(typeof e.number!=="number")throw Error("missing field id");var i;if(e.typeName&&e.typeName.length)i=e.typeName;else i=fromDescriptorType(e.type);var s;switch(e.label){case 1:s=undefined;break;case 2:s="required";break;case 3:s="repeated";break;default:throw Error("illegal label: "+e.label)}var o=e.extendee;if(e.extendee!==undefined){o=o.length?o:undefined}var l=new u(e.name.length?e.name:"field"+e.number,e.number,i,s,o);if(!n)l._edition=r;l.options=fromDescriptorOptions(e.options,t.FieldOptions);if(e.proto3_optional)l.options.proto3_optional=true;if(e.defaultValue&&e.defaultValue.length){var p=e.defaultValue;switch(p){case"true":case"TRUE":p=true;break;case"false":case"FALSE":p=false;break;default:var g=v.exec(p);if(g)p=parseInt(p);break}l.setOption("default",p)}if(packableDescriptorType(e.type)){if(r==="proto3"){if(e.options&&!e.options.packed)l.setOption("packed",false)}else if((!r||r==="proto2")&&e.options&&e.options.packed)l.setOption("packed",true)}return l};u.prototype.toDescriptor=function toDescriptor(e){var r=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map){r.type=11;r.typeName=n.util.ucFirst(this.name);r.label=3}else{switch(r.type=toDescriptorType(this.type,this.resolve().resolvedType,this.delimited)){case 10:case 11:case 14:r.typeName=this.resolvedType?shortname(this.parent,this.resolvedType):this.type;break}if(this.rule==="repeated"){r.label=3}else if(this.required&&e==="proto2"){r.label=2}else{r.label=1}}r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend;if(this.partOf)if((r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");if(this.options){r.options=toDescriptorOptions(this.options,t.FieldOptions);if(this.options["default"]!=null)r.defaultValue=String(this.options["default"]);if(this.options.proto3_optional)r.proto3_optional=true}if(e==="proto3"){if(!this.packed)(r.options||(r.options=t.FieldOptions.create())).packed=false}else if((!e||e==="proto2")&&this.packed)(r.options||(r.options=t.FieldOptions.create())).packed=true;return r};var E=0;o.fromDescriptor=function fromDescriptor(e,r,n){if(typeof e.length==="number")e=t.EnumDescriptorProto.decode(e);var i={};if(e.value)for(var s=0;s<e.value.length;++s){var l=e.value[s].name,u=e.value[s].number||0;i[l&&l.length?l:"NAME"+u]=u}var p=new o(e.name&&e.name.length?e.name:"Enum"+E++,i,fromDescriptorOptions(e.options,t.EnumOptions));if(!n)p._edition=r;return p};o.prototype.toDescriptor=function toDescriptor(){var e=[];for(var r=0,n=Object.keys(this.values);r<n.length;++r)e.push(t.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:toDescriptorOptions(this.options,t.EnumOptions)})};var b=0;g.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.OneofDescriptorProto.decode(e);return new g(e.name&&e.name.length?e.name:"oneof"+b++)};g.prototype.toDescriptor=function toDescriptor(){return t.OneofDescriptorProto.create({name:this.name})};var C=0;m.fromDescriptor=function fromDescriptor(e,r,n){if(typeof e.length==="number")e=t.ServiceDescriptorProto.decode(e);var i=new m(e.name&&e.name.length?e.name:"Service"+C++,fromDescriptorOptions(e.options,t.ServiceOptions));if(!n)i._edition=r;if(e.method)for(var s=0;s<e.method.length;++s)i.add(y.fromDescriptor(e.method[s]));return i};m.prototype.toDescriptor=function toDescriptor(){var e=[];for(var r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:toDescriptorOptions(this.options,t.ServiceOptions)})};var w=0;y.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.MethodDescriptorProto.decode(e);return new y(e.name&&e.name.length?e.name:"Method"+w++,"rpc",e.inputType,e.outputType,Boolean(e.clientStreaming),Boolean(e.serverStreaming),fromDescriptorOptions(e.options,t.MethodOptions))};y.prototype.toDescriptor=function toDescriptor(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:toDescriptorOptions(this.options,t.MethodOptions)})};function fromDescriptorType(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}function packableDescriptorType(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return true}return false}function toDescriptorType(e,t,r){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof o)return 14;if(t instanceof l)return r?10:11;throw Error("illegal type: "+e)}function fromDescriptorOptionsRecursive(e,t){var r={};for(var n=0,i,s;n<t.fieldsArray.length;++n){if((s=(i=t._fieldsArray[n]).name)==="uninterpretedOption")continue;if(!Object.prototype.hasOwnProperty.call(e,s))continue;var u=underScore(s);if(i.resolvedType instanceof l){r[u]=fromDescriptorOptionsRecursive(e[s],i.resolvedType)}else if(i.resolvedType instanceof o){r[u]=i.resolvedType.valuesById[e[s]]}else{r[u]=e[s]}}return r}function fromDescriptorOptions(e,t){if(!e)return undefined;return fromDescriptorOptionsRecursive(t.toObject(e),t)}function toDescriptorOptionsRecursive(e,t){var r={};var i=Object.keys(e);for(var s=0;s<i.length;++s){var o=i[s];var u=n.util.camelCase(o);if(!Object.prototype.hasOwnProperty.call(t.fields,u))continue;var p=t.fields[u];if(p.resolvedType instanceof l){r[u]=toDescriptorOptionsRecursive(e[o],p.resolvedType)}else{r[u]=e[o]}if(p.repeated&&!Array.isArray(r[u])){r[u]=[r[u]]}}return r}function toDescriptorOptions(e,t){if(!e)return undefined;return t.fromObject(toDescriptorOptionsRecursive(e,t))}function shortname(e,t){var r=e.fullName.split("."),n=t.fullName.split("."),o=0,l=0,u=n.length-1;if(!(e instanceof s)&&t instanceof i)while(o<r.length&&l<u&&r[o]===n[l]){var p=t.lookup(r[o++],true);if(p!==null&&p!==t)break;++l}else for(;o<r.length&&l<u&&r[o]===n[l];++o,++l);return n.slice(l).join(".")}function underScore(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,(function(e,t){return"_"+t.toLowerCase()}))}function editionFromDescriptor(e){if(e.syntax==="editions"){switch(e.edition){case t.Edition.EDITION_2023:return"2023";default:throw new Error("Unsupported edition "+e.edition)}}if(e.syntax==="proto3"){return"proto3"}return"proto2"}function editionToDescriptor(e,r){if(!e)return;if(e==="proto2"||e==="proto3"){r.syntax=e}else{r.syntax="editions";switch(e){case"2023":r.edition=t.Edition.EDITION_2023;break;default:throw new Error("Unsupported edition "+e)}}}},3928:(e,t,r)=>{"use strict";e.exports=r(8513)},872:e=>{"use strict";e.exports=common;var t=/\/|\./;function common(e,r){if(!t.test(e)){e="google/protobuf/"+e+".proto";r={nested:{google:{nested:{protobuf:{nested:r}}}}}}common[e]=r}common("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var r;common("duration",{Duration:r={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});common("timestamp",{Timestamp:r});common("empty",{Empty:{fields:{}}});common("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});common("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});common("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});common.get=function get(e){return common[e]||null}},2437:(e,t,r)=>{"use strict";var n=t;var i=r(3528),s=r(9609);function genValuePartial_fromObject(e,t,r,n){var s=false;if(t.resolvedType){if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var o=t.resolvedType.values,l=Object.keys(o),u=0;u<l.length;++u){if(o[l[u]]===t.typeDefault&&!s){e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n);if(!t.repeated)e("break");s=true}e("case%j:",l[u])("case %i:",o[l[u]])("m%s=%j",n,o[l[u]])("break")}e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n)}else{var p=false;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":p=true;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,p)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,p?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n);break}}return e}n.fromObject=function fromObject(e){var t=e.fieldsArray;var r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var o=t[n].resolve(),l=s.safeProp(o.name);if(o.map){r("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l);genValuePartial_fromObject(r,o,n,l+"[ks[i]]")("}")("}")}else if(o.repeated){r("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l);genValuePartial_fromObject(r,o,n,l+"[i]")("}")("}")}else{if(!(o.resolvedType instanceof i))r("if(d%s!=null){",l);genValuePartial_fromObject(r,o,n,l);if(!(o.resolvedType instanceof i))r("}")}}return r("return m")};function genValuePartial_toObject(e,t,r,n){if(t.resolvedType){if(t.resolvedType instanceof i)e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n);else e("d%s=types[%i].toObject(m%s,o)",n,r,n)}else{var s=false;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=true;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n);break}}return e}n.toObject=function toObject(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}");var n=[],o=[],l=[],u=0;for(;u<t.length;++u)if(!t[u].partOf)(t[u].resolve().repeated?n:t[u].map?o:l).push(t[u]);if(n.length){r("if(o.arrays||o.defaults){");for(u=0;u<n.length;++u)r("d%s=[]",s.safeProp(n[u].name));r("}")}if(o.length){r("if(o.objects||o.defaults){");for(u=0;u<o.length;++u)r("d%s={}",s.safeProp(o[u].name));r("}")}if(l.length){r("if(o.defaults){");for(u=0;u<l.length;++u){var p=l[u],g=s.safeProp(p.name);if(p.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",g,p.resolvedType.valuesById[p.typeDefault],p.typeDefault);else if(p.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",p.typeDefault.low,p.typeDefault.high,p.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",g)("}else")("d%s=o.longs===String?%j:%i",g,p.typeDefault.toString(),p.typeDefault.toNumber());else if(p.bytes){var m="["+Array.prototype.slice.call(p.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",g,String.fromCharCode.apply(String,p.typeDefault))("else{")("d%s=%s",g,m)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",g,g)("}")}else r("d%s=%j",g,p.typeDefault)}r("}")}var y=false;for(u=0;u<t.length;++u){var p=t[u],_=e._fieldsArray.indexOf(p),g=s.safeProp(p.name);if(p.map){if(!y){y=true;r("var ks2")}r("if(m%s&&(ks2=Object.keys(m%s)).length){",g,g)("d%s={}",g)("for(var j=0;j<ks2.length;++j){");genValuePartial_toObject(r,p,_,g+"[ks2[j]]")("}")}else if(p.repeated){r("if(m%s&&m%s.length){",g,g)("d%s=[]",g)("for(var j=0;j<m%s.length;++j){",g);genValuePartial_toObject(r,p,_,g+"[j]")("}")}else{r("if(m%s!=null&&m.hasOwnProperty(%j)){",g,p.name);genValuePartial_toObject(r,p,_,g);if(p.partOf)r("if(o.oneofs)")("d%s=%j",s.safeProp(p.partOf.name),p.name)}r("}")}return r("return d")}},5301:(e,t,r)=>{"use strict";e.exports=decoder;var n=r(3528),i=r(1024),s=r(9609);function missing(e){return"missing required '"+e.name+"'"}function decoder(e){var t=s.codegen(["r","l","e"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){");var r=0;for(;r<e.fieldsArray.length;++r){var o=e._fieldsArray[r].resolve(),l=o.resolvedType instanceof n?"int32":o.type,u="m"+s.safeProp(o.name);t("case %i: {",o.id);if(o.map){t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos");if(i.defaults[o.keyType]!==undefined)t("k=%j",i.defaults[o.keyType]);else t("k=null");if(i.defaults[l]!==undefined)t("value=%j",i.defaults[l]);else t("value=null");t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:");if(i.basic[l]===undefined)t("value=types[%i].decode(r,r.uint32())",r);else t("value=r.%s()",l);t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}");if(i.long[o.keyType]!==undefined)t('%s[typeof k==="object"?util.longToHash(k):k]=value',u);else t("%s[k]=value",u)}else if(o.repeated){t("if(!(%s&&%s.length))",u,u)("%s=[]",u);if(i.packed[l]!==undefined)t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,l)("}else");if(i.basic[l]===undefined)t(o.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",u,r);else t("%s.push(r.%s())",u,l)}else if(i.basic[l]===undefined)t(o.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",u,r);else t("%s=r.%s()",u,l);t("break")("}")}t("default:")("r.skipType(t&7)")("break")("}")("}");for(r=0;r<e._fieldsArray.length;++r){var p=e._fieldsArray[r];if(p.required)t("if(!m.hasOwnProperty(%j))",p.name)("throw util.ProtocolError(%j,{instance:m})",missing(p))}return t("return m")}},7641:(e,t,r)=>{"use strict";e.exports=encoder;var n=r(3528),i=r(1024),s=r(9609);function genTypePartial(e,t,r,n){return t.delimited?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}function encoder(e){var t=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()");var r,o;var l=e.fieldsArray.slice().sort(s.compareFieldsById);for(var r=0;r<l.length;++r){var u=l[r].resolve(),p=e._fieldsArray.indexOf(u),g=u.resolvedType instanceof n?"int32":u.type,m=i.basic[g];o="m"+s.safeProp(u.name);if(u.map){t("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",o,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",o)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|i.mapKey[u.keyType],u.keyType);if(m===undefined)t("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",p,o);else t(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|m,g,o);t("}")("}")}else if(u.repeated){t("if(%s!=null&&%s.length){",o,o);if(u.packed&&i.packed[g]!==undefined){t("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",o)("w.%s(%s[i])",g,o)("w.ldelim()")}else{t("for(var i=0;i<%s.length;++i)",o);if(m===undefined)genTypePartial(t,u,p,o+"[i]");else t("w.uint32(%i).%s(%s[i])",(u.id<<3|m)>>>0,g,o)}t("}")}else{if(u.optional)t("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",o,u.name);if(m===undefined)genTypePartial(t,u,p,o);else t("w.uint32(%i).%s(%s)",(u.id<<3|m)>>>0,g,o)}}return t("return w")}},3528:(e,t,r)=>{"use strict";e.exports=Enum;var n=r(7946);((Enum.prototype=Object.create(n.prototype)).constructor=Enum).className="Enum";var i=r(1946),s=r(9609);function Enum(e,t,r,i,s,o){n.call(this,e,r);if(t&&typeof t!=="object")throw TypeError("values must be an object");this.valuesById={};this.values=Object.create(this.valuesById);this.comment=i;this.comments=s||{};this.valuesOptions=o;this._valuesFeatures={};this.reserved=undefined;if(t)for(var l=Object.keys(t),u=0;u<l.length;++u)if(typeof t[l[u]]==="number")this.valuesById[this.values[l[u]]=t[l[u]]]=l[u]}Enum.prototype._resolveFeatures=function _resolveFeatures(e){e=this._edition||e;n.prototype._resolveFeatures.call(this,e);Object.keys(this.values).forEach((e=>{var t=Object.assign({},this._features);this._valuesFeatures[e]=Object.assign(t,this.valuesOptions&&this.valuesOptions[e]&&this.valuesOptions[e].features)}));return this};Enum.fromJSON=function fromJSON(e,t){var r=new Enum(e,t.values,t.options,t.comment,t.comments);r.reserved=t.reserved;if(t.edition)r._edition=t.edition;r._defaultEdition="proto3";return r};Enum.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return s.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])};Enum.prototype.add=function add(e,t,r,n){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;if(n){if(this.valuesOptions===undefined)this.valuesOptions={};this.valuesOptions[e]=n||null}this.comments[e]=r||null;return this};Enum.prototype.remove=function remove(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(t==null)throw Error("name '"+e+"' does not exist in "+this);delete this.valuesById[t];delete this.values[e];delete this.comments[e];if(this.valuesOptions)delete this.valuesOptions[e];return this};Enum.prototype.isReservedId=function isReservedId(e){return i.isReservedId(this.reserved,e)};Enum.prototype.isReservedName=function isReservedName(e){return i.isReservedName(this.reserved,e)}},457:(e,t,r)=>{"use strict";e.exports=Field;var n=r(7946);((Field.prototype=Object.create(n.prototype)).constructor=Field).className="Field";var i=r(3528),s=r(1024),o=r(9609);var l;var u=/^required|optional|repeated$/;Field.fromJSON=function fromJSON(e,t){var r=new Field(e,t.id,t.type,t.rule,t.extend,t.options,t.comment);if(t.edition)r._edition=t.edition;r._defaultEdition="proto3";return r};function Field(e,t,r,i,l,p,g){if(o.isObject(i)){g=l;p=i;i=l=undefined}else if(o.isObject(l)){g=p;p=l;l=undefined}n.call(this,e,p);if(!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(r))throw TypeError("type must be a string");if(i!==undefined&&!u.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(l!==undefined&&!o.isString(l))throw TypeError("extend must be a string");if(i==="proto3_optional"){i="optional"}this.rule=i&&i!=="optional"?i:undefined;this.type=r;this.id=t;this.extend=l||undefined;this.repeated=i==="repeated";this.map=false;this.message=null;this.partOf=null;this.typeDefault=null;this.defaultValue=null;this.long=o.Long?s.long[r]!==undefined:false;this.bytes=r==="bytes";this.resolvedType=null;this.extensionField=null;this.declaringField=null;this.comment=g}Object.defineProperty(Field.prototype,"required",{get:function(){return this._features.field_presence==="LEGACY_REQUIRED"}});Object.defineProperty(Field.prototype,"optional",{get:function(){return!this.required}});Object.defineProperty(Field.prototype,"delimited",{get:function(){return this.resolvedType instanceof l&&this._features.message_encoding==="DELIMITED"}});Object.defineProperty(Field.prototype,"packed",{get:function(){return this._features.repeated_field_encoding==="PACKED"}});Object.defineProperty(Field.prototype,"hasPresence",{get:function(){if(this.repeated||this.map){return false}return this.partOf||this.declaringField||this.extensionField||this._features.field_presence!=="IMPLICIT"}});Field.prototype.setOption=function setOption(e,t,r){return n.prototype.setOption.call(this,e,t,r)};Field.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return o.toObject(["edition",this._editionToJSON(),"rule",this.rule!=="optional"&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])};Field.prototype.resolve=function resolve(){if(this.resolved)return this;if((this.typeDefault=s.defaults[this.type])===undefined){this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type);if(this.resolvedType instanceof l)this.typeDefault=null;else this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]}else if(this.options&&this.options.proto3_optional){this.typeDefault=null}if(this.options&&this.options["default"]!=null){this.typeDefault=this.options["default"];if(this.resolvedType instanceof i&&typeof this.typeDefault==="string")this.typeDefault=this.resolvedType.values[this.typeDefault]}if(this.options){if(this.options.packed!==undefined&&this.resolvedType&&!(this.resolvedType instanceof i))delete this.options.packed;if(!Object.keys(this.options).length)this.options=undefined}if(this.long){this.typeDefault=o.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u");if(Object.freeze)Object.freeze(this.typeDefault)}else if(this.bytes&&typeof this.typeDefault==="string"){var e;if(o.base64.test(this.typeDefault))o.base64.decode(this.typeDefault,e=o.newBuffer(o.base64.length(this.typeDefault)),0);else o.utf8.write(this.typeDefault,e=o.newBuffer(o.utf8.length(this.typeDefault)),0);this.typeDefault=e}if(this.map)this.defaultValue=o.emptyObject;else if(this.repeated)this.defaultValue=o.emptyArray;else this.defaultValue=this.typeDefault;if(this.parent instanceof l)this.parent.ctor.prototype[this.name]=this.defaultValue;return n.prototype.resolve.call(this)};Field.prototype._inferLegacyProtoFeatures=function _inferLegacyProtoFeatures(e){if(e!=="proto2"&&e!=="proto3"){return{}}var t={};if(this.rule==="required"){t.field_presence="LEGACY_REQUIRED"}if(this.parent&&s.defaults[this.type]===undefined){var r=this.parent.get(this.type.split(".").pop());if(r&&r instanceof l&&r.group){t.message_encoding="DELIMITED"}}if(this.getOption("packed")===true){t.repeated_field_encoding="PACKED"}else if(this.getOption("packed")===false){t.repeated_field_encoding="EXPANDED"}return t};Field.prototype._resolveFeatures=function _resolveFeatures(e){return n.prototype._resolveFeatures.call(this,this._edition||e)};Field.d=function decorateField(e,t,r,n){if(typeof t==="function")t=o.decorateType(t).name;else if(t&&typeof t==="object")t=o.decorateEnum(t).name;return function fieldDecorator(i,s){o.decorateType(i.constructor).add(new Field(s,e,t,r,{default:n}))}};Field._configure=function configure(e){l=e}},5504:(e,t,r)=>{"use strict";var n=e.exports=r(6579);n.build="light";function load(e,t,r){if(typeof t==="function"){r=t;t=new n.Root}else if(!t)t=new n.Root;return t.load(e,r)}n.load=load;function loadSync(e,t){if(!t)t=new n.Root;return t.loadSync(e)}n.loadSync=loadSync;n.encoder=r(7641);n.decoder=r(5301);n.verifier=r(7639);n.converter=r(2437);n.ReflectionObject=r(7946);n.Namespace=r(1946);n.Root=r(8185);n.Enum=r(3528);n.Type=r(901);n.Field=r(457);n.OneOf=r(4624);n.MapField=r(8791);n.Service=r(338);n.Method=r(9988);n.Message=r(9450);n.wrappers=r(9781);n.types=r(1024);n.util=r(9609);n.ReflectionObject._configure(n.Root);n.Namespace._configure(n.Type,n.Service,n.Enum);n.Root._configure(n.Type);n.Field._configure(n.Type)},6579:(e,t,r)=>{"use strict";var n=t;n.build="minimal";n.Writer=r(3654);n.BufferWriter=r(3751);n.Reader=r(9350);n.BufferReader=r(2423);n.util=r(2857);n.rpc=r(9882);n.roots=r(4460);n.configure=configure;function configure(){n.util._configure();n.Writer._configure(n.BufferWriter);n.Reader._configure(n.BufferReader)}configure()},8513:(e,t,r)=>{"use strict";var n=e.exports=r(5504);n.build="full";n.tokenize=r(580);n.parse=r(8790);n.common=r(872);n.Root._configure(n.Type,n.parse,n.common)},8791:(e,t,r)=>{"use strict";e.exports=MapField;var n=r(457);((MapField.prototype=Object.create(n.prototype)).constructor=MapField).className="MapField";var i=r(1024),s=r(9609);function MapField(e,t,r,i,o,l){n.call(this,e,t,i,undefined,undefined,o,l);if(!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r;this.resolvedKeyType=null;this.map=true}MapField.fromJSON=function fromJSON(e,t){return new MapField(e,t.id,t.keyType,t.type,t.options,t.comment)};MapField.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])};MapField.prototype.resolve=function resolve(){if(this.resolved)return this;if(i.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)};MapField.d=function decorateMapField(e,t,r){if(typeof r==="function")r=s.decorateType(r).name;else if(r&&typeof r==="object")r=s.decorateEnum(r).name;return function mapFieldDecorator(n,i){s.decorateType(n.constructor).add(new MapField(i,e,t,r))}}},9450:(e,t,r)=>{"use strict";e.exports=Message;var n=r(2857);function Message(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}Message.create=function create(e){return this.$type.create(e)};Message.encode=function encode(e,t){return this.$type.encode(e,t)};Message.encodeDelimited=function encodeDelimited(e,t){return this.$type.encodeDelimited(e,t)};Message.decode=function decode(e){return this.$type.decode(e)};Message.decodeDelimited=function decodeDelimited(e){return this.$type.decodeDelimited(e)};Message.verify=function verify(e){return this.$type.verify(e)};Message.fromObject=function fromObject(e){return this.$type.fromObject(e)};Message.toObject=function toObject(e,t){return this.$type.toObject(e,t)};Message.prototype.toJSON=function toJSON(){return this.$type.toObject(this,n.toJSONOptions)}},9988:(e,t,r)=>{"use strict";e.exports=Method;var n=r(7946);((Method.prototype=Object.create(n.prototype)).constructor=Method).className="Method";var i=r(9609);function Method(e,t,r,s,o,l,u,p,g){if(i.isObject(o)){u=o;o=l=undefined}else if(i.isObject(l)){u=l;l=undefined}if(!(t===undefined||i.isString(t)))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");n.call(this,e,u);this.type=t||"rpc";this.requestType=r;this.requestStream=o?true:undefined;this.responseType=s;this.responseStream=l?true:undefined;this.resolvedRequestType=null;this.resolvedResponseType=null;this.comment=p;this.parsedOptions=g}Method.fromJSON=function fromJSON(e,t){return new Method(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)};Method.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return i.toObject(["type",this.type!=="rpc"&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined,"parsedOptions",this.parsedOptions])};Method.prototype.resolve=function resolve(){if(this.resolved)return this;this.resolvedRequestType=this.parent.lookupType(this.requestType);this.resolvedResponseType=this.parent.lookupType(this.responseType);return n.prototype.resolve.call(this)}},1946:(e,t,r)=>{"use strict";e.exports=Namespace;var n=r(7946);((Namespace.prototype=Object.create(n.prototype)).constructor=Namespace).className="Namespace";var i=r(457),s=r(9609),o=r(4624);var l,u,p;Namespace.fromJSON=function fromJSON(e,t){return new Namespace(e,t.options).addJSON(t.nested)};function arrayToJSON(e,t){if(!(e&&e.length))return undefined;var r={};for(var n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}Namespace.arrayToJSON=arrayToJSON;Namespace.isReservedId=function isReservedId(e,t){if(e)for(var r=0;r<e.length;++r)if(typeof e[r]!=="string"&&e[r][0]<=t&&e[r][1]>t)return true;return false};Namespace.isReservedName=function isReservedName(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return true;return false};function Namespace(e,t){n.call(this,e,t);this.nested=undefined;this._nestedArray=null;this._lookupCache={};this._needsRecursiveFeatureResolution=true;this._needsRecursiveResolve=true}function clearCache(e){e._nestedArray=null;e._lookupCache={};var t=e;while(t=t.parent){t._lookupCache={}}return e}Object.defineProperty(Namespace.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=s.toArray(this.nested))}});Namespace.prototype.toJSON=function toJSON(e){return s.toObject(["options",this.options,"nested",arrayToJSON(this.nestedArray,e)])};Namespace.prototype.addJSON=function addJSON(e){var t=this;if(e){for(var r=Object.keys(e),n=0,s;n<r.length;++n){s=e[r[n]];t.add((s.fields!==undefined?l.fromJSON:s.values!==undefined?p.fromJSON:s.methods!==undefined?u.fromJSON:s.id!==undefined?i.fromJSON:Namespace.fromJSON)(r[n],s))}}return this};Namespace.prototype.get=function get(e){return this.nested&&this.nested[e]||null};Namespace.prototype.getEnum=function getEnum(e){if(this.nested&&this.nested[e]instanceof p)return this.nested[e].values;throw Error("no such enum: "+e)};Namespace.prototype.add=function add(e){if(!(e instanceof i&&e.extend!==undefined||e instanceof l||e instanceof o||e instanceof p||e instanceof u||e instanceof Namespace))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var t=this.get(e.name);if(t){if(t instanceof Namespace&&e instanceof Namespace&&!(t instanceof l||t instanceof u)){var r=t.nestedArray;for(var n=0;n<r.length;++n)e.add(r[n]);this.remove(t);if(!this.nested)this.nested={};e.setOptions(t.options,true)}else throw Error("duplicate name '"+e.name+"' in "+this)}}this.nested[e.name]=e;if(!(this instanceof l||this instanceof u||this instanceof p||this instanceof i)){if(!e._edition){e._edition=e._defaultEdition}}this._needsRecursiveFeatureResolution=true;this._needsRecursiveResolve=true;var s=this;while(s=s.parent){s._needsRecursiveFeatureResolution=true;s._needsRecursiveResolve=true}e.onAdd(this);return clearCache(this)};Namespace.prototype.remove=function remove(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);delete this.nested[e.name];if(!Object.keys(this.nested).length)this.nested=undefined;e.onRemove(this);return clearCache(this)};Namespace.prototype.define=function define(e,t){if(s.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");var r=this;while(e.length>0){var n=e.shift();if(r.nested&&r.nested[n]){r=r.nested[n];if(!(r instanceof Namespace))throw Error("path conflicts with non-namespace objects")}else r.add(r=new Namespace(n))}if(t)r.addJSON(t);return r};Namespace.prototype.resolveAll=function resolveAll(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var e=this.nestedArray,t=0;this.resolve();while(t<e.length)if(e[t]instanceof Namespace)e[t++].resolveAll();else e[t++].resolve();this._needsRecursiveResolve=false;return this};Namespace.prototype._resolveFeaturesRecursive=function _resolveFeaturesRecursive(e){if(!this._needsRecursiveFeatureResolution)return this;this._needsRecursiveFeatureResolution=false;e=this._edition||e;n.prototype._resolveFeaturesRecursive.call(this,e);this.nestedArray.forEach((t=>{t._resolveFeaturesRecursive(e)}));return this};Namespace.prototype.lookup=function lookup(e,t,r){if(typeof t==="boolean"){r=t;t=undefined}else if(t&&!Array.isArray(t))t=[t];if(s.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;var n=e.join(".");if(e[0]==="")return this.root.lookup(e.slice(1),t);var i=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+n];if(i&&(!t||t.indexOf(i.constructor)>-1)){return i}i=this._lookupImpl(e,n);if(i&&(!t||t.indexOf(i.constructor)>-1)){return i}if(r)return null;var o=this;while(o.parent){i=o.parent._lookupImpl(e,n);if(i&&(!t||t.indexOf(i.constructor)>-1)){return i}o=o.parent}return null};Namespace.prototype._lookupImpl=function lookup(e,t){if(Object.prototype.hasOwnProperty.call(this._lookupCache,t)){return this._lookupCache[t]}var r=this.get(e[0]);var n=null;if(r){if(e.length===1){n=r}else if(r instanceof Namespace){e=e.slice(1);n=r._lookupImpl(e,e.join("."))}}else{for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof Namespace&&(r=this._nestedArray[i]._lookupImpl(e,t)))n=r}this._lookupCache[t]=n;return n};Namespace.prototype.lookupType=function lookupType(e){var t=this.lookup(e,[l]);if(!t)throw Error("no such type: "+e);return t};Namespace.prototype.lookupEnum=function lookupEnum(e){var t=this.lookup(e,[p]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t};Namespace.prototype.lookupTypeOrEnum=function lookupTypeOrEnum(e){var t=this.lookup(e,[l,p]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t};Namespace.prototype.lookupService=function lookupService(e){var t=this.lookup(e,[u]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t};Namespace._configure=function(e,t,r){l=e;u=t;p=r}},7946:(e,t,r)=>{"use strict";e.exports=ReflectionObject;ReflectionObject.className="ReflectionObject";const n=r(4624);var i=r(9609);var s;var o={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};var l={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"};var u={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function ReflectionObject(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t;this.parsedOptions=null;this.name=e;this._edition=null;this._defaultEdition="proto2";this._features={};this._featuresResolved=false;this.parent=null;this.resolved=false;this.comment=null;this.filename=null}Object.defineProperties(ReflectionObject.prototype,{root:{get:function(){var e=this;while(e.parent!==null)e=e.parent;return e}},fullName:{get:function(){var e=[this.name],t=this.parent;while(t){e.unshift(t.name);t=t.parent}return e.join(".")}}});ReflectionObject.prototype.toJSON=function toJSON(){throw Error()};ReflectionObject.prototype.onAdd=function onAdd(e){if(this.parent&&this.parent!==e)this.parent.remove(this);this.parent=e;this.resolved=false;var t=e.root;if(t instanceof s)t._handleAdd(this)};ReflectionObject.prototype.onRemove=function onRemove(e){var t=e.root;if(t instanceof s)t._handleRemove(this);this.parent=null;this.resolved=false};ReflectionObject.prototype.resolve=function resolve(){if(this.resolved)return this;if(this.root instanceof s)this.resolved=true;return this};ReflectionObject.prototype._resolveFeaturesRecursive=function _resolveFeaturesRecursive(e){return this._resolveFeatures(this._edition||e)};ReflectionObject.prototype._resolveFeatures=function _resolveFeatures(e){if(this._featuresResolved){return}var t={};if(!e){throw new Error("Unknown edition for "+this.fullName)}var r=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(e));if(this._edition){if(e==="proto2"){t=Object.assign({},l)}else if(e==="proto3"){t=Object.assign({},u)}else if(e==="2023"){t=Object.assign({},o)}else{throw new Error("Unknown edition: "+e)}this._features=Object.assign(t,r||{});this._featuresResolved=true;return}if(this.partOf instanceof n){var i=Object.assign({},this.partOf._features);this._features=Object.assign(i,r||{})}else if(this.declaringField){}else if(this.parent){var s=Object.assign({},this.parent._features);this._features=Object.assign(s,r||{})}else{throw new Error("Unable to find a parent for "+this.fullName)}if(this.extensionField){this.extensionField._features=this._features}this._featuresResolved=true};ReflectionObject.prototype._inferLegacyProtoFeatures=function _inferLegacyProtoFeatures(){return{}};ReflectionObject.prototype.getOption=function getOption(e){if(this.options)return this.options[e];return undefined};ReflectionObject.prototype.setOption=function setOption(e,t,r){if(!this.options)this.options={};if(/^features\./.test(e)){i.setProperty(this.options,e,t,r)}else if(!r||this.options[e]===undefined){if(this.getOption(e)!==t)this.resolved=false;this.options[e]=t}return this};ReflectionObject.prototype.setParsedOption=function setParsedOption(e,t,r){if(!this.parsedOptions){this.parsedOptions=[]}var n=this.parsedOptions;if(r){var s=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(s){var o=s[e];i.setProperty(o,r,t)}else{s={};s[e]=i.setProperty({},r,t);n.push(s)}}else{var l={};l[e]=t;n.push(l)}return this};ReflectionObject.prototype.setOptions=function setOptions(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this};ReflectionObject.prototype.toString=function toString(){var e=this.constructor.className,t=this.fullName;if(t.length)return e+" "+t;return e};ReflectionObject.prototype._editionToJSON=function _editionToJSON(){if(!this._edition||this._edition==="proto3"){return undefined}return this._edition};ReflectionObject._configure=function(e){s=e}},4624:(e,t,r)=>{"use strict";e.exports=OneOf;var n=r(7946);((OneOf.prototype=Object.create(n.prototype)).constructor=OneOf).className="OneOf";var i=r(457),s=r(9609);function OneOf(e,t,r,i){if(!Array.isArray(t)){r=t;t=undefined}n.call(this,e,r);if(!(t===undefined||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[];this.fieldsArray=[];this.comment=i}OneOf.fromJSON=function fromJSON(e,t){return new OneOf(e,t.oneof,t.options,t.comment)};OneOf.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])};function addFieldsToParent(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)if(!e.fieldsArray[t].parent)e.parent.add(e.fieldsArray[t])}OneOf.prototype.add=function add(e){if(!(e instanceof i))throw TypeError("field must be a Field");if(e.parent&&e.parent!==this.parent)e.parent.remove(e);this.oneof.push(e.name);this.fieldsArray.push(e);e.partOf=this;addFieldsToParent(this);return this};OneOf.prototype.remove=function remove(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);this.fieldsArray.splice(t,1);t=this.oneof.indexOf(e.name);if(t>-1)this.oneof.splice(t,1);e.partOf=null;return this};OneOf.prototype.onAdd=function onAdd(e){n.prototype.onAdd.call(this,e);var t=this;for(var r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);if(i&&!i.partOf){i.partOf=t;t.fieldsArray.push(i)}}addFieldsToParent(this)};OneOf.prototype.onRemove=function onRemove(e){for(var t=0,r;t<this.fieldsArray.length;++t)if((r=this.fieldsArray[t]).parent)r.parent.remove(r);n.prototype.onRemove.call(this,e)};Object.defineProperty(OneOf.prototype,"isProto3Optional",{get:function(){if(this.fieldsArray==null||this.fieldsArray.length!==1){return false}var e=this.fieldsArray[0];return e.options!=null&&e.options["proto3_optional"]===true}});OneOf.d=function decorateOneOf(){var e=new Array(arguments.length),t=0;while(t<arguments.length)e[t]=arguments[t++];return function oneOfDecorator(t,r){s.decorateType(t.constructor).add(new OneOf(r,e));Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},8790:(e,t,r)=>{"use strict";e.exports=parse;parse.filename=null;parse.defaults={keepCase:false};var n=r(580),i=r(8185),s=r(901),o=r(457),l=r(8791),u=r(4624),p=r(3528),g=r(338),m=r(9988),y=r(7946),_=r(1024),v=r(9609);var E=/^[1-9][0-9]*$/,b=/^-?[1-9][0-9]*$/,C=/^0[x][0-9a-fA-F]+$/,w=/^-?0[x][0-9a-fA-F]+$/,I=/^0[0-7]+$/,T=/^-?0[0-7]+$/,k=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,R=/^[a-zA-Z_][a-zA-Z_0-9]*$/,O=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function parse(e,t,r){if(!(t instanceof i)){r=t;t=new i}if(!r)r=parse.defaults;var P=r.preferTrailingComment||false;var B=n(e,r.alternateCommentMode||false),D=B.next,L=B.push,x=B.peek,U=B.skip,j=B.cmnt;var W=true,Q,q,z,G="proto2";var $=t;var Y=[];var V={};var J=r.keepCase?function(e){return e}:v.camelCase;function resolveFileFeatures(){Y.forEach((e=>{e._edition=G;Object.keys(V).forEach((t=>{if(e.getOption(t)!==undefined)return;e.setOption(t,V[t],true)}))}))}function illegal(e,t,r){var n=parse.filename;if(!r)parse.filename=null;return Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+B.line+")")}function readString(){var e=[],t;do{if((t=D())!=='"'&&t!=="'")throw illegal(t);e.push(D());U(t);t=x()}while(t==='"'||t==="'");return e.join("")}function readValue(e){var t=D();switch(t){case"'":case'"':L(t);return readString();case"true":case"TRUE":return true;case"false":case"FALSE":return false}try{return parseNumber(t,true)}catch(r){if(e&&O.test(t))return t;throw illegal(t,"value")}}function readRanges(e,t){var r,n;do{if(t&&((r=x())==='"'||r==="'")){var i=readString();e.push(i);if(G>=2023){throw illegal(i,"id")}}else{try{e.push([n=parseId(D()),U("to",true)?parseId(D()):n])}catch(n){if(t&&O.test(r)&&G>=2023){e.push(r)}else{throw n}}}}while(U(",",true));var s={options:undefined};s.setOption=function(e,t){if(this.options===undefined)this.options={};this.options[e]=t};ifBlock(s,(function parseRange_block(e){if(e==="option"){parseOption(s,e);U(";")}else throw illegal(e)}),(function parseRange_line(){parseInlineOptions(s)}))}function parseNumber(e,t){var r=1;if(e.charAt(0)==="-"){r=-1;e=e.substring(1)}switch(e){case"inf":case"INF":case"Inf":return r*Infinity;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(E.test(e))return r*parseInt(e,10);if(C.test(e))return r*parseInt(e,16);if(I.test(e))return r*parseInt(e,8);if(k.test(e))return r*parseFloat(e);throw illegal(e,"number",t)}function parseId(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&e.charAt(0)==="-")throw illegal(e,"id");if(b.test(e))return parseInt(e,10);if(w.test(e))return parseInt(e,16);if(T.test(e))return parseInt(e,8);throw illegal(e,"id")}function parsePackage(){if(Q!==undefined)throw illegal("package");Q=D();if(!O.test(Q))throw illegal(Q,"name");$=$.define(Q);U(";")}function parseImport(){var e=x();var t;switch(e){case"weak":t=z||(z=[]);D();break;case"public":D();default:t=q||(q=[]);break}e=readString();U(";");t.push(e)}function parseSyntax(){U("=");G=readString();if(G<2023)throw illegal(G,"syntax");U(";")}function parseEdition(){U("=");G=readString();const e=["2023"];if(!e.includes(G))throw illegal(G,"edition");U(";")}function parseCommon(e,t){switch(t){case"option":parseOption(e,t);U(";");return true;case"message":parseType(e,t);return true;case"enum":parseEnum(e,t);return true;case"service":parseService(e,t);return true;case"extend":parseExtension(e,t);return true}return false}function ifBlock(e,t,r){var n=B.line;if(e){if(typeof e.comment!=="string"){e.comment=j()}e.filename=parse.filename}if(U("{",true)){var i;while((i=D())!=="}")t(i);U(";",true)}else{if(r)r();U(";");if(e&&(typeof e.comment!=="string"||P))e.comment=j(n)||e.comment}}function parseType(e,t){if(!R.test(t=D()))throw illegal(t,"type name");var r=new s(t);ifBlock(r,(function parseType_block(e){if(parseCommon(r,e))return;switch(e){case"map":parseMapField(r,e);break;case"required":if(G!=="proto2")throw illegal(e);case"repeated":parseField(r,e);break;case"optional":if(G==="proto3"){parseField(r,"proto3_optional")}else if(G!=="proto2"){throw illegal(e)}else{parseField(r,"optional")}break;case"oneof":parseOneOf(r,e);break;case"extensions":readRanges(r.extensions||(r.extensions=[]));break;case"reserved":readRanges(r.reserved||(r.reserved=[]),true);break;default:if(G==="proto2"||!O.test(e)){throw illegal(e)}L(e);parseField(r,"optional");break}}));e.add(r);if(e===$){Y.push(r)}}function parseField(e,t,r){var n=D();if(n==="group"){parseGroup(e,t);return}while(n.endsWith(".")||x().startsWith(".")){n+=D()}if(!O.test(n))throw illegal(n,"type");var i=D();if(!R.test(i))throw illegal(i,"name");i=J(i);U("=");var s=new o(i,parseId(D()),n,t,r);ifBlock(s,(function parseField_block(e){if(e==="option"){parseOption(s,e);U(";")}else throw illegal(e)}),(function parseField_line(){parseInlineOptions(s)}));if(t==="proto3_optional"){var l=new u("_"+i);s.setOption("proto3_optional",true);l.add(s);e.add(l)}else{e.add(s)}if(e===$){Y.push(s)}}function parseGroup(e,t){if(G>=2023){throw illegal("group")}var r=D();if(!R.test(r))throw illegal(r,"name");var n=v.lcFirst(r);if(r===n)r=v.ucFirst(r);U("=");var i=parseId(D());var l=new s(r);l.group=true;var u=new o(n,i,r,t);u.filename=parse.filename;ifBlock(l,(function parseGroup_block(e){switch(e){case"option":parseOption(l,e);U(";");break;case"required":case"repeated":parseField(l,e);break;case"optional":if(G==="proto3"){parseField(l,"proto3_optional")}else{parseField(l,"optional")}break;case"message":parseType(l,e);break;case"enum":parseEnum(l,e);break;case"reserved":readRanges(l.reserved||(l.reserved=[]),true);break;default:throw illegal(e)}}));e.add(l).add(u)}function parseMapField(e){U("<");var t=D();if(_.mapKey[t]===undefined)throw illegal(t,"type");U(",");var r=D();if(!O.test(r))throw illegal(r,"type");U(">");var n=D();if(!R.test(n))throw illegal(n,"name");U("=");var i=new l(J(n),parseId(D()),t,r);ifBlock(i,(function parseMapField_block(e){if(e==="option"){parseOption(i,e);U(";")}else throw illegal(e)}),(function parseMapField_line(){parseInlineOptions(i)}));e.add(i)}function parseOneOf(e,t){if(!R.test(t=D()))throw illegal(t,"name");var r=new u(J(t));ifBlock(r,(function parseOneOf_block(e){if(e==="option"){parseOption(r,e);U(";")}else{L(e);parseField(r,"optional")}}));e.add(r)}function parseEnum(e,t){if(!R.test(t=D()))throw illegal(t,"name");var r=new p(t);ifBlock(r,(function parseEnum_block(e){switch(e){case"option":parseOption(r,e);U(";");break;case"reserved":readRanges(r.reserved||(r.reserved=[]),true);if(r.reserved===undefined)r.reserved=[];break;default:parseEnumValue(r,e)}}));e.add(r);if(e===$){Y.push(r)}}function parseEnumValue(e,t){if(!R.test(t))throw illegal(t,"name");U("=");var r=parseId(D(),true),n={options:undefined};n.getOption=function(e){return this.options[e]};n.setOption=function(e,t){y.prototype.setOption.call(n,e,t)};n.setParsedOption=function(){return undefined};ifBlock(n,(function parseEnumValue_block(e){if(e==="option"){parseOption(n,e);U(";")}else throw illegal(e)}),(function parseEnumValue_line(){parseInlineOptions(n)}));e.add(t,r,n.comment,n.parsedOptions||n.options)}function parseOption(e,t){var r;var n;var i=true;if(t==="option"){t=D()}while(t!=="="){if(t==="("){var s=D();U(")");t="("+s+")"}if(i){i=false;if(t.includes(".")&&!t.includes("(")){var o=t.split(".");r=o[0]+".";t=o[1];continue}r=t}else{n=n?n+=t:t}t=D()}var l=n?r.concat(n):r;var u=parseOptionValue(e,l);n=n&&n[0]==="."?n.slice(1):n;r=r&&r[r.length-1]==="."?r.slice(0,-1):r;setParsedOption(e,r,u,n)}function parseOptionValue(e,t){if(U("{",true)){var r={};while(!U("}",true)){if(!R.test(ee=D())){throw illegal(ee,"name")}if(ee===null){throw illegal(ee,"end of input")}var n;var i=ee;U(":",true);if(x()==="{"){n=parseOptionValue(e,t+"."+ee)}else if(x()==="["){n=[];var s;if(U("[",true)){do{s=readValue(true);n.push(s)}while(U(",",true));U("]");if(typeof s!=="undefined"){setOption(e,t+"."+ee,s)}}}else{n=readValue(true);setOption(e,t+"."+ee,n)}var o=r[i];if(o)n=[].concat(o).concat(n);r[i]=n;U(",",true);U(";",true)}return r}var l=readValue(true);setOption(e,t,l);return l}function setOption(e,t,r){if($===e&&/^features\./.test(t)){V[t]=r;return}if(e.setOption)e.setOption(t,r)}function setParsedOption(e,t,r,n){if(e.setParsedOption)e.setParsedOption(t,r,n)}function parseInlineOptions(e){if(U("[",true)){do{parseOption(e,"option")}while(U(",",true));U("]")}return e}function parseService(e,t){if(!R.test(t=D()))throw illegal(t,"service name");var r=new g(t);ifBlock(r,(function parseService_block(e){if(parseCommon(r,e)){return}if(e==="rpc")parseMethod(r,e);else throw illegal(e)}));e.add(r);if(e===$){Y.push(r)}}function parseMethod(e,t){var r=j();var n=t;if(!R.test(t=D()))throw illegal(t,"name");var i=t,s,o,l,u;U("(");if(U("stream",true))o=true;if(!O.test(t=D()))throw illegal(t);s=t;U(")");U("returns");U("(");if(U("stream",true))u=true;if(!O.test(t=D()))throw illegal(t);l=t;U(")");var p=new m(i,n,s,l,o,u);p.comment=r;ifBlock(p,(function parseMethod_block(e){if(e==="option"){parseOption(p,e);U(";")}else throw illegal(e)}));e.add(p)}function parseExtension(e,t){if(!O.test(t=D()))throw illegal(t,"reference");var r=t;ifBlock(null,(function parseExtension_block(t){switch(t){case"required":case"repeated":parseField(e,t,r);break;case"optional":if(G==="proto3"){parseField(e,"proto3_optional",r)}else{parseField(e,"optional",r)}break;default:if(G==="proto2"||!O.test(t))throw illegal(t);L(t);parseField(e,"optional",r);break}}))}var ee;while((ee=D())!==null){switch(ee){case"package":if(!W)throw illegal(ee);parsePackage();break;case"import":if(!W)throw illegal(ee);parseImport();break;case"syntax":if(!W)throw illegal(ee);parseSyntax();break;case"edition":if(!W)throw illegal(ee);parseEdition();break;case"option":parseOption($,ee);U(";",true);break;default:if(parseCommon($,ee)){W=false;continue}throw illegal(ee)}}resolveFileFeatures();parse.filename=null;return{package:Q,imports:q,weakImports:z,root:t}}},9350:(e,t,r)=>{"use strict";e.exports=Reader;var n=r(2857);var i;var s=n.LongBits,o=n.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e;this.pos=0;this.len=e.length}var l=typeof Uint8Array!=="undefined"?function create_typed_array(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function create_array(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")};var u=function create(){return n.Buffer?function create_buffer_setup(e){return(Reader.create=function create_buffer(e){return n.Buffer.isBuffer(e)?new i(e):l(e)})(e)}:l};Reader.create=u();Reader.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice;Reader.prototype.uint32=function read_uint32_setup(){var e=4294967295;return function read_uint32(){e=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len){this.pos=this.len;throw indexOutOfRange(this,10)}return e}}();Reader.prototype.int32=function read_int32(){return this.uint32()|0};Reader.prototype.sint32=function read_sint32(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var e=new s(0,0);var t=0;if(this.len-this.pos>4){for(;t<4;++t){e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0;e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0;return e}if(this.len-this.pos>4){for(;t<5;++t){e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}else{for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}throw Error("invalid varint encoding")}Reader.prototype.bool=function read_bool(){return this.uint32()!==0};function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Reader.prototype.fixed32=function read_fixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader.prototype.sfixed32=function read_sfixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new s(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.prototype.float=function read_float(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=n.float.readFloatLE(this.buf,this.pos);this.pos+=4;return e};Reader.prototype.double=function read_double(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return e};Reader.prototype.bytes=function read_bytes(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);this.pos+=e;if(Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var i=n.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)};Reader.prototype.string=function read_string(){var e=this.bytes();return o.read(e,0,e.length)};Reader.prototype.skip=function skip(e){if(typeof e==="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else{do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(this.buf[this.pos++]&128)}return this};Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((e=this.uint32()&7)!==4){this.skipType(e)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader._configure=function(e){i=e;Reader.create=u();i._configure();var t=n.Long?"toLong":"toNumber";n.merge(Reader.prototype,{int64:function read_int64(){return readLongVarint.call(this)[t](false)},uint64:function read_uint64(){return readLongVarint.call(this)[t](true)},sint64:function read_sint64(){return readLongVarint.call(this).zzDecode()[t](false)},fixed64:function read_fixed64(){return readFixed64.call(this)[t](true)},sfixed64:function read_sfixed64(){return readFixed64.call(this)[t](false)}})}},2423:(e,t,r)=>{"use strict";e.exports=BufferReader;var n=r(9350);(BufferReader.prototype=Object.create(n.prototype)).constructor=BufferReader;var i=r(2857);function BufferReader(e){n.call(this,e)}BufferReader._configure=function(){if(i.Buffer)BufferReader.prototype._slice=i.Buffer.prototype.slice};BufferReader.prototype.string=function read_string_buffer(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure()},8185:(e,t,r)=>{"use strict";e.exports=Root;var n=r(1946);((Root.prototype=Object.create(n.prototype)).constructor=Root).className="Root";var i=r(457),s=r(3528),o=r(4624),l=r(9609);var u,p,g;function Root(e){n.call(this,"",e);this.deferred=[];this.files=[];this._edition="proto2";this._fullyQualifiedObjects={}}Root.fromJSON=function fromJSON(e,t){if(!t)t=new Root;if(e.options)t.setOptions(e.options);return t.addJSON(e.nested).resolveAll()};Root.prototype.resolvePath=l.path.resolve;Root.prototype.fetch=l.fetch;function SYNC(){}Root.prototype.load=function load(e,t,r){if(typeof t==="function"){r=t;t=undefined}var n=this;if(!r){return l.asPromise(load,n,e,t)}var i=r===SYNC;function finish(e,t){if(!r){return}if(i){throw e}if(t){t.resolveAll()}var n=r;r=null;n(e,t)}function getBundledFileName(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in g)return r}return null}function process(e,r){try{if(l.isString(r)&&r.charAt(0)==="{")r=JSON.parse(r);if(!l.isString(r))n.setOptions(r.options).addJSON(r.nested);else{p.filename=e;var o=p(r,n,t),u,g=0;if(o.imports)for(;g<o.imports.length;++g)if(u=getBundledFileName(o.imports[g])||n.resolvePath(e,o.imports[g]))fetch(u);if(o.weakImports)for(g=0;g<o.weakImports.length;++g)if(u=getBundledFileName(o.weakImports[g])||n.resolvePath(e,o.weakImports[g]))fetch(u,true)}}catch(e){finish(e)}if(!i&&!s){finish(null,n)}}function fetch(e,t){e=getBundledFileName(e)||e;if(n.files.indexOf(e)>-1){return}n.files.push(e);if(e in g){if(i){process(e,g[e])}else{++s;setTimeout((function(){--s;process(e,g[e])}))}return}if(i){var o;try{o=l.fs.readFileSync(e).toString("utf8")}catch(e){if(!t)finish(e);return}process(e,o)}else{++s;n.fetch(e,(function(i,o){--s;if(!r){return}if(i){if(!t)finish(i);else if(!s)finish(null,n);return}process(e,o)}))}}var s=0;if(l.isString(e)){e=[e]}for(var o=0,u;o<e.length;++o)if(u=n.resolvePath("",e[o]))fetch(u);if(i){n.resolveAll();return n}if(!s){finish(null,n)}return n};Root.prototype.loadSync=function loadSync(e,t){if(!l.isNode)throw Error("not supported");return this.load(e,t,SYNC)};Root.prototype.resolveAll=function resolveAll(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var m=/^[A-Z]/;function tryHandleExtension(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new i(t.fullName,t.id,t.type,t.rule,undefined,t.options);if(r.get(n.name)){return true}n.declaringField=t;t.extensionField=n;r.add(n);return true}return false}Root.prototype._handleAdd=function _handleAdd(e){if(e instanceof i){if(e.extend!==undefined&&!e.extensionField)if(!tryHandleExtension(this,e))this.deferred.push(e)}else if(e instanceof s){if(m.test(e.name))e.parent[e.name]=e.values}else if(!(e instanceof o)){if(e instanceof u)for(var t=0;t<this.deferred.length;)if(tryHandleExtension(this,this.deferred[t]))this.deferred.splice(t,1);else++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);if(m.test(e.name))e.parent[e.name]=e}if(e instanceof u||e instanceof s||e instanceof i){this._fullyQualifiedObjects[e.fullName]=e}};Root.prototype._handleRemove=function _handleRemove(e){if(e instanceof i){if(e.extend!==undefined){if(e.extensionField){e.extensionField.parent.remove(e.extensionField);e.extensionField=null}else{var t=this.deferred.indexOf(e);if(t>-1)this.deferred.splice(t,1)}}}else if(e instanceof s){if(m.test(e.name))delete e.parent[e.name]}else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);if(m.test(e.name))delete e.parent[e.name]}delete this._fullyQualifiedObjects[e.fullName]};Root._configure=function(e,t,r){u=e;p=t;g=r}},4460:e=>{"use strict";e.exports={}},9882:(e,t,r)=>{"use strict";var n=t;n.Service=r(4026)},4026:(e,t,r)=>{"use strict";e.exports=Service;var n=r(2857);(Service.prototype=Object.create(n.EventEmitter.prototype)).constructor=Service;function Service(e,t,r){if(typeof e!=="function")throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this);this.rpcImpl=e;this.requestDelimited=Boolean(t);this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function rpcCall(e,t,r,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return n.asPromise(rpcCall,o,e,t,r,i);if(!o.rpcImpl){setTimeout((function(){s(Error("already ended"))}),0);return undefined}try{return o.rpcImpl(e,t[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function rpcCallback(t,n){if(t){o.emit("error",t,e);return s(t)}if(n===null){o.end(true);return undefined}if(!(n instanceof r)){try{n=r[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){o.emit("error",t,e);return s(t)}}o.emit("data",n,e);return s(null,n)}))}catch(t){o.emit("error",t,e);setTimeout((function(){s(t)}),0);return undefined}};Service.prototype.end=function end(e){if(this.rpcImpl){if(!e)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this}},338:(e,t,r)=>{"use strict";e.exports=Service;var n=r(1946);((Service.prototype=Object.create(n.prototype)).constructor=Service).className="Service";var i=r(9988),s=r(9609),o=r(9882);function Service(e,t){n.call(this,e,t);this.methods={};this._methodsArray=null}Service.fromJSON=function fromJSON(e,t){var r=new Service(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(i.fromJSON(n[s],t.methods[n[s]]));if(t.nested)r.addJSON(t.nested);if(t.edition)r._edition=t.edition;r.comment=t.comment;r._defaultEdition="proto3";return r};Service.prototype.toJSON=function toJSON(e){var t=n.prototype.toJSON.call(this,e);var r=e?Boolean(e.keepComments):false;return s.toObject(["edition",this._editionToJSON(),"options",t&&t.options||undefined,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])};Object.defineProperty(Service.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}});function clearCache(e){e._methodsArray=null;return e}Service.prototype.get=function get(e){return this.methods[e]||n.prototype.get.call(this,e)};Service.prototype.resolveAll=function resolveAll(){if(!this._needsRecursiveResolve)return this;n.prototype.resolve.call(this);var e=this.methodsArray;for(var t=0;t<e.length;++t)e[t].resolve();return this};Service.prototype._resolveFeaturesRecursive=function _resolveFeaturesRecursive(e){if(!this._needsRecursiveFeatureResolution)return this;e=this._edition||e;n.prototype._resolveFeaturesRecursive.call(this,e);this.methodsArray.forEach((t=>{t._resolveFeaturesRecursive(e)}));return this};Service.prototype.add=function add(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof i){this.methods[e.name]=e;e.parent=this;return clearCache(this)}return n.prototype.add.call(this,e)};Service.prototype.remove=function remove(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);delete this.methods[e.name];e.parent=null;return clearCache(this)}return n.prototype.remove.call(this,e)};Service.prototype.create=function create(e,t,r){var n=new o.Service(e,t,r);for(var i=0,l;i<this.methodsArray.length;++i){var u=s.lcFirst((l=this._methodsArray[i]).resolve().name).replace(/[^$\w_]/g,"");n[u]=s.codegen(["r","c"],s.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:l,q:l.resolvedRequestType.ctor,s:l.resolvedResponseType.ctor})}return n}},580:e=>{"use strict";e.exports=tokenize;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g;var i=/^ *[*/]+ */,s=/^\s*\*?\/*/,o=/\n/g,l=/\s/,u=/\\(.?)/g;var p={0:"\0",r:"\r",n:"\n",t:"\t"};function unescape(e){return e.replace(u,(function(e,t){switch(t){case"\\":case"":return t;default:return p[t]||""}}))}tokenize.unescape=unescape;function tokenize(e,u){e=e.toString();var p=0,g=e.length,m=1,y=0,_={};var v=[];var E=null;function illegal(e){return Error("illegal "+e+" (line "+m+")")}function readString(){var t=E==="'"?n:r;t.lastIndex=p-1;var i=t.exec(e);if(!i)throw illegal("string");p=t.lastIndex;push(E);E=null;return unescape(i[1])}function charAt(t){return e.charAt(t)}function setComment(t,r,n){var l={type:e.charAt(t++),lineEmpty:false,leading:n};var p;if(u){p=2}else{p=3}var g=t-p,v;do{if(--g<0||(v=e.charAt(g))==="\n"){l.lineEmpty=true;break}}while(v===" "||v==="\t");var E=e.substring(t,r).split(o);for(var b=0;b<E.length;++b)E[b]=E[b].replace(u?s:i,"").trim();l.text=E.join("\n").trim();_[m]=l;y=m}function isDoubleSlashCommentLine(t){var r=findEndOfLine(t);var n=e.substring(t,r);var i=/^\s*\/\//.test(n);return i}function findEndOfLine(e){var t=e;while(t<g&&charAt(t)!=="\n"){t++}return t}function next(){if(v.length>0)return v.shift();if(E)return readString();var r,n,i,s,o,y=p===0;do{if(p===g)return null;r=false;while(l.test(i=charAt(p))){if(i==="\n"){y=true;++m}if(++p===g)return null}if(charAt(p)==="/"){if(++p===g){throw illegal("comment")}if(charAt(p)==="/"){if(!u){o=charAt(s=p+1)==="/";while(charAt(++p)!=="\n"){if(p===g){return null}}++p;if(o){setComment(s,p-1,y);y=true}++m;r=true}else{s=p;o=false;if(isDoubleSlashCommentLine(p-1)){o=true;do{p=findEndOfLine(p);if(p===g){break}p++;if(!y){break}}while(isDoubleSlashCommentLine(p))}else{p=Math.min(g,findEndOfLine(p)+1)}if(o){setComment(s,p,y);y=true}m++;r=true}}else if((i=charAt(p))==="*"){s=p+1;o=u||charAt(s)==="*";do{if(i==="\n"){++m}if(++p===g){throw illegal("comment")}n=i;i=charAt(p)}while(n!=="*"||i!=="/");++p;if(o){setComment(s,p-2,y);y=true}r=true}else{return"/"}}}while(r);var _=p;t.lastIndex=0;var b=t.test(charAt(_++));if(!b)while(_<g&&!t.test(charAt(_)))++_;var C=e.substring(p,p=_);if(C==='"'||C==="'")E=C;return C}function push(e){v.push(e)}function peek(){if(!v.length){var e=next();if(e===null)return null;push(e)}return v[0]}function skip(e,t){var r=peek(),n=r===e;if(n){next();return true}if(!t)throw illegal("token '"+r+"', '"+e+"' expected");return false}function cmnt(e){var t=null;var r;if(e===undefined){r=_[m-1];delete _[m-1];if(r&&(u||r.type==="*"||r.lineEmpty)){t=r.leading?r.text:null}}else{if(y<e){peek()}r=_[e];delete _[e];if(r&&!r.lineEmpty&&(u||r.type==="/")){t=r.leading?null:r.text}}return t}return Object.defineProperty({next:next,peek:peek,push:push,skip:skip,cmnt:cmnt},"line",{get:function(){return m}})}},901:(e,t,r)=>{"use strict";e.exports=Type;var n=r(1946);((Type.prototype=Object.create(n.prototype)).constructor=Type).className="Type";var i=r(3528),s=r(4624),o=r(457),l=r(8791),u=r(338),p=r(9450),g=r(9350),m=r(3654),y=r(9609),_=r(7641),v=r(5301),E=r(7639),b=r(2437),C=r(9781);function Type(e,t){n.call(this,e,t);this.fields={};this.oneofs=undefined;this.extensions=undefined;this.reserved=undefined;this.group=undefined;this._fieldsById=null;this._fieldsArray=null;this._oneofsArray=null;this._ctor=null}Object.defineProperties(Type.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=y.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=y.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=Type.generateConstructor(this)())},set:function(e){var t=e.prototype;if(!(t instanceof p)){(e.prototype=new p).constructor=e;y.merge(e.prototype,t)}e.$type=e.prototype.$type=this;y.merge(e,p,true);this._ctor=e;var r=0;for(;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:y.oneOfGetter(this._oneofsArray[r].oneof),set:y.oneOfSetter(this._oneofsArray[r].oneof)};if(r)Object.defineProperties(e.prototype,n)}}});Type.generateConstructor=function generateConstructor(e){var t=y.codegen(["p"],e.name);for(var r=0,n;r<e.fieldsArray.length;++r)if((n=e._fieldsArray[r]).map)t("this%s={}",y.safeProp(n.name));else if(n.repeated)t("this%s=[]",y.safeProp(n.name));return t("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function clearCache(e){e._fieldsById=e._fieldsArray=e._oneofsArray=null;delete e.encode;delete e.decode;delete e.verify;return e}Type.fromJSON=function fromJSON(e,t){var r=new Type(e,t.options);r.extensions=t.extensions;r.reserved=t.reserved;var p=Object.keys(t.fields),g=0;for(;g<p.length;++g)r.add((typeof t.fields[p[g]].keyType!=="undefined"?l.fromJSON:o.fromJSON)(p[g],t.fields[p[g]]));if(t.oneofs)for(p=Object.keys(t.oneofs),g=0;g<p.length;++g)r.add(s.fromJSON(p[g],t.oneofs[p[g]]));if(t.nested)for(p=Object.keys(t.nested),g=0;g<p.length;++g){var m=t.nested[p[g]];r.add((m.id!==undefined?o.fromJSON:m.fields!==undefined?Type.fromJSON:m.values!==undefined?i.fromJSON:m.methods!==undefined?u.fromJSON:n.fromJSON)(p[g],m))}if(t.extensions&&t.extensions.length)r.extensions=t.extensions;if(t.reserved&&t.reserved.length)r.reserved=t.reserved;if(t.group)r.group=true;if(t.comment)r.comment=t.comment;if(t.edition)r._edition=t.edition;r._defaultEdition="proto3";return r};Type.prototype.toJSON=function toJSON(e){var t=n.prototype.toJSON.call(this,e);var r=e?Boolean(e.keepComments):false;return y.toObject(["edition",this._editionToJSON(),"options",t&&t.options||undefined,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])};Type.prototype.resolveAll=function resolveAll(){if(!this._needsRecursiveResolve)return this;n.prototype.resolveAll.call(this);var e=this.oneofsArray;r=0;while(r<e.length)e[r++].resolve();var t=this.fieldsArray,r=0;while(r<t.length)t[r++].resolve();return this};Type.prototype._resolveFeaturesRecursive=function _resolveFeaturesRecursive(e){if(!this._needsRecursiveFeatureResolution)return this;e=this._edition||e;n.prototype._resolveFeaturesRecursive.call(this,e);this.oneofsArray.forEach((t=>{t._resolveFeatures(e)}));this.fieldsArray.forEach((t=>{t._resolveFeatures(e)}));return this};Type.prototype.get=function get(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};Type.prototype.add=function add(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);if(e.parent)e.parent.remove(e);this.fields[e.name]=e;e.message=this;e.onAdd(this);return clearCache(this)}if(e instanceof s){if(!this.oneofs)this.oneofs={};this.oneofs[e.name]=e;e.onAdd(this);return clearCache(this)}return n.prototype.add.call(this,e)};Type.prototype.remove=function remove(e){if(e instanceof o&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);delete this.fields[e.name];e.parent=null;e.onRemove(this);return clearCache(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);delete this.oneofs[e.name];e.parent=null;e.onRemove(this);return clearCache(this)}return n.prototype.remove.call(this,e)};Type.prototype.isReservedId=function isReservedId(e){return n.isReservedId(this.reserved,e)};Type.prototype.isReservedName=function isReservedName(e){return n.isReservedName(this.reserved,e)};Type.prototype.create=function create(e){return new this.ctor(e)};Type.prototype.setup=function setup(){var e=this.fullName,t=[];for(var r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=_(this)({Writer:m,types:t,util:y});this.decode=v(this)({Reader:g,types:t,util:y});this.verify=E(this)({types:t,util:y});this.fromObject=b.fromObject(this)({types:t,util:y});this.toObject=b.toObject(this)({types:t,util:y});var n=C[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject;this.fromObject=n.fromObject.bind(i);i.toObject=this.toObject;this.toObject=n.toObject.bind(i)}return this};Type.prototype.encode=function encode_setup(e,t){return this.setup().encode(e,t)};Type.prototype.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()};Type.prototype.decode=function decode_setup(e,t){return this.setup().decode(e,t)};Type.prototype.decodeDelimited=function decodeDelimited(e){if(!(e instanceof g))e=g.create(e);return this.decode(e,e.uint32())};Type.prototype.verify=function verify_setup(e){return this.setup().verify(e)};Type.prototype.fromObject=function fromObject(e){return this.setup().fromObject(e)};Type.prototype.toObject=function toObject(e,t){return this.setup().toObject(e,t)};Type.d=function decorateType(e){return function typeDecorator(t){y.decorateType(t,e)}}},1024:(e,t,r)=>{"use strict";var n=t;var i=r(9609);var s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function bake(e,t){var r=0,n={};t|=0;while(r<e.length)n[s[r+t]]=e[r++];return n}n.basic=bake([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);n.defaults=bake([0,0,0,0,0,0,0,0,0,0,0,0,false,"",i.emptyArray,null]);n.long=bake([0,0,0,1,1],7);n.mapKey=bake([0,0,0,5,5,0,0,0,1,1,0,2],2);n.packed=bake([1,5,0,0,0,5,5,0,0,0,1,1,0])},9609:(e,t,r)=>{"use strict";var n=e.exports=r(2857);var i=r(4460);var s,o;n.codegen=r(5346);n.fetch=r(4279);n.path=r(6090);n.fs=n.inquire("fs");n.toArray=function toArray(e){if(e){var t=Object.keys(e),r=new Array(t.length),n=0;while(n<t.length)r[n]=e[t[n++]];return r}return[]};n.toObject=function toObject(e){var t={},r=0;while(r<e.length){var n=e[r++],i=e[r++];if(i!==undefined)t[n]=i}return t};var l=/\\/g,u=/"/g;n.isReserved=function isReserved(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};n.safeProp=function safeProp(e){if(!/^[$\w_]+$/.test(e)||n.isReserved(e))return'["'+e.replace(l,"\\\\").replace(u,'\\"')+'"]';return"."+e};n.ucFirst=function ucFirst(e){return e.charAt(0).toUpperCase()+e.substring(1)};var p=/_([a-z])/g;n.camelCase=function camelCase(e){return e.substring(0,1)+e.substring(1).replace(p,(function(e,t){return t.toUpperCase()}))};n.compareFieldsById=function compareFieldsById(e,t){return e.id-t.id};n.decorateType=function decorateType(e,t){if(e.$type){if(t&&e.$type.name!==t){n.decorateRoot.remove(e.$type);e.$type.name=t;n.decorateRoot.add(e.$type)}return e.$type}if(!s)s=r(901);var i=new s(t||e.name);n.decorateRoot.add(i);i.ctor=e;Object.defineProperty(e,"$type",{value:i,enumerable:false});Object.defineProperty(e.prototype,"$type",{value:i,enumerable:false});return i};var g=0;n.decorateEnum=function decorateEnum(e){if(e.$type)return e.$type;if(!o)o=r(3528);var t=new o("Enum"+g++,e);n.decorateRoot.add(t);Object.defineProperty(e,"$type",{value:t,enumerable:false});return t};n.setProperty=function setProperty(e,t,r,n){function setProp(e,t,r){var i=t.shift();if(i==="__proto__"||i==="prototype"){return e}if(t.length>0){e[i]=setProp(e[i]||{},t,r)}else{var s=e[i];if(s&&n)return e;if(s)r=[].concat(s).concat(r);e[i]=r}return e}if(typeof e!=="object")throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");t=t.split(".");return setProp(e,t,r)};Object.defineProperty(n,"decorateRoot",{get:function(){return i["decorated"]||(i["decorated"]=new(r(8185)))}})},994:(e,t,r)=>{"use strict";e.exports=LongBits;var n=r(2857);function LongBits(e,t){this.lo=e>>>0;this.hi=t>>>0}var i=LongBits.zero=new LongBits(0,0);i.toNumber=function(){return 0};i.zzEncode=i.zzDecode=function(){return this};i.length=function(){return 1};var s=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function fromNumber(e){if(e===0)return i;var t=e<0;if(t)e=-e;var r=e>>>0,n=(e-r)/4294967296>>>0;if(t){n=~n>>>0;r=~r>>>0;if(++r>4294967295){r=0;if(++n>4294967295)n=0}}return new LongBits(r,n)};LongBits.from=function from(e){if(typeof e==="number")return LongBits.fromNumber(e);if(n.isString(e)){if(n.Long)e=n.Long.fromString(e);else return LongBits.fromNumber(parseInt(e,10))}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):i};LongBits.prototype.toNumber=function toNumber(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;if(!t)r=r+1>>>0;return-(t+r*4294967296)}return this.lo+this.hi*4294967296};LongBits.prototype.toLong=function toLong(e){return n.Long?new n.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;LongBits.fromHash=function fromHash(e){if(e===s)return i;return new LongBits((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)};LongBits.prototype.toHash=function toHash(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits.prototype.zzEncode=function zzEncode(){var e=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0;this.lo=(this.lo<<1^e)>>>0;return this};LongBits.prototype.zzDecode=function zzDecode(){var e=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0;this.hi=(this.hi>>>1^e)>>>0;return this};LongBits.prototype.length=function length(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},2857:function(e,t,r){"use strict";var n=t;n.asPromise=r(2222);n.base64=r(5478);n.EventEmitter=r(2491);n.float=r(8597);n.inquire=r(7206);n.utf8=r(958);n.pool=r(6239);n.LongBits=r(994);n.isNode=Boolean(typeof global!=="undefined"&&global&&global.process&&global.process.versions&&global.process.versions.node);n.global=n.isNode&&global||typeof window!=="undefined"&&window||typeof self!=="undefined"&&self||this;n.emptyArray=Object.freeze?Object.freeze([]):[];n.emptyObject=Object.freeze?Object.freeze({}):{};n.isInteger=Number.isInteger||function isInteger(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e};n.isString=function isString(e){return typeof e==="string"||e instanceof String};n.isObject=function isObject(e){return e&&typeof e==="object"};n.isset=n.isSet=function isSet(e,t){var r=e[t];if(r!=null&&e.hasOwnProperty(t))return typeof r!=="object"||(Array.isArray(r)?r.length:Object.keys(r).length)>0;return false};n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}();n._Buffer_from=null;n._Buffer_allocUnsafe=null;n.newBuffer=function newBuffer(e){return typeof e==="number"?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):typeof Uint8Array==="undefined"?e:new Uint8Array(e)};n.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long");n.key2Re=/^true|false|0|1$/;n.key32Re=/^-?(?:0|[1-9][0-9]*)$/;n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;n.longToHash=function longToHash(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash};n.longFromHash=function longFromHash(e,t){var r=n.LongBits.fromHash(e);if(n.Long)return n.Long.fromBits(r.lo,r.hi,t);return r.toNumber(Boolean(t))};function merge(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)if(e[n[i]]===undefined||!r)e[n[i]]=t[n[i]];return e}n.merge=merge;n.lcFirst=function lcFirst(e){return e.charAt(0).toLowerCase()+e.substring(1)};function newError(e){function CustomError(e,t){if(!(this instanceof CustomError))return new CustomError(e,t);Object.defineProperty(this,"message",{get:function(){return e}});if(Error.captureStackTrace)Error.captureStackTrace(this,CustomError);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(t)merge(this,t)}CustomError.prototype=Object.create(Error.prototype,{constructor:{value:CustomError,writable:true,enumerable:false,configurable:true},name:{get:function get(){return e},set:undefined,enumerable:false,configurable:true},toString:{value:function value(){return this.name+": "+this.message},writable:true,enumerable:false,configurable:true}});return CustomError}n.newError=newError;n.ProtocolError=newError("ProtocolError");n.oneOfGetter=function getOneOf(e){var t={};for(var r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(t[e[r]]===1&&this[e[r]]!==undefined&&this[e[r]]!==null)return e[r]}};n.oneOfSetter=function setOneOf(e){return function(t){for(var r=0;r<e.length;++r)if(e[r]!==t)delete this[e[r]]}};n.toJSONOptions={longs:String,enums:String,bytes:String,json:true};n._configure=function(){var e=n.Buffer;if(!e){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=e.from!==Uint8Array.from&&e.from||function Buffer_from(t,r){return new e(t,r)};n._Buffer_allocUnsafe=e.allocUnsafe||function Buffer_allocUnsafe(t){return new e(t)}}},7639:(e,t,r)=>{"use strict";e.exports=verifier;var n=r(3528),i=r(9609);function invalid(e,t){return e.name+": "+t+(e.repeated&&t!=="array"?"[]":e.map&&t!=="object"?"{k:"+e.keyType+"}":"")+" expected"}function genVerifyValue(e,t,r,i){if(t.resolvedType){if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",invalid(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),o=0;o<s.length;++o)e("case %i:",t.resolvedType.values[s[o]]);e("break")("}")}else{e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}")}}else{switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",invalid(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",invalid(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",invalid(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",invalid(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",invalid(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",invalid(t,"buffer"));break}}return e}function genVerifyKey(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",invalid(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",invalid(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",invalid(t,"boolean key"));break}return e}function verifier(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected");var r=e.oneofsArray,n={};if(r.length)t("var p={}");for(var s=0;s<e.fieldsArray.length;++s){var o=e._fieldsArray[s].resolve(),l="m"+i.safeProp(o.name);if(o.optional)t("if(%s!=null&&m.hasOwnProperty(%j)){",l,o.name);if(o.map){t("if(!util.isObject(%s))",l)("return%j",invalid(o,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){");genVerifyKey(t,o,"k[i]");genVerifyValue(t,o,s,l+"[k[i]]")("}")}else if(o.repeated){t("if(!Array.isArray(%s))",l)("return%j",invalid(o,"array"))("for(var i=0;i<%s.length;++i){",l);genVerifyValue(t,o,s,l+"[i]")("}")}else{if(o.partOf){var u=i.safeProp(o.partOf.name);if(n[o.partOf.name]===1)t("if(p%s===1)",u)("return%j",o.partOf.name+": multiple values");n[o.partOf.name]=1;t("p%s=1",u)}genVerifyValue(t,o,s,l)}if(o.optional)t("}")}return t("return null")}},9781:(e,t,r)=>{"use strict";var n=t;var i=r(9450);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1);var r=this.lookup(t);if(r){var n=e["@type"].charAt(0)==="."?e["@type"].slice(1):e["@type"];if(n.indexOf("/")===-1){n="/"+n}return this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="type.googleapis.com/";var n="";var s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1);n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(s);if(o)e=o.decode(e.value)}if(!(e instanceof this.ctor)&&e instanceof i){var l=e.$type.toObject(e,t);var u=e.$type.fullName[0]==="."?e.$type.fullName.slice(1):e.$type.fullName;if(n===""){n=r}s=n+u;l["@type"]=s;return l}return this.toObject(e,t)}}},3654:(e,t,r)=>{"use strict";e.exports=Writer;var n=r(2857);var i;var s=n.LongBits,o=n.base64,l=n.utf8;function Op(e,t,r){this.fn=e;this.len=t;this.next=undefined;this.val=r}function noop(){}function State(e){this.head=e.head;this.tail=e.tail;this.len=e.len;this.next=e.states}function Writer(){this.len=0;this.head=new Op(noop,0,0);this.tail=this.head;this.states=null}var u=function create(){return n.Buffer?function create_buffer_setup(){return(Writer.create=function create_buffer(){return new i})()}:function create_array(){return new Writer}};Writer.create=u();Writer.alloc=function alloc(e){return new n.Array(e)};if(n.Array!==Array)Writer.alloc=n.pool(Writer.alloc,n.Array.prototype.subarray);Writer.prototype._push=function push(e,t,r){this.tail=this.tail.next=new Op(e,t,r);this.len+=t;return this};function writeByte(e,t,r){t[r]=e&255}function writeVarint32(e,t,r){while(e>127){t[r++]=e&127|128;e>>>=7}t[r]=e}function VarintOp(e,t){this.len=e;this.next=undefined;this.val=t}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer.prototype.uint32=function write_uint32(e){this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len;return this};Writer.prototype.int32=function write_int32(e){return e<0?this._push(writeVarint64,10,s.fromNumber(e)):this.uint32(e)};Writer.prototype.sint32=function write_sint32(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(e,t,r){while(e.hi){t[r++]=e.lo&127|128;e.lo=(e.lo>>>7|e.hi<<25)>>>0;e.hi>>>=7}while(e.lo>127){t[r++]=e.lo&127|128;e.lo=e.lo>>>7}t[r++]=e.lo}Writer.prototype.uint64=function write_uint64(e){var t=s.from(e);return this._push(writeVarint64,t.length(),t)};Writer.prototype.int64=Writer.prototype.uint64;Writer.prototype.sint64=function write_sint64(e){var t=s.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer.prototype.bool=function write_bool(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}Writer.prototype.fixed32=function write_fixed32(e){return this._push(writeFixed32,4,e>>>0)};Writer.prototype.sfixed32=Writer.prototype.fixed32;Writer.prototype.fixed64=function write_fixed64(e){var t=s.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer.prototype.sfixed64=Writer.prototype.fixed64;Writer.prototype.float=function write_float(e){return this._push(n.float.writeFloatLE,4,e)};Writer.prototype.double=function write_double(e){return this._push(n.float.writeDoubleLE,8,e)};var p=n.Array.prototype.set?function writeBytes_set(e,t,r){t.set(e,r)}:function writeBytes_for(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer.prototype.bytes=function write_bytes(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(n.isString(e)){var r=Writer.alloc(t=o.length(e));o.decode(e,r,0);e=r}return this.uint32(t)._push(p,t,e)};Writer.prototype.string=function write_string(e){var t=l.length(e);return t?this.uint32(t)._push(l.write,t,e):this._push(writeByte,1,0)};Writer.prototype.fork=function fork(){this.states=new State(this);this.head=this.tail=new Op(noop,0,0);this.len=0;return this};Writer.prototype.reset=function reset(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new Op(noop,0,0);this.len=0}return this};Writer.prototype.ldelim=function ldelim(){var e=this.head,t=this.tail,r=this.len;this.reset().uint32(r);if(r){this.tail.next=e.next;this.tail=t;this.len+=r}return this};Writer.prototype.finish=function finish(){var e=this.head.next,t=this.constructor.alloc(this.len),r=0;while(e){e.fn(e.val,t,r);r+=e.len;e=e.next}return t};Writer._configure=function(e){i=e;Writer.create=u();i._configure()}},3751:(e,t,r)=>{"use strict";e.exports=BufferWriter;var n=r(3654);(BufferWriter.prototype=Object.create(n.prototype)).constructor=BufferWriter;var i=r(2857);function BufferWriter(){n.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=i._Buffer_allocUnsafe;BufferWriter.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&i.Buffer.prototype.set.name==="set"?function writeBytesBuffer_set(e,t,r){t.set(e,r)}:function writeBytesBuffer_copy(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}};BufferWriter.prototype.bytes=function write_bytes_buffer(e){if(i.isString(e))e=i._Buffer_from(e,"base64");var t=e.length>>>0;this.uint32(t);if(t)this._push(BufferWriter.writeBytesBuffer,t,e);return this};function writeStringBuffer(e,t,r){if(e.length<40)i.utf8.write(e,t,r);else if(t.utf8Write)t.utf8Write(e,r);else t.write(e,r)}BufferWriter.prototype.string=function write_string_buffer(e){var t=i.Buffer.byteLength(e);this.uint32(t);if(t)this._push(writeStringBuffer,t,e);return this};BufferWriter._configure()},7898:(e,t,r)=>{var n=r(5560);var i=r(1424);var s;try{s=r(9896)}catch(e){}var noop=function(){};var o=typeof process==="undefined"?false:/^v?\.0/.test(process.version);var isFn=function(e){return typeof e==="function"};var isFS=function(e){if(!o)return false;if(!s)return false;return(e instanceof(s.ReadStream||noop)||e instanceof(s.WriteStream||noop))&&isFn(e.close)};var isRequest=function(e){return e.setHeader&&isFn(e.abort)};var destroyer=function(e,t,r,s){s=n(s);var o=false;e.on("close",(function(){o=true}));i(e,{readable:t,writable:r},(function(e){if(e)return s(e);o=true;s()}));var l=false;return function(t){if(o)return;if(l)return;l=true;if(isFS(e))return e.close(noop);if(isRequest(e))return e.abort();if(isFn(e.destroy))return e.destroy();s(t||new Error("stream was destroyed"))}};var call=function(e){e()};var pipe=function(e,t){return e.pipe(t)};var pump=function(){var e=Array.prototype.slice.call(arguments);var t=isFn(e[e.length-1]||noop)&&e.pop()||noop;if(Array.isArray(e[0]))e=e[0];if(e.length<2)throw new Error("pump requires two streams per minimum");var r;var n=e.map((function(i,s){var o=s<e.length-1;var l=s>0;return destroyer(i,o,l,(function(e){if(!r)r=e;if(e)n.forEach(call);if(o)return;n.forEach(call);t(r)}))}));return e.reduce(pipe)};e.exports=pump},5500:e=>{"use strict";const t={};function createErrorType(e,r,n){if(!n){n=Error}function getMessage(e,t,n){if(typeof r==="string"){return r}else{return r(e,t,n)}}class NodeError extends n{constructor(e,t,r){super(getMessage(e,t,r))}}NodeError.prototype.name=n.name;NodeError.prototype.code=e;t[e]=NodeError}function oneOf(e,t){if(Array.isArray(e)){const r=e.length;e=e.map((e=>String(e)));if(r>2){return`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]}else if(r===2){return`one of ${t} ${e[0]} or ${e[1]}`}else{return`of ${t} ${e[0]}`}}else{return`of ${t} ${String(e)}`}}function startsWith(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function endsWith(e,t,r){if(r===undefined||r>e.length){r=e.length}return e.substring(r-t.length,r)===t}function includes(e,t,r){if(typeof r!=="number"){r=0}if(r+t.length>e.length){return false}else{return e.indexOf(t,r)!==-1}}createErrorType("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError);createErrorType("ERR_INVALID_ARG_TYPE",(function(e,t,r){let n;if(typeof t==="string"&&startsWith(t,"not ")){n="must not be";t=t.replace(/^not /,"")}else{n="must be"}let i;if(endsWith(e," argument")){i=`The ${e} ${n} ${oneOf(t,"type")}`}else{const r=includes(e,".")?"property":"argument";i=`The "${e}" ${r} ${n} ${oneOf(t,"type")}`}i+=`. Received type ${typeof r}`;return i}),TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"}));createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"}));createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");e.exports.F=t},2063:(e,t,r)=>{"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=Duplex;var i=r(6893);var s=r(8797);r(9598)(Duplex,i);{var o=n(s.prototype);for(var l=0;l<o.length;l++){var u=o[l];if(!Duplex.prototype[u])Duplex.prototype[u]=s.prototype[u]}}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);i.call(this,e);s.call(this,e);this.allowHalfOpen=true;if(e){if(e.readable===false)this.readable=false;if(e.writable===false)this.writable=false;if(e.allowHalfOpen===false){this.allowHalfOpen=false;this.once("end",onend)}}}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function onend(){if(this._writableState.ended)return;process.nextTick(onEndNT,this)}function onEndNT(e){e.end()}Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function set(e){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=e;this._writableState.destroyed=e}})},5283:(e,t,r)=>{"use strict";e.exports=PassThrough;var n=r(2337);r(9598)(PassThrough,n);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);n.call(this,e)}PassThrough.prototype._transform=function(e,t,r){r(null,e)}},6893:(e,t,r)=>{"use strict";e.exports=Readable;var n;Readable.ReadableState=ReadableState;var i=r(4434).EventEmitter;var s=function EElistenerCount(e,t){return e.listeners(t).length};var o=r(3283);var l=r(181).Buffer;var u=(typeof global!=="undefined"?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:{}).Uint8Array||function(){};function _uint8ArrayToBuffer(e){return l.from(e)}function _isUint8Array(e){return l.isBuffer(e)||e instanceof u}var p=r(9023);var g;if(p&&p.debuglog){g=p.debuglog("stream")}else{g=function debug(){}}var m=r(7336);var y=r(5089);var _=r(4874),v=_.getHighWaterMark;var E=r(5500).F,b=E.ERR_INVALID_ARG_TYPE,C=E.ERR_STREAM_PUSH_AFTER_EOF,w=E.ERR_METHOD_NOT_IMPLEMENTED,I=E.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var T;var k;var R;r(9598)(Readable,o);var O=y.errorOrDestroy;var P=["error","close","destroy","pause","resume"];function prependListener(e,t,r){if(typeof e.prependListener==="function")return e.prependListener(t,r);if(!e._events||!e._events[t])e.on(t,r);else if(Array.isArray(e._events[t]))e._events[t].unshift(r);else e._events[t]=[r,e._events[t]]}function ReadableState(e,t,i){n=n||r(2063);e=e||{};if(typeof i!=="boolean")i=t instanceof n;this.objectMode=!!e.objectMode;if(i)this.objectMode=this.objectMode||!!e.readableObjectMode;this.highWaterMark=v(this,e,"readableHighWaterMark",i);this.buffer=new m;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.destroyed=false;this.defaultEncoding=e.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(e.encoding){if(!T)T=r(634).I;this.decoder=new T(e.encoding);this.encoding=e.encoding}}function Readable(e){n=n||r(2063);if(!(this instanceof Readable))return new Readable(e);var t=this instanceof n;this._readableState=new ReadableState(e,this,t);this.readable=true;if(e){if(typeof e.read==="function")this._read=e.read;if(typeof e.destroy==="function")this._destroy=e.destroy}o.call(this)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function set(e){if(!this._readableState){return}this._readableState.destroyed=e}});Readable.prototype.destroy=y.destroy;Readable.prototype._undestroy=y.undestroy;Readable.prototype._destroy=function(e,t){t(e)};Readable.prototype.push=function(e,t){var r=this._readableState;var n;if(!r.objectMode){if(typeof e==="string"){t=t||r.defaultEncoding;if(t!==r.encoding){e=l.from(e,t);t=""}n=true}}else{n=true}return readableAddChunk(this,e,t,false,n)};Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,true,false)};function readableAddChunk(e,t,r,n,i){g("readableAddChunk",t);var s=e._readableState;if(t===null){s.reading=false;onEofChunk(e,s)}else{var o;if(!i)o=chunkInvalid(s,t);if(o){O(e,o)}else if(s.objectMode||t&&t.length>0){if(typeof t!=="string"&&!s.objectMode&&Object.getPrototypeOf(t)!==l.prototype){t=_uint8ArrayToBuffer(t)}if(n){if(s.endEmitted)O(e,new I);else addChunk(e,s,t,true)}else if(s.ended){O(e,new C)}else if(s.destroyed){return false}else{s.reading=false;if(s.decoder&&!r){t=s.decoder.write(t);if(s.objectMode||t.length!==0)addChunk(e,s,t,false);else maybeReadMore(e,s)}else{addChunk(e,s,t,false)}}}else if(!n){s.reading=false;maybeReadMore(e,s)}}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function addChunk(e,t,r,n){if(t.flowing&&t.length===0&&!t.sync){t.awaitDrain=0;e.emit("data",r)}else{t.length+=t.objectMode?1:r.length;if(n)t.buffer.unshift(r);else t.buffer.push(r);if(t.needReadable)emitReadable(e)}maybeReadMore(e,t)}function chunkInvalid(e,t){var r;if(!_isUint8Array(t)&&typeof t!=="string"&&t!==undefined&&!e.objectMode){r=new b("chunk",["string","Buffer","Uint8Array"],t)}return r}Readable.prototype.isPaused=function(){return this._readableState.flowing===false};Readable.prototype.setEncoding=function(e){if(!T)T=r(634).I;var t=new T(e);this._readableState.decoder=t;this._readableState.encoding=this._readableState.decoder.encoding;var n=this._readableState.buffer.head;var i="";while(n!==null){i+=t.write(n.data);n=n.next}this._readableState.buffer.clear();if(i!=="")this._readableState.buffer.push(i);this._readableState.length=i.length;return this};var B=1073741824;function computeNewHighWaterMark(e){if(e>=B){e=B}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}function howMuchToRead(e,t){if(e<=0||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e){if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length}if(e>t.highWaterMark)t.highWaterMark=computeNewHighWaterMark(e);if(e<=t.length)return e;if(!t.ended){t.needReadable=true;return 0}return t.length}Readable.prototype.read=function(e){g("read",e);e=parseInt(e,10);var t=this._readableState;var r=e;if(e!==0)t.emittedReadable=false;if(e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended)){g("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)endReadable(this);else emitReadable(this);return null}e=howMuchToRead(e,t);if(e===0&&t.ended){if(t.length===0)endReadable(this);return null}var n=t.needReadable;g("need readable",n);if(t.length===0||t.length-e<t.highWaterMark){n=true;g("length less than watermark",n)}if(t.ended||t.reading){n=false;g("reading or ended",n)}else if(n){g("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false;if(!t.reading)e=howMuchToRead(r,t)}var i;if(e>0)i=fromList(e,t);else i=null;if(i===null){t.needReadable=t.length<=t.highWaterMark;e=0}else{t.length-=e;t.awaitDrain=0}if(t.length===0){if(!t.ended)t.needReadable=true;if(r!==e&&t.ended)endReadable(this)}if(i!==null)this.emit("data",i);return i};function onEofChunk(e,t){g("onEofChunk");if(t.ended)return;if(t.decoder){var r=t.decoder.end();if(r&&r.length){t.buffer.push(r);t.length+=t.objectMode?1:r.length}}t.ended=true;if(t.sync){emitReadable(e)}else{t.needReadable=false;if(!t.emittedReadable){t.emittedReadable=true;emitReadable_(e)}}}function emitReadable(e){var t=e._readableState;g("emitReadable",t.needReadable,t.emittedReadable);t.needReadable=false;if(!t.emittedReadable){g("emitReadable",t.flowing);t.emittedReadable=true;process.nextTick(emitReadable_,e)}}function emitReadable_(e){var t=e._readableState;g("emitReadable_",t.destroyed,t.length,t.ended);if(!t.destroyed&&(t.length||t.ended)){e.emit("readable");t.emittedReadable=false}t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark;flow(e)}function maybeReadMore(e,t){if(!t.readingMore){t.readingMore=true;process.nextTick(maybeReadMore_,e,t)}}function maybeReadMore_(e,t){while(!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0)){var r=t.length;g("maybeReadMore read 0");e.read(0);if(r===t.length)break}t.readingMore=false}Readable.prototype._read=function(e){O(this,new w("_read()"))};Readable.prototype.pipe=function(e,t){var r=this;var n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1;g("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==false)&&e!==process.stdout&&e!==process.stderr;var o=i?onend:unpipe;if(n.endEmitted)process.nextTick(o);else r.once("end",o);e.on("unpipe",onunpipe);function onunpipe(e,t){g("onunpipe");if(e===r){if(t&&t.hasUnpiped===false){t.hasUnpiped=true;cleanup()}}}function onend(){g("onend");e.end()}var l=pipeOnDrain(r);e.on("drain",l);var u=false;function cleanup(){g("cleanup");e.removeListener("close",onclose);e.removeListener("finish",onfinish);e.removeListener("drain",l);e.removeListener("error",onerror);e.removeListener("unpipe",onunpipe);r.removeListener("end",onend);r.removeListener("end",unpipe);r.removeListener("data",ondata);u=true;if(n.awaitDrain&&(!e._writableState||e._writableState.needDrain))l()}r.on("data",ondata);function ondata(t){g("ondata");var i=e.write(t);g("dest.write",i);if(i===false){if((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&indexOf(n.pipes,e)!==-1)&&!u){g("false write response, pause",n.awaitDrain);n.awaitDrain++}r.pause()}}function onerror(t){g("onerror",t);unpipe();e.removeListener("error",onerror);if(s(e,"error")===0)O(e,t)}prependListener(e,"error",onerror);function onclose(){e.removeListener("finish",onfinish);unpipe()}e.once("close",onclose);function onfinish(){g("onfinish");e.removeListener("close",onclose);unpipe()}e.once("finish",onfinish);function unpipe(){g("unpipe");r.unpipe(e)}e.emit("pipe",r);if(!n.flowing){g("pipe resume");r.resume()}return e};function pipeOnDrain(e){return function pipeOnDrainFunctionResult(){var t=e._readableState;g("pipeOnDrain",t.awaitDrain);if(t.awaitDrain)t.awaitDrain--;if(t.awaitDrain===0&&s(e,"data")){t.flowing=true;flow(e)}}}Readable.prototype.unpipe=function(e){var t=this._readableState;var r={hasUnpiped:false};if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this,r);return this}if(!e){var n=t.pipes;var i=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:false});return this}var o=indexOf(t.pipes,e);if(o===-1)return this;t.pipes.splice(o,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this,r);return this};Readable.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t);var n=this._readableState;if(e==="data"){n.readableListening=this.listenerCount("readable")>0;if(n.flowing!==false)this.resume()}else if(e==="readable"){if(!n.endEmitted&&!n.readableListening){n.readableListening=n.needReadable=true;n.flowing=false;n.emittedReadable=false;g("on readable",n.length,n.reading);if(n.length){emitReadable(this)}else if(!n.reading){process.nextTick(nReadingNextTick,this)}}}return r};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);if(e==="readable"){process.nextTick(updateReadableListening,this)}return r};Readable.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);if(e==="readable"||e===undefined){process.nextTick(updateReadableListening,this)}return t};function updateReadableListening(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0;if(t.resumeScheduled&&!t.paused){t.flowing=true}else if(e.listenerCount("data")>0){e.resume()}}function nReadingNextTick(e){g("readable nexttick read 0");e.read(0)}Readable.prototype.resume=function(){var e=this._readableState;if(!e.flowing){g("resume");e.flowing=!e.readableListening;resume(this,e)}e.paused=false;return this};function resume(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;process.nextTick(resume_,e,t)}}function resume_(e,t){g("resume",t.reading);if(!t.reading){e.read(0)}t.resumeScheduled=false;e.emit("resume");flow(e);if(t.flowing&&!t.reading)e.read(0)}Readable.prototype.pause=function(){g("call pause flowing=%j",this._readableState.flowing);if(this._readableState.flowing!==false){g("pause");this._readableState.flowing=false;this.emit("pause")}this._readableState.paused=true;return this};function flow(e){var t=e._readableState;g("flow",t.flowing);while(t.flowing&&e.read()!==null);}Readable.prototype.wrap=function(e){var t=this;var r=this._readableState;var n=false;e.on("end",(function(){g("wrapped end");if(r.decoder&&!r.ended){var e=r.decoder.end();if(e&&e.length)t.push(e)}t.push(null)}));e.on("data",(function(i){g("wrapped data");if(r.decoder)i=r.decoder.write(i);if(r.objectMode&&(i===null||i===undefined))return;else if(!r.objectMode&&(!i||!i.length))return;var s=t.push(i);if(!s){n=true;e.pause()}}));for(var i in e){if(this[i]===undefined&&typeof e[i]==="function"){this[i]=function methodWrap(t){return function methodWrapReturnFunction(){return e[t].apply(e,arguments)}}(i)}}for(var s=0;s<P.length;s++){e.on(P[s],this.emit.bind(this,P[s]))}this._read=function(t){g("wrapped _read",t);if(n){n=false;e.resume()}};return this};if(typeof Symbol==="function"){Readable.prototype[Symbol.asyncIterator]=function(){if(k===undefined){k=r(4868)}return k(this)}}Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:false,get:function get(){return this._readableState.highWaterMark}});Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:false,get:function get(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:false,get:function get(){return this._readableState.flowing},set:function set(e){if(this._readableState){this._readableState.flowing=e}}});Readable._fromList=fromList;Object.defineProperty(Readable.prototype,"readableLength",{enumerable:false,get:function get(){return this._readableState.length}});function fromList(e,t){if(t.length===0)return null;var r;if(t.objectMode)r=t.buffer.shift();else if(!e||e>=t.length){if(t.decoder)r=t.buffer.join("");else if(t.buffer.length===1)r=t.buffer.first();else r=t.buffer.concat(t.length);t.buffer.clear()}else{r=t.buffer.consume(e,t.decoder)}return r}function endReadable(e){var t=e._readableState;g("endReadable",t.endEmitted);if(!t.endEmitted){t.ended=true;process.nextTick(endReadableNT,t,e)}}function endReadableNT(e,t){g("endReadableNT",e.endEmitted,e.length);if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end");if(e.autoDestroy){var r=t._writableState;if(!r||r.autoDestroy&&r.finished){t.destroy()}}}}if(typeof Symbol==="function"){Readable.from=function(e,t){if(R===undefined){R=r(4659)}return R(Readable,e,t)}}function indexOf(e,t){for(var r=0,n=e.length;r<n;r++){if(e[r]===t)return r}return-1}},2337:(e,t,r)=>{"use strict";e.exports=Transform;var n=r(5500).F,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=n.ERR_TRANSFORM_WITH_LENGTH_0;var u=r(2063);r(9598)(Transform,u);function afterTransform(e,t){var r=this._transformState;r.transforming=false;var n=r.writecb;if(n===null){return this.emit("error",new s)}r.writechunk=null;r.writecb=null;if(t!=null)this.push(t);n(e);var i=this._readableState;i.reading=false;if(i.needReadable||i.length<i.highWaterMark){this._read(i.highWaterMark)}}function Transform(e){if(!(this instanceof Transform))return new Transform(e);u.call(this,e);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush}this.on("prefinish",prefinish)}function prefinish(){var e=this;if(typeof this._flush==="function"&&!this._readableState.destroyed){this._flush((function(t,r){done(e,t,r)}))}else{done(this,null,null)}}Transform.prototype.push=function(e,t){this._transformState.needTransform=false;return u.prototype.push.call(this,e,t)};Transform.prototype._transform=function(e,t,r){r(new i("_transform()"))};Transform.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r;n.writechunk=e;n.writeencoding=t;if(!n.transforming){var i=this._readableState;if(n.needTransform||i.needReadable||i.length<i.highWaterMark)this._read(i.highWaterMark)}};Transform.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};Transform.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))};function done(e,t,r){if(t)return e.emit("error",t);if(r!=null)e.push(r);if(e._writableState.length)throw new l;if(e._transformState.transforming)throw new o;return e.push(null)}},8797:(e,t,r)=>{"use strict";e.exports=Writable;function WriteReq(e,t,r){this.chunk=e;this.encoding=t;this.callback=r;this.next=null}function CorkedRequest(e){var t=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(t,e)}}var n;Writable.WritableState=WritableState;var i={deprecate:r(4488)};var s=r(3283);var o=r(181).Buffer;var l=(typeof global!=="undefined"?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:{}).Uint8Array||function(){};function _uint8ArrayToBuffer(e){return o.from(e)}function _isUint8Array(e){return o.isBuffer(e)||e instanceof l}var u=r(5089);var p=r(4874),g=p.getHighWaterMark;var m=r(5500).F,y=m.ERR_INVALID_ARG_TYPE,_=m.ERR_METHOD_NOT_IMPLEMENTED,v=m.ERR_MULTIPLE_CALLBACK,E=m.ERR_STREAM_CANNOT_PIPE,b=m.ERR_STREAM_DESTROYED,C=m.ERR_STREAM_NULL_VALUES,w=m.ERR_STREAM_WRITE_AFTER_END,I=m.ERR_UNKNOWN_ENCODING;var T=u.errorOrDestroy;r(9598)(Writable,s);function nop(){}function WritableState(e,t,i){n=n||r(2063);e=e||{};if(typeof i!=="boolean")i=t instanceof n;this.objectMode=!!e.objectMode;if(i)this.objectMode=this.objectMode||!!e.writableObjectMode;this.highWaterMark=g(this,e,"writableHighWaterMark",i);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var s=e.decodeStrings===false;this.decodeStrings=!s;this.defaultEncoding=e.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){onwrite(t,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function getBuffer(){var e=this.bufferedRequest;var t=[];while(e){t.push(e);e=e.next}return t};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:i.deprecate((function writableStateBufferGetter(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}})();var k;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){k=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(e){if(k.call(this,e))return true;if(this!==Writable)return false;return e&&e._writableState instanceof WritableState}})}else{k=function realHasInstance(e){return e instanceof this}}function Writable(e){n=n||r(2063);var t=this instanceof n;if(!t&&!k.call(Writable,this))return new Writable(e);this._writableState=new WritableState(e,this,t);this.writable=true;if(e){if(typeof e.write==="function")this._write=e.write;if(typeof e.writev==="function")this._writev=e.writev;if(typeof e.destroy==="function")this._destroy=e.destroy;if(typeof e.final==="function")this._final=e.final}s.call(this)}Writable.prototype.pipe=function(){T(this,new E)};function writeAfterEnd(e,t){var r=new w;T(e,r);process.nextTick(t,r)}function validChunk(e,t,r,n){var i;if(r===null){i=new C}else if(typeof r!=="string"&&!t.objectMode){i=new y("chunk",["string","Buffer"],r)}if(i){T(e,i);process.nextTick(n,i);return false}return true}Writable.prototype.write=function(e,t,r){var n=this._writableState;var i=false;var s=!n.objectMode&&_isUint8Array(e);if(s&&!o.isBuffer(e)){e=_uint8ArrayToBuffer(e)}if(typeof t==="function"){r=t;t=null}if(s)t="buffer";else if(!t)t=n.defaultEncoding;if(typeof r!=="function")r=nop;if(n.ending)writeAfterEnd(this,r);else if(s||validChunk(this,n,e,r)){n.pendingcb++;i=writeOrBuffer(this,n,s,e,t,r)}return i};Writable.prototype.cork=function(){this._writableState.corked++};Writable.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest)clearBuffer(this,e)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(e){if(typeof e==="string")e=e.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new I(e);this._writableState.defaultEncoding=e;return this};Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});function decodeChunk(e,t,r){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=o.from(t,r)}return t}Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});function writeOrBuffer(e,t,r,n,i,s){if(!r){var o=decodeChunk(t,n,i);if(n!==o){r=true;i="buffer";n=o}}var l=t.objectMode?1:n.length;t.length+=l;var u=t.length<t.highWaterMark;if(!u)t.needDrain=true;if(t.writing||t.corked){var p=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null};if(p){p.next=t.lastBufferedRequest}else{t.bufferedRequest=t.lastBufferedRequest}t.bufferedRequestCount+=1}else{doWrite(e,t,false,l,n,i,s)}return u}function doWrite(e,t,r,n,i,s,o){t.writelen=n;t.writecb=o;t.writing=true;t.sync=true;if(t.destroyed)t.onwrite(new b("write"));else if(r)e._writev(i,t.onwrite);else e._write(i,s,t.onwrite);t.sync=false}function onwriteError(e,t,r,n,i){--t.pendingcb;if(r){process.nextTick(i,n);process.nextTick(finishMaybe,e,t);e._writableState.errorEmitted=true;T(e,n)}else{i(n);e._writableState.errorEmitted=true;T(e,n);finishMaybe(e,t)}}function onwriteStateUpdate(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function onwrite(e,t){var r=e._writableState;var n=r.sync;var i=r.writecb;if(typeof i!=="function")throw new v;onwriteStateUpdate(r);if(t)onwriteError(e,r,n,t,i);else{var s=needFinish(r)||e.destroyed;if(!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest){clearBuffer(e,r)}if(n){process.nextTick(afterWrite,e,r,s,i)}else{afterWrite(e,r,s,i)}}}function afterWrite(e,t,r,n){if(!r)onwriteDrain(e,t);t.pendingcb--;n();finishMaybe(e,t)}function onwriteDrain(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function clearBuffer(e,t){t.bufferProcessing=true;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount;var i=new Array(n);var s=t.corkedRequestsFree;s.entry=r;var o=0;var l=true;while(r){i[o]=r;if(!r.isBuf)l=false;r=r.next;o+=1}i.allBuffers=l;doWrite(e,t,true,t.length,i,"",s.finish);t.pendingcb++;t.lastBufferedRequest=null;if(s.next){t.corkedRequestsFree=s.next;s.next=null}else{t.corkedRequestsFree=new CorkedRequest(t)}t.bufferedRequestCount=0}else{while(r){var u=r.chunk;var p=r.encoding;var g=r.callback;var m=t.objectMode?1:u.length;doWrite(e,t,false,m,u,p,g);r=r.next;t.bufferedRequestCount--;if(t.writing){break}}if(r===null)t.lastBufferedRequest=null}t.bufferedRequest=r;t.bufferProcessing=false}Writable.prototype._write=function(e,t,r){r(new _("_write()"))};Writable.prototype._writev=null;Writable.prototype.end=function(e,t,r){var n=this._writableState;if(typeof e==="function"){r=e;e=null;t=null}else if(typeof t==="function"){r=t;t=null}if(e!==null&&e!==undefined)this.write(e,t);if(n.corked){n.corked=1;this.uncork()}if(!n.ending)endWritable(this,n,r);return this};Object.defineProperty(Writable.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function needFinish(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function callFinal(e,t){e._final((function(r){t.pendingcb--;if(r){T(e,r)}t.prefinished=true;e.emit("prefinish");finishMaybe(e,t)}))}function prefinish(e,t){if(!t.prefinished&&!t.finalCalled){if(typeof e._final==="function"&&!t.destroyed){t.pendingcb++;t.finalCalled=true;process.nextTick(callFinal,e,t)}else{t.prefinished=true;e.emit("prefinish")}}}function finishMaybe(e,t){var r=needFinish(t);if(r){prefinish(e,t);if(t.pendingcb===0){t.finished=true;e.emit("finish");if(t.autoDestroy){var n=e._readableState;if(!n||n.autoDestroy&&n.endEmitted){e.destroy()}}}}return r}function endWritable(e,t,r){t.ending=true;finishMaybe(e,t);if(r){if(t.finished)process.nextTick(r);else e.once("finish",r)}t.ended=true;e.writable=false}function onCorkedFinish(e,t,r){var n=e.entry;e.entry=null;while(n){var i=n.callback;t.pendingcb--;i(r);n=n.next}t.corkedRequestsFree.next=e}Object.defineProperty(Writable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function set(e){if(!this._writableState){return}this._writableState.destroyed=e}});Writable.prototype.destroy=u.destroy;Writable.prototype._undestroy=u.undestroy;Writable.prototype._destroy=function(e,t){t(e)}},4868:(e,t,r)=>{"use strict";var n;function _defineProperty(e,t,r){t=_toPropertyKey(t);if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t==="symbol"?t:String(t)}function _toPrimitive(e,t){if(typeof e!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i=r(6815);var s=Symbol("lastResolve");var o=Symbol("lastReject");var l=Symbol("error");var u=Symbol("ended");var p=Symbol("lastPromise");var g=Symbol("handlePromise");var m=Symbol("stream");function createIterResult(e,t){return{value:e,done:t}}function readAndResolve(e){var t=e[s];if(t!==null){var r=e[m].read();if(r!==null){e[p]=null;e[s]=null;e[o]=null;t(createIterResult(r,false))}}}function onReadable(e){process.nextTick(readAndResolve,e)}function wrapForNext(e,t){return function(r,n){e.then((function(){if(t[u]){r(createIterResult(undefined,true));return}t[g](r,n)}),n)}}var y=Object.getPrototypeOf((function(){}));var _=Object.setPrototypeOf((n={get stream(){return this[m]},next:function next(){var e=this;var t=this[l];if(t!==null){return Promise.reject(t)}if(this[u]){return Promise.resolve(createIterResult(undefined,true))}if(this[m].destroyed){return new Promise((function(t,r){process.nextTick((function(){if(e[l]){r(e[l])}else{t(createIterResult(undefined,true))}}))}))}var r=this[p];var n;if(r){n=new Promise(wrapForNext(r,this))}else{var i=this[m].read();if(i!==null){return Promise.resolve(createIterResult(i,false))}n=new Promise(this[g])}this[p]=n;return n}},_defineProperty(n,Symbol.asyncIterator,(function(){return this})),_defineProperty(n,"return",(function _return(){var e=this;return new Promise((function(t,r){e[m].destroy(null,(function(e){if(e){r(e);return}t(createIterResult(undefined,true))}))}))})),n),y);var v=function createReadableStreamAsyncIterator(e){var t;var r=Object.create(_,(t={},_defineProperty(t,m,{value:e,writable:true}),_defineProperty(t,s,{value:null,writable:true}),_defineProperty(t,o,{value:null,writable:true}),_defineProperty(t,l,{value:null,writable:true}),_defineProperty(t,u,{value:e._readableState.endEmitted,writable:true}),_defineProperty(t,g,{value:function value(e,t){var n=r[m].read();if(n){r[p]=null;r[s]=null;r[o]=null;e(createIterResult(n,false))}else{r[s]=e;r[o]=t}},writable:true}),t));r[p]=null;i(e,(function(e){if(e&&e.code!=="ERR_STREAM_PREMATURE_CLOSE"){var t=r[o];if(t!==null){r[p]=null;r[s]=null;r[o]=null;t(e)}r[l]=e;return}var n=r[s];if(n!==null){r[p]=null;r[s]=null;r[o]=null;n(createIterResult(undefined,true))}r[u]=true}));e.on("readable",onReadable.bind(null,r));return r};e.exports=v},7336:(e,t,r)=>{"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){t=_toPropertyKey(t);if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){if(t)_defineProperties(e.prototype,t);if(r)_defineProperties(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t==="symbol"?t:String(t)}function _toPrimitive(e,t){if(typeof e!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n=r(181),i=n.Buffer;var s=r(9023),o=s.inspect;var l=o&&o.custom||"inspect";function copyBuffer(e,t,r){i.prototype.copy.call(e,t,r)}e.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0}_createClass(BufferList,[{key:"push",value:function push(e){var t={data:e,next:null};if(this.length>0)this.tail.next=t;else this.head=t;this.tail=t;++this.length}},{key:"unshift",value:function unshift(e){var t={data:e,next:this.head};if(this.length===0)this.tail=t;this.head=t;++this.length}},{key:"shift",value:function shift(){if(this.length===0)return;var e=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return e}},{key:"clear",value:function clear(){this.head=this.tail=null;this.length=0}},{key:"join",value:function join(e){if(this.length===0)return"";var t=this.head;var r=""+t.data;while(t=t.next)r+=e+t.data;return r}},{key:"concat",value:function concat(e){if(this.length===0)return i.alloc(0);var t=i.allocUnsafe(e>>>0);var r=this.head;var n=0;while(r){copyBuffer(r.data,t,n);n+=r.data.length;r=r.next}return t}},{key:"consume",value:function consume(e,t){var r;if(e<this.head.data.length){r=this.head.data.slice(0,e);this.head.data=this.head.data.slice(e)}else if(e===this.head.data.length){r=this.shift()}else{r=t?this._getString(e):this._getBuffer(e)}return r}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(e){var t=this.head;var r=1;var n=t.data;e-=n.length;while(t=t.next){var i=t.data;var s=e>i.length?i.length:e;if(s===i.length)n+=i;else n+=i.slice(0,e);e-=s;if(e===0){if(s===i.length){++r;if(t.next)this.head=t.next;else this.head=this.tail=null}else{this.head=t;t.data=i.slice(s)}break}++r}this.length-=r;return n}},{key:"_getBuffer",value:function _getBuffer(e){var t=i.allocUnsafe(e);var r=this.head;var n=1;r.data.copy(t);e-=r.data.length;while(r=r.next){var s=r.data;var o=e>s.length?s.length:e;s.copy(t,t.length-e,0,o);e-=o;if(e===0){if(o===s.length){++n;if(r.next)this.head=r.next;else this.head=this.tail=null}else{this.head=r;r.data=s.slice(o)}break}++n}this.length-=n;return t}},{key:l,value:function value(e,t){return o(this,_objectSpread(_objectSpread({},t),{},{depth:0,customInspect:false}))}}]);return BufferList}()},5089:e=>{"use strict";function destroy(e,t){var r=this;var n=this._readableState&&this._readableState.destroyed;var i=this._writableState&&this._writableState.destroyed;if(n||i){if(t){t(e)}else if(e){if(!this._writableState){process.nextTick(emitErrorNT,this,e)}else if(!this._writableState.errorEmitted){this._writableState.errorEmitted=true;process.nextTick(emitErrorNT,this,e)}}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(e||null,(function(e){if(!t&&e){if(!r._writableState){process.nextTick(emitErrorAndCloseNT,r,e)}else if(!r._writableState.errorEmitted){r._writableState.errorEmitted=true;process.nextTick(emitErrorAndCloseNT,r,e)}else{process.nextTick(emitCloseNT,r)}}else if(t){process.nextTick(emitCloseNT,r);t(e)}else{process.nextTick(emitCloseNT,r)}}));return this}function emitErrorAndCloseNT(e,t){emitErrorNT(e,t);emitCloseNT(e)}function emitCloseNT(e){if(e._writableState&&!e._writableState.emitClose)return;if(e._readableState&&!e._readableState.emitClose)return;e.emit("close")}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function emitErrorNT(e,t){e.emit("error",t)}function errorOrDestroy(e,t){var r=e._readableState;var n=e._writableState;if(r&&r.autoDestroy||n&&n.autoDestroy)e.destroy(t);else e.emit("error",t)}e.exports={destroy:destroy,undestroy:undestroy,errorOrDestroy:errorOrDestroy}},6815:(e,t,r)=>{"use strict";var n=r(5500).F.ERR_STREAM_PREMATURE_CLOSE;function once(e){var t=false;return function(){if(t)return;t=true;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}e.apply(this,n)}}function noop(){}function isRequest(e){return e.setHeader&&typeof e.abort==="function"}function eos(e,t,r){if(typeof t==="function")return eos(e,null,t);if(!t)t={};r=once(r||noop);var i=t.readable||t.readable!==false&&e.readable;var s=t.writable||t.writable!==false&&e.writable;var o=function onlegacyfinish(){if(!e.writable)u()};var l=e._writableState&&e._writableState.finished;var u=function onfinish(){s=false;l=true;if(!i)r.call(e)};var p=e._readableState&&e._readableState.endEmitted;var g=function onend(){i=false;p=true;if(!s)r.call(e)};var m=function onerror(t){r.call(e,t)};var y=function onclose(){var t;if(i&&!p){if(!e._readableState||!e._readableState.ended)t=new n;return r.call(e,t)}if(s&&!l){if(!e._writableState||!e._writableState.ended)t=new n;return r.call(e,t)}};var _=function onrequest(){e.req.on("finish",u)};if(isRequest(e)){e.on("complete",u);e.on("abort",y);if(e.req)_();else e.on("request",_)}else if(s&&!e._writableState){e.on("end",o);e.on("close",o)}e.on("end",g);e.on("finish",u);if(t.error!==false)e.on("error",m);e.on("close",y);return function(){e.removeListener("complete",u);e.removeListener("abort",y);e.removeListener("request",_);if(e.req)e.req.removeListener("finish",u);e.removeListener("end",o);e.removeListener("close",o);e.removeListener("finish",u);e.removeListener("end",g);e.removeListener("error",m);e.removeListener("close",y)}}e.exports=eos},4659:(e,t,r)=>{"use strict";function asyncGeneratorStep(e,t,r,n,i,s,o){try{var l=e[s](o);var u=l.value}catch(e){r(e);return}if(l.done){t(u)}else{Promise.resolve(u).then(n,i)}}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function _next(e){asyncGeneratorStep(s,n,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,n,i,_next,_throw,"throw",e)}_next(undefined)}))}}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){t=_toPropertyKey(t);if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t==="symbol"?t:String(t)}function _toPrimitive(e,t){if(typeof e!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n=r(5500).F.ERR_INVALID_ARG_TYPE;function from(e,t,r){var i;if(t&&typeof t.next==="function"){i=t}else if(t&&t[Symbol.asyncIterator])i=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])i=t[Symbol.iterator]();else throw new n("iterable",["Iterable"],t);var s=new e(_objectSpread({objectMode:true},r));var o=false;s._read=function(){if(!o){o=true;next()}};function next(){return _next2.apply(this,arguments)}function _next2(){_next2=_asyncToGenerator((function*(){try{var e=yield i.next(),t=e.value,r=e.done;if(r){s.push(null)}else if(s.push(yield t)){next()}else{o=false}}catch(e){s.destroy(e)}}));return _next2.apply(this,arguments)}return s}e.exports=from},6701:(e,t,r)=>{"use strict";var n;function once(e){var t=false;return function(){if(t)return;t=true;e.apply(void 0,arguments)}}var i=r(5500).F,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function noop(e){if(e)throw e}function isRequest(e){return e.setHeader&&typeof e.abort==="function"}function destroyer(e,t,i,s){s=once(s);var l=false;e.on("close",(function(){l=true}));if(n===undefined)n=r(6815);n(e,{readable:t,writable:i},(function(e){if(e)return s(e);l=true;s()}));var u=false;return function(t){if(l)return;if(u)return;u=true;if(isRequest(e))return e.abort();if(typeof e.destroy==="function")return e.destroy();s(t||new o("pipe"))}}function call(e){e()}function pipe(e,t){return e.pipe(t)}function popCallback(e){if(!e.length)return noop;if(typeof e[e.length-1]!=="function")return noop;return e.pop()}function pipeline(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=popCallback(t);if(Array.isArray(t[0]))t=t[0];if(t.length<2){throw new s("streams")}var i;var o=t.map((function(e,r){var s=r<t.length-1;var l=r>0;return destroyer(e,s,l,(function(e){if(!i)i=e;if(e)o.forEach(call);if(s)return;o.forEach(call);n(i)}))}));return t.reduce(pipe)}e.exports=pipeline},4874:(e,t,r)=>{"use strict";var n=r(5500).F.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function getHighWaterMark(e,t,r,i){var s=highWaterMarkFrom(t,i,r);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var o=i?r:"highWaterMark";throw new n(o,s)}return Math.floor(s)}return e.objectMode?16:16*1024}e.exports={getHighWaterMark:getHighWaterMark}},3283:(e,t,r)=>{e.exports=r(2203)},6131:(e,t,r)=>{var n=r(2203);if(process.env.READABLE_STREAM==="disable"&&n){e.exports=n.Readable;Object.assign(e.exports,n);e.exports.Stream=n}else{t=e.exports=r(6893);t.Stream=n||t;t.Readable=t;t.Writable=r(8797);t.Duplex=r(2063);t.Transform=r(2337);t.PassThrough=r(5283);t.finished=r(6815);t.pipeline=r(6701)}},7525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ReaddirpStream=t.EntryTypes=void 0;t.readdirp=readdirp;t.readdirpPromise=readdirpPromise;const n=r(1455);const i=r(7075);const s=r(6760);t.EntryTypes={FILE_TYPE:"files",DIR_TYPE:"directories",FILE_DIR_TYPE:"files_directories",EVERYTHING_TYPE:"all"};const o={root:".",fileFilter:e=>true,directoryFilter:e=>true,type:t.EntryTypes.FILE_TYPE,lstat:false,depth:2147483648,alwaysStat:false,highWaterMark:4096};Object.freeze(o);const l="READDIRP_RECURSIVE_ERROR";const u=new Set(["ENOENT","EPERM","EACCES","ELOOP",l]);const p=[t.EntryTypes.DIR_TYPE,t.EntryTypes.EVERYTHING_TYPE,t.EntryTypes.FILE_DIR_TYPE,t.EntryTypes.FILE_TYPE];const g=new Set([t.EntryTypes.DIR_TYPE,t.EntryTypes.EVERYTHING_TYPE,t.EntryTypes.FILE_DIR_TYPE]);const m=new Set([t.EntryTypes.EVERYTHING_TYPE,t.EntryTypes.FILE_DIR_TYPE,t.EntryTypes.FILE_TYPE]);const isNormalFlowError=e=>u.has(e.code);const y=process.platform==="win32";const emptyFn=e=>true;const normalizeFilter=e=>{if(e===undefined)return emptyFn;if(typeof e==="function")return e;if(typeof e==="string"){const t=e.trim();return e=>e.basename===t}if(Array.isArray(e)){const t=e.map((e=>e.trim()));return e=>t.some((t=>e.basename===t))}return emptyFn};class ReaddirpStream extends i.Readable{constructor(e={}){super({objectMode:true,autoDestroy:true,highWaterMark:e.highWaterMark});const r={...o,...e};const{root:i,type:l}=r;this._fileFilter=normalizeFilter(r.fileFilter);this._directoryFilter=normalizeFilter(r.directoryFilter);const u=r.lstat?n.lstat:n.stat;if(y){this._stat=e=>u(e,{bigint:true})}else{this._stat=u}this._maxDepth=r.depth??o.depth;this._wantsDir=l?g.has(l):false;this._wantsFile=l?m.has(l):false;this._wantsEverything=l===t.EntryTypes.EVERYTHING_TYPE;this._root=(0,s.resolve)(i);this._isDirent=!r.alwaysStat;this._statsProp=this._isDirent?"dirent":"stats";this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent};this.parents=[this._exploreDir(i,1)];this.reading=false;this.parent=undefined}async _read(e){if(this.reading)return;this.reading=true;try{while(!this.destroyed&&e>0){const t=this.parent;const r=t&&t.files;if(r&&r.length>0){const{path:n,depth:i}=t;const s=r.splice(0,e).map((e=>this._formatEntry(e,n)));const o=await Promise.all(s);for(const t of o){if(!t)continue;if(this.destroyed)return;const r=await this._getEntryType(t);if(r==="directory"&&this._directoryFilter(t)){if(i<=this._maxDepth){this.parents.push(this._exploreDir(t.fullPath,i+1))}if(this._wantsDir){this.push(t);e--}}else if((r==="file"||this._includeAsFile(t))&&this._fileFilter(t)){if(this._wantsFile){this.push(t);e--}}}}else{const e=this.parents.pop();if(!e){this.push(null);break}this.parent=await e;if(this.destroyed)return}}}catch(e){this.destroy(e)}finally{this.reading=false}}async _exploreDir(e,t){let r;try{r=await(0,n.readdir)(e,this._rdOptions)}catch(e){this._onError(e)}return{files:r,depth:t,path:e}}async _formatEntry(e,t){let r;const n=this._isDirent?e.name:e;try{const i=(0,s.resolve)((0,s.join)(t,n));r={path:(0,s.relative)(this._root,i),fullPath:i,basename:n};r[this._statsProp]=this._isDirent?e:await this._stat(i)}catch(e){this._onError(e);return}return r}_onError(e){if(isNormalFlowError(e)&&!this.destroyed){this.emit("warn",e)}else{this.destroy(e)}}async _getEntryType(e){if(!e&&this._statsProp in e){return""}const t=e[this._statsProp];if(t.isFile())return"file";if(t.isDirectory())return"directory";if(t&&t.isSymbolicLink()){const t=e.fullPath;try{const e=await(0,n.realpath)(t);const r=await(0,n.lstat)(e);if(r.isFile()){return"file"}if(r.isDirectory()){const r=e.length;if(t.startsWith(e)&&t.substr(r,1)===s.sep){const r=new Error(`Circular symlink detected: "${t}" points to "${e}"`);r.code=l;return this._onError(r)}return"directory"}}catch(e){this._onError(e);return""}}}_includeAsFile(e){const t=e&&e[this._statsProp];return t&&this._wantsEverything&&!t.isDirectory()}}t.ReaddirpStream=ReaddirpStream;function readdirp(e,r={}){let n=r.entryType||r.type;if(n==="both")n=t.EntryTypes.FILE_DIR_TYPE;if(n)r.type=n;if(!e){throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)")}else if(typeof e!=="string"){throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)")}else if(n&&!p.includes(n)){throw new Error(`readdirp: Invalid type passed. Use one of ${p.join(", ")}`)}r.root=e;return new ReaddirpStream(r)}function readdirpPromise(e,t={}){return new Promise(((r,n)=>{const i=[];readdirp(e,t).on("data",(e=>i.push(e))).on("end",(()=>r(i))).on("error",(e=>n(e)))}))}t["default"]=readdirp},3058:(e,t,r)=>{
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(181);var i=n.Buffer;function copyProps(e,t){for(var r in e){t[r]=e[r]}}if(i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow){e.exports=n}else{copyProps(n,t);t.Buffer=SafeBuffer}function SafeBuffer(e,t,r){return i(e,t,r)}SafeBuffer.prototype=Object.create(i.prototype);copyProps(i,SafeBuffer);SafeBuffer.from=function(e,t,r){if(typeof e==="number"){throw new TypeError("Argument must not be a number")}return i(e,t,r)};SafeBuffer.alloc=function(e,t,r){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}var n=i(e);if(t!==undefined){if(typeof r==="string"){n.fill(t,r)}else{n.fill(t)}}else{n.fill(0)}return n};SafeBuffer.allocUnsafe=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return i(e)};SafeBuffer.allocUnsafeSlow=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return n.SlowBuffer(e)}},2803:(e,t,r)=>{"use strict";var n=r(181);var i=n.Buffer;var s={};var o;for(o in n){if(!n.hasOwnProperty(o))continue;if(o==="SlowBuffer"||o==="Buffer")continue;s[o]=n[o]}var l=s.Buffer={};for(o in i){if(!i.hasOwnProperty(o))continue;if(o==="allocUnsafe"||o==="allocUnsafeSlow")continue;l[o]=i[o]}s.Buffer.prototype=i.prototype;if(!l.from||l.from===Uint8Array.from){l.from=function(e,t,r){if(typeof e==="number"){throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e)}if(e&&typeof e.length==="undefined"){throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}return i(e,t,r)}}if(!l.alloc){l.alloc=function(e,t,r){if(typeof e!=="number"){throw new TypeError('The "size" argument must be of type number. Received type '+typeof e)}if(e<0||e>=2*(1<<30)){throw new RangeError('The value "'+e+'" is invalid for option "size"')}var n=i(e);if(!t||t.length===0){n.fill(0)}else if(typeof r==="string"){n.fill(t,r)}else{n.fill(t)}return n}}if(!s.kStringMaxLength){try{s.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}}if(!s.constants){s.constants={MAX_LENGTH:s.kMaxLength};if(s.kStringMaxLength){s.constants.MAX_STRING_LENGTH=s.kStringMaxLength}}e.exports=s},4087:(e,t,r)=>{var n=r(9896);e.exports=function(e,t,r){t=typeof t!=="undefined"?t:"\n";r=typeof r!=="undefined"?r:"utf8";var i=[];var s=n.readFileSync(e,r);if(s.indexOf("-END CERTIFICATE-")<0||s.indexOf("-BEGIN CERTIFICATE-")<0){throw Error("File does not contain 'BEGIN CERTIFICATE' or 'END CERTIFICATE'")}s=s.split(t);var o=[];var l,u;for(l=0,u=s.length;l<u;l++){var p=s[l];if(!(p.length!==0)){continue}o.push(p);if(p.match(/-END CERTIFICATE-/)){i.push(o.join(t));o=[]}}return i}},5683:(e,t,r)=>{"use strict";const{Duplex:n,Readable:i,Writable:s}=r(2203);const{CHANNEL_EXTENDED_DATATYPE:{STDERR:o}}=r(4020);const{bufferSlice:l}=r(2184);const u=32*1024;const p=2*1024*1024;const g=p/2;class ClientStderr extends i{constructor(e,t){super(t);this._channel=e}_read(e){if(this._channel._waitChanDrain){this._channel._waitChanDrain=false;if(this._channel.incoming.window<=g)windowAdjust(this._channel)}}}class ServerStderr extends s{constructor(e){super({highWaterMark:p});this._channel=e}_write(e,t,r){const n=this._channel;const i=n._client._protocol;const s=n.outgoing;const u=s.packetSize;const p=s.id;let g=s.window;const m=e.length;let y=0;if(s.state!=="open")return;while(m-y>0&&g>0){let t=m-y;if(t>g)t=g;if(t>u)t=u;if(y===0&&t===m)i.channelExtData(p,e,o);else i.channelExtData(p,l(e,y,y+t),o);y+=t;g-=t}s.window=g;if(m-y>0){if(g===0)n._waitWindow=true;if(y>0)n._chunkErr=l(e,y,m);else n._chunkErr=e;n._chunkcbErr=r;return}r()}}class Channel extends n{constructor(e,t,r){const n={highWaterMark:p,allowHalfOpen:!r||r&&r.allowHalfOpen!==false,emitClose:false};super(n);this.allowHalfOpen=n.allowHalfOpen;const i=!!(r&&r.server);this.server=i;this.type=t.type;this.subtype=undefined;this.incoming=t.incoming;this.outgoing=t.outgoing;this._callbacks=[];this._client=e;this._hasX11=false;this._exit={code:undefined,signal:undefined,dump:undefined,desc:undefined};this.stdin=this.stdout=this;if(i)this.stderr=new ServerStderr(this);else this.stderr=new ClientStderr(this,n);this._waitWindow=false;this._waitChanDrain=false;this._chunk=undefined;this._chunkcb=undefined;this._chunkErr=undefined;this._chunkcbErr=undefined;this.on("finish",onFinish).on("prefinish",onFinish);this.on("end",onEnd).on("close",onEnd)}_read(e){if(this._waitChanDrain){this._waitChanDrain=false;if(this.incoming.window<=g)windowAdjust(this)}}_write(e,t,r){const n=this._client._protocol;const i=this.outgoing;const s=i.packetSize;const o=i.id;let u=i.window;const p=e.length;let g=0;if(i.state!=="open")return;while(p-g>0&&u>0){let t=p-g;if(t>u)t=u;if(t>s)t=s;if(g===0&&t===p)n.channelData(o,e);else n.channelData(o,l(e,g,g+t));g+=t;u-=t}i.window=u;if(p-g>0){if(u===0)this._waitWindow=true;if(g>0)this._chunk=l(e,g,p);else this._chunk=e;this._chunkcb=r;return}r()}eof(){if(this.outgoing.state==="open"){this.outgoing.state="eof";this._client._protocol.channelEOF(this.outgoing.id)}}close(){if(this.outgoing.state==="open"||this.outgoing.state==="eof"){this.outgoing.state="closing";this._client._protocol.channelClose(this.outgoing.id)}}destroy(){this.end();this.close();return this}setWindow(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");if(this.type==="session"&&(this.subtype==="shell"||this.subtype==="exec")&&this.writable&&this.outgoing.state==="open"){this._client._protocol.windowChange(this.outgoing.id,e,t,r,n)}}signal(e){if(this.server)throw new Error("Client-only method called in server mode");if(this.type==="session"&&this.writable&&this.outgoing.state==="open"){this._client._protocol.signal(this.outgoing.id,e)}}exit(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");if(this.type==="session"&&this.writable&&this.outgoing.state==="open"){if(typeof e==="number"){this._client._protocol.exitStatus(this.outgoing.id,e)}else{this._client._protocol.exitSignal(this.outgoing.id,e,t,r)}}}}function onFinish(){this.eof();if(this.server||!this.allowHalfOpen)this.close();this.writable=false}function onEnd(){this.readable=false}function windowAdjust(e){if(e.outgoing.state==="closed")return;const t=p-e.incoming.window;if(t<=0)return;e.incoming.window+=t;e._client._protocol.channelWindowAdjust(e.outgoing.id,t)}e.exports={Channel:Channel,MAX_WINDOW:p,PACKET_SIZE:u,windowAdjust:windowAdjust,WINDOW_THRESHOLD:g}},3849:(e,t,r)=>{"use strict";const{Socket:n}=r(9278);const{Duplex:i}=r(2203);const{resolve:s}=r(6928);const{readFile:o}=r(9896);const{execFile:l,spawn:u}=r(5317);const{isParsedKey:p,parseKey:g}=r(1789);const{makeBufferParser:m,readUInt32BE:y,writeUInt32BE:_,writeUInt32LE:v}=r(2184);function once(e){let t=false;return(...r)=>{if(t)return;t=true;e(...r)}}function concat(e,t){const r=Buffer.allocUnsafe(e.length+t.length);e.copy(r,0);t.copy(r,e.length);return r}function noop(){}const E=Buffer.alloc(0);const b=m();class BaseAgent{getIdentities(e){e(new Error("Missing getIdentities() implementation"))}sign(e,t,r,n){if(typeof r==="function")n=r;n(new Error("Missing sign() implementation"))}}class OpenSSHAgent extends BaseAgent{constructor(e){super();this.socketPath=e}getStream(e){e=once(e);const t=new n;t.on("connect",(()=>{e(null,t)}));t.on("close",onFail).on("end",onFail).on("error",onFail);t.connect(this.socketPath);function onFail(){try{t.destroy()}catch{}e(new Error("Failed to connect to agent"))}}getIdentities(e){e=once(e);this.getStream(((t,r)=>{function onFail(t){if(r){try{r.destroy()}catch{}}if(!t)t=new Error("Failed to retrieve identities from agent");e(t)}if(t)return onFail(t);const n=new T(true);n.on("error",onFail);n.pipe(r).pipe(n);r.on("close",onFail).on("end",onFail).on("error",onFail);n.getIdentities(((t,n)=>{if(t)return onFail(t);try{r.destroy()}catch{}e(null,n)}))}))}sign(e,t,r,n){if(typeof r==="function"){n=r;r=undefined}else if(typeof r!=="object"||r===null){r=undefined}n=once(n);this.getStream(((i,s)=>{function onFail(e){if(s){try{s.destroy()}catch{}}if(!e)e=new Error("Failed to sign data with agent");n(e)}if(i)return onFail(i);const o=new T(true);o.on("error",onFail);o.pipe(s).pipe(o);s.on("close",onFail).on("end",onFail).on("error",onFail);o.sign(e,t,r,((e,t)=>{if(e)return onFail(e);try{s.destroy()}catch{}n(null,t)}))}))}}const C=(()=>{const e=10;const t=11;const n=12;const s=13;const o=14;const l=15;const p=r.ab+"pagent.exe";const g={[e]:new Error("Invalid pagent.exe arguments"),[t]:new Error("Pageant is not running"),[n]:new Error("pagent.exe could not create an mmap"),[s]:new Error("pagent.exe could not set mode for stdin"),[o]:new Error("pagent.exe could not set mode for stdout"),[l]:new Error("pagent.exe did not get expected input payload")};function destroy(e){e.buffer=null;if(e.proc){e.proc.kill();e.proc=undefined}}class PageantSocket extends i{constructor(){super();this.proc=undefined;this.buffer=null}_read(e){}_write(e,t,n){if(this.buffer===null){this.buffer=e}else{const t=Buffer.allocUnsafe(this.buffer.length+e.length);this.buffer.copy(t,0);e.copy(t,this.buffer.length);this.buffer=t}if(this.buffer.length<4)return n();const i=y(this.buffer,0);if(this.buffer.length-4<i)return n();e=this.buffer.slice(0,4+i);if(this.buffer.length>4+i)return n(new Error("Unexpected multiple agent requests"));this.buffer=null;let s;const o=this.proc=u(r.ab+"pagent.exe",[e.length]);o.stdout.on("data",(e=>{this.push(e)}));o.on("error",(e=>{s=e;n(s)}));o.on("close",(e=>{this.proc=undefined;if(!s){if(s=g[e])return n(s);n()}}));o.stdin.end(e)}_final(e){destroy(this);e()}_destroy(e,t){destroy(this);t()}}return class PageantAgent extends OpenSSHAgent{getStream(e){e(null,new PageantSocket)}}})();const w=(()=>{const e=/^!<socket >(\d+) s ([A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8})/;return class CygwinAgent extends OpenSSHAgent{getStream(t){t=once(t);let r=this.socketPath;let i=false;o(r,(function readCygsocket(s,u){if(s){if(i)return t(new Error("Invalid cygwin unix socket path"));l("cygpath",["-w",r],((e,n,s)=>{if(e||n.length===0)return t(new Error("Invalid cygwin unix socket path"));i=true;r=n.toString().replace(/[\r\n]/g,"");o(r,readCygsocket)}));return}const p=e.exec(u.toString("ascii"));if(!p)return t(new Error("Malformed cygwin unix socket file"));let g;let m=0;let _=false;const E=[];let b;let C=Buffer.alloc(12);const w=parseInt(p[1],10);const I=p[2].replace(/-/g,"");const T=Buffer.allocUnsafe(16);for(let e=0,t=0;t<32;++e,t+=2)T[e]=parseInt(I.substring(t,t+2),16);for(let e=0;e<16;e+=4)v(T,y(T,e),e);tryConnect();function _onconnect(){m=0;g="secret";b.write(T)}function _ondata(e){m+=e.length;if(g==="secret"){if(m===16){m=0;g="creds";b.write(C)}return}if(g==="creds"){if(!_)E.push(e);if(m===12){b.removeListener("connect",_onconnect);b.removeListener("data",_ondata);b.removeListener("error",onFail);b.removeListener("end",onFail);b.removeListener("close",onFail);if(_)return t(null,b);_=true;C=Buffer.concat(E);v(C,process.pid,0);b.on("error",(()=>{}));b.destroy();tryConnect()}}}function onFail(){t(new Error("Problem negotiating cygwin unix socket security"))}function tryConnect(){b=new n;b.on("connect",_onconnect);b.on("data",_ondata);b.on("error",onFail);b.on("end",onFail);b.on("close",onFail);b.connect(w)}}))}}})();const I=/^[/\\][/\\]\.[/\\]pipe[/\\].+/;function createAgent(e){if(process.platform==="win32"&&!I.test(e)){return e==="pageant"?new C:new w(e)}return new OpenSSHAgent(e)}const T=(()=>{const e=11;const t=13;const r=5;const n=12;const s=14;const o=1<<1;const l=1<<2;const u=0;const m=1;function processResponses(e){let t;while(e[I].length){const r=e[I][0][C];if(r===undefined)break;e[I].shift();t=e.push(r)}return t}const v=Symbol("Inbound Request Type");const C=Symbol("Inbound Request Response");const w=Symbol("Inbound Request Context");class AgentInboundRequest{constructor(e,t){this[v]=e;this[C]=undefined;this[w]=t}hasResponded(){return this[C]!==undefined}getType(){return this[v]}getContext(){return this[w]}}function respond(e,t,r){t[C]=r;return processResponses(e)}function cleanup(e){e[k]=null;if(e[T]===u){const t=e[I];if(t&&t.length){e[I]=[];for(const e of t)e.cb(new Error("No reply from server"))}}try{e.end()}catch{}setImmediate((()=>{if(!e[P])e.emit("end");if(!e[O])e.emit("close")}))}function onClose(){this[O]=true}function onEnd(){this[P]=true}const I=Symbol("Requests");const T=Symbol("Agent Protocol Role");const k=Symbol("Agent Protocol Buffer");const R=Symbol("Agent Protocol Current Message Length");const O=Symbol("Agent Protocol Closed");const P=Symbol("Agent Protocol Ended");return class AgentProtocol extends i{constructor(e){super({autoDestroy:true,emitClose:false});this[T]=e?u:m;this[I]=[];this[k]=null;this[R]=-1;this.once("end",onEnd);this.once("close",onClose)}_read(e){}_write(i,p,m){if(this[k]===null)this[k]=i;else this[k]=concat(this[k],i);let _=this[k];let v=_.length;let E=0;while(E<v){if(v<5)break;if(this[R]===-1)this[R]=y(_,E);if(v<4+this[R])break;const i=_[E+=4];++E;if(this[T]===u){if(this[I].length===0)return m(new Error("Received unexpected message from server"));const o=this[I].shift();switch(i){case r:o.cb(new Error("Agent responded with failure"));break;case n:{if(o.type!==e)return m(new Error("Agent responded with wrong message type"));b.init(_,E);const t=b.readUInt32BE();if(t===undefined){b.clear();return m(new Error("Malformed agent response"))}const r=[];for(let e=0;e<t;++e){let e=b.readString();if(e===undefined){b.clear();return m(new Error("Malformed agent response"))}const t=b.readString(true);if(t===undefined){b.clear();return m(new Error("Malformed agent response"))}e=g(e);if(e instanceof Error)continue;e.comment=e.comment||t;r.push(e)}E=b.pos();b.clear();o.cb(null,r);break}case s:{if(o.type!==t)return m(new Error("Agent responded with wrong message type"));b.init(_,E);let e=b.readString();E=b.pos();b.clear();if(e===undefined)return m(new Error("Malformed agent response"));b.init(e,0);b.readString(true);e=b.readString();b.clear();if(e===undefined)return m(new Error("Malformed OpenSSH signature format"));o.cb(null,e);break}default:return m(new Error("Agent responded with unsupported message type"))}}else{switch(i){case e:{const e=new AgentInboundRequest(i);this[I].push(e);this.emit("identities",e);break}case t:{b.init(_,E);let e=b.readString();const t=b.readString();const r=b.readUInt32BE();E=b.pos();b.clear();if(r===undefined){const e=new AgentInboundRequest(i);this[I].push(e);return this.failureReply(e)}e=g(e);if(e instanceof Error){const e=new AgentInboundRequest(i);this[I].push(e);return this.failureReply(e)}const n={hash:undefined};let s;if(e.type==="ssh-rsa"){if(r&o){s="rsa-sha2-256";n.hash="sha256"}else if(r&l){s="rsa-sha2-512";n.hash="sha512"}}if(s===undefined)s=e.type;const u=new AgentInboundRequest(i,s);this[I].push(u);this.emit("sign",u,e,t,n);break}default:{const e=new AgentInboundRequest(i);this[I].push(e);this.failureReply(e)}}}this[R]=-1;if(E===v){this[k]=null;break}else{this[k]=_=_.slice(E);v=_.length;E=0}}m()}_destroy(e,t){cleanup(this);t()}_final(e){cleanup(this);e()}sign(e,r,n,i){if(this[T]!==u)throw new Error("Client-only method called with server role");if(typeof n==="function"){i=n;n=undefined}else if(typeof n!=="object"||n===null){n=undefined}let s=0;e=g(e);if(e instanceof Error)throw new Error("Invalid public key argument");if(e.type==="ssh-rsa"&&n){switch(n.hash){case"sha256":s=o;break;case"sha512":s=l;break}}e=e.getPublicSSH();const p=t;const m=e.length;const y=r.length;let v=0;const E=Buffer.allocUnsafe(4+1+4+m+4+y+4);_(E,E.length-4,v);E[v+=4]=p;_(E,m,++v);e.copy(E,v+=4);_(E,y,v+=m);r.copy(E,v+=4);_(E,s,v+=y);if(typeof i!=="function")i=noop;this[I].push({type:p,cb:i});return this.push(E)}getIdentities(t){if(this[T]!==u)throw new Error("Client-only method called with server role");const r=e;let n=0;const i=Buffer.allocUnsafe(4+1);_(i,i.length-4,n);i[n+=4]=r;if(typeof t!=="function")t=noop;this[I].push({type:r,cb:t});return this.push(i)}failureReply(e){if(this[T]!==m)throw new Error("Server-only method called with client role");if(!(e instanceof AgentInboundRequest))throw new Error("Wrong request argument");if(e.hasResponded())return true;let t=0;const n=Buffer.allocUnsafe(4+1);_(n,n.length-4,t);n[t+=4]=r;return respond(this,e,n)}getIdentitiesReply(t,r){if(this[T]!==m)throw new Error("Server-only method called with client role");if(!(t instanceof AgentInboundRequest))throw new Error("Wrong request argument");if(t.hasResponded())return true;if(t.getType()!==e)throw new Error("Invalid response to request");if(!Array.isArray(r))throw new Error("Keys argument must be an array");let i=4;const s=[];for(let e=0;e<r.length;++e){const t=r[e];if(typeof t!=="object"||t===null)throw new Error(`Invalid key entry: ${t}`);let n;let o;if(p(t)){n=t}else if(p(t.pubKey)){n=t.pubKey}else{if(typeof t.pubKey!=="object"||t.pubKey===null)continue;({pubKey:n,comment:o}=t.pubKey);n=g(n);if(n instanceof Error)continue}o=n.comment||o;n=n.getPublicSSH();i+=4+n.length;if(o&&typeof o==="string")o=Buffer.from(o);else if(!Buffer.isBuffer(o))o=E;i+=4+o.length;s.push({pubKey:n,comment:o})}let o=0;const l=Buffer.allocUnsafe(4+1+i);_(l,l.length-4,o);l[o+=4]=n;_(l,s.length,++o);o+=4;for(let e=0;e<s.length;++e){const{pubKey:t,comment:r}=s[e];_(l,t.length,o);t.copy(l,o+=4);_(l,r.length,o+=t.length);o+=4;if(r.length){r.copy(l,o);o+=r.length}}return respond(this,t,l)}signReply(e,r){if(this[T]!==m)throw new Error("Server-only method called with client role");if(!(e instanceof AgentInboundRequest))throw new Error("Wrong request argument");if(e.hasResponded())return true;if(e.getType()!==t)throw new Error("Invalid response to request");if(!Buffer.isBuffer(r))throw new Error("Signature argument must be a Buffer");if(r.length===0)throw new Error("Signature argument must be non-empty");let n=0;const i=e.getContext();const o=Buffer.byteLength(i);const l=Buffer.allocUnsafe(4+1+4+4+o+4+r.length);_(l,l.length-4,n);l[n+=4]=s;_(l,4+o+4+r.length,++n);_(l,o,n+=4);l.utf8Write(i,n+=4,o);_(l,r.length,n+=o);r.copy(l,n+=4);return respond(this,e,l)}}})();const k=Symbol("Agent");const R=Symbol("Agent Keys");const O=Symbol("Agent Keys Index");const P=Symbol("Agent Init Callbacks");class AgentContext{constructor(e){if(typeof e==="string")e=createAgent(e);else if(!isAgent(e))throw new Error("Invalid agent argument");this[k]=e;this[R]=null;this[O]=-1;this[P]=null}init(e){if(typeof e!=="function")e=noop;if(this[R]===null){if(this[P]===null){this[P]=[e];const doCbs=(...e)=>{process.nextTick((()=>{const t=this[P];this[P]=null;for(const r of t)r(...e)}))};this[k].getIdentities(once(((e,t)=>{if(e)return doCbs(e);if(!Array.isArray(t)){return doCbs(new Error("Agent implementation failed to provide keys"))}const r=[];for(let e of t){e=g(e);if(e instanceof Error){continue}r.push(e)}this[R]=r;this[O]=-1;doCbs()})))}else{this[P].push(e)}}else{process.nextTick(e)}}nextKey(){if(this[R]===null||++this[O]>=this[R].length){return false}return this[R][this[O]]}currentKey(){if(this[R]===null||this[O]>=this[R].length){return null}return this[R][this[O]]}pos(){if(this[R]===null||this[O]>=this[R].length){return-1}return this[O]}reset(){this[O]=-1}sign(...e){this[k].sign(...e)}}function isAgent(e){return e instanceof BaseAgent}e.exports={AgentContext:AgentContext,AgentProtocol:T,BaseAgent:BaseAgent,createAgent:createAgent,CygwinAgent:w,isAgent:isAgent,OpenSSHAgent:OpenSSHAgent,PageantAgent:C}},6297:(e,t,r)=>{"use strict";const{createHash:n,getHashes:i,randomFillSync:s}=r(6982);const{Socket:o}=r(9278);const{lookup:l}=r(2250);const u=r(4434);const p=i();const{COMPAT:g,CHANNEL_EXTENDED_DATATYPE:{STDERR:m},CHANNEL_OPEN_FAILURE:y,DEFAULT_CIPHER:_,DEFAULT_COMPRESSION:v,DEFAULT_KEX:E,DEFAULT_MAC:b,DEFAULT_SERVER_HOST_KEY:C,DISCONNECT_REASON:w,DISCONNECT_REASON_BY_VALUE:I,SUPPORTED_CIPHER:T,SUPPORTED_COMPRESSION:k,SUPPORTED_KEX:R,SUPPORTED_MAC:O,SUPPORTED_SERVER_HOST_KEY:P}=r(4020);const{init:B}=r(2888);const D=r(7841);const{parseKey:L}=r(1789);const{SFTP:x}=r(4996);const{bufferCopy:U,makeBufferParser:j,makeError:W,readUInt32BE:Q,sigSSHToASN1:q,writeUInt32BE:z}=r(2184);const{AgentContext:G,createAgent:$,isAgent:Y}=r(3849);const{Channel:V,MAX_WINDOW:J,PACKET_SIZE:ee,windowAdjust:te,WINDOW_THRESHOLD:re}=r(5683);const{ChannelManager:ne,generateAlgorithmList:ie,isWritable:se,onChannelOpenFailure:oe,onCHANNEL_CLOSE:ae}=r(2137);const le=j();const ce=j();const ue=/^OpenSSH_(?:(?![0-4])\d)|(?:\d{2,})/;const noop=e=>{};class Client extends u{constructor(){super();this.config={host:undefined,port:undefined,localAddress:undefined,localPort:undefined,forceIPv4:undefined,forceIPv6:undefined,keepaliveCountMax:undefined,keepaliveInterval:undefined,readyTimeout:undefined,ident:undefined,username:undefined,password:undefined,privateKey:undefined,tryKeyboard:undefined,agent:undefined,allowAgentFwd:undefined,authHandler:undefined,hostHashAlgo:undefined,hostHashCb:undefined,strictVendor:undefined,debug:undefined};this._agent=undefined;this._readyTimeout=undefined;this._chanMgr=undefined;this._callbacks=undefined;this._forwarding=undefined;this._forwardingUnix=undefined;this._acceptX11=undefined;this._agentFwdEnabled=undefined;this._remoteVer=undefined;this._protocol=undefined;this._sock=undefined;this._resetKA=undefined}connect(e){if(this._sock&&se(this._sock)){this.once("close",(()=>{this.connect(e)}));this.end();return this}this.config.host=e.hostname||e.host||"localhost";this.config.port=e.port||22;this.config.localAddress=typeof e.localAddress==="string"?e.localAddress:undefined;this.config.localPort=typeof e.localPort==="string"||typeof e.localPort==="number"?e.localPort:undefined;this.config.forceIPv4=e.forceIPv4||false;this.config.forceIPv6=e.forceIPv6||false;this.config.keepaliveCountMax=typeof e.keepaliveCountMax==="number"&&e.keepaliveCountMax>=0?e.keepaliveCountMax:3;this.config.keepaliveInterval=typeof e.keepaliveInterval==="number"&&e.keepaliveInterval>0?e.keepaliveInterval:0;this.config.readyTimeout=typeof e.readyTimeout==="number"&&e.readyTimeout>=0?e.readyTimeout:2e4;this.config.ident=typeof e.ident==="string"||Buffer.isBuffer(e.ident)?e.ident:undefined;const t={kex:undefined,serverHostKey:undefined,cs:{cipher:undefined,mac:undefined,compress:undefined,lang:[]},sc:undefined};let r=true;if(typeof e.algorithms==="object"&&e.algorithms!==null){t.kex=ie(e.algorithms.kex,E,R);if(t.kex!==E)r=false;t.serverHostKey=ie(e.algorithms.serverHostKey,C,P);if(t.serverHostKey!==C)r=false;t.cs.cipher=ie(e.algorithms.cipher,_,T);if(t.cs.cipher!==_)r=false;t.cs.mac=ie(e.algorithms.hmac,b,O);if(t.cs.mac!==b)r=false;t.cs.compress=ie(e.algorithms.compress,v,k);if(t.cs.compress!==v)r=false;if(!r)t.sc=t.cs}if(typeof e.username==="string")this.config.username=e.username;else if(typeof e.user==="string")this.config.username=e.user;else throw new Error("Invalid username");this.config.password=typeof e.password==="string"?e.password:undefined;this.config.privateKey=typeof e.privateKey==="string"||Buffer.isBuffer(e.privateKey)?e.privateKey:undefined;this.config.localHostname=typeof e.localHostname==="string"?e.localHostname:undefined;this.config.localUsername=typeof e.localUsername==="string"?e.localUsername:undefined;this.config.tryKeyboard=e.tryKeyboard===true;if(typeof e.agent==="string"&&e.agent.length)this.config.agent=$(e.agent);else if(Y(e.agent))this.config.agent=e.agent;else this.config.agent=undefined;this.config.allowAgentFwd=e.agentForward===true&&this.config.agent!==undefined;let i=this.config.authHandler=typeof e.authHandler==="function"||Array.isArray(e.authHandler)?e.authHandler:undefined;this.config.strictVendor=typeof e.strictVendor==="boolean"?e.strictVendor:true;const s=this.config.debug=typeof e.debug==="function"?e.debug:undefined;if(e.agentForward===true&&!this.config.allowAgentFwd){throw new Error("You must set a valid agent path to allow agent forwarding")}let u=this._callbacks=[];this._chanMgr=new ne(this);this._forwarding={};this._forwardingUnix={};this._acceptX11=0;this._agentFwdEnabled=false;this._agent=this.config.agent?this.config.agent:undefined;this._remoteVer=undefined;let g;if(this.config.privateKey){g=L(this.config.privateKey,e.passphrase);if(g instanceof Error)throw new Error(`Cannot parse privateKey: ${g.message}`);if(Array.isArray(g)){g=g[0]}if(g.getPrivatePEM()===null){throw new Error("privateKey value does not contain a (valid) private key")}}let y;if(typeof e.hostVerifier==="function"){const t=e.hostVerifier;let r;if(p.indexOf(e.hostHash)!==-1){r=e.hostHash}y=(e,i)=>{if(r)e=n(r).update(e).digest("hex");const s=t(e,i);if(s!==undefined)i(s)}}const U=this._sock=e.sock||new o;let j=false;let Q=false;if(this._protocol)this._protocol.cleanup();const q=!s?undefined:(e,t,r)=>{s(`Debug output from server: ${JSON.stringify(r)}`)};let z;const le=this._protocol=new D({ident:this.config.ident,offer:r?undefined:t,onWrite:e=>{if(se(U))U.write(e)},onError:e=>{if(e.level==="handshake")clearTimeout(this._readyTimeout);if(!le._destruct)U.removeAllListeners("data");this.emit("error",e);try{U.end()}catch{}},onHeader:e=>{Q=true;this._remoteVer=e.versions.software;if(e.greeting)this.emit("greeting",e.greeting)},onHandshakeComplete:e=>{this.emit("handshake",e);if(!j){j=true;le.service("ssh-userauth")}},debug:s,hostVerifier:y,messageHandlers:{DEBUG:q,DISCONNECT:(e,t,r)=>{if(t!==w.BY_APPLICATION){if(!r){r=I[t];if(r===undefined)r=`Unexpected disconnection reason: ${t}`}const e=new Error(r);e.code=t;this.emit("error",e)}U.end()},SERVICE_ACCEPT:(e,t)=>{if(t==="ssh-userauth")tryNextAuth()},EXT_INFO:(e,t)=>{if(z===undefined){for(const e of t){if(e.name==="server-sig-algs"){z=e.algs;return}}z=null}},USERAUTH_BANNER:(e,t)=>{this.emit("banner",t)},USERAUTH_SUCCESS:e=>{resetKA();clearTimeout(this._readyTimeout);this.emit("ready")},USERAUTH_FAILURE:(e,t,r)=>{if(me.keyAlgos){const e=me.keyAlgos[0][0];if(s)s(`Client: ${me.type} (${e}) auth failed`);me.keyAlgos.shift();if(me.keyAlgos.length){const[e,t]=me.keyAlgos[0];switch(me.type){case"agent":le.authPK(me.username,me.agentCtx.currentKey(),e);return;case"publickey":le.authPK(me.username,me.key,e);return;case"hostbased":le.authHostbased(me.username,me.key,me.localHostname,me.localUsername,e,((e,r)=>{const n=me.key.sign(e,t);if(n instanceof Error){n.message=`Error while signing with key: ${n.message}`;n.level="client-authentication";this.emit("error",n);return tryNextAuth()}r(n)}));return}}else{me.keyAlgos=undefined}}if(me.type==="agent"){const e=me.agentCtx.pos();s&&s(`Client: Agent key #${e+1} failed`);return tryNextAgentKey()}s&&s(`Client: ${me.type} auth failed`);ye=r;_e=t;tryNextAuth()},USERAUTH_PASSWD_CHANGEREQ:(e,t)=>{if(me.type==="password"){this.emit("change password",t,(e=>{le.authPassword(this.config.username,this.config.password,e)}))}},USERAUTH_PK_OK:e=>{let t;let r;if(me.keyAlgos)[t,r]=me.keyAlgos[0];if(me.type==="agent"){const e=me.agentCtx.currentKey();le.authPK(me.username,e,t,((t,n)=>{const i={hash:r};me.agentCtx.sign(e,t,i,((e,t)=>{if(e){e.level="agent";this.emit("error",e)}else{return n(t)}tryNextAgentKey()}))}))}else if(me.type==="publickey"){le.authPK(me.username,me.key,t,((e,t)=>{const n=me.key.sign(e,r);if(n instanceof Error){n.message=`Error signing data with key: ${n.message}`;n.level="client-authentication";this.emit("error",n);return tryNextAuth()}t(n)}))}},USERAUTH_INFO_REQUEST:(e,t,r,n)=>{if(me.type==="keyboard-interactive"){const e=Array.isArray(n)?n.length:0;if(e===0){s&&s("Client: Sending automatic USERAUTH_INFO_RESPONSE");le.authInfoRes();return}me.prompt(t,r,"",n,(e=>{le.authInfoRes(e)}))}},REQUEST_SUCCESS:(e,t)=>{if(u.length)u.shift()(false,t)},REQUEST_FAILURE:e=>{if(u.length)u.shift()(true)},GLOBAL_REQUEST:(e,t,r,n)=>{switch(t){case"hostkeys-00@openssh.com":hostKeysProve(this,n,((e,t)=>{if(e)return;this.emit("hostkeys",t)}));if(r)le.requestSuccess();break;default:if(r)le.requestFailure()}},CHANNEL_OPEN:(e,t)=>{onCHANNEL_OPEN(this,t)},CHANNEL_OPEN_CONFIRMATION:(e,t)=>{const r=this._chanMgr.get(t.recipient);if(typeof r!=="function")return;const n=r.type==="sftp";const i=n?"session":r.type;const o={type:i,incoming:{id:t.recipient,window:J,packetSize:ee,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}};const l=n?new x(this,o,{debug:s}):new V(this,o);this._chanMgr.update(t.recipient,l);r(undefined,l)},CHANNEL_OPEN_FAILURE:(e,t,r,n)=>{const i=this._chanMgr.get(t);if(typeof i!=="function")return;const s={reason:r,description:n};oe(this,t,s,i)},CHANNEL_DATA:(e,t,r)=>{const n=this._chanMgr.get(t);if(typeof n!=="object"||n===null)return;if(n.incoming.window===0)return;n.incoming.window-=r.length;if(n.push(r)===false){n._waitChanDrain=true;return}if(n.incoming.window<=re)te(n)},CHANNEL_EXTENDED_DATA:(e,t,r,n)=>{if(n!==m)return;const i=this._chanMgr.get(t);if(typeof i!=="object"||i===null)return;if(i.incoming.window===0)return;i.incoming.window-=r.length;if(!i.stderr.push(r)){i._waitChanDrain=true;return}if(i.incoming.window<=re)te(i)},CHANNEL_WINDOW_ADJUST:(e,t,r)=>{const n=this._chanMgr.get(t);if(typeof n!=="object"||n===null)return;n.outgoing.window+=r;if(n._waitWindow){n._waitWindow=false;if(n._chunk){n._write(n._chunk,null,n._chunkcb)}else if(n._chunkcb){n._chunkcb()}else if(n._chunkErr){n.stderr._write(n._chunkErr,null,n._chunkcbErr)}else if(n._chunkcbErr){n._chunkcbErr()}}},CHANNEL_SUCCESS:(e,t)=>{const r=this._chanMgr.get(t);if(typeof r!=="object"||r===null)return;this._resetKA();if(r._callbacks.length)r._callbacks.shift()(false)},CHANNEL_FAILURE:(e,t)=>{const r=this._chanMgr.get(t);if(typeof r!=="object"||r===null)return;this._resetKA();if(r._callbacks.length)r._callbacks.shift()(true)},CHANNEL_REQUEST:(e,t,r,n,i)=>{const s=this._chanMgr.get(t);if(typeof s!=="object"||s===null)return;const o=s._exit;if(o.code!==undefined)return;switch(r){case"exit-status":s.emit("exit",o.code=i);return;case"exit-signal":s.emit("exit",o.code=null,o.signal=`SIG${i.signal}`,o.dump=i.coreDumped,o.desc=i.errorMessage);return}if(n)e.channelFailure(s.outgoing.id)},CHANNEL_EOF:(e,t)=>{const r=this._chanMgr.get(t);if(typeof r!=="object"||r===null)return;if(r.incoming.state!=="open")return;r.incoming.state="eof";if(r.readable)r.push(null);if(r.stderr.readable)r.stderr.push(null)},CHANNEL_CLOSE:(e,t)=>{ae(this,t,this._chanMgr.get(t))}}});U.pause();const ce=this.config.keepaliveInterval;const ue=this.config.keepaliveCountMax;let fe=0;let de;const sendKA=()=>{if(++fe>ue){clearInterval(de);if(U.readable){const e=new Error("Keepalive timeout");e.level="client-timeout";this.emit("error",e);U.destroy()}return}if(se(U)){u.push(resetKA);le.ping()}else{clearInterval(de)}};function resetKA(){if(ce>0){fe=0;clearInterval(de);if(se(U))de=setInterval(sendKA,ce)}}this._resetKA=resetKA;const he=(()=>{let e=false;return()=>{if(e)return;e=true;if(ge&&!Q){const e=W("Connection lost before handshake","protocol",true);this.emit("error",e)}}})();const pe=(()=>{let e=false;return()=>{if(e)return;e=true;ge=true;s&&s("Socket connected");this.emit("connect");B.then((()=>{le.start();U.on("data",(e=>{try{le.parse(e,0,e.length)}catch(e){this.emit("error",e);try{if(se(U))U.end()}catch{}}}));if(U.stderr&&typeof U.stderr.resume==="function")U.stderr.resume();U.resume()})).catch((e=>{this.emit("error",e);try{if(se(U))U.end()}catch{}}))}})();let ge=false;U.on("connect",pe).on("timeout",(()=>{this.emit("timeout")})).on("error",(e=>{s&&s(`Socket error: ${e.message}`);clearTimeout(this._readyTimeout);e.level="client-socket";this.emit("error",e)})).on("end",(()=>{s&&s("Socket ended");he();le.cleanup();clearTimeout(this._readyTimeout);clearInterval(de);this.emit("end")})).on("close",(()=>{s&&s("Socket closed");he();le.cleanup();clearTimeout(this._readyTimeout);clearInterval(de);this.emit("close");const e=u;u=this._callbacks=[];const t=new Error("No response from server");for(let r=0;r<e.length;++r)e[r](t);this._chanMgr.cleanup(t)}));let me;let ye=null;let _e=null;const ve=["none"];if(this.config.password!==undefined)ve.push("password");if(g!==undefined)ve.push("publickey");if(this._agent!==undefined)ve.push("agent");if(this.config.tryKeyboard)ve.push("keyboard-interactive");if(g!==undefined&&this.config.localHostname!==undefined&&this.config.localUsername!==undefined){ve.push("hostbased")}if(Array.isArray(i))i=makeSimpleAuthHandler(i);else if(typeof i!=="function")i=makeSimpleAuthHandler(ve);let Ee=false;const doNextAuth=e=>{if(Ee)return;Ee=true;if(e===false){const e=new Error("All configured authentication methods failed");e.level="client-authentication";this.emit("error",e);this.end();return}if(typeof e==="string"){const t=e;if(ve.indexOf(t)===-1)return skipAuth(`Authentication method not allowed: ${t}`);const r=this.config.username;switch(t){case"password":e={type:t,username:r,password:this.config.password};break;case"publickey":e={type:t,username:r,key:g};break;case"hostbased":e={type:t,username:r,key:g,localHostname:this.config.localHostname,localUsername:this.config.localUsername};break;case"agent":e={type:t,username:r,agentCtx:new G(this._agent)};break;case"keyboard-interactive":e={type:t,username:r,prompt:(...e)=>this.emit("keyboard-interactive",...e)};break;case"none":e={type:t,username:r};break;default:return skipAuth(`Skipping unsupported authentication method: ${e}`)}}else if(typeof e!=="object"||e===null){return skipAuth(`Skipping invalid authentication attempt: ${e}`)}else{const t=e.username;if(typeof t!=="string"){return skipAuth(`Skipping invalid authentication attempt: ${e}`)}const r=e.type;switch(r){case"password":{const{password:n}=e;if(typeof n!=="string"&&!Buffer.isBuffer(n))return skipAuth("Skipping invalid password auth attempt");e={type:r,username:t,password:n};break}case"publickey":{const n=L(e.key,e.passphrase);if(n instanceof Error)return skipAuth("Skipping invalid key auth attempt");if(!n.isPrivateKey())return skipAuth("Skipping non-private key");e={type:r,username:t,key:n};break}case"hostbased":{const{localHostname:n,localUsername:i}=e;const s=L(e.key,e.passphrase);if(s instanceof Error||typeof n!=="string"||typeof i!=="string"){return skipAuth("Skipping invalid hostbased auth attempt")}if(!s.isPrivateKey())return skipAuth("Skipping non-private key");e={type:r,username:t,key:s,localHostname:n,localUsername:i};break}case"agent":{let n=e.agent;if(typeof n==="string"&&n.length){n=$(n)}else if(!Y(n)){return skipAuth(`Skipping invalid agent: ${e.agent}`)}e={type:r,username:t,agentCtx:new G(n)};break}case"keyboard-interactive":{const{prompt:n}=e;if(typeof n!=="function"){return skipAuth("Skipping invalid keyboard-interactive auth attempt")}e={type:r,username:t,prompt:n};break}case"none":e={type:r,username:t};break;default:return skipAuth(`Skipping unsupported authentication method: ${e}`)}}me=e;try{const e=me.username;switch(me.type){case"password":le.authPassword(e,me.password);break;case"publickey":{let t;me.keyAlgos=getKeyAlgos(this,me.key,z);if(me.keyAlgos){if(me.keyAlgos.length){t=me.keyAlgos[0][0]}else{return skipAuth("Skipping key authentication (no mutual hash algorithm)")}}le.authPK(e,me.key,t);break}case"hostbased":{let t;let r;me.keyAlgos=getKeyAlgos(this,me.key,z);if(me.keyAlgos){if(me.keyAlgos.length){[t,r]=me.keyAlgos[0]}else{return skipAuth("Skipping hostbased authentication (no mutual hash algorithm)")}}le.authHostbased(e,me.key,me.localHostname,me.localUsername,t,((e,t)=>{const n=me.key.sign(e,r);if(n instanceof Error){n.message=`Error while signing with key: ${n.message}`;n.level="client-authentication";this.emit("error",n);return tryNextAuth()}t(n)}));break}case"agent":me.agentCtx.init((e=>{if(e){e.level="agent";this.emit("error",e);return tryNextAuth()}tryNextAgentKey()}));break;case"keyboard-interactive":le.authKeyboard(e);break;case"none":le.authNone(e);break}}finally{Ee=false}};function skipAuth(e){s&&s(e);process.nextTick(tryNextAuth)}function tryNextAuth(){Ee=false;const e=i(_e,ye,doNextAuth);if(Ee||e===undefined)return;doNextAuth(e)}const tryNextAgentKey=()=>{if(me.type==="agent"){const e=me.agentCtx.nextKey();if(e===false){s&&s("Agent: No more keys left to try");s&&s("Client: agent auth failed");tryNextAuth()}else{const t=me.agentCtx.pos();let r;me.keyAlgos=getKeyAlgos(this,e,z);if(me.keyAlgos){if(me.keyAlgos.length){r=me.keyAlgos[0][0]}else{s&&s(`Agent: Skipping key #${t+1} (no mutual hash algorithm)`);tryNextAgentKey();return}}s&&s(`Agent: Trying key #${t+1}`);le.authPK(me.username,e,r)}}};const startTimeout=()=>{if(this.config.readyTimeout>0){this._readyTimeout=setTimeout((()=>{const e=new Error("Timed out while waiting for handshake");e.level="client-timeout";this.emit("error",e);U.destroy()}),this.config.readyTimeout)}};if(!e.sock){let t=this.config.host;const r=this.config.forceIPv4;const n=this.config.forceIPv6;s&&s(`Client: Trying ${t} on port ${this.config.port} ...`);const doConnect=()=>{startTimeout();U.connect({host:t,port:this.config.port,localAddress:this.config.localAddress,localPort:this.config.localPort});U.setMaxListeners(0);U.setTimeout(typeof e.timeout==="number"?e.timeout:0)};if(!r&&!n||r&&n){doConnect()}else{l(t,r?4:6,((e,n,i)=>{if(e){const n=r?"IPv4":"IPv6";const i=new Error(`Error while looking up ${n} address for '${t}': ${e}`);clearTimeout(this._readyTimeout);i.level="client-dns";this.emit("error",i);this.emit("close");return}t=n;doConnect()}))}}else{startTimeout();if(typeof U.connecting==="boolean"){if(!U.connecting){pe()}}else{pe()}}return this}end(){if(this._sock&&se(this._sock)){this._protocol.disconnect(w.BY_APPLICATION);this._sock.end()}return this}destroy(){this._sock&&se(this._sock)&&this._sock.destroy();return this}exec(e,t,r){if(!this._sock||!se(this._sock))throw new Error("Not connected");if(typeof t==="function"){r=t;t={}}const n={allowHalfOpen:t.allowHalfOpen!==false};openChannel(this,"session",n,((n,i)=>{if(n){r(n);return}const s=[];function reqCb(e){if(e){i.close();r(e);return}if(s.length)s.shift()()}if(this.config.allowAgentFwd===true||t&&t.agentForward===true&&this._agent!==undefined){s.push((()=>reqAgentFwd(i,reqCb)))}if(typeof t==="object"&&t!==null){if(typeof t.env==="object"&&t.env!==null)reqEnv(i,t.env);if(typeof t.pty==="object"&&t.pty!==null||t.pty===true){s.push((()=>reqPty(i,t.pty,reqCb)))}if(typeof t.x11==="object"&&t.x11!==null||t.x11==="number"||t.x11===true){s.push((()=>reqX11(i,t.x11,reqCb)))}}s.push((()=>reqExec(i,e,t,r)));s.shift()()}));return this}shell(e,t,r){if(!this._sock||!se(this._sock))throw new Error("Not connected");if(typeof e==="function"){r=e;e=t=undefined}else if(typeof t==="function"){r=t;t=undefined}if(e&&(e.x11!==undefined||e.env!==undefined)){t=e;e=undefined}openChannel(this,"session",((n,i)=>{if(n){r(n);return}const s=[];function reqCb(e){if(e){i.close();r(e);return}if(s.length)s.shift()()}if(this.config.allowAgentFwd===true||t&&t.agentForward===true&&this._agent!==undefined){s.push((()=>reqAgentFwd(i,reqCb)))}if(e!==false)s.push((()=>reqPty(i,e,reqCb)));if(typeof t==="object"&&t!==null){if(typeof t.env==="object"&&t.env!==null)reqEnv(i,t.env);if(typeof t.x11==="object"&&t.x11!==null||t.x11==="number"||t.x11===true){s.push((()=>reqX11(i,t.x11,reqCb)))}}s.push((()=>reqShell(i,r)));s.shift()()}));return this}subsys(e,t){if(!this._sock||!se(this._sock))throw new Error("Not connected");openChannel(this,"session",((r,n)=>{if(r){t(r);return}reqSubsystem(n,e,((e,r)=>{if(e){t(e);return}t(undefined,r)}))}));return this}forwardIn(e,t,r){if(!this._sock||!se(this._sock))throw new Error("Not connected");const n=typeof r==="function";if(n){this._callbacks.push(((n,i)=>{if(n){r(n!==true?n:new Error(`Unable to bind to ${e}:${t}`));return}let s=t;if(t===0&&i&&i.length>=4){s=Q(i,0);if(!(this._protocol._compatFlags&g.DYN_RPORT_BUG))t=s}this._forwarding[`${e}:${t}`]=s;r(undefined,s)}))}this._protocol.tcpipForward(e,t,n);return this}unforwardIn(e,t,r){if(!this._sock||!se(this._sock))throw new Error("Not connected");const n=typeof r==="function";if(n){this._callbacks.push((n=>{if(n){r(n!==true?n:new Error(`Unable to unbind from ${e}:${t}`));return}delete this._forwarding[`${e}:${t}`];r()}))}this._protocol.cancelTcpipForward(e,t,n);return this}forwardOut(e,t,r,n,i){if(!this._sock||!se(this._sock))throw new Error("Not connected");const s={srcIP:e,srcPort:t,dstIP:r,dstPort:n};if(typeof i!=="function")i=noop;openChannel(this,"direct-tcpip",s,i);return this}openssh_noMoreSessions(e){if(!this._sock||!se(this._sock))throw new Error("Not connected");const t=typeof e==="function";if(!this.config.strictVendor||this.config.strictVendor&&ue.test(this._remoteVer)){if(t){this._callbacks.push((t=>{if(t){e(t!==true?t:new Error("Unable to disable future sessions"));return}e()}))}this._protocol.openssh_noMoreSessions(t);return this}if(!t)return this;process.nextTick(e,new Error("strictVendor enabled and server is not OpenSSH or compatible version"));return this}openssh_forwardInStreamLocal(e,t){if(!this._sock||!se(this._sock))throw new Error("Not connected");const r=typeof t==="function";if(!this.config.strictVendor||this.config.strictVendor&&ue.test(this._remoteVer)){if(r){this._callbacks.push((r=>{if(r){t(r!==true?r:new Error(`Unable to bind to ${e}`));return}this._forwardingUnix[e]=true;t()}))}this._protocol.openssh_streamLocalForward(e,r);return this}if(!r)return this;process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version"));return this}openssh_unforwardInStreamLocal(e,t){if(!this._sock||!se(this._sock))throw new Error("Not connected");const r=typeof t==="function";if(!this.config.strictVendor||this.config.strictVendor&&ue.test(this._remoteVer)){if(r){this._callbacks.push((r=>{if(r){t(r!==true?r:new Error(`Unable to unbind from ${e}`));return}delete this._forwardingUnix[e];t()}))}this._protocol.openssh_cancelStreamLocalForward(e,r);return this}if(!r)return this;process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version"));return this}openssh_forwardOutStreamLocal(e,t){if(!this._sock||!se(this._sock))throw new Error("Not connected");if(typeof t!=="function")t=noop;if(!this.config.strictVendor||this.config.strictVendor&&ue.test(this._remoteVer)){openChannel(this,"direct-streamlocal@openssh.com",{socketPath:e},t);return this}process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version"));return this}sftp(e){if(!this._sock||!se(this._sock))throw new Error("Not connected");openChannel(this,"sftp",((t,r)=>{if(t){e(t);return}reqSubsystem(r,"sftp",((t,n)=>{if(t){e(t);return}function removeListeners(){r.removeListener("ready",onReady);r.removeListener("error",onError);r.removeListener("exit",onExit);r.removeListener("close",onExit)}function onReady(){removeListeners();e(undefined,r)}function onError(t){removeListeners();e(t)}function onExit(t,r){removeListeners();let n;if(typeof t==="number")n=`Received exit code ${t} while establishing SFTP session`;else if(r!==undefined)n=`Received signal ${r} while establishing SFTP session`;else n="Received unexpected SFTP session termination";const i=new Error(n);i.code=t;i.signal=r;e(i)}r.on("ready",onReady).on("error",onError).on("exit",onExit).on("close",onExit);r._init()}))}));return this}setNoDelay(e){if(this._sock&&typeof this._sock.setNoDelay==="function")this._sock.setNoDelay(e);return this}}function openChannel(e,t,r,n){const i=J;const s=ee;if(typeof r==="function"){n=r;r={}}const wrapper=(e,t)=>{n(e,t)};wrapper.type=t;const o=e._chanMgr.add(wrapper);if(o===-1){n(new Error("No free channels available"));return}switch(t){case"session":case"sftp":e._protocol.session(o,i,s);break;case"direct-tcpip":e._protocol.directTcpip(o,i,s,r);break;case"direct-streamlocal@openssh.com":e._protocol.openssh_directStreamLocal(o,i,s,r);break;default:throw new Error(`Unsupported channel type: ${t}`)}}function reqX11(e,t,r){const n={single:false,protocol:"MIT-MAGIC-COOKIE-1",cookie:undefined,screen:0};if(typeof t==="function"){r=t}else if(typeof t==="object"&&t!==null){if(typeof t.single==="boolean")n.single=t.single;if(typeof t.screen==="number")n.screen=t.screen;if(typeof t.protocol==="string")n.protocol=t.protocol;if(typeof t.cookie==="string")n.cookie=t.cookie;else if(Buffer.isBuffer(t.cookie))n.cookie=t.cookie.hexSlice(0,t.cookie.length)}if(n.cookie===undefined)n.cookie=fe();const i=typeof r==="function";if(e.outgoing.state!=="open"){if(i)r(new Error("Channel is not open"));return}if(i){e._callbacks.push((t=>{if(t){r(t!==true?t:new Error("Unable to request X11"));return}e._hasX11=true;++e._client._acceptX11;e.once("close",(()=>{if(e._client._acceptX11)--e._client._acceptX11}));r()}))}e._client._protocol.x11Forward(e.outgoing.id,n,i)}function reqPty(e,t,r){let n=24;let i=80;let s=640;let o=480;let l="vt100";let u=null;if(typeof t==="function"){r=t}else if(typeof t==="object"&&t!==null){if(typeof t.rows==="number")n=t.rows;if(typeof t.cols==="number")i=t.cols;if(typeof t.width==="number")s=t.width;if(typeof t.height==="number")o=t.height;if(typeof t.term==="string")l=t.term;if(typeof t.modes==="object")u=t.modes}const p=typeof r==="function";if(e.outgoing.state!=="open"){if(p)r(new Error("Channel is not open"));return}if(p){e._callbacks.push((e=>{if(e){r(e!==true?e:new Error("Unable to request a pseudo-terminal"));return}r()}))}e._client._protocol.pty(e.outgoing.id,n,i,o,s,l,u,p)}function reqAgentFwd(e,t){const r=typeof t==="function";if(e.outgoing.state!=="open"){r&&t(new Error("Channel is not open"));return}if(e._client._agentFwdEnabled){r&&t(false);return}e._client._agentFwdEnabled=true;e._callbacks.push((n=>{if(n){e._client._agentFwdEnabled=false;if(r){t(n!==true?n:new Error("Unable to request agent forwarding"))}return}if(r)t()}));e._client._protocol.openssh_agentForward(e.outgoing.id,true)}function reqShell(e,t){if(e.outgoing.state!=="open"){t(new Error("Channel is not open"));return}e._callbacks.push((r=>{if(r){t(r!==true?r:new Error("Unable to open shell"));return}e.subtype="shell";t(undefined,e)}));e._client._protocol.shell(e.outgoing.id,true)}function reqExec(e,t,r,n){if(e.outgoing.state!=="open"){n(new Error("Channel is not open"));return}e._callbacks.push((t=>{if(t){n(t!==true?t:new Error("Unable to exec"));return}e.subtype="exec";e.allowHalfOpen=r.allowHalfOpen!==false;n(undefined,e)}));e._client._protocol.exec(e.outgoing.id,t,true)}function reqEnv(e,t){if(e.outgoing.state!=="open")return;const r=Object.keys(t||{});for(let n=0;n<r.length;++n){const i=r[n];const s=t[i];e._client._protocol.env(e.outgoing.id,i,s,false)}}function reqSubsystem(e,t,r){if(e.outgoing.state!=="open"){r(new Error("Channel is not open"));return}e._callbacks.push((n=>{if(n){r(n!==true?n:new Error(`Unable to start subsystem: ${t}`));return}e.subtype="subsystem";r(undefined,e)}));e._client._protocol.subsystem(e.outgoing.id,t,true)}function onCHANNEL_OPEN(e,t){let r=-1;let n;const accept=()=>{const n={type:t.type,incoming:{id:r,window:J,packetSize:ee,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}};const i=new V(e,n);e._chanMgr.update(r,i);e._protocol.channelOpenConfirm(t.sender,r,J,ee);return i};const reject=()=>{if(n===undefined){if(r===-1)n=y.RESOURCE_SHORTAGE;else n=y.CONNECT_FAILED}if(r!==-1)e._chanMgr.remove(r);e._protocol.channelOpenFail(t.sender,n,"")};const reserveChannel=()=>{r=e._chanMgr.add();if(r===-1){n=y.RESOURCE_SHORTAGE;if(e.config.debug){e.config.debug("Client: Automatic rejection of incoming channel open: "+"no channels available")}}return r!==-1};const i=t.data;switch(t.type){case"forwarded-tcpip":{const t=e._forwarding[`${i.destIP}:${i.destPort}`];if(t!==undefined&&reserveChannel()){if(i.destPort===0)i.destPort=t;e.emit("tcp connection",i,accept,reject);return}break}case"forwarded-streamlocal@openssh.com":if(e._forwardingUnix[i.socketPath]!==undefined&&reserveChannel()){e.emit("unix connection",i,accept,reject);return}break;case"auth-agent@openssh.com":if(e._agentFwdEnabled&&typeof e._agent.getStream==="function"&&reserveChannel()){e._agent.getStream(((e,t)=>{if(e)return reject();const r=accept();r.pipe(t).pipe(r)}));return}break;case"x11":if(e._acceptX11!==0&&reserveChannel()){e.emit("x11",i,accept,reject);return}break;default:n=y.UNKNOWN_CHANNEL_TYPE;if(e.config.debug){e.config.debug("Client: Automatic rejection of unsupported incoming channel open "+`type: ${t.type}`)}}if(n===undefined){n=y.ADMINISTRATIVELY_PROHIBITED;if(e.config.debug){e.config.debug("Client: Automatic rejection of unexpected incoming channel open for: "+t.type)}}reject()}const fe=(()=>{const e=Buffer.allocUnsafe(16);return()=>{s(e,0,16);return e.hexSlice(0,16)}})();function makeSimpleAuthHandler(e){if(!Array.isArray(e))throw new Error("authList must be an array");let t=0;return(r,n,i)=>{if(t===e.length)return false;return e[t++]}}function hostKeysProve(e,t,r){if(!e._sock||!se(e._sock))return;if(typeof r!=="function")r=noop;if(!Array.isArray(t))throw new TypeError("Invalid keys argument type");const n=[];for(const e of t){const t=L(e);if(t instanceof Error)throw t;n.push(t)}if(!e.config.strictVendor||e.config.strictVendor&&ue.test(e._remoteVer)){e._callbacks.push(((t,i)=>{if(t){r(t!==true?t:new Error("Server failed to prove supplied keys"));return}const s=[];let o=0;le.init(i,0);while(le.avail()){if(o===n.length)break;const t=n[o++];const r=t.getPublicSSH();const i=le.readString();ce.init(i,0);const l=ce.readString(true);let u=ce.readString();let p;if(l!==t.type){if(t.type==="ssh-rsa"){switch(l){case"rsa-sha2-256":p="sha256";break;case"rsa-sha2-512":p="sha512";break;default:continue}}else{continue}}const g=e._protocol._kex.sessionID;const m=Buffer.allocUnsafe(4+29+4+g.length+4+r.length);let y=0;z(m,29,y);m.utf8Write("hostkeys-prove-00@openssh.com",y+=4,29);z(m,g.length,y+=29);U(g,m,0,g.length,y+=4);z(m,r.length,y+=g.length);U(r,m,0,r.length,y+=4);if(!(u=q(u,l)))continue;if(t.verify(m,u,p)===true)s.push(t)}ce.clear();le.clear();r(null,s)}));e._protocol.openssh_hostKeysProve(n);return}process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version"))}function getKeyAlgos(e,t,r){switch(t.type){case"ssh-rsa":if(e._protocol._compatFlags&g.IMPLY_RSA_SHA2_SIGALGS){if(!Array.isArray(r))r=["rsa-sha2-256","rsa-sha2-512"];else r=["rsa-sha2-256","rsa-sha2-512",...r]}if(Array.isArray(r)){if(r.indexOf("rsa-sha2-256")!==-1)return[["rsa-sha2-256","sha256"]];if(r.indexOf("rsa-sha2-512")!==-1)return[["rsa-sha2-512","sha512"]];if(r.indexOf("ssh-rsa")===-1)return[]}return[["ssh-rsa","sha1"]]}}e.exports=Client},137:(e,t,r)=>{"use strict";const{Agent:n}=r(8611);const{Agent:i}=r(5692);const{connect:s}=r(4756);let o;for(const e of[n,i]){class SSHAgent extends e{constructor(e,t){super(t);this._connectCfg=e;this._defaultSrcIP=t&&t.srcIP||"localhost"}createConnection(t,n){const i=t&&t.localAddress||this._defaultSrcIP;const s=t&&t.localPort||0;const l=t.host;const u=t.port;if(o===undefined)o=r(6297);const p=new o;let g=false;p.on("ready",(()=>{p.forwardOut(i,s,l,u,((r,i)=>{g=true;if(r){p.end();return n(r)}i.once("close",(()=>p.end()));n(null,decorateStream(i,e,t))}))})).on("error",n).on("close",(()=>{if(!g)n(new Error("Unexpected connection close"))})).connect(this._connectCfg)}}t[e===n?"SSHTTPAgent":"SSHTTPSAgent"]=SSHAgent}function noop(){}function decorateStream(e,t,r){if(t===n){e.setKeepAlive=noop;e.setNoDelay=noop;e.setTimeout=noop;e.ref=noop;e.unref=noop;e.destroySoon=e.destroy;return e}r.socket=e;const i=s(r);const o=(()=>{let t=false;return()=>{if(t)return;t=true;if(e.isPaused())e.resume()}})();i.on("end",o).on("close",o);return i}},5472:(e,t,r)=>{"use strict";const{AgentProtocol:n,BaseAgent:i,createAgent:s,CygwinAgent:o,OpenSSHAgent:l,PageantAgent:u}=r(3849);const{SSHTTPAgent:p,SSHTTPSAgent:g}=r(137);const{parseKey:m}=r(1789);const{flagsToString:y,OPEN_MODE:_,STATUS_CODE:v,stringToFlags:E}=r(4996);e.exports={AgentProtocol:n,BaseAgent:i,createAgent:s,Client:r(6297),CygwinAgent:o,HTTPAgent:p,HTTPSAgent:g,OpenSSHAgent:l,PageantAgent:u,Server:r(2605),utils:{parseKey:m,...r(3489),sftp:{flagsToString:y,OPEN_MODE:_,STATUS_CODE:v,stringToFlags:E}}}},3489:(e,t,r)=>{"use strict";const{createCipheriv:n,generateKeyPair:i,generateKeyPairSync:s,getCurves:o,randomBytes:l}=r(6982);const{Ber:u}=r(9837);const p=r(686).pbkdf;const{CIPHER_INFO:g}=r(2888);const m=16;const y=16;const _=o();const v=new Map(Object.entries(g));function makeArgs(e,t){if(typeof e!=="string")throw new TypeError("Key type must be a string");const r={type:"spki",format:"der"};const n={type:"pkcs8",format:"der"};switch(e.toLowerCase()){case"rsa":{if(typeof t!=="object"||t===null)throw new TypeError("Missing options object for RSA key");const e=t.bits;if(!Number.isInteger(e))throw new TypeError("RSA bits must be an integer");if(e<=0||e>16384)throw new RangeError("RSA bits must be non-zero and <= 16384");return["rsa",{modulusLength:e,publicKeyEncoding:r,privateKeyEncoding:n}]}case"ecdsa":{if(typeof t!=="object"||t===null)throw new TypeError("Missing options object for ECDSA key");if(!Number.isInteger(t.bits))throw new TypeError("ECDSA bits must be an integer");let e;switch(t.bits){case 256:e="prime256v1";break;case 384:e="secp384r1";break;case 521:e="secp521r1";break;default:throw new Error("ECDSA bits must be 256, 384, or 521")}if(!_.includes(e))throw new Error("Unsupported ECDSA bits value");return["ec",{namedCurve:e,publicKeyEncoding:r,privateKeyEncoding:n}]}case"ed25519":return["ed25519",{publicKeyEncoding:r,privateKeyEncoding:n}];default:throw new Error(`Unsupported key type: ${e}`)}}function parseDERs(e,t,r){switch(e){case"rsa":{let e=new u.Reader(r);e.readSequence();if(e.readInt()!==0)throw new Error("Unsupported version in RSA private key");e.readSequence();if(e.readOID()!=="1.2.840.113549.1.1.1")throw new Error("Bad RSA private OID");if(e.readByte()!==u.Null)throw new Error("Malformed RSA private key (expected null)");if(e.readByte()!==0){throw new Error("Malformed RSA private key (expected zero-length null)")}e=new u.Reader(e.readString(u.OctetString,true));e.readSequence();if(e.readInt()!==0)throw new Error("Unsupported version in RSA private key");const t=e.readString(u.Integer,true);const n=e.readString(u.Integer,true);const i=e.readString(u.Integer,true);const s=e.readString(u.Integer,true);const o=e.readString(u.Integer,true);e.readString(u.Integer,true);e.readString(u.Integer,true);const l=e.readString(u.Integer,true);const p=Buffer.from("ssh-rsa");const g=Buffer.allocUnsafe(4+p.length+4+t.length+4+n.length+4+i.length+4+l.length+4+s.length+4+o.length);let m=0;g.writeUInt32BE(p.length,m+=0);g.set(p,m+=4);g.writeUInt32BE(t.length,m+=p.length);g.set(t,m+=4);g.writeUInt32BE(n.length,m+=t.length);g.set(n,m+=4);g.writeUInt32BE(i.length,m+=n.length);g.set(i,m+=4);g.writeUInt32BE(l.length,m+=i.length);g.set(l,m+=4);g.writeUInt32BE(s.length,m+=l.length);g.set(s,m+=4);g.writeUInt32BE(o.length,m+=s.length);g.set(o,m+=4);const y=Buffer.allocUnsafe(4+p.length+4+n.length+4+t.length);m=0;y.writeUInt32BE(p.length,m+=0);y.set(p,m+=4);y.writeUInt32BE(n.length,m+=p.length);y.set(n,m+=4);y.writeUInt32BE(t.length,m+=n.length);y.set(t,m+=4);return{sshName:p.toString(),priv:g,pub:y}}case"ec":{let e=new u.Reader(t);e.readSequence();e.readSequence();if(e.readOID()!=="1.2.840.10045.2.1")throw new Error("Bad ECDSA public OID");e.readOID();let n=e.readString(u.BitString,true);{let e=0;for(;e<n.length&&n[e]===0;++e);if(e>0)n=n.slice(e)}e=new u.Reader(r);e.readSequence();if(e.readInt()!==0)throw new Error("Unsupported version in ECDSA private key");e.readSequence();if(e.readOID()!=="1.2.840.10045.2.1")throw new Error("Bad ECDSA private OID");const i=e.readOID();let s;switch(i){case"1.2.840.10045.3.1.7":s="nistp256";break;case"1.3.132.0.34":s="nistp384";break;case"1.3.132.0.35":s="nistp521";break;default:throw new Error("Unsupported curve in ECDSA private key")}e=new u.Reader(e.readString(u.OctetString,true));e.readSequence();if(e.readInt()!==1)throw new Error("Unsupported version in ECDSA private key");const o=Buffer.concat([Buffer.from([0]),e.readString(u.OctetString,true)]);const l=Buffer.from(`ecdsa-sha2-${s}`);s=Buffer.from(s);const p=Buffer.allocUnsafe(4+l.length+4+s.length+4+n.length+4+o.length);let g=0;p.writeUInt32BE(l.length,g+=0);p.set(l,g+=4);p.writeUInt32BE(s.length,g+=l.length);p.set(s,g+=4);p.writeUInt32BE(n.length,g+=s.length);p.set(n,g+=4);p.writeUInt32BE(o.length,g+=n.length);p.set(o,g+=4);const m=Buffer.allocUnsafe(4+l.length+4+s.length+4+n.length);g=0;m.writeUInt32BE(l.length,g+=0);m.set(l,g+=4);m.writeUInt32BE(s.length,g+=l.length);m.set(s,g+=4);m.writeUInt32BE(n.length,g+=s.length);m.set(n,g+=4);return{sshName:l.toString(),priv:p,pub:m}}case"ed25519":{let e=new u.Reader(t);e.readSequence();e.readSequence();if(e.readOID()!=="1.3.101.112")throw new Error("Bad ED25519 public OID");let n=e.readString(u.BitString,true);{let e=0;for(;e<n.length&&n[e]===0;++e);if(e>0)n=n.slice(e)}e=new u.Reader(r);e.readSequence();if(e.readInt()!==0)throw new Error("Unsupported version in ED25519 private key");e.readSequence();if(e.readOID()!=="1.3.101.112")throw new Error("Bad ED25519 private OID");e=new u.Reader(e.readString(u.OctetString,true));const i=e.readString(u.OctetString,true);const s=Buffer.from("ssh-ed25519");const o=Buffer.allocUnsafe(4+s.length+4+n.length+4+(i.length+n.length));let l=0;o.writeUInt32BE(s.length,l+=0);o.set(s,l+=4);o.writeUInt32BE(n.length,l+=s.length);o.set(n,l+=4);o.writeUInt32BE(i.length+n.length,l+=n.length);o.set(i,l+=4);o.set(n,l+=i.length);const p=Buffer.allocUnsafe(4+s.length+4+n.length);l=0;p.writeUInt32BE(s.length,l+=0);p.set(s,l+=4);p.writeUInt32BE(n.length,l+=s.length);p.set(n,l+=4);return{sshName:s.toString(),priv:o,pub:p}}}}function convertKeys(e,t,r,i){let s="new";let o;let u="";if(typeof i==="object"&&i!==null){if(typeof i.comment==="string"&&i.comment)u=i.comment;if(typeof i.format==="string"&&i.format)s=i.format;if(i.passphrase){let e;if(typeof i.passphrase==="string")e=Buffer.from(i.passphrase);else if(Buffer.isBuffer(i.passphrase))e=i.passphrase;else throw new Error("Invalid passphrase");if(i.cipher===undefined)throw new Error("Missing cipher name");const t=v.get(i.cipher);if(t===undefined)throw new Error("Invalid cipher name");if(s==="new"){let r=y;if(i.rounds!==undefined){if(!Number.isInteger(i.rounds))throw new TypeError("rounds must be an integer");if(i.rounds>0)r=i.rounds}const n=Buffer.allocUnsafe(t.keyLen+t.ivLen);const s=l(m);const u=p(e,e.length,s,s.length,n,n.length,r);if(u!==0)return new Error("Failed to generate information to encrypt key");const g=Buffer.allocUnsafe(4+s.length+4);{let e=0;g.writeUInt32BE(s.length,e+=0);g.set(s,e+=4);g.writeUInt32BE(r,e+=s.length)}o={cipher:t,cipherName:i.cipher,kdfName:"bcrypt",kdfOptions:g,key:n.slice(0,t.keyLen),iv:n.slice(t.keyLen)}}}}switch(s){case"new":{let i="-----BEGIN OPENSSH PRIVATE KEY-----\n";let s;const p=Buffer.from(o?o.cipherName:"none");const g=Buffer.from(o?o.kdfName:"none");const m=o?o.kdfOptions:Buffer.alloc(0);const y=o?o.cipher.blockLen:8;const _=parseDERs(e,t,r);const v=l(4);const E=Buffer.from(u);const b=4+4+_.priv.length+4+E.length;let C=[];for(let e=1;(b+C.length)%y;++e)C.push(e&255);C=Buffer.from(C);let w=Buffer.allocUnsafe(b+C.length);let I;{let e=0;w.set(v,e+=0);w.set(v,e+=4);w.set(_.priv,e+=4);w.writeUInt32BE(E.length,e+=_.priv.length);w.set(E,e+=4);w.set(C,e+=E.length)}if(o){const e={authTagLength:o.cipher.authLen};const t=n(o.cipher.sslName,o.key,o.iv,e);t.setAutoPadding(false);w=Buffer.concat([t.update(w),t.final()]);if(o.cipher.authLen>0)I=t.getAuthTag();else I=Buffer.alloc(0);o.key.fill(0);o.iv.fill(0)}else{I=Buffer.alloc(0)}const T=Buffer.from("openssh-key-v1\0");const k=Buffer.allocUnsafe(T.length+4+p.length+4+g.length+4+m.length+4+4+_.pub.length+4+w.length+I.length);{let e=0;k.set(T,e+=0);k.writeUInt32BE(p.length,e+=T.length);k.set(p,e+=4);k.writeUInt32BE(g.length,e+=p.length);k.set(g,e+=4);k.writeUInt32BE(m.length,e+=g.length);k.set(m,e+=4);k.writeUInt32BE(1,e+=m.length);k.writeUInt32BE(_.pub.length,e+=4);k.set(_.pub,e+=4);k.writeUInt32BE(w.length,e+=_.pub.length);k.set(w,e+=4);k.set(I,e+=w.length)}{const e=k.base64Slice(0,k.length);let t=e.replace(/.{64}/g,"$&\n");if(e.length&63)t+="\n";i+=t}{const e=_.pub.base64Slice(0,_.pub.length);s=`${_.sshName} ${e}${u?` ${u}`:""}`}i+="-----END OPENSSH PRIVATE KEY-----\n";return{private:i,public:s}}default:throw new Error("Invalid output key format")}}function noop(){}e.exports={generateKeyPair:(e,t,r)=>{if(typeof t==="function"){r=t;t=undefined}if(typeof r!=="function")r=noop;const n=makeArgs(e,t);i(...n,((e,i,s)=>{if(e)return r(e);let o;try{o=convertKeys(n[0],i,s,t)}catch(e){return r(e)}r(null,o)}))},generateKeyPairSync:(e,t)=>{const r=makeArgs(e,t);const{publicKey:n,privateKey:i}=s(...r);return convertKeys(r[0],n,i,t)}}},7841:(e,t,r)=>{"use strict";const{inspect:n}=r(9023);const{bindingAvailable:i,NullCipher:s,NullDecipher:o}=r(2888);const{COMPAT_CHECKS:l,DISCONNECT_REASON:u,eddsaSupported:p,MESSAGE:g,SIGNALS:m,TERMINAL_MODE:y}=r(4020);const{DEFAULT_KEXINIT_CLIENT:_,DEFAULT_KEXINIT_SERVER:v,KexInit:E,kexinit:b,onKEXPayload:C}=r(4637);const{parseKey:w}=r(1789);const I=r(9244);const{bufferCopy:T,bufferFill:k,bufferSlice:R,convertSignature:O,sendPacket:P,writeUInt32BE:B}=r(2184);const{PacketReader:D,PacketWriter:L,ZlibPacketReader:x,ZlibPacketWriter:U}=r(4592);const j=r(8342).rE;const W=new Map(Object.values(u).map((e=>[e,1])));const Q=Buffer.from(`SSH-2.0-ssh2js${j}`);const q=Buffer.from(`${Q}\r\n`);const z=8192;const G=1024;const $=Buffer.from([g.GLOBAL_REQUEST,0,0,0,21,107,101,101,112,97,108,105,118,101,64,111,112,101,110,115,115,104,46,99,111,109,1]);const Y=Buffer.from([y.TTY_OP_END]);function noop(){}class Protocol{constructor(e){const t=e.onWrite;if(typeof t!=="function")throw new Error("Missing onWrite function");this._onWrite=e=>{t(e)};const r=e.onError;if(typeof r!=="function")throw new Error("Missing onError function");this._onError=e=>{r(e)};const o=e.debug;this._debug=typeof o==="function"?e=>{o(e)}:undefined;const l=e.onHeader;this._onHeader=typeof l==="function"?(...e)=>{l(...e)}:noop;const u=e.onPacket;this._onPacket=typeof u==="function"?()=>{u()}:noop;let p=e.onHandshakeComplete;if(typeof p!=="function")p=noop;let g;this._onHandshakeComplete=(...e)=>{this._debug&&this._debug("Handshake completed");if(g===undefined)g=true;else g=false;const t=this._queue;if(t){this._queue=undefined;this._debug&&this._debug(`Draining outbound queue (${t.length}) ...`);for(let e=0;e<t.length;++e){const r=t[e];let n=this._packetRW.write.finalize(r);if(n===r){const e=this._cipher.allocPacket(r.length);e.set(r,5);n=e}P(this,n)}this._debug&&this._debug("... finished draining outbound queue")}if(g&&this._server&&this._kex.remoteExtInfoEnabled)sendExtInfo(this);p(...e)};this._queue=undefined;const m=e.messageHandlers;if(typeof m==="object"&&m!==null)this._handlers=m;else this._handlers={};this._onPayload=onPayload.bind(this);this._server=!!e.server;this._banner=undefined;let y;if(this._server){if(typeof e.hostKeys!=="object"||e.hostKeys===null)throw new Error("Missing server host key(s)");this._hostKeys=e.hostKeys;if(typeof e.greeting==="string"&&e.greeting.length){y=e.greeting.slice(-2)==="\r\n"?e.greeting:`${e.greeting}\r\n`}if(typeof e.banner==="string"&&e.banner.length){this._banner=e.banner.slice(-2)==="\r\n"?e.banner:`${e.banner}\r\n`}}else{this._hostKeys=undefined}let b=e.offer;if(typeof b!=="object"||b===null){b=this._server?v:_}else if(b.constructor!==E){if(this._server){b.kex=b.kex.concat(["kex-strict-s-v00@openssh.com"])}else{b.kex=b.kex.concat(["ext-info-c","kex-strict-c-v00@openssh.com"])}b=new E(b)}this._kex=undefined;this._strictMode=undefined;this._kexinit=undefined;this._offer=b;this._cipher=new s(0,this._onWrite);this._decipher=undefined;this._skipNextInboundPacket=false;this._packetRW={read:new D,write:new L(this)};this._hostVerifier=!this._server&&typeof e.hostVerifier==="function"?e.hostVerifier:undefined;this._parse=parseHeader;this._buffer=undefined;this._authsQueue=[];this._authenticated=false;this._remoteIdentRaw=undefined;let C;if(typeof e.ident==="string"){this._identRaw=Buffer.from(`SSH-2.0-${e.ident}`);C=Buffer.allocUnsafe(this._identRaw.length+2);C.set(this._identRaw,0);C[C.length-2]=13;C[C.length-1]=10}else if(Buffer.isBuffer(e.ident)){const t=Buffer.allocUnsafe(8+e.ident.length);t.latin1Write("SSH-2.0-",0,8);t.set(e.ident,8);this._identRaw=t;C=Buffer.allocUnsafe(t.length+2);C.set(t,0);C[C.length-2]=13;C[C.length-1]=10}else{this._identRaw=Q;C=q}this._compatFlags=0;if(this._debug){if(i)this._debug("Custom crypto binding available");else this._debug("Custom crypto binding not available")}this._debug&&this._debug(`Local ident: ${n(this._identRaw.toString())}`);this.start=()=>{this.start=undefined;if(y)this._onWrite(y);this._onWrite(C)}}_destruct(e){this._packetRW.read.cleanup();this._packetRW.write.cleanup();this._cipher&&this._cipher.free();this._decipher&&this._decipher.free();if(typeof e!=="string"||e.length===0)e="fatal error";this.parse=()=>{throw new Error(`Instance unusable after ${e}`)};this._onWrite=()=>{throw new Error(`Instance unusable after ${e}`)};this._destruct=undefined}cleanup(){this._destruct&&this._destruct()}parse(e,t,r){while(t<r)t=this._parse(e,t,r)}disconnect(e){const t=1+4+4+4;let r=this._packetRW.write.allocStartKEX;const n=this._packetRW.write.alloc(t,true);const i=r+t;if(!W.has(e))e=u.PROTOCOL_ERROR;n[r]=g.DISCONNECT;B(n,e,++r);n.fill(0,r+=4,i);this._debug&&this._debug(`Outbound: Sending DISCONNECT (${e})`);P(this,this._packetRW.write.finalize(n,true),true)}ping(){const e=this._packetRW.write.allocStart;const t=this._packetRW.write.alloc($.length);t.set($,e);this._debug&&this._debug("Outbound: Sending ping (GLOBAL_REQUEST: keepalive@openssh.com)");P(this,this._packetRW.write.finalize(t))}rekey(){if(this._kexinit===undefined){this._debug&&this._debug("Outbound: Initiated explicit rekey");this._queue=[];b(this)}else{this._debug&&this._debug("Outbound: Ignoring rekey during handshake")}}requestSuccess(e){let t=this._packetRW.write.allocStart;let r;if(Buffer.isBuffer(e)){r=this._packetRW.write.alloc(1+e.length);r[t]=g.REQUEST_SUCCESS;r.set(e,++t)}else{r=this._packetRW.write.alloc(1);r[t]=g.REQUEST_SUCCESS}this._debug&&this._debug("Outbound: Sending REQUEST_SUCCESS");P(this,this._packetRW.write.finalize(r))}requestFailure(){const e=this._packetRW.write.allocStart;const t=this._packetRW.write.alloc(1);t[e]=g.REQUEST_FAILURE;this._debug&&this._debug("Outbound: Sending REQUEST_FAILURE");P(this,this._packetRW.write.finalize(t))}channelSuccess(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(1+4);r[t]=g.CHANNEL_SUCCESS;B(r,e,++t);this._debug&&this._debug(`Outbound: Sending CHANNEL_SUCCESS (r:${e})`);P(this,this._packetRW.write.finalize(r))}channelFailure(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(1+4);r[t]=g.CHANNEL_FAILURE;B(r,e,++t);this._debug&&this._debug(`Outbound: Sending CHANNEL_FAILURE (r:${e})`);P(this,this._packetRW.write.finalize(r))}channelEOF(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(1+4);r[t]=g.CHANNEL_EOF;B(r,e,++t);this._debug&&this._debug(`Outbound: Sending CHANNEL_EOF (r:${e})`);P(this,this._packetRW.write.finalize(r))}channelClose(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(1+4);r[t]=g.CHANNEL_CLOSE;B(r,e,++t);this._debug&&this._debug(`Outbound: Sending CHANNEL_CLOSE (r:${e})`);P(this,this._packetRW.write.finalize(r))}channelWindowAdjust(e,t){let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(1+4+4);n[r]=g.CHANNEL_WINDOW_ADJUST;B(n,e,++r);B(n,t,r+=4);this._debug&&this._debug(`Outbound: Sending CHANNEL_WINDOW_ADJUST (r:${e}, ${t})`);P(this,this._packetRW.write.finalize(n))}channelData(e,t){const r=Buffer.isBuffer(t);const n=r?t.length:Buffer.byteLength(t);let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(1+4+4+n);s[i]=g.CHANNEL_DATA;B(s,e,++i);B(s,n,i+=4);if(r)s.set(t,i+=4);else s.utf8Write(t,i+=4,n);this._debug&&this._debug(`Outbound: Sending CHANNEL_DATA (r:${e}, ${n})`);P(this,this._packetRW.write.finalize(s))}channelExtData(e,t,r){const n=Buffer.isBuffer(t);const i=n?t.length:Buffer.byteLength(t);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(1+4+4+4+i);o[s]=g.CHANNEL_EXTENDED_DATA;B(o,e,++s);B(o,r,s+=4);B(o,i,s+=4);if(n)o.set(t,s+=4);else o.utf8Write(t,s+=4,i);this._debug&&this._debug(`Outbound: Sending CHANNEL_EXTENDED_DATA (r:${e})`);P(this,this._packetRW.write.finalize(o))}channelOpenConfirm(e,t,r,n){let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(1+4+4+4+4);s[i]=g.CHANNEL_OPEN_CONFIRMATION;B(s,e,++i);B(s,t,i+=4);B(s,r,i+=4);B(s,n,i+=4);this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_CONFIRMATION (r:${e}, l:${t})`);P(this,this._packetRW.write.finalize(s))}channelOpenFail(e,t,r){if(typeof r!=="string")r="";const n=Buffer.byteLength(r);let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(1+4+4+4+n+4);s[i]=g.CHANNEL_OPEN_FAILURE;B(s,e,++i);B(s,t,i+=4);B(s,n,i+=4);i+=4;if(n){s.utf8Write(r,i,n);i+=n}B(s,0,i);this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_FAILURE (r:${e})`);P(this,this._packetRW.write.finalize(s))}service(e){if(this._server)throw new Error("Client-only method called in server mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(1+4+t);n[r]=g.SERVICE_REQUEST;B(n,t,++r);n.utf8Write(e,r+=4,t);this._debug&&this._debug(`Outbound: Sending SERVICE_REQUEST (${e})`);P(this,this._packetRW.write.finalize(n))}authPassword(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);const i=Buffer.byteLength(t);const s=r?Buffer.byteLength(r):0;let o=this._packetRW.write.allocStart;const l=this._packetRW.write.alloc(1+4+n+4+14+4+8+1+4+i+(r?4+s:0));l[o]=g.USERAUTH_REQUEST;B(l,n,++o);l.utf8Write(e,o+=4,n);B(l,14,o+=n);l.utf8Write("ssh-connection",o+=4,14);B(l,8,o+=14);l.utf8Write("password",o+=4,8);l[o+=8]=r?1:0;B(l,i,++o);if(Buffer.isBuffer(t))T(t,l,0,i,o+=4);else l.utf8Write(t,o+=4,i);if(r){B(l,s,o+=i);if(Buffer.isBuffer(r))T(r,l,0,s,o+=4);else l.utf8Write(r,o+=4,s);this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (changed password)")}else{this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (password)")}this._authsQueue.push("password");P(this,this._packetRW.write.finalize(l))}authPK(e,t,r,n){if(this._server)throw new Error("Client-only method called in server mode");t=w(t);if(t instanceof Error)throw new Error("Invalid key");const i=t.type;t=t.getPublicSSH();if(typeof r==="function"){n=r;r=undefined}if(!r)r=i;const s=Buffer.byteLength(e);const o=Buffer.byteLength(r);const l=t.length;const u=this._kex.sessionID;const p=u.length;const m=(n?4+p:0)+1+4+s+4+14+4+9+1+4+o+4+l;let y;let _;if(n){y=Buffer.allocUnsafe(m);_=0;B(y,p,_);y.set(u,_+=4);_+=p}else{y=this._packetRW.write.alloc(m);_=this._packetRW.write.allocStart}y[_]=g.USERAUTH_REQUEST;B(y,s,++_);y.utf8Write(e,_+=4,s);B(y,14,_+=s);y.utf8Write("ssh-connection",_+=4,14);B(y,9,_+=14);y.utf8Write("publickey",_+=4,9);y[_+=9]=n?1:0;B(y,o,++_);y.utf8Write(r,_+=4,o);B(y,l,_+=o);y.set(t,_+=4);if(!n){this._authsQueue.push("publickey");this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey -- check)");P(this,this._packetRW.write.finalize(y));return}n(y,(n=>{n=O(n,i);if(n===false)throw new Error("Error while converting handshake signature");const u=n.length;_=this._packetRW.write.allocStart;y=this._packetRW.write.alloc(1+4+s+4+14+4+9+1+4+o+4+l+4+4+o+4+u);y[_]=g.USERAUTH_REQUEST;B(y,s,++_);y.utf8Write(e,_+=4,s);B(y,14,_+=s);y.utf8Write("ssh-connection",_+=4,14);B(y,9,_+=14);y.utf8Write("publickey",_+=4,9);y[_+=9]=1;B(y,o,++_);y.utf8Write(r,_+=4,o);B(y,l,_+=o);y.set(t,_+=4);B(y,4+o+4+u,_+=l);B(y,o,_+=4);y.utf8Write(r,_+=4,o);B(y,u,_+=o);y.set(n,_+=4);this._authsQueue.push("publickey");this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey)");P(this,this._packetRW.write.finalize(y))}))}authHostbased(e,t,r,n,i,s){if(this._server)throw new Error("Client-only method called in server mode");t=w(t);if(t instanceof Error)throw new Error("Invalid key");const o=t.type;t=t.getPublicSSH();if(typeof i==="function"){s=i;i=undefined}if(!i)i=o;const l=Buffer.byteLength(e);const u=Buffer.byteLength(i);const p=t.length;const m=this._kex.sessionID;const y=m.length;const _=Buffer.byteLength(r);const v=Buffer.byteLength(n);const E=Buffer.allocUnsafe(4+y+1+4+l+4+14+4+9+4+u+4+p+4+_+4+v);let b=0;B(E,y,b);E.set(m,b+=4);E[b+=y]=g.USERAUTH_REQUEST;B(E,l,++b);E.utf8Write(e,b+=4,l);B(E,14,b+=l);E.utf8Write("ssh-connection",b+=4,14);B(E,9,b+=14);E.utf8Write("hostbased",b+=4,9);B(E,u,b+=9);E.utf8Write(i,b+=4,u);B(E,p,b+=u);E.set(t,b+=4);B(E,_,b+=p);E.utf8Write(r,b+=4,_);B(E,v,b+=_);E.utf8Write(n,b+=4,v);s(E,(e=>{e=O(e,o);if(!e)throw new Error("Error while converting handshake signature");const t=e.length;const r=E.length-y-4;b=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(r+4+4+u+4+t);T(E,n,4+y,E.length,b);B(n,4+u+4+t,b+=r);B(n,u,b+=4);n.utf8Write(i,b+=4,u);B(n,t,b+=u);n.set(e,b+=4);this._authsQueue.push("hostbased");this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (hostbased)");P(this,this._packetRW.write.finalize(n))}))}authKeyboard(e){if(this._server)throw new Error("Client-only method called in server mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(1+4+t+4+14+4+20+4+4);n[r]=g.USERAUTH_REQUEST;B(n,t,++r);n.utf8Write(e,r+=4,t);B(n,14,r+=t);n.utf8Write("ssh-connection",r+=4,14);B(n,20,r+=14);n.utf8Write("keyboard-interactive",r+=4,20);B(n,0,r+=20);B(n,0,r+=4);this._authsQueue.push("keyboard-interactive");this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (keyboard-interactive)");P(this,this._packetRW.write.finalize(n))}authNone(e){if(this._server)throw new Error("Client-only method called in server mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(1+4+t+4+14+4+4);n[r]=g.USERAUTH_REQUEST;B(n,t,++r);n.utf8Write(e,r+=4,t);B(n,14,r+=t);n.utf8Write("ssh-connection",r+=4,14);B(n,4,r+=14);n.utf8Write("none",r+=4,4);this._authsQueue.push("none");this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (none)");P(this,this._packetRW.write.finalize(n))}authInfoRes(e){if(this._server)throw new Error("Client-only method called in server mode");let t=0;let r;if(e){r=new Array(e.length);for(let n=0;n<e.length;++n){const i=Buffer.byteLength(e[n]);r[n]=i;t+=4+i}}let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(1+4+t);i[n]=g.USERAUTH_INFO_RESPONSE;if(e){B(i,e.length,++n);n+=4;for(let t=0;t<e.length;++t){const s=r[t];B(i,s,n);n+=4;if(s){i.utf8Write(e[t],n,s);n+=s}}}else{B(i,0,++n)}this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_RESPONSE");P(this,this._packetRW.write.finalize(i))}tcpipForward(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(1+4+13+1+4+n+4);s[i]=g.GLOBAL_REQUEST;B(s,13,++i);s.utf8Write("tcpip-forward",i+=4,13);s[i+=13]=r===undefined||r===true?1:0;B(s,n,++i);s.utf8Write(e,i+=4,n);B(s,t,i+=n);this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (tcpip-forward)");P(this,this._packetRW.write.finalize(s))}cancelTcpipForward(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(1+4+20+1+4+n+4);s[i]=g.GLOBAL_REQUEST;B(s,20,++i);s.utf8Write("cancel-tcpip-forward",i+=4,20);s[i+=20]=r===undefined||r===true?1:0;B(s,n,++i);s.utf8Write(e,i+=4,n);B(s,t,i+=n);this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-tcpip-forward)");P(this,this._packetRW.write.finalize(s))}openssh_streamLocalForward(e,t){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(1+4+31+1+4+r);i[n]=g.GLOBAL_REQUEST;B(i,31,++n);i.utf8Write("streamlocal-forward@openssh.com",n+=4,31);i[n+=31]=t===undefined||t===true?1:0;B(i,r,++n);i.utf8Write(e,n+=4,r);this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (streamlocal-forward@openssh.com)");P(this,this._packetRW.write.finalize(i))}openssh_cancelStreamLocalForward(e,t){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(1+4+38+1+4+r);i[n]=g.GLOBAL_REQUEST;B(i,38,++n);i.utf8Write("cancel-streamlocal-forward@openssh.com",n+=4,38);i[n+=38]=t===undefined||t===true?1:0;B(i,r,++n);i.utf8Write(e,n+=4,r);if(this._debug){this._debug("Outbound: Sending GLOBAL_REQUEST "+"(cancel-streamlocal-forward@openssh.com)")}P(this,this._packetRW.write.finalize(i))}directTcpip(e,t,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(n.srcIP);const s=Buffer.byteLength(n.dstIP);let o=this._packetRW.write.allocStart;const l=this._packetRW.write.alloc(1+4+12+4+4+4+4+i+4+4+s+4);l[o]=g.CHANNEL_OPEN;B(l,12,++o);l.utf8Write("direct-tcpip",o+=4,12);B(l,e,o+=12);B(l,t,o+=4);B(l,r,o+=4);B(l,s,o+=4);l.utf8Write(n.dstIP,o+=4,s);B(l,n.dstPort,o+=s);B(l,i,o+=4);l.utf8Write(n.srcIP,o+=4,i);B(l,n.srcPort,o+=i);this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, direct-tcpip)`);P(this,this._packetRW.write.finalize(l))}openssh_directStreamLocal(e,t,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(n.socketPath);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(1+4+30+4+4+4+4+i+4+4);o[s]=g.CHANNEL_OPEN;B(o,30,++s);o.utf8Write("direct-streamlocal@openssh.com",s+=4,30);B(o,e,s+=30);B(o,t,s+=4);B(o,r,s+=4);B(o,i,s+=4);o.utf8Write(n.socketPath,s+=4,i);k(o,0,s+=i,s+8);if(this._debug){this._debug("Outbound: Sending CHANNEL_OPEN "+`(r:${e}, direct-streamlocal@openssh.com)`)}P(this,this._packetRW.write.finalize(o))}openssh_noMoreSessions(e){if(this._server)throw new Error("Client-only method called in server mode");let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(1+4+28+1);r[t]=g.GLOBAL_REQUEST;B(r,28,++t);r.utf8Write("no-more-sessions@openssh.com",t+=4,28);r[t+=28]=e===undefined||e===true?1:0;this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (no-more-sessions@openssh.com)");P(this,this._packetRW.write.finalize(r))}session(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(1+4+7+4+4+4);i[n]=g.CHANNEL_OPEN;B(i,7,++n);i.utf8Write("session",n+=4,7);B(i,e,n+=7);B(i,t,n+=4);B(i,r,n+=4);this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, session)`);P(this,this._packetRW.write.finalize(i))}windowChange(e,t,r,n,i){if(this._server)throw new Error("Client-only method called in server mode");let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(1+4+4+13+1+4+4+4+4);o[s]=g.CHANNEL_REQUEST;B(o,e,++s);B(o,13,s+=4);o.utf8Write("window-change",s+=4,13);o[s+=13]=0;B(o,r,++s);B(o,t,s+=4);B(o,i,s+=4);B(o,n,s+=4);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, window-change)`);P(this,this._packetRW.write.finalize(o))}pty(e,t,r,n,i,s,o,l){if(this._server)throw new Error("Client-only method called in server mode");if(!s||!s.length)s="vt100";if(o&&!Buffer.isBuffer(o)&&!Array.isArray(o)&&typeof o==="object"&&o!==null){o=modesToBytes(o)}if(!o||!o.length)o=Y;const u=s.length;const p=o.length;let m=this._packetRW.write.allocStart;const y=this._packetRW.write.alloc(1+4+4+7+1+4+u+4+4+4+4+4+p);y[m]=g.CHANNEL_REQUEST;B(y,e,++m);B(y,7,m+=4);y.utf8Write("pty-req",m+=4,7);y[m+=7]=l===undefined||l===true?1:0;B(y,u,++m);y.utf8Write(s,m+=4,u);B(y,r,m+=u);B(y,t,m+=4);B(y,i,m+=4);B(y,n,m+=4);B(y,p,m+=4);m+=4;if(Array.isArray(o)){for(let e=0;e<p;++e)y[m++]=o[e]}else if(Buffer.isBuffer(o)){y.set(o,m)}this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, pty-req)`);P(this,this._packetRW.write.finalize(y))}shell(e,t){if(this._server)throw new Error("Client-only method called in server mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(1+4+4+5+1);n[r]=g.CHANNEL_REQUEST;B(n,e,++r);B(n,5,r+=4);n.utf8Write("shell",r+=4,5);n[r+=5]=t===undefined||t===true?1:0;this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, shell)`);P(this,this._packetRW.write.finalize(n))}exec(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.isBuffer(t);const i=n?t.length:Buffer.byteLength(t);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(1+4+4+4+1+4+i);o[s]=g.CHANNEL_REQUEST;B(o,e,++s);B(o,4,s+=4);o.utf8Write("exec",s+=4,4);o[s+=4]=r===undefined||r===true?1:0;B(o,i,++s);if(n)o.set(t,s+=4);else o.utf8Write(t,s+=4,i);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exec: ${t})`);P(this,this._packetRW.write.finalize(o))}signal(e,t){if(this._server)throw new Error("Client-only method called in server mode");const r=t;t=t.toUpperCase();if(t.slice(0,3)==="SIG")t=t.slice(3);if(m[t]!==1)throw new Error(`Invalid signal: ${r}`);const n=t.length;let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(1+4+4+6+1+4+n);s[i]=g.CHANNEL_REQUEST;B(s,e,++i);B(s,6,i+=4);s.utf8Write("signal",i+=4,6);s[i+=6]=0;B(s,n,++i);s.utf8Write(t,i+=4,n);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, signal: ${t})`);P(this,this._packetRW.write.finalize(s))}env(e,t,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(t);const s=Buffer.isBuffer(r);const o=s?r.length:Buffer.byteLength(r);let l=this._packetRW.write.allocStart;const u=this._packetRW.write.alloc(1+4+4+3+1+4+i+4+o);u[l]=g.CHANNEL_REQUEST;B(u,e,++l);B(u,3,l+=4);u.utf8Write("env",l+=4,3);u[l+=3]=n===undefined||n===true?1:0;B(u,i,++l);u.utf8Write(t,l+=4,i);B(u,o,l+=i);if(s)u.set(r,l+=4);else u.utf8Write(r,l+=4,o);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, env: ${t}=${r})`);P(this,this._packetRW.write.finalize(u))}x11Forward(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=t.protocol;const i=t.cookie;const s=Buffer.isBuffer(n);const o=s?n.length:Buffer.byteLength(n);const l=Buffer.isBuffer(i);const u=l?i.length:Buffer.byteLength(i);let p=this._packetRW.write.allocStart;const m=this._packetRW.write.alloc(1+4+4+7+1+1+4+o+4+u+4);m[p]=g.CHANNEL_REQUEST;B(m,e,++p);B(m,7,p+=4);m.utf8Write("x11-req",p+=4,7);m[p+=7]=r===undefined||r===true?1:0;m[++p]=t.single?1:0;B(m,o,++p);if(s)m.set(n,p+=4);else m.utf8Write(n,p+=4,o);B(m,u,p+=o);if(l)m.set(i,p+=4);else m.latin1Write(i,p+=4,u);B(m,t.screen||0,p+=u);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, x11-req)`);P(this,this._packetRW.write.finalize(m))}subsystem(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(t);let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(1+4+4+9+1+4+n);s[i]=g.CHANNEL_REQUEST;B(s,e,++i);B(s,9,i+=4);s.utf8Write("subsystem",i+=4,9);s[i+=9]=r===undefined||r===true?1:0;B(s,n,++i);s.utf8Write(t,i+=4,n);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, subsystem: ${t})`);P(this,this._packetRW.write.finalize(s))}openssh_agentForward(e,t){if(this._server)throw new Error("Client-only method called in server mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(1+4+4+26+1);n[r]=g.CHANNEL_REQUEST;B(n,e,++r);B(n,26,r+=4);n.utf8Write("auth-agent-req@openssh.com",r+=4,26);n[r+=26]=t===undefined||t===true?1:0;if(this._debug){this._debug("Outbound: Sending CHANNEL_REQUEST "+`(r:${e}, auth-agent-req@openssh.com)`)}P(this,this._packetRW.write.finalize(n))}openssh_hostKeysProve(e){if(this._server)throw new Error("Client-only method called in server mode");let t=0;const r=[];for(const n of e){const e=n.getPublicSSH();t+=4+e.length;r.push(e)}let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(1+4+29+1+t);i[n]=g.GLOBAL_REQUEST;B(i,29,++n);i.utf8Write("hostkeys-prove-00@openssh.com",n+=4,29);i[n+=29]=1;++n;for(const e of r){B(i,e.length,n);T(e,i,0,e.length,n+=4);n+=e.length}if(this._debug){this._debug("Outbound: Sending GLOBAL_REQUEST (hostkeys-prove-00@openssh.com)")}P(this,this._packetRW.write.finalize(i))}serviceAccept(e){if(!this._server)throw new Error("Server-only method called in client mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(1+4+t);n[r]=g.SERVICE_ACCEPT;B(n,t,++r);n.utf8Write(e,r+=4,t);this._debug&&this._debug(`Outbound: Sending SERVICE_ACCEPT (${e})`);P(this,this._packetRW.write.finalize(n));if(this._server&&this._banner&&e==="ssh-userauth"){const e=this._banner;this._banner=undefined;const t=Buffer.byteLength(e);r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(1+4+t+4);n[r]=g.USERAUTH_BANNER;B(n,t,++r);n.utf8Write(e,r+=4,t);B(n,0,r+=t);this._debug&&this._debug("Outbound: Sending USERAUTH_BANNER");P(this,this._packetRW.write.finalize(n))}}forwardedTcpip(e,t,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const i=Buffer.byteLength(n.boundAddr);const s=Buffer.byteLength(n.remoteAddr);let o=this._packetRW.write.allocStart;const l=this._packetRW.write.alloc(1+4+15+4+4+4+4+i+4+4+s+4);l[o]=g.CHANNEL_OPEN;B(l,15,++o);l.utf8Write("forwarded-tcpip",o+=4,15);B(l,e,o+=15);B(l,t,o+=4);B(l,r,o+=4);B(l,i,o+=4);l.utf8Write(n.boundAddr,o+=4,i);B(l,n.boundPort,o+=i);B(l,s,o+=4);l.utf8Write(n.remoteAddr,o+=4,s);B(l,n.remotePort,o+=s);this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, forwarded-tcpip)`);P(this,this._packetRW.write.finalize(l))}x11(e,t,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const i=Buffer.byteLength(n.originAddr);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(1+4+3+4+4+4+4+i+4);o[s]=g.CHANNEL_OPEN;B(o,3,++s);o.utf8Write("x11",s+=4,3);B(o,e,s+=3);B(o,t,s+=4);B(o,r,s+=4);B(o,i,s+=4);o.utf8Write(n.originAddr,s+=4,i);B(o,n.originPort,s+=i);this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, x11)`);P(this,this._packetRW.write.finalize(o))}openssh_authAgent(e,t,r){if(!this._server)throw new Error("Server-only method called in client mode");let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(1+4+22+4+4+4);i[n]=g.CHANNEL_OPEN;B(i,22,++n);i.utf8Write("auth-agent@openssh.com",n+=4,22);B(i,e,n+=22);B(i,t,n+=4);B(i,r,n+=4);this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, auth-agent@openssh.com)`);P(this,this._packetRW.write.finalize(i))}openssh_forwardedStreamLocal(e,t,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const i=Buffer.byteLength(n.socketPath);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(1+4+33+4+4+4+4+i+4);o[s]=g.CHANNEL_OPEN;B(o,33,++s);o.utf8Write("forwarded-streamlocal@openssh.com",s+=4,33);B(o,e,s+=33);B(o,t,s+=4);B(o,r,s+=4);B(o,i,s+=4);o.utf8Write(n.socketPath,s+=4,i);B(o,0,s+=i);if(this._debug){this._debug("Outbound: Sending CHANNEL_OPEN "+`(r:${e}, forwarded-streamlocal@openssh.com)`)}P(this,this._packetRW.write.finalize(o))}exitStatus(e,t){if(!this._server)throw new Error("Server-only method called in client mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(1+4+4+11+1+4);n[r]=g.CHANNEL_REQUEST;B(n,e,++r);B(n,11,r+=4);n.utf8Write("exit-status",r+=4,11);n[r+=11]=0;B(n,t,++r);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exit-status: ${t})`);P(this,this._packetRW.write.finalize(n))}exitSignal(e,t,r,n){if(!this._server)throw new Error("Server-only method called in client mode");const i=t;if(typeof i!=="string"||!i)throw new Error(`Invalid signal: ${i}`);let s=t.toUpperCase();if(s.slice(0,3)==="SIG")s=s.slice(3);if(m[s]!==1)throw new Error(`Invalid signal: ${i}`);const o=Buffer.byteLength(s);const l=n?Buffer.byteLength(n):0;let u=this._packetRW.write.allocStart;const p=this._packetRW.write.alloc(1+4+4+11+1+4+o+1+4+l+4);p[u]=g.CHANNEL_REQUEST;B(p,e,++u);B(p,11,u+=4);p.utf8Write("exit-signal",u+=4,11);p[u+=11]=0;B(p,o,++u);p.utf8Write(s,u+=4,o);p[u+=o]=r?1:0;B(p,l,++u);u+=4;if(l){p.utf8Write(n,u,l);u+=l}B(p,0,u);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exit-signal: ${t})`);P(this,this._packetRW.write.finalize(p))}authFailure(e,t){if(!this._server)throw new Error("Server-only method called in client mode");if(this._authsQueue.length===0)throw new Error("No auth in progress");let r;if(typeof e==="boolean"){t=e;e=undefined}if(e){r=[];for(let t=0;t<e.length;++t){if(e[t].toLowerCase()==="none")continue;r.push(e[t])}r=r.join(",")}else{r=""}const n=r.length;let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(1+4+n+1);s[i]=g.USERAUTH_FAILURE;B(s,n,++i);s.utf8Write(r,i+=4,n);s[i+=n]=t===true?1:0;this._authsQueue.shift();this._debug&&this._debug("Outbound: Sending USERAUTH_FAILURE");P(this,this._packetRW.write.finalize(s))}authSuccess(){if(!this._server)throw new Error("Server-only method called in client mode");if(this._authsQueue.length===0)throw new Error("No auth in progress");const e=this._packetRW.write.allocStart;const t=this._packetRW.write.alloc(1);t[e]=g.USERAUTH_SUCCESS;this._authsQueue.shift();this._authenticated=true;this._debug&&this._debug("Outbound: Sending USERAUTH_SUCCESS");P(this,this._packetRW.write.finalize(t));if(this._kex.negotiated.cs.compress==="zlib@openssh.com")this._packetRW.read=new x;if(this._kex.negotiated.sc.compress==="zlib@openssh.com")this._packetRW.write=new U(this)}authPKOK(e,t){if(!this._server)throw new Error("Server-only method called in client mode");if(this._authsQueue.length===0||this._authsQueue[0]!=="publickey")throw new Error('"publickey" auth not in progress');const r=Buffer.byteLength(e);const n=t.length;let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(1+4+r+4+n);s[i]=g.USERAUTH_PK_OK;B(s,r,++i);s.utf8Write(e,i+=4,r);B(s,n,i+=r);s.set(t,i+=4);this._authsQueue.shift();this._debug&&this._debug("Outbound: Sending USERAUTH_PK_OK");P(this,this._packetRW.write.finalize(s))}authPasswdChg(e){if(!this._server)throw new Error("Server-only method called in client mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(1+4+t+4);n[r]=g.USERAUTH_PASSWD_CHANGEREQ;B(n,t,++r);n.utf8Write(e,r+=4,t);B(n,0,r+=t);this._debug&&this._debug("Outbound: Sending USERAUTH_PASSWD_CHANGEREQ");P(this,this._packetRW.write.finalize(n))}authInfoReq(e,t,r){if(!this._server)throw new Error("Server-only method called in client mode");let n=0;const i=e?Buffer.byteLength(e):0;const s=t?Buffer.byteLength(t):0;for(let e=0;e<r.length;++e)n+=4+Buffer.byteLength(r[e].prompt)+1;let o=this._packetRW.write.allocStart;const l=this._packetRW.write.alloc(1+4+i+4+s+4+4+n);l[o]=g.USERAUTH_INFO_REQUEST;B(l,i,++o);o+=4;if(e){l.utf8Write(e,o,i);o+=i}B(l,s,o);o+=4;if(t){l.utf8Write(t,o,s);o+=s}B(l,0,o);B(l,r.length,o+=4);o+=4;for(let e=0;e<r.length;++e){const t=r[e];const n=Buffer.byteLength(t.prompt);B(l,n,o);o+=4;if(n){l.utf8Write(t.prompt,o,n);o+=n}l[o++]=t.echo?1:0}this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_REQUEST");P(this,this._packetRW.write.finalize(l))}}const V=/^SSH-(2\.0|1\.99)-([^ ]+)(?: (.*))?$/;function parseHeader(e,t,r){let i;let s;if(this._buffer){i=Buffer.allocUnsafe(this._buffer.length+(r-t));i.set(this._buffer,0);if(t===0){i.set(e,this._buffer.length)}else{i.set(new Uint8Array(e.buffer,e.byteOffset+t,r-t),this._buffer.length)}s=this._buffer.length;t=0}else{i=e;s=0}const l=t;let u=t;let p=t;let g=false;let m=0;let y=0;for(;t<i.length;++t){const e=i[t];if(e===13){g=true;continue}if(e===10){if(p>u&&p-u>4&&i[u]===83&&i[u+1]===83&&i[u+2]===72&&i[u+3]===45){const e=i.latin1Slice(l,p+1);const g=u===l?e:e.slice(u-l);const m=V.exec(g);if(!m)throw new Error("Invalid identification string");const y={greeting:u===l?"":e.slice(0,u-l),identRaw:g,versions:{protocol:m[1],software:m[2]},comments:m[3]};this._remoteIdentRaw=Buffer.from(g);this._debug&&this._debug(`Remote ident: ${n(g)}`);this._compatFlags=getCompatFlags(y);this._buffer=undefined;this._decipher=new o(0,C.bind(this,{firstPacket:true}));this._parse=parsePacket;this._onHeader(y);if(!this._destruct){return r}b(this);return t+1-s}if(this._server)throw new Error("Greetings from clients not permitted");if(++y>G)throw new Error("Max greeting lines exceeded");g=false;u=t+1;m=0}else if(g){throw new Error("Invalid header: expected newline")}else if(++m>=z){throw new Error("Header line too long")}p=t}if(!this._buffer)this._buffer=R(i,l);return t-s}function parsePacket(e,t,r){return this._decipher.decrypt(e,t,r)}function onPayload(e){this._onPacket();if(e.length===0){this._debug&&this._debug("Inbound: Skipping empty packet payload");return}e=this._packetRW.read.read(e);const t=e[0];if(t===g.USERAUTH_SUCCESS&&!this._server&&!this._authenticated){this._authenticated=true;if(this._kex.negotiated.cs.compress==="zlib@openssh.com")this._packetRW.write=new U(this);if(this._kex.negotiated.sc.compress==="zlib@openssh.com")this._packetRW.read=new x}const r=I[t];if(r===undefined){this._debug&&this._debug(`Inbound: Unsupported message type: ${t}`);return}return r(this,e)}function getCompatFlags(e){const t=e.versions.software;let r=0;for(const e of l){if(typeof e[0]==="string"){if(t===e[0])r|=e[1]}else if(e[0].test(t)){r|=e[1]}}return r}function modesToBytes(e){const t=Object.keys(e);const r=Buffer.allocUnsafe(5*t.length+1);let n=0;for(let i=0;i<t.length;++i){const s=t[i];if(s==="TTY_OP_END")continue;const o=y[s];if(o===undefined)continue;const l=e[s];if(typeof l==="number"&&isFinite(l)){r[n++]=o;r[n++]=l>>>24;r[n++]=l>>>16;r[n++]=l>>>8;r[n++]=l}}r[n++]=y.TTY_OP_END;if(n<r.length)return R(r,0,n);return r}function sendExtInfo(e){let t="ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521"+"rsa-sha2-512,rsa-sha2-256,ssh-rsa,ssh-dss";if(p)t=`ssh-ed25519,${t}`;const r=Buffer.byteLength(t);let n=e._packetRW.write.allocStart;const i=e._packetRW.write.alloc(1+4+4+15+4+r);i[n]=g.EXT_INFO;B(i,1,++n);B(i,15,n+=4);i.utf8Write("server-sig-algs",n+=4,15);B(i,r,n+=15);i.utf8Write(t,n+=4,r);e._debug&&e._debug("Outbound: Sending EXT_INFO");P(e,e._packetRW.write.finalize(i))}e.exports=Protocol},4996:(e,t,r)=>{"use strict";const n=r(4434);const i=r(9896);const{constants:s}=i;const{Readable:o,Writable:l}=r(2203);const{inherits:u,types:{isDate:p}}=r(9023);const g=Buffer[Symbol.species];const{bufferCopy:m,bufferSlice:y,makeBufferParser:_,writeUInt32BE:v}=r(2184);const E={SIZE:1,UIDGID:2,PERMISSIONS:4,ACMODTIME:8,EXTENDED:2147483648};const b=Buffer.alloc(28);const C={OK:0,EOF:1,NO_SUCH_FILE:2,PERMISSION_DENIED:3,FAILURE:4,BAD_MESSAGE:5,NO_CONNECTION:6,CONNECTION_LOST:7,OP_UNSUPPORTED:8};const w=new Map(Object.values(C).map((e=>[e,1])));const I={[C.OK]:"No error",[C.EOF]:"End of file",[C.NO_SUCH_FILE]:"No such file or directory",[C.PERMISSION_DENIED]:"Permission denied",[C.FAILURE]:"Failure",[C.BAD_MESSAGE]:"Bad message",[C.NO_CONNECTION]:"No connection",[C.CONNECTION_LOST]:"Connection lost",[C.OP_UNSUPPORTED]:"Operation unsupported"};const T={INIT:1,OPEN:3,CLOSE:4,READ:5,WRITE:6,LSTAT:7,FSTAT:8,SETSTAT:9,FSETSTAT:10,OPENDIR:11,READDIR:12,REMOVE:13,MKDIR:14,RMDIR:15,REALPATH:16,STAT:17,RENAME:18,READLINK:19,SYMLINK:20,EXTENDED:200};const k={VERSION:2,STATUS:101,HANDLE:102,DATA:103,NAME:104,ATTRS:105,EXTENDED:201};const R={READ:1,WRITE:2,APPEND:4,CREAT:8,TRUNC:16,EXCL:32};const O=2*1024;const P=2**32-1;const B=Buffer.from([0,0,0,5,T.INIT,0,0,0,3]);const D=Buffer.from([0,0,0,5,k.VERSION,0,0,0,3]);const L=/^SSH-2.0-(?:OpenSSH|dropbear)/;const x=256*1024;const U=_();const j={readable:false,writable:false,push:e=>{},once:()=>{},on:()=>{},emit:()=>{},end:()=>{}};function noop(){}class SFTP extends n{constructor(e,t,r){super();if(typeof r!=="object"||!r)r={};const n=e._protocol._remoteIdentRaw;this.server=!!r.server;this._debug=typeof r.debug==="function"?r.debug:undefined;this._isOpenSSH=n&&L.test(n);this._version=-1;this._extensions={};this._biOpt=r.biOpt;this._pktLenBytes=0;this._pktLen=0;this._pktPos=0;this._pktType=0;this._pktData=undefined;this._writeReqid=-1;this._requests={};this._maxInPktLen=x;this._maxOutPktLen=34e3;this._maxReadLen=(this._isOpenSSH?x:34e3)-O;this._maxWriteLen=(this._isOpenSSH?x:34e3)-O;this.maxOpenHandles=undefined;this._client=e;this._protocol=e._protocol;this._callbacks=[];this._hasX11=false;this._exit={code:undefined,signal:undefined,dump:undefined,desc:undefined};this._waitWindow=false;this._chunkcb=undefined;this._buffer=[];this.type=t.type;this.subtype=undefined;this.incoming=t.incoming;this.outgoing=t.outgoing;this.stderr=j;this.readable=true}push(e){if(e===null){cleanupRequests(this);if(!this.readable)return;this.readable=false;this.emit("end");return}let t=0;while(t<e.length){if(this._pktLenBytes<4){let r=Math.min(4-this._pktLenBytes,e.length-t);this._pktLenBytes+=r;while(r--)this._pktLen=(this._pktLen<<8)+e[t++];if(this._pktLenBytes<4)return;if(this._pktLen===0)return doFatalSFTPError(this,"Invalid packet length");if(this._pktLen>this._maxInPktLen){const e=this._maxInPktLen;return doFatalSFTPError(this,`Packet length ${this._pktLen} exceeds max length of ${e}`)}if(t>=e.length)return}if(this._pktPos<this._pktLen){const r=Math.min(this._pktLen-this._pktPos,e.length-t);if(t!==0||r!==e.length){if(r===this._pktLen){this._pkt=new g(e.buffer,e.byteOffset+t,r)}else{if(!this._pkt)this._pkt=Buffer.allocUnsafe(this._pktLen);this._pkt.set(new Uint8Array(e.buffer,e.byteOffset+t,r),this._pktPos)}}else if(r===this._pktLen){this._pkt=e}else{if(!this._pkt)this._pkt=Buffer.allocUnsafe(this._pktLen);this._pkt.set(e,this._pktPos)}t+=r;this._pktPos+=r;if(this._pktPos<this._pktLen)return}const r=this._pkt[0];const n=this._pkt;this._pktLen=0;this._pktLenBytes=0;this._pkt=undefined;this._pktPos=0;const i=this.server?z[r]:q[r];if(!i)return doFatalSFTPError(this,`Unknown packet type ${r}`);if(this._version===-1){if(this.server){if(r!==T.INIT)return doFatalSFTPError(this,`Expected INIT packet, got ${r}`)}else if(r!==k.VERSION){return doFatalSFTPError(this,`Expected VERSION packet, got ${r}`)}}if(i(this,n)===false)return}}end(){this.destroy()}destroy(){if(this.outgoing.state==="open"||this.outgoing.state==="eof"){this.outgoing.state="closing";this._protocol.channelClose(this.outgoing.id)}}_init(){this._init=noop;if(!this.server)sendOrBuffer(this,B)}createReadStream(e,t){if(this.server)throw new Error("Client-only method called in server mode");return new ReadStream(this,e,t)}createWriteStream(e,t){if(this.server)throw new Error("Client-only method called in server mode");return new WriteStream(this,e,t)}open(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");if(typeof r==="function"){n=r;r=undefined}const i=typeof t==="number"?t:stringToFlags(t);if(i===null)throw new Error(`Unknown flags string: ${t}`);let s=0;let o=0;if(typeof r==="string"||typeof r==="number")r={mode:r};if(typeof r==="object"&&r!==null){r=attrsToBytes(r);s=r.flags;o=r.nb}const l=Buffer.byteLength(e);let u=9;const p=Buffer.allocUnsafe(4+1+4+4+l+4+4+o);v(p,p.length-4,0);p[4]=T.OPEN;const g=this._writeReqid=this._writeReqid+1&P;v(p,g,5);v(p,l,u);p.utf8Write(e,u+=4,l);v(p,i,u+=l);v(p,s,u+=4);if(o){u+=4;if(o===b.length)p.set(b,u);else m(b,p,0,o,u);u+=o}this._requests[g]={cb:n};const y=sendOrBuffer(this,p);this._debug&&this._debug(`SFTP: Outbound: ${y?"Buffered":"Sending"} OPEN`)}close(e,t){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const r=e.length;let n=9;const i=Buffer.allocUnsafe(4+1+4+4+r);v(i,i.length-4,0);i[4]=T.CLOSE;const s=this._writeReqid=this._writeReqid+1&P;v(i,s,5);v(i,r,n);i.set(e,n+=4);this._requests[s]={cb:t};const o=sendOrBuffer(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} CLOSE`)}read(e,t,r,n,i,s){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(t))throw new Error("buffer is not a Buffer");if(r>=t.length)throw new Error("offset is out of bounds");if(r+n>t.length)throw new Error("length extends beyond buffer");if(i===null)throw new Error("null position currently unsupported");read_(this,e,t,r,n,i,s)}readData(e,t,r,n,i,s){this.read(e,t,r,n,i,s)}write(e,t,r,n,i,s){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(t))throw new Error("buffer is not a Buffer");if(r>t.length)throw new Error("offset is out of bounds");if(r+n>t.length)throw new Error("length extends beyond buffer");if(i===null)throw new Error("null position currently unsupported");if(!n){s&&process.nextTick(s,undefined,0);return}const o=this._maxWriteLen;const l=Math.max(n-o,0);const u=i;if(l)n=o;const p=e.length;let g=9;const y=Buffer.allocUnsafe(4+1+4+4+p+8+4+n);v(y,y.length-4,0);y[4]=T.WRITE;const _=this._writeReqid=this._writeReqid+1&P;v(y,_,5);v(y,p,g);y.set(e,g+=4);g+=p;for(let e=7;e>=0;--e){y[g+e]=i&255;i/=256}v(y,n,g+=8);m(t,y,r,r+n,g+=4);this._requests[_]={cb:i=>{if(i){if(typeof s==="function")s(i)}else if(l){this.write(e,t,r+n,l,u+n,s)}else if(typeof s==="function"){s(undefined,r+n)}}};const E=sendOrBuffer(this,y);if(this._debug){const e=E?"Sent":"Buffered";this._debug(`SFTP: Outbound: ${e} WRITE (id:${_})`)}}writeData(e,t,r,n,i,s){this.write(e,t,r,n,i,s)}fastGet(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");fastXfer(this,i,e,t,r,n)}fastPut(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");fastXfer(i,this,e,t,r,n)}readFile(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");let n;if(typeof r==="function"){n=r}else if(typeof t==="function"){n=t;t=undefined}if(typeof t==="string")t={encoding:t,flag:"r"};else if(!t)t={encoding:null,flag:"r"};else if(typeof t!=="object")throw new TypeError("Bad arguments");const i=t.encoding;if(i&&!Buffer.isEncoding(i))throw new Error(`Unknown encoding: ${i}`);let s;let o;let l;let u=0;let p;let g=0;const m=t.flag||"r";const read=()=>{if(s===0){o=Buffer.allocUnsafe(8192);this.read(p,o,0,8192,g,afterRead)}else{this.read(p,o,u,s-u,g,afterRead)}};const afterRead=(e,t)=>{let r;if(e){r=e.code===C.EOF;if(!r){return this.close(p,(()=>n&&n(e)))}}else{r=false}if(r||s===0&&t===0)return close();g+=t;u+=t;if(s!==0){if(u===s)close();else read()}else{l.push(y(o,0,t));read()}};afterRead._wantEOFError=true;const close=()=>{this.close(p,(e=>{if(s===0){o=Buffer.concat(l,u)}else if(u<s){o=y(o,0,u)}if(i)o=o.toString(i);return n&&n(e,o)}))};this.open(e,m,438,((t,r)=>{if(t)return n&&n(t);p=r;const tryStat=(t,r)=>{if(t){this.stat(e,((e,r)=>{if(e){return this.close(p,(()=>{n&&n(t)}))}tryStat(null,r)}));return}s=r.size||0;if(s===0){l=[];return read()}o=Buffer.allocUnsafe(s);read()};this.fstat(p,tryStat)}))}writeFile(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i;if(typeof n==="function"){i=n}else if(typeof r==="function"){i=r;r=undefined}if(typeof r==="string")r={encoding:r,mode:438,flag:"w"};else if(!r)r={encoding:"utf8",mode:438,flag:"w"};else if(typeof r!=="object")throw new TypeError("Bad arguments");if(r.encoding&&!Buffer.isEncoding(r.encoding))throw new Error(`Unknown encoding: ${r.encoding}`);const s=r.flag||"w";this.open(e,s,r.mode,((n,o)=>{if(n){i&&i(n)}else{const n=Buffer.isBuffer(t)?t:Buffer.from(""+t,r.encoding||"utf8");const l=/a/.test(s)?null:0;if(l===null){const tryStat=(t,r)=>{if(t){this.stat(e,((e,r)=>{if(e){return this.close(o,(()=>{i&&i(t)}))}tryStat(null,r)}));return}writeAll(this,o,n,0,n.length,r.size,i)};this.fstat(o,tryStat);return}writeAll(this,o,n,0,n.length,l,i)}}))}appendFile(e,t,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i;if(typeof n==="function"){i=n}else if(typeof r==="function"){i=r;r=undefined}if(typeof r==="string")r={encoding:r,mode:438,flag:"a"};else if(!r)r={encoding:"utf8",mode:438,flag:"a"};else if(typeof r!=="object")throw new TypeError("Bad arguments");if(!r.flag)r=Object.assign({flag:"a"},r);this.writeFile(e,t,r,i)}exists(e,t){if(this.server)throw new Error("Client-only method called in server mode");this.stat(e,(e=>{t&&t(e?false:true)}))}unlink(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(4+1+4+4+r);v(i,i.length-4,0);i[4]=T.REMOVE;const s=this._writeReqid=this._writeReqid+1&P;v(i,s,5);v(i,r,n);i.utf8Write(e,n+=4,r);this._requests[s]={cb:t};const o=sendOrBuffer(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} REMOVE`)}rename(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);const i=Buffer.byteLength(t);let s=9;const o=Buffer.allocUnsafe(4+1+4+4+n+4+i);v(o,o.length-4,0);o[4]=T.RENAME;const l=this._writeReqid=this._writeReqid+1&P;v(o,l,5);v(o,n,s);o.utf8Write(e,s+=4,n);v(o,i,s+=n);o.utf8Write(t,s+=4,i);this._requests[l]={cb:r};const u=sendOrBuffer(this,o);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} RENAME`)}mkdir(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");let n=0;let i=0;if(typeof t==="function"){r=t;t=undefined}if(typeof t==="object"&&t!==null){t=attrsToBytes(t);n=t.flags;i=t.nb}const s=Buffer.byteLength(e);let o=9;const l=Buffer.allocUnsafe(4+1+4+4+s+4+i);v(l,l.length-4,0);l[4]=T.MKDIR;const u=this._writeReqid=this._writeReqid+1&P;v(l,u,5);v(l,s,o);l.utf8Write(e,o+=4,s);v(l,n,o+=s);if(i){o+=4;if(i===b.length)l.set(b,o);else m(b,l,0,i,o);o+=i}this._requests[u]={cb:r};const p=sendOrBuffer(this,l);this._debug&&this._debug(`SFTP: Outbound: ${p?"Buffered":"Sending"} MKDIR`)}rmdir(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(4+1+4+4+r);v(i,i.length-4,0);i[4]=T.RMDIR;const s=this._writeReqid=this._writeReqid+1&P;v(i,s,5);v(i,r,n);i.utf8Write(e,n+=4,r);this._requests[s]={cb:t};const o=sendOrBuffer(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} RMDIR`)}readdir(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if(typeof t==="function"){r=t;t={}}if(typeof t!=="object"||t===null)t={};const n=t&&t.full?false:true;if(!Buffer.isBuffer(e)&&typeof e!=="string")throw new Error("missing directory handle or path");if(typeof e==="string"){const n=[];let i=0;const reread=(e,s)=>{if(e)return r(e);this.readdir(s,t,((e,t)=>{const o=e&&e.code===C.EOF;if(e&&!o)return this.close(s,(()=>r(e)));if(o){return this.close(s,(e=>{if(e)return r(e);r(undefined,n)}))}for(let e=0;e<t.length;++e,++i)n[i]=t[e];reread(undefined,s)}))};return this.opendir(e,reread)}const i=e.length;let s=9;const o=Buffer.allocUnsafe(4+1+4+4+i);v(o,o.length-4,0);o[4]=T.READDIR;const l=this._writeReqid=this._writeReqid+1&P;v(o,l,5);v(o,i,s);o.set(e,s+=4);this._requests[l]={cb:n?(e,t)=>{if(typeof r!=="function")return;if(e)return r(e);for(let e=t.length-1;e>=0;--e){if(t[e].filename==="."||t[e].filename==="..")t.splice(e,1)}r(undefined,t)}:r};const u=sendOrBuffer(this,o);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} READDIR`)}fstat(e,t){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const r=e.length;let n=9;const i=Buffer.allocUnsafe(4+1+4+4+r);v(i,i.length-4,0);i[4]=T.FSTAT;const s=this._writeReqid=this._writeReqid+1&P;v(i,s,5);v(i,r,n);i.set(e,n+=4);this._requests[s]={cb:t};const o=sendOrBuffer(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} FSTAT`)}stat(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(4+1+4+4+r);v(i,i.length-4,0);i[4]=T.STAT;const s=this._writeReqid=this._writeReqid+1&P;v(i,s,5);v(i,r,n);i.utf8Write(e,n+=4,r);this._requests[s]={cb:t};const o=sendOrBuffer(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} STAT`)}lstat(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(4+1+4+4+r);v(i,i.length-4,0);i[4]=T.LSTAT;const s=this._writeReqid=this._writeReqid+1&P;v(i,s,5);v(i,r,n);i.utf8Write(e,n+=4,r);this._requests[s]={cb:t};const o=sendOrBuffer(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} LSTAT`)}opendir(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(4+1+4+4+r);v(i,i.length-4,0);i[4]=T.OPENDIR;const s=this._writeReqid=this._writeReqid+1&P;v(i,s,5);v(i,r,n);i.utf8Write(e,n+=4,r);this._requests[s]={cb:t};const o=sendOrBuffer(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} OPENDIR`)}setstat(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");let n=0;let i=0;if(typeof t==="object"&&t!==null){t=attrsToBytes(t);n=t.flags;i=t.nb}else if(typeof t==="function"){r=t}const s=Buffer.byteLength(e);let o=9;const l=Buffer.allocUnsafe(4+1+4+4+s+4+i);v(l,l.length-4,0);l[4]=T.SETSTAT;const u=this._writeReqid=this._writeReqid+1&P;v(l,u,5);v(l,s,o);l.utf8Write(e,o+=4,s);v(l,n,o+=s);if(i){o+=4;if(i===b.length)l.set(b,o);else m(b,l,0,i,o);o+=i}this._requests[u]={cb:r};const p=sendOrBuffer(this,l);this._debug&&this._debug(`SFTP: Outbound: ${p?"Buffered":"Sending"} SETSTAT`)}fsetstat(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");let n=0;let i=0;if(typeof t==="object"&&t!==null){t=attrsToBytes(t);n=t.flags;i=t.nb}else if(typeof t==="function"){r=t}const s=e.length;let o=9;const l=Buffer.allocUnsafe(4+1+4+4+s+4+i);v(l,l.length-4,0);l[4]=T.FSETSTAT;const u=this._writeReqid=this._writeReqid+1&P;v(l,u,5);v(l,s,o);l.set(e,o+=4);v(l,n,o+=s);if(i){o+=4;if(i===b.length)l.set(b,o);else m(b,l,0,i,o);o+=i}this._requests[u]={cb:r};const p=sendOrBuffer(this,l);this._debug&&this._debug(`SFTP: Outbound: ${p?"Buffered":"Sending"} FSETSTAT`)}futimes(e,t,r,n){return this.fsetstat(e,{atime:toUnixTimestamp(t),mtime:toUnixTimestamp(r)},n)}utimes(e,t,r,n){return this.setstat(e,{atime:toUnixTimestamp(t),mtime:toUnixTimestamp(r)},n)}fchown(e,t,r,n){return this.fsetstat(e,{uid:t,gid:r},n)}chown(e,t,r,n){return this.setstat(e,{uid:t,gid:r},n)}fchmod(e,t,r){return this.fsetstat(e,{mode:t},r)}chmod(e,t,r){return this.setstat(e,{mode:t},r)}readlink(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(4+1+4+4+r);v(i,i.length-4,0);i[4]=T.READLINK;const s=this._writeReqid=this._writeReqid+1&P;v(i,s,5);v(i,r,n);i.utf8Write(e,n+=4,r);this._requests[s]={cb:(e,r)=>{if(typeof t!=="function")return;if(e)return t(e);if(!r||!r.length)return t(new Error("Response missing link info"));t(undefined,r[0].filename)}};const o=sendOrBuffer(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} READLINK`)}symlink(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(t);const i=Buffer.byteLength(e);let s=9;const o=Buffer.allocUnsafe(4+1+4+4+n+4+i);v(o,o.length-4,0);o[4]=T.SYMLINK;const l=this._writeReqid=this._writeReqid+1&P;v(o,l,5);if(this._isOpenSSH){v(o,i,s);o.utf8Write(e,s+=4,i);v(o,n,s+=i);o.utf8Write(t,s+=4,n)}else{v(o,n,s);o.utf8Write(t,s+=4,n);v(o,i,s+=n);o.utf8Write(e,s+=4,i)}this._requests[l]={cb:r};const u=sendOrBuffer(this,o);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} SYMLINK`)}realpath(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=9;const i=Buffer.allocUnsafe(4+1+4+4+r);v(i,i.length-4,0);i[4]=T.REALPATH;const s=this._writeReqid=this._writeReqid+1&P;v(i,s,5);v(i,r,n);i.utf8Write(e,n+=4,r);this._requests[s]={cb:(e,r)=>{if(typeof t!=="function")return;if(e)return t(e);if(!r||!r.length)return t(new Error("Response missing path info"));t(undefined,r[0].filename)}};const o=sendOrBuffer(this,i);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} REALPATH`)}ext_openssh_rename(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const n=this._extensions["posix-rename@openssh.com"];if(!n||n!=="1")throw new Error("Server does not support this extended request");const i=Buffer.byteLength(e);const s=Buffer.byteLength(t);let o=9;const l=Buffer.allocUnsafe(4+1+4+4+24+4+i+4+s);v(l,l.length-4,0);l[4]=T.EXTENDED;const u=this._writeReqid=this._writeReqid+1&P;v(l,u,5);v(l,24,o);l.utf8Write("posix-rename@openssh.com",o+=4,24);v(l,i,o+=24);l.utf8Write(e,o+=4,i);v(l,s,o+=i);l.utf8Write(t,o+=4,s);this._requests[u]={cb:r};const p=sendOrBuffer(this,l);if(this._debug){const e=p?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} posix-rename@openssh.com`)}}ext_openssh_statvfs(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["statvfs@openssh.com"];if(!r||r!=="2")throw new Error("Server does not support this extended request");const n=Buffer.byteLength(e);let i=9;const s=Buffer.allocUnsafe(4+1+4+4+19+4+n);v(s,s.length-4,0);s[4]=T.EXTENDED;const o=this._writeReqid=this._writeReqid+1&P;v(s,o,5);v(s,19,i);s.utf8Write("statvfs@openssh.com",i+=4,19);v(s,n,i+=19);s.utf8Write(e,i+=4,n);this._requests[o]={extended:"statvfs@openssh.com",cb:t};const l=sendOrBuffer(this,s);if(this._debug){const e=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} statvfs@openssh.com`)}}ext_openssh_fstatvfs(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["fstatvfs@openssh.com"];if(!r||r!=="2")throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const n=e.length;let i=9;const s=Buffer.allocUnsafe(4+1+4+4+20+4+n);v(s,s.length-4,0);s[4]=T.EXTENDED;const o=this._writeReqid=this._writeReqid+1&P;v(s,o,5);v(s,20,i);s.utf8Write("fstatvfs@openssh.com",i+=4,20);v(s,n,i+=20);s.set(e,i+=4);this._requests[o]={extended:"fstatvfs@openssh.com",cb:t};const l=sendOrBuffer(this,s);if(this._debug){const e=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} fstatvfs@openssh.com`)}}ext_openssh_hardlink(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const n=this._extensions["hardlink@openssh.com"];if(n!=="1")throw new Error("Server does not support this extended request");const i=Buffer.byteLength(e);const s=Buffer.byteLength(t);let o=9;const l=Buffer.allocUnsafe(4+1+4+4+20+4+i+4+s);v(l,l.length-4,0);l[4]=T.EXTENDED;const u=this._writeReqid=this._writeReqid+1&P;v(l,u,5);v(l,20,o);l.utf8Write("hardlink@openssh.com",o+=4,20);v(l,i,o+=20);l.utf8Write(e,o+=4,i);v(l,s,o+=i);l.utf8Write(t,o+=4,s);this._requests[u]={cb:r};const p=sendOrBuffer(this,l);if(this._debug){const e=p?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} hardlink@openssh.com`)}}ext_openssh_fsync(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["fsync@openssh.com"];if(r!=="1")throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const n=e.length;let i=9;const s=Buffer.allocUnsafe(4+1+4+4+17+4+n);v(s,s.length-4,0);s[4]=T.EXTENDED;const o=this._writeReqid=this._writeReqid+1&P;v(s,o,5);v(s,17,i);s.utf8Write("fsync@openssh.com",i+=4,17);v(s,n,i+=17);s.set(e,i+=4);this._requests[o]={cb:t};const l=sendOrBuffer(this,s);this._debug&&this._debug(`SFTP: Outbound: ${l?"Buffered":"Sending"} fsync@openssh.com`)}ext_openssh_lsetstat(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const n=this._extensions["lsetstat@openssh.com"];if(n!=="1")throw new Error("Server does not support this extended request");let i=0;let s=0;if(typeof t==="object"&&t!==null){t=attrsToBytes(t);i=t.flags;s=t.nb}else if(typeof t==="function"){r=t}const o=Buffer.byteLength(e);let l=9;const u=Buffer.allocUnsafe(4+1+4+4+20+4+o+4+s);v(u,u.length-4,0);u[4]=T.EXTENDED;const p=this._writeReqid=this._writeReqid+1&P;v(u,p,5);v(u,20,l);u.utf8Write("lsetstat@openssh.com",l+=4,20);v(u,o,l+=20);u.utf8Write(e,l+=4,o);v(u,i,l+=o);if(s){l+=4;if(s===b.length)u.set(b,l);else m(b,u,0,s,l);l+=s}this._requests[p]={cb:r};const g=sendOrBuffer(this,u);if(this._debug){const e=g?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} lsetstat@openssh.com`)}}ext_openssh_expandPath(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["expand-path@openssh.com"];if(r!=="1")throw new Error("Server does not support this extended request");const n=Buffer.byteLength(e);let i=9;const s=Buffer.allocUnsafe(4+1+4+4+23+4+n);v(s,s.length-4,0);s[4]=T.EXTENDED;const o=this._writeReqid=this._writeReqid+1&P;v(s,o,5);v(s,23,i);s.utf8Write("expand-path@openssh.com",i+=4,23);v(s,n,i+=20);s.utf8Write(e,i+=4,n);this._requests[o]={cb:(e,r)=>{if(typeof t!=="function")return;if(e)return t(e);if(!r||!r.length)return t(new Error("Response missing expanded path"));t(undefined,r[0].filename)}};const l=sendOrBuffer(this,s);if(this._debug){const e=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} expand-path@openssh.com`)}}ext_copy_data(e,t,r,n,i,s){if(this.server)throw new Error("Client-only method called in server mode");const o=this._extensions["copy-data"];if(o!=="1")throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("Source handle is not a Buffer");if(!Buffer.isBuffer(n))throw new Error("Destination handle is not a Buffer");let l=0;const u=Buffer.allocUnsafe(4+1+4+4+9+4+e.length+8+8+4+n.length+8);v(u,u.length-4,l);l+=4;u[l]=T.EXTENDED;++l;const p=this._writeReqid=this._writeReqid+1&P;v(u,p,l);l+=4;v(u,9,l);l+=4;u.utf8Write("copy-data",l,9);l+=9;v(u,e.length,l);l+=4;u.set(e,l);l+=e.length;for(let e=7;e>=0;--e){u[l+e]=t&255;t/=256}l+=8;for(let e=7;e>=0;--e){u[l+e]=r&255;r/=256}l+=8;v(u,n.length,l);l+=4;u.set(n,l);l+=n.length;for(let e=7;e>=0;--e){u[l+e]=i&255;i/=256}this._requests[p]={cb:s};const g=sendOrBuffer(this,u);if(this._debug){const e=g?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} copy-data`)}}ext_home_dir(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["home-directory"];if(r!=="1")throw new Error("Server does not support this extended request");if(typeof e!=="string")throw new TypeError("username is not a string");let n=0;const i=Buffer.byteLength(e);const s=Buffer.allocUnsafe(4+1+4+4+14+4+i);v(s,s.length-4,n);n+=4;s[n]=T.EXTENDED;++n;const o=this._writeReqid=this._writeReqid+1&P;v(s,o,n);n+=4;v(s,14,n);n+=4;s.utf8Write("home-directory",n,14);n+=14;v(s,i,n);n+=4;s.utf8Write(e,n,i);n+=i;this._requests[o]={cb:(e,r)=>{if(typeof t!=="function")return;if(e)return t(e);if(!r||!r.length)return t(new Error("Response missing home directory"));t(undefined,r[0].filename)}};const l=sendOrBuffer(this,s);if(this._debug){const e=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} home-directory`)}}ext_users_groups(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const n=this._extensions["users-groups-by-id@openssh.com"];if(n!=="1")throw new Error("Server does not support this extended request");if(!Array.isArray(e))throw new TypeError("uids is not an array");for(const t of e){if(!Number.isInteger(t)||t<0||t>2**32-1)throw new Error("uid values must all be 32-bit unsigned integers")}if(!Array.isArray(t))throw new TypeError("gids is not an array");for(const e of t){if(!Number.isInteger(e)||e<0||e>2**32-1)throw new Error("gid values must all be 32-bit unsigned integers")}let i=0;const s=Buffer.allocUnsafe(4+1+4+4+30+4+4*e.length+4+4*t.length);v(s,s.length-4,i);i+=4;s[i]=T.EXTENDED;++i;const o=this._writeReqid=this._writeReqid+1&P;v(s,o,i);i+=4;v(s,30,i);i+=4;s.utf8Write("users-groups-by-id@openssh.com",i,30);i+=30;v(s,4*e.length,i);i+=4;for(const t of e){v(s,t,i);i+=4}v(s,4*t.length,i);i+=4;for(const e of t){v(s,e,i);i+=4}this._requests[o]={extended:"users-groups-by-id@openssh.com",cb:r};const l=sendOrBuffer(this,s);if(this._debug){const e=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} users-groups-by-id@openssh.com`)}}handle(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if(!Buffer.isBuffer(t))throw new Error("handle is not a Buffer");const r=t.length;if(r>256)throw new Error("handle too large (> 256 bytes)");let n=9;const i=Buffer.allocUnsafe(4+1+4+4+r);v(i,i.length-4,0);i[4]=k.HANDLE;v(i,e,5);v(i,r,n);if(r)i.set(t,n+=4);const s=sendOrBuffer(this,i);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} HANDLE`)}status(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");if(!w.has(t))throw new Error(`Bad status code: ${t}`);r||(r="");const n=Buffer.byteLength(r);let i=9;const s=Buffer.allocUnsafe(4+1+4+4+4+n+4);v(s,s.length-4,0);s[4]=k.STATUS;v(s,e,5);v(s,t,i);v(s,n,i+=4);i+=4;if(n){s.utf8Write(r,i,n);i+=n}v(s,0,i);const o=sendOrBuffer(this,s);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} STATUS`)}data(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");const n=Buffer.isBuffer(t);if(!n&&typeof t!=="string")throw new Error("data is not a Buffer or string");let i;if(!n&&!r){r=undefined;i=true}const s=n?t.length:Buffer.byteLength(t,r);let o=9;const l=Buffer.allocUnsafe(4+1+4+4+s);v(l,l.length-4,0);l[4]=k.DATA;v(l,e,5);v(l,s,o);if(s){if(n)l.set(t,o+=4);else if(i)l.utf8Write(t,o+=4,s);else l.write(t,o+=4,s,r)}const u=sendOrBuffer(this,l);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} DATA`)}name(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if(!Array.isArray(t)){if(typeof t!=="object"||t===null)throw new Error("names is not an object or array");t=[t]}const r=t.length;let n=0;let i;const s=[];for(let e=0;e<r;++e){const r=t[e];const o=!r||!r.filename||typeof r.filename!=="string"?"":r.filename;n+=4+Buffer.byteLength(o);const l=!r||!r.longname||typeof r.longname!=="string"?"":r.longname;n+=4+Buffer.byteLength(l);if(typeof r.attrs==="object"&&r.attrs!==null){i=attrsToBytes(r.attrs);n+=4+i.nb;if(i.nb){let e;if(i.nb===b.length){e=new Uint8Array(b)}else{e=new Uint8Array(i.nb);m(b,e,0,i.nb,0)}i.bytes=e}s.push(i)}else{n+=4;s.push(null)}}let o=9;const l=Buffer.allocUnsafe(4+1+4+4+n);v(l,l.length-4,0);l[4]=k.NAME;v(l,e,5);v(l,r,o);o+=4;for(let e=0;e<r;++e){const r=t[e];{const e=!r||!r.filename||typeof r.filename!=="string"?"":r.filename;const t=Buffer.byteLength(e);v(l,t,o);o+=4;if(t){l.utf8Write(e,o,t);o+=t}}{const e=!r||!r.longname||typeof r.longname!=="string"?"":r.longname;const t=Buffer.byteLength(e);v(l,t,o);o+=4;if(t){l.utf8Write(e,o,t);o+=t}}const n=s[e];if(n){v(l,n.flags,o);o+=4;if(n.flags&&n.bytes){l.set(n.bytes,o);o+=n.nb}}else{v(l,0,o);o+=4}}const u=sendOrBuffer(this,l);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} NAME`)}attrs(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if(typeof t!=="object"||t===null)throw new Error("attrs is not an object");t=attrsToBytes(t);const r=t.flags;const n=t.nb;let i=9;const s=Buffer.allocUnsafe(4+1+4+4+n);v(s,s.length-4,0);s[4]=k.ATTRS;v(s,e,5);v(s,r,i);if(n){i+=4;if(n===b.length)s.set(b,i);else m(b,s,0,n,i);i+=n}const o=sendOrBuffer(this,s);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} ATTRS`)}}function tryCreateBuffer(e){try{return Buffer.allocUnsafe(e)}catch(e){return e}}function read_(e,t,r,n,i,s,o,l){const u=e._maxReadLen;const p=Math.max(i-u,0);if(p)i=u;const g=t.length;let m=9;let _=s;const E=Buffer.allocUnsafe(4+1+4+4+g+8+4);v(E,E.length-4,0);E[4]=T.READ;const b=e._writeReqid=e._writeReqid+1&P;v(E,b,5);v(E,g,m);E.set(t,m+=4);m+=g;for(let e=7;e>=0;--e){E[m+e]=_&255;_/=256}v(E,i,m+=8);if(typeof o!=="function")o=noop;const w=l||{nb:0,position:s,off:n,origOff:n,len:undefined,overflow:undefined,cb:(n,i,s)=>{const l=w.len;const u=w.overflow;if(n){if(o._wantEOFError||n.code!==C.EOF)return o(n)}else if(s>l){return o(new Error("Received more data than requested"))}else if(s===l&&u){w.nb+=s;w.position+=s;w.off+=s;read_(e,t,r,w.off,u,w.position,o,w);return}s=s||0;if(w.origOff===0&&r.length===w.nb)i=r;else i=y(r,w.origOff,w.origOff+w.nb+s);o(undefined,w.nb+s,i,w.position)},buffer:undefined};w.len=i;w.overflow=p;w.buffer=y(r,n,n+i);e._requests[b]=w;const I=sendOrBuffer(e,E);e._debug&&e._debug(`SFTP: Outbound: ${I?"Buffered":"Sending"} READ`)}function fastXfer(e,t,r,n,s,o){let l=64;let u=32768;let p;let g;let m;if(typeof s==="function"){o=s}else if(typeof s==="object"&&s!==null){if(typeof s.concurrency==="number"&&s.concurrency>0&&!isNaN(s.concurrency)){l=s.concurrency}if(typeof s.chunkSize==="number"&&s.chunkSize>0&&!isNaN(s.chunkSize)){u=s.chunkSize}if(typeof s.fileSize==="number"&&s.fileSize>0&&!isNaN(s.fileSize)){m=s.fileSize}if(typeof s.step==="function")p=s.step;if(typeof s.mode==="string"||typeof s.mode==="number")g=modeNum(s.mode)}let y;let _=0;let v=0;let E=false;let b;let C;let w;let I=u*l;function onerror(r){if(E)return;E=true;let n=0;let s;if(b||C){s=()=>{if(--n===0)o(r)};if(b&&(e===i||e.outgoing.state==="open"))++n;if(C&&(t===i||t.outgoing.state==="open"))++n;if(b&&(e===i||e.outgoing.state==="open"))e.close(b,s);if(C&&(t===i||t.outgoing.state==="open"))t.close(C,s)}else{o(r)}}e.open(r,"r",((s,E)=>{if(s)return onerror(s);b=E;if(m===undefined)e.fstat(b,tryStat);else tryStat(null,{size:m});function tryStat(s,m){if(s){if(e!==i){e.stat(r,((e,t)=>{if(e)return onerror(s);tryStat(null,t)}));return}return onerror(s)}y=m.size;t.open(n,"w",((r,i)=>{if(r)return onerror(r);C=i;if(y<=0)return onerror();while(I>y){if(l===1){I=y;break}I-=u;--l}w=tryCreateBuffer(I);if(w instanceof Error)return onerror(w);if(g!==undefined){t.fchmod(C,g,(function tryAgain(e){if(e){t.chmod(n,g,(e=>tryAgain()));return}startReads()}))}else{startReads()}function onread(r,n,i,s,l,g){if(r)return onerror(r);l=l||0;t.write(C,w,l,n,s,writeCb);function writeCb(r){if(r)return onerror(r);v+=n;p&&p(v,n,y);if(n<g)return singleRead(l,s+n,g-n);if(v===y){t.close(C,(t=>{C=undefined;if(t)return onerror(t);e.close(b,(e=>{b=undefined;if(e)return onerror(e);o()}))}));return}if(_>=y)return;const i=_+u>y?y-_:u;singleRead(l,_,i);_+=i}}function makeCb(e,t,r){return(n,i,s)=>{onread(n,i,s,t,e,r)}}function singleRead(t,r,n){e.read(b,w,t,n,r,makeCb(t,r,n))}function startReads(){let e=0;let t=0;while(_<y&&e<l){const r=_+u>y?y-_:u;singleRead(t,_,r);t+=r;_+=r;++e}}}))}}))}function writeAll(e,t,r,n,i,s,o){const l=typeof o==="function"?o:undefined;e.write(t,r,n,i,s,((o,u)=>{if(o){return e.close(t,(()=>{l&&l(o)}))}if(u===i){e.close(t,l)}else{n+=u;i-=u;s+=u;writeAll(e,t,r,n,i,s,l)}}))}class Stats{constructor(e){this.mode=e&&e.mode;this.uid=e&&e.uid;this.gid=e&&e.gid;this.size=e&&e.size;this.atime=e&&e.atime;this.mtime=e&&e.mtime;this.extended=e&&e.extended}isDirectory(){return(this.mode&s.S_IFMT)===s.S_IFDIR}isFile(){return(this.mode&s.S_IFMT)===s.S_IFREG}isBlockDevice(){return(this.mode&s.S_IFMT)===s.S_IFBLK}isCharacterDevice(){return(this.mode&s.S_IFMT)===s.S_IFCHR}isSymbolicLink(){return(this.mode&s.S_IFMT)===s.S_IFLNK}isFIFO(){return(this.mode&s.S_IFMT)===s.S_IFIFO}isSocket(){return(this.mode&s.S_IFMT)===s.S_IFSOCK}}function attrsToBytes(e){let t=0;let r=0;if(typeof e==="object"&&e!==null){if(typeof e.size==="number"){t|=E.SIZE;const n=e.size;b[r++]=n/72057594037927940;b[r++]=n/281474976710656;b[r++]=n/1099511627776;b[r++]=n/4294967296;b[r++]=n/16777216;b[r++]=n/65536;b[r++]=n/256;b[r++]=n}if(typeof e.uid==="number"&&typeof e.gid==="number"){t|=E.UIDGID;const n=e.uid;const i=e.gid;b[r++]=n>>>24;b[r++]=n>>>16;b[r++]=n>>>8;b[r++]=n;b[r++]=i>>>24;b[r++]=i>>>16;b[r++]=i>>>8;b[r++]=i}if(typeof e.mode==="number"||typeof e.mode==="string"){const n=modeNum(e.mode);t|=E.PERMISSIONS;b[r++]=n>>>24;b[r++]=n>>>16;b[r++]=n>>>8;b[r++]=n}if((typeof e.atime==="number"||p(e.atime))&&(typeof e.mtime==="number"||p(e.mtime))){const n=toUnixTimestamp(e.atime);const i=toUnixTimestamp(e.mtime);t|=E.ACMODTIME;b[r++]=n>>>24;b[r++]=n>>>16;b[r++]=n>>>8;b[r++]=n;b[r++]=i>>>24;b[r++]=i>>>16;b[r++]=i>>>8;b[r++]=i}}return{flags:t,nb:r}}function toUnixTimestamp(e){if(typeof e==="number"&&e===e)return e;if(p(e))return parseInt(e.getTime()/1e3,10);throw new Error(`Cannot parse time: ${e}`)}function modeNum(e){if(typeof e==="number"&&e===e)return e;if(typeof e==="string")return modeNum(parseInt(e,8));throw new Error(`Cannot parse mode: ${e}`)}const W={r:R.READ,"r+":R.READ|R.WRITE,w:R.TRUNC|R.CREAT|R.WRITE,wx:R.TRUNC|R.CREAT|R.WRITE|R.EXCL,xw:R.TRUNC|R.CREAT|R.WRITE|R.EXCL,"w+":R.TRUNC|R.CREAT|R.READ|R.WRITE,"wx+":R.TRUNC|R.CREAT|R.READ|R.WRITE|R.EXCL,"xw+":R.TRUNC|R.CREAT|R.READ|R.WRITE|R.EXCL,a:R.APPEND|R.CREAT|R.WRITE,ax:R.APPEND|R.CREAT|R.WRITE|R.EXCL,xa:R.APPEND|R.CREAT|R.WRITE|R.EXCL,"a+":R.APPEND|R.CREAT|R.READ|R.WRITE,"ax+":R.APPEND|R.CREAT|R.READ|R.WRITE|R.EXCL,"xa+":R.APPEND|R.CREAT|R.READ|R.WRITE|R.EXCL};function stringToFlags(e){const t=W[e];return t!==undefined?t:null}const Q=(()=>{const e=Object.keys(W);return t=>{for(let r=0;r<e.length;++r){const n=e[r];if(W[n]===t)return n}return null}})();function readAttrs(e){const t=U.readUInt32BE();if(t===undefined)return;const r=new Stats;if(t&E.SIZE){const t=U.readUInt64BE(e);if(t===undefined)return;r.size=t}if(t&E.UIDGID){const e=U.readUInt32BE();const t=U.readUInt32BE();if(t===undefined)return;r.uid=e;r.gid=t}if(t&E.PERMISSIONS){const e=U.readUInt32BE();if(e===undefined)return;r.mode=e}if(t&E.ACMODTIME){const e=U.readUInt32BE();const t=U.readUInt32BE();if(t===undefined)return;r.atime=e;r.mtime=t}if(t&E.EXTENDED){const e=U.readUInt32BE();if(e===undefined)return;const t={};for(let r=0;r<e;++r){const e=U.readString(true);const r=U.readString();if(r===undefined)return;t[e]=r}r.extended=t}return r}function sendOrBuffer(e,t){const r=tryWritePayload(e,t);if(r!==undefined){e._buffer.push(r);return false}return true}function tryWritePayload(e,t){const r=e.outgoing;if(r.state!=="open")return;if(r.window===0){e._waitWindow=true;e._chunkcb=drainBuffer;return t}let n;const i=t.length;let s=0;while(i-s>0&&r.window>0){const n=Math.min(i-s,r.window,r.packetSize);r.window-=n;if(r.window===0){e._waitWindow=true;e._chunkcb=drainBuffer}if(s===0&&n===i){e._protocol.channelData(e.outgoing.id,t)}else{e._protocol.channelData(e.outgoing.id,y(t,s,s+n))}s+=n}if(i-s>0){if(s>0)n=y(t,s,i);else n=t}return n}function drainBuffer(){this._chunkcb=undefined;const e=this._buffer;let t=0;while(t<e.length){const r=e[t];const n=tryWritePayload(this,r);if(n!==undefined){if(n!==r)e[t]=n;if(t>0)this._buffer=e.slice(t);return}++t}if(t>0)this._buffer=[]}function doFatalSFTPError(e,t,r){const n=new Error(t);n.level="sftp-protocol";if(!r&&e._debug)e._debug(`SFTP: Inbound: ${t}`);e.emit("error",n);e.destroy();cleanupRequests(e);return false}function cleanupRequests(e){const t=Object.keys(e._requests);if(t.length===0)return;const r=e._requests;e._requests={};const n=new Error("No response from server");for(let e=0;e<t.length;++e){const i=r[t[e]];if(typeof i.cb==="function")i.cb(n)}}function requestLimits(e,t){let r=9;const n=Buffer.allocUnsafe(4+1+4+4+18);v(n,n.length-4,0);n[4]=T.EXTENDED;const i=e._writeReqid=e._writeReqid+1&P;v(n,i,5);v(n,18,r);n.utf8Write("limits@openssh.com",r+=4,18);e._requests[i]={extended:"limits@openssh.com",cb:t};const s=sendOrBuffer(e,n);if(e._debug){const t=s?"Buffered":"Sending";e._debug(`SFTP: Outbound: ${t} limits@openssh.com`)}}const q={[k.VERSION]:(e,t)=>{if(e._version!==-1)return doFatalSFTPError(e,"Duplicate VERSION packet");const r={};U.init(t,1);let n=U.readUInt32BE();while(U.avail()){const e=U.readString(true);const t=U.readString(true);if(t===undefined){n=undefined;break}r[e]=t}U.clear();if(n===undefined)return doFatalSFTPError(e,"Malformed VERSION packet");if(e._debug){const t=Object.keys(r);if(t.length){e._debug(`SFTP: Inbound: Received VERSION (v${n}, exts:${t})`)}else{e._debug(`SFTP: Inbound: Received VERSION (v${n})`)}}e._version=n;e._extensions=r;if(r["limits@openssh.com"]==="1"){return requestLimits(e,((t,r)=>{if(!t){if(r.maxPktLen>0)e._maxOutPktLen=r.maxPktLen;if(r.maxReadLen>0)e._maxReadLen=r.maxReadLen;if(r.maxWriteLen>0)e._maxWriteLen=r.maxWriteLen;e.maxOpenHandles=r.maxOpenHandles>0?r.maxOpenHandles:Infinity}e.emit("ready")}))}e.emit("ready")},[k.STATUS]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readUInt32BE();const i=U.readString(true);U.clear();if(e._debug){const t=JSON.stringify(i);e._debug(`SFTP: Inbound: Received STATUS (id:${r}, ${n}, ${t})`)}const s=e._requests[r];delete e._requests[r];if(s&&typeof s.cb==="function"){if(n===C.OK){s.cb();return}const e=new Error(i||I[n]||"Unknown status");e.code=n;s.cb(e)}},[k.HANDLE]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString();U.clear();if(n===undefined){if(r!==undefined)delete e._requests[r];return doFatalSFTPError(e,"Malformed HANDLE packet")}e._debug&&e._debug(`SFTP: Inbound: Received HANDLE (id:${r})`);const i=e._requests[r];delete e._requests[r];if(i&&typeof i.cb==="function")i.cb(undefined,n)},[k.DATA]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();let n;if(r!==undefined){n=e._requests[r];delete e._requests[r]}if(n&&typeof n.cb==="function"){if(n.buffer){const t=U.readString(n.buffer);U.clear();if(t!==undefined){e._debug&&e._debug(`SFTP: Inbound: Received DATA (id:${r}, ${t})`);n.cb(undefined,n.buffer,t);return}}else{const t=U.readString();U.clear();if(t!==undefined){e._debug&&e._debug(`SFTP: Inbound: Received DATA (id:${r}, ${t.length})`);n.cb(undefined,t);return}}}else{const t=U.skipString();U.clear();if(t!==undefined){e._debug&&e._debug(`SFTP: Inbound: Received DATA (id:${r}, ${t})`);return}}return doFatalSFTPError(e,"Malformed DATA packet")},[k.NAME]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();let n;if(r!==undefined){n=e._requests[r];delete e._requests[r]}const i=U.readUInt32BE();if(i!==undefined){let t=[];for(let r=0;r<i;++r){const r=U.readString(true);const n=U.readString(true);const i=readAttrs(e._biOpt);if(i===undefined){t=undefined;break}t.push({filename:r,longname:n,attrs:i})}if(t!==undefined){e._debug&&e._debug(`SFTP: Inbound: Received NAME (id:${r}, ${t.length})`);U.clear();if(n&&typeof n.cb==="function")n.cb(undefined,t);return}}U.clear();return doFatalSFTPError(e,"Malformed NAME packet")},[k.ATTRS]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();let n;if(r!==undefined){n=e._requests[r];delete e._requests[r]}const i=readAttrs(e._biOpt);U.clear();if(i!==undefined){e._debug&&e._debug(`SFTP: Inbound: Received ATTRS (id:${r})`);if(n&&typeof n.cb==="function")n.cb(undefined,i);return}return doFatalSFTPError(e,"Malformed ATTRS packet")},[k.EXTENDED]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();if(r!==undefined){const t=e._requests[r];if(t){delete e._requests[r];switch(t.extended){case"statvfs@openssh.com":case"fstatvfs@openssh.com":{const n=e._biOpt;const i={f_bsize:U.readUInt64BE(n),f_frsize:U.readUInt64BE(n),f_blocks:U.readUInt64BE(n),f_bfree:U.readUInt64BE(n),f_bavail:U.readUInt64BE(n),f_files:U.readUInt64BE(n),f_ffree:U.readUInt64BE(n),f_favail:U.readUInt64BE(n),f_sid:U.readUInt64BE(n),f_flag:U.readUInt64BE(n),f_namemax:U.readUInt64BE(n)};if(i.f_namemax===undefined)break;if(e._debug){e._debug("SFTP: Inbound: Received EXTENDED_REPLY "+`(id:${r}, ${t.extended})`)}U.clear();if(typeof t.cb==="function")t.cb(undefined,i);return}case"limits@openssh.com":{const n={maxPktLen:U.readUInt64BE(),maxReadLen:U.readUInt64BE(),maxWriteLen:U.readUInt64BE(),maxOpenHandles:U.readUInt64BE()};if(n.maxOpenHandles===undefined)break;if(e._debug){e._debug("SFTP: Inbound: Received EXTENDED_REPLY "+`(id:${r}, ${t.extended})`)}U.clear();if(typeof t.cb==="function")t.cb(undefined,n);return}case"users-groups-by-id@openssh.com":{const n=U.readUInt32BE();if(n===undefined)break;const i=new Array(n);for(let e=0;e<i.length;++e)i[e]=U.readString(true);const s=U.readUInt32BE();if(s===undefined)break;const o=new Array(s);for(let e=0;e<o.length;++e)o[e]=U.readString(true);if(o.length>0&&o[o.length-1]===undefined){break}if(e._debug){e._debug("SFTP: Inbound: Received EXTENDED_REPLY "+`(id:${r}, ${t.extended})`)}U.clear();if(typeof t.cb==="function")t.cb(undefined,i,o);return}default:e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`);U.clear();if(typeof t.cb==="function")t.cb();return}}else{e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`);U.clear();return}}U.clear();return doFatalSFTPError(e,"Malformed EXTENDED_REPLY packet")}};const z={[T.INIT]:(e,t)=>{if(e._version!==-1)return doFatalSFTPError(e,"Duplicate INIT packet");const r={};U.init(t,1);let n=U.readUInt32BE();while(U.avail()){const e=U.readString(true);const t=U.readString(true);if(t===undefined){n=undefined;break}r[e]=t}U.clear();if(n===undefined)return doFatalSFTPError(e,"Malformed INIT packet");if(e._debug){const t=Object.keys(r);if(t.length){e._debug(`SFTP: Inbound: Received INIT (v${n}, exts:${t})`)}else{e._debug(`SFTP: Inbound: Received INIT (v${n})`)}}sendOrBuffer(e,D);e._version=n;e._extensions=r;e.emit("ready")},[T.OPEN]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);const i=U.readUInt32BE();const s=readAttrs(e._biOpt);U.clear();if(s===undefined)return doFatalSFTPError(e,"Malformed OPEN packet");e._debug&&e._debug(`SFTP: Inbound: Received OPEN (id:${r})`);if(!e.emit("OPEN",r,n,i,s)){e.status(r,C.OP_UNSUPPORTED)}},[T.CLOSE]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString();U.clear();if(n===undefined||n.length>256)return doFatalSFTPError(e,"Malformed CLOSE packet");e._debug&&e._debug(`SFTP: Inbound: Received CLOSE (id:${r})`);if(!e.emit("CLOSE",r,n)){e.status(r,C.OP_UNSUPPORTED)}},[T.READ]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString();const i=U.readUInt64BE(e._biOpt);const s=U.readUInt32BE();U.clear();if(s===undefined||n.length>256)return doFatalSFTPError(e,"Malformed READ packet");e._debug&&e._debug(`SFTP: Inbound: Received READ (id:${r})`);if(!e.emit("READ",r,n,i,s)){e.status(r,C.OP_UNSUPPORTED)}},[T.WRITE]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString();const i=U.readUInt64BE(e._biOpt);const s=U.readString();U.clear();if(s===undefined||n.length>256)return doFatalSFTPError(e,"Malformed WRITE packet");e._debug&&e._debug(`SFTP: Inbound: Received WRITE (id:${r})`);if(!e.emit("WRITE",r,n,i,s)){e.status(r,C.OP_UNSUPPORTED)}},[T.LSTAT]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);U.clear();if(n===undefined)return doFatalSFTPError(e,"Malformed LSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received LSTAT (id:${r})`);if(!e.emit("LSTAT",r,n)){e.status(r,C.OP_UNSUPPORTED)}},[T.FSTAT]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString();U.clear();if(n===undefined||n.length>256)return doFatalSFTPError(e,"Malformed FSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received FSTAT (id:${r})`);if(!e.emit("FSTAT",r,n)){e.status(r,C.OP_UNSUPPORTED)}},[T.SETSTAT]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);const i=readAttrs(e._biOpt);U.clear();if(i===undefined)return doFatalSFTPError(e,"Malformed SETSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received SETSTAT (id:${r})`);if(!e.emit("SETSTAT",r,n,i)){e.status(r,C.OP_UNSUPPORTED)}},[T.FSETSTAT]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString();const i=readAttrs(e._biOpt);U.clear();if(i===undefined||n.length>256)return doFatalSFTPError(e,"Malformed FSETSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received FSETSTAT (id:${r})`);if(!e.emit("FSETSTAT",r,n,i)){e.status(r,C.OP_UNSUPPORTED)}},[T.OPENDIR]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);U.clear();if(n===undefined)return doFatalSFTPError(e,"Malformed OPENDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received OPENDIR (id:${r})`);if(!e.emit("OPENDIR",r,n)){e.status(r,C.OP_UNSUPPORTED)}},[T.READDIR]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString();U.clear();if(n===undefined||n.length>256)return doFatalSFTPError(e,"Malformed READDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received READDIR (id:${r})`);if(!e.emit("READDIR",r,n)){e.status(r,C.OP_UNSUPPORTED)}},[T.REMOVE]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);U.clear();if(n===undefined)return doFatalSFTPError(e,"Malformed REMOVE packet");e._debug&&e._debug(`SFTP: Inbound: Received REMOVE (id:${r})`);if(!e.emit("REMOVE",r,n)){e.status(r,C.OP_UNSUPPORTED)}},[T.MKDIR]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);const i=readAttrs(e._biOpt);U.clear();if(i===undefined)return doFatalSFTPError(e,"Malformed MKDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received MKDIR (id:${r})`);if(!e.emit("MKDIR",r,n,i)){e.status(r,C.OP_UNSUPPORTED)}},[T.RMDIR]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);U.clear();if(n===undefined)return doFatalSFTPError(e,"Malformed RMDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received RMDIR (id:${r})`);if(!e.emit("RMDIR",r,n)){e.status(r,C.OP_UNSUPPORTED)}},[T.REALPATH]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);U.clear();if(n===undefined)return doFatalSFTPError(e,"Malformed REALPATH packet");e._debug&&e._debug(`SFTP: Inbound: Received REALPATH (id:${r})`);if(!e.emit("REALPATH",r,n)){e.status(r,C.OP_UNSUPPORTED)}},[T.STAT]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);U.clear();if(n===undefined)return doFatalSFTPError(e,"Malformed STAT packet");e._debug&&e._debug(`SFTP: Inbound: Received STAT (id:${r})`);if(!e.emit("STAT",r,n)){e.status(r,C.OP_UNSUPPORTED)}},[T.RENAME]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);const i=U.readString(true);U.clear();if(i===undefined)return doFatalSFTPError(e,"Malformed RENAME packet");e._debug&&e._debug(`SFTP: Inbound: Received RENAME (id:${r})`);if(!e.emit("RENAME",r,n,i)){e.status(r,C.OP_UNSUPPORTED)}},[T.READLINK]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);U.clear();if(n===undefined)return doFatalSFTPError(e,"Malformed READLINK packet");e._debug&&e._debug(`SFTP: Inbound: Received READLINK (id:${r})`);if(!e.emit("READLINK",r,n)){e.status(r,C.OP_UNSUPPORTED)}},[T.SYMLINK]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);const i=U.readString(true);U.clear();if(i===undefined)return doFatalSFTPError(e,"Malformed SYMLINK packet");e._debug&&e._debug(`SFTP: Inbound: Received SYMLINK (id:${r})`);let s;if(e._isOpenSSH){s=e.emit("SYMLINK",r,i,n)}else{s=e.emit("SYMLINK",r,n,i)}if(!s){e.status(r,C.OP_UNSUPPORTED)}},[T.EXTENDED]:(e,t)=>{U.init(t,1);const r=U.readUInt32BE();const n=U.readString(true);if(n===undefined){U.clear();return doFatalSFTPError(e,"Malformed EXTENDED packet")}let i;if(U.avail())i=U.readRaw();U.clear();e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED (id:${r})`);if(!e.emit("EXTENDED",r,n,i)){e.status(r,C.OP_UNSUPPORTED)}}};const{ERR_INVALID_ARG_TYPE:G,ERR_OUT_OF_RANGE:$,validateNumber:Y}=r(3208);const V=128;let J;const ee=[];function allocNewPool(e){if(ee.length>0)J=ee.pop();else J=Buffer.allocUnsafe(e);J.used=0}function checkPosition(e,t){if(!Number.isSafeInteger(e)){Y(e,t);if(!Number.isInteger(e))throw new $(t,"an integer",e);throw new $(t,">= 0 and <= 2 ** 53 - 1",e)}if(e<0)throw new $(t,">= 0 and <= 2 ** 53 - 1",e)}function roundUpToMultipleOf8(e){return e+7&~7}function ReadStream(e,t,r){if(r===undefined)r={};else if(typeof r==="string")r={encoding:r};else if(r===null||typeof r!=="object")throw new TypeError('"options" argument must be a string or an object');else r=Object.create(r);if(r.highWaterMark===undefined)r.highWaterMark=64*1024;r.emitClose=false;r.autoDestroy=false;o.call(this,r);this.path=t;this.flags=r.flags===undefined?"r":r.flags;this.mode=r.mode===undefined?438:r.mode;this.start=r.start;this.end=r.end;this.autoClose=r.autoClose===undefined?true:r.autoClose;this.pos=0;this.bytesRead=0;this.isClosed=false;this.handle=r.handle===undefined?null:r.handle;this.sftp=e;this._opening=false;if(this.start!==undefined){checkPosition(this.start,"start");this.pos=this.start}if(this.end===undefined){this.end=Infinity}else if(this.end!==Infinity){checkPosition(this.end,"end");if(this.start!==undefined&&this.start>this.end){throw new $("start",`<= "end" (here: ${this.end})`,this.start)}}this.on("end",(function(){if(this.autoClose)this.destroy()}));if(!Buffer.isBuffer(this.handle))this.open()}u(ReadStream,o);ReadStream.prototype.open=function(){if(this._opening)return;this._opening=true;this.sftp.open(this.path,this.flags,this.mode,((e,t)=>{this._opening=false;if(e){this.emit("error",e);if(this.autoClose)this.destroy();return}this.handle=t;this.emit("open",t);this.emit("ready");this.read()}))};ReadStream.prototype._read=function(e){if(!Buffer.isBuffer(this.handle))return this.once("open",(()=>this._read(e)));if(this.destroyed)return;if(!J||J.length-J.used<V){allocNewPool(this.readableHighWaterMark||this._readableState.highWaterMark)}const t=J;let r=Math.min(J.length-J.used,e);const n=J.used;if(this.end!==undefined)r=Math.min(this.end-this.pos+1,r);if(r<=0)return this.push(null);this.sftp.read(this.handle,J,J.used,r,this.pos,((e,i)=>{if(e){this.emit("error",e);if(this.autoClose)this.destroy();return}let s=null;if(n+r===t.used&&t===J){t.used=roundUpToMultipleOf8(t.used+i-r)}else{const e=n+r&~7;const s=roundUpToMultipleOf8(n+i);if(e-s>=V)ee.push(t.slice(s,e))}if(i>0){this.bytesRead+=i;s=t.slice(n,n+i)}this.pos+=i;this.push(s)}));J.used=roundUpToMultipleOf8(J.used+r)};ReadStream.prototype._destroy=function(e,t){if(this._opening&&!Buffer.isBuffer(this.handle)){this.once("open",closeStream.bind(null,this,t,e));return}closeStream(this,t,e);this.handle=null;this._opening=false};function closeStream(e,t,r){if(!e.handle)return onclose();e.sftp.close(e.handle,onclose);function onclose(n){n=n||r;t(n);e.isClosed=true;if(!n)e.emit("close")}}ReadStream.prototype.close=function(e){this.destroy(null,e)};Object.defineProperty(ReadStream.prototype,"pending",{get(){return this.handle===null},configurable:true});function WriteStream(e,t,r){if(r===undefined)r={};else if(typeof r==="string")r={encoding:r};else if(r===null||typeof r!=="object")throw new TypeError('"options" argument must be a string or an object');else r=Object.create(r);r.emitClose=false;r.autoDestroy=false;l.call(this,r);this.path=t;this.flags=r.flags===undefined?"w":r.flags;this.mode=r.mode===undefined?438:r.mode;this.start=r.start;this.autoClose=r.autoClose===undefined?true:r.autoClose;this.pos=0;this.bytesWritten=0;this.isClosed=false;this.handle=r.handle===undefined?null:r.handle;this.sftp=e;this._opening=false;if(this.start!==undefined){checkPosition(this.start,"start");this.pos=this.start}if(r.encoding)this.setDefaultEncoding(r.encoding);this.on("finish",(function(){if(this._writableState.finalCalled)return;if(this.autoClose)this.destroy()}));if(!Buffer.isBuffer(this.handle))this.open()}u(WriteStream,l);WriteStream.prototype._final=function(e){if(this.autoClose)this.destroy();e()};WriteStream.prototype.open=function(){if(this._opening)return;this._opening=true;this.sftp.open(this.path,this.flags,this.mode,((e,t)=>{this._opening=false;if(e){this.emit("error",e);if(this.autoClose)this.destroy();return}this.handle=t;const tryAgain=e=>{if(e){this.sftp.chmod(this.path,this.mode,(e=>tryAgain()));return}if(this.flags[0]==="a"){const tryStat=(e,r)=>{if(e){this.sftp.stat(this.path,((t,r)=>{if(t){this.destroy();this.emit("error",e);return}tryStat(null,r)}));return}this.pos=r.size;this.emit("open",t);this.emit("ready")};this.sftp.fstat(t,tryStat);return}this.emit("open",t);this.emit("ready")};this.sftp.fchmod(t,this.mode,tryAgain)}))};WriteStream.prototype._write=function(e,t,r){if(!Buffer.isBuffer(e)){const t=new G("data","Buffer",e);return this.emit("error",t)}if(!Buffer.isBuffer(this.handle)){return this.once("open",(function(){this._write(e,t,r)}))}this.sftp.write(this.handle,e,0,e.length,this.pos,((e,t)=>{if(e){if(this.autoClose)this.destroy();return r(e)}this.bytesWritten+=t;r()}));this.pos+=e.length};WriteStream.prototype._writev=function(e,t){if(!Buffer.isBuffer(this.handle)){return this.once("open",(function(){this._writev(e,t)}))}const r=this.sftp;const n=this.handle;let i=e.length;const onwrite=(e,r)=>{if(e){this.destroy();return t(e)}this.bytesWritten+=r;if(--i===0)t()};for(let t=0;t<e.length;++t){const i=e[t].chunk;r.write(n,i,0,i.length,this.pos,onwrite);this.pos+=i.length}};if(typeof l.prototype.destroy!=="function")WriteStream.prototype.destroy=ReadStream.prototype.destroy;WriteStream.prototype._destroy=ReadStream.prototype._destroy;WriteStream.prototype.close=function(e){if(e){if(this.isClosed){process.nextTick(e);return}this.on("close",e)}if(!this.autoClose)this.on("finish",this.destroy.bind(this));this.end()};WriteStream.prototype.destroySoon=WriteStream.prototype.end;Object.defineProperty(WriteStream.prototype,"pending",{get(){return this.handle===null},configurable:true});e.exports={flagsToString:Q,OPEN_MODE:R,SFTP:SFTP,Stats:Stats,STATUS_CODE:C,stringToFlags:stringToFlags}},4020:(e,t,r)=>{"use strict";const n=r(6982);let i;try{i=r(4982)()}catch{}const{bindingAvailable:s,CIPHER_INFO:o,MAC_INFO:l}=r(2888);const u=(()=>{if(typeof n.sign==="function"&&typeof n.verify==="function"){const e="-----BEGIN PRIVATE KEY-----\r\nMC4CAQAwBQYDK2VwBCIEIHKj+sVa9WcD"+"/q2DJUJaf43Kptc8xYuUQA4bOFj9vC8T\r\n-----END PRIVATE KEY-----";const t=Buffer.from("a");let r;let i;try{r=n.sign(null,t,e);i=n.verify(null,t,e,r)}catch{}return Buffer.isBuffer(r)&&r.length===64&&i===true}return false})();const p=typeof n.diffieHellman==="function"&&typeof n.generateKeyPairSync==="function"&&typeof n.createPublicKey==="function";const g=["ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha256","diffie-hellman-group15-sha512","diffie-hellman-group16-sha512","diffie-hellman-group17-sha512","diffie-hellman-group18-sha512"];if(p){g.unshift("curve25519-sha256");g.unshift("curve25519-sha256@libssh.org")}const m=g.concat(["diffie-hellman-group-exchange-sha1","diffie-hellman-group14-sha1","diffie-hellman-group1-sha1"]);const y=["ecdsa-sha2-nistp256","ecdsa-sha2-nistp384","ecdsa-sha2-nistp521","rsa-sha2-512","rsa-sha2-256","ssh-rsa"];if(u)y.unshift("ssh-ed25519");const _=y.concat(["ssh-dss"]);const v=(()=>{const e=n.getCiphers();return t=>e.includes(o[t].sslName)})();let E=["aes128-gcm@openssh.com","aes256-gcm@openssh.com","aes128-ctr","aes192-ctr","aes256-ctr"];if(i&&i.flags&&!i.flags.aes){if(s)E.unshift("chacha20-poly1305@openssh.com");else E.push("chacha20-poly1305@openssh.com")}else if(s&&i&&i.arch==="x86"){E.splice(4,0,"chacha20-poly1305@openssh.com")}else{E.push("chacha20-poly1305@openssh.com")}E=E.filter(v);const b=E.concat(["aes256-cbc","aes192-cbc","aes128-cbc","blowfish-cbc","3des-cbc","aes128-gcm","aes256-gcm","arcfour256","arcfour128","cast128-cbc","arcfour"].filter(v));const C=(()=>{const e=n.getHashes();return t=>e.includes(l[t].sslName)})();const w=["hmac-sha2-256-etm@openssh.com","hmac-sha2-512-etm@openssh.com","hmac-sha1-etm@openssh.com","hmac-sha2-256","hmac-sha2-512","hmac-sha1"].filter(C);const I=w.concat(["hmac-md5","hmac-sha2-256-96","hmac-sha2-512-96","hmac-ripemd160","hmac-sha1-96","hmac-md5-96"].filter(C));const T=["none","zlib@openssh.com","zlib"];const k=T.concat([]);const R={BAD_DHGEX:1<<0,OLD_EXIT:1<<1,DYN_RPORT_BUG:1<<2,BUG_DHGEX_LARGE:1<<3,IMPLY_RSA_SHA2_SIGALGS:1<<4};e.exports={MESSAGE:{DISCONNECT:1,IGNORE:2,UNIMPLEMENTED:3,DEBUG:4,SERVICE_REQUEST:5,SERVICE_ACCEPT:6,EXT_INFO:7,KEXINIT:20,NEWKEYS:21,KEXDH_INIT:30,KEXDH_REPLY:31,KEXDH_GEX_GROUP:31,KEXDH_GEX_INIT:32,KEXDH_GEX_REPLY:33,KEXDH_GEX_REQUEST:34,KEXECDH_INIT:30,KEXECDH_REPLY:31,USERAUTH_REQUEST:50,USERAUTH_FAILURE:51,USERAUTH_SUCCESS:52,USERAUTH_BANNER:53,USERAUTH_PASSWD_CHANGEREQ:60,USERAUTH_PK_OK:60,USERAUTH_INFO_REQUEST:60,USERAUTH_INFO_RESPONSE:61,GLOBAL_REQUEST:80,REQUEST_SUCCESS:81,REQUEST_FAILURE:82,CHANNEL_OPEN:90,CHANNEL_OPEN_CONFIRMATION:91,CHANNEL_OPEN_FAILURE:92,CHANNEL_WINDOW_ADJUST:93,CHANNEL_DATA:94,CHANNEL_EXTENDED_DATA:95,CHANNEL_EOF:96,CHANNEL_CLOSE:97,CHANNEL_REQUEST:98,CHANNEL_SUCCESS:99,CHANNEL_FAILURE:100},DISCONNECT_REASON:{HOST_NOT_ALLOWED_TO_CONNECT:1,PROTOCOL_ERROR:2,KEY_EXCHANGE_FAILED:3,RESERVED:4,MAC_ERROR:5,COMPRESSION_ERROR:6,SERVICE_NOT_AVAILABLE:7,PROTOCOL_VERSION_NOT_SUPPORTED:8,HOST_KEY_NOT_VERIFIABLE:9,CONNECTION_LOST:10,BY_APPLICATION:11,TOO_MANY_CONNECTIONS:12,AUTH_CANCELED_BY_USER:13,NO_MORE_AUTH_METHODS_AVAILABLE:14,ILLEGAL_USER_NAME:15},DISCONNECT_REASON_STR:undefined,CHANNEL_OPEN_FAILURE:{ADMINISTRATIVELY_PROHIBITED:1,CONNECT_FAILED:2,UNKNOWN_CHANNEL_TYPE:3,RESOURCE_SHORTAGE:4},TERMINAL_MODE:{TTY_OP_END:0,VINTR:1,VQUIT:2,VERASE:3,VKILL:4,VEOF:5,VEOL:6,VEOL2:7,VSTART:8,VSTOP:9,VSUSP:10,VDSUSP:11,VREPRINT:12,VWERASE:13,VLNEXT:14,VFLUSH:15,VSWTCH:16,VSTATUS:17,VDISCARD:18,IGNPAR:30,PARMRK:31,INPCK:32,ISTRIP:33,INLCR:34,IGNCR:35,ICRNL:36,IUCLC:37,IXON:38,IXANY:39,IXOFF:40,IMAXBEL:41,ISIG:50,ICANON:51,XCASE:52,ECHO:53,ECHOE:54,ECHOK:55,ECHONL:56,NOFLSH:57,TOSTOP:58,IEXTEN:59,ECHOCTL:60,ECHOKE:61,PENDIN:62,OPOST:70,OLCUC:71,ONLCR:72,OCRNL:73,ONOCR:74,ONLRET:75,CS7:90,CS8:91,PARENB:92,PARODD:93,TTY_OP_ISPEED:128,TTY_OP_OSPEED:129},CHANNEL_EXTENDED_DATATYPE:{STDERR:1},SIGNALS:["ABRT","ALRM","FPE","HUP","ILL","INT","QUIT","SEGV","TERM","USR1","USR2","KILL","PIPE"].reduce(((e,t)=>({...e,[t]:1})),{}),COMPAT:R,COMPAT_CHECKS:[["Cisco-1.25",R.BAD_DHGEX],[/^Cisco-1[.]/,R.BUG_DHGEX_LARGE],[/^[0-9.]+$/,R.OLD_EXIT],[/^OpenSSH_5[.][0-9]+/,R.DYN_RPORT_BUG],[/^OpenSSH_7[.]4/,R.IMPLY_RSA_SHA2_SIGALGS]],DEFAULT_KEX:g,SUPPORTED_KEX:m,DEFAULT_SERVER_HOST_KEY:y,SUPPORTED_SERVER_HOST_KEY:_,DEFAULT_CIPHER:E,SUPPORTED_CIPHER:b,DEFAULT_MAC:w,SUPPORTED_MAC:I,DEFAULT_COMPRESSION:T,SUPPORTED_COMPRESSION:k,curve25519Supported:p,eddsaSupported:u};e.exports.DISCONNECT_REASON_BY_VALUE=Array.from(Object.entries(e.exports.DISCONNECT_REASON)).reduce(((e,[t,r])=>({...e,[r]:t})),{})},2888:(e,t,r)=>{"use strict";const{createCipheriv:n,createDecipheriv:i,createHmac:s,randomFillSync:o,timingSafeEqual:l}=r(6982);const{readUInt32BE:u,writeUInt32BE:p}=r(2184);const g=Buffer[Symbol.species];const m=2**32-1;const y=Buffer.alloc(0);const _=Buffer.alloc(4);const v=new Map;const E=35e3;let b;let C;let w;let I;let T;let k;let R;try{b=r(8440);({AESGCMCipher:C,ChaChaPolyCipher:w,GenericCipher:I,AESGCMDecipher:T,ChaChaPolyDecipher:k,GenericDecipher:R}=b)}catch{}const O=1<<0;const P=(()=>{function info(e,t,r,n,i,s,o){return{sslName:e,blockLen:t,keyLen:r,ivLen:n!==0||o&O?n:t,authLen:i,discardLen:s,stream:!!(o&O)}}return{"chacha20-poly1305@openssh.com":info("chacha20",8,64,0,16,0,O),"aes128-gcm":info("aes-128-gcm",16,16,12,16,0,O),"aes256-gcm":info("aes-256-gcm",16,32,12,16,0,O),"aes128-gcm@openssh.com":info("aes-128-gcm",16,16,12,16,0,O),"aes256-gcm@openssh.com":info("aes-256-gcm",16,32,12,16,0,O),"aes128-cbc":info("aes-128-cbc",16,16,0,0,0,0),"aes192-cbc":info("aes-192-cbc",16,24,0,0,0,0),"aes256-cbc":info("aes-256-cbc",16,32,0,0,0,0),"rijndael-cbc@lysator.liu.se":info("aes-256-cbc",16,32,0,0,0,0),"3des-cbc":info("des-ede3-cbc",8,24,0,0,0,0),"blowfish-cbc":info("bf-cbc",8,16,0,0,0,0),"idea-cbc":info("idea-cbc",8,16,0,0,0,0),"cast128-cbc":info("cast-cbc",8,16,0,0,0,0),"aes128-ctr":info("aes-128-ctr",16,16,16,0,0,O),"aes192-ctr":info("aes-192-ctr",16,24,16,0,0,O),"aes256-ctr":info("aes-256-ctr",16,32,16,0,0,O),"3des-ctr":info("des-ede3",8,24,8,0,0,O),"blowfish-ctr":info("bf-ecb",8,16,8,0,0,O),"cast128-ctr":info("cast5-ecb",8,16,8,0,0,O),arcfour:info("rc4",8,16,0,0,1536,O),arcfour128:info("rc4",8,16,0,0,1536,O),arcfour256:info("rc4",8,32,0,0,1536,O),arcfour512:info("rc4",8,64,0,0,1536,O)}})();const B=(()=>{function info(e,t,r,n){return{sslName:e,len:t,actualLen:r,isETM:n}}return{"hmac-md5":info("md5",16,16,false),"hmac-md5-96":info("md5",16,12,false),"hmac-ripemd160":info("ripemd160",20,20,false),"hmac-sha1":info("sha1",20,20,false),"hmac-sha1-etm@openssh.com":info("sha1",20,20,true),"hmac-sha1-96":info("sha1",20,12,false),"hmac-sha2-256":info("sha256",32,32,false),"hmac-sha2-256-etm@openssh.com":info("sha256",32,32,true),"hmac-sha2-256-96":info("sha256",32,12,false),"hmac-sha2-512":info("sha512",64,64,false),"hmac-sha2-512-etm@openssh.com":info("sha512",64,64,true),"hmac-sha2-512-96":info("sha512",64,12,false)}})();class NullCipher{constructor(e,t){this.outSeqno=e;this._onWrite=t;this._dead=false}free(){this._dead=true}allocPacket(e){let t=4+1+e;let r=8-(t&8-1);if(r<4)r+=8;t+=r;const n=Buffer.allocUnsafe(t);p(n,t-4,0);n[4]=r;o(n,5+e,r);return n}encrypt(e){if(this._dead)return;this._onWrite(e);this.outSeqno=this.outSeqno+1>>>0}}const D=Buffer.alloc(32);const L=Buffer.alloc(16);let x;let U;let j;class ChaChaPolyCipherNative{constructor(e){const t=e.outbound;this.outSeqno=t.seqno;this._onWrite=t.onWrite;this._encKeyMain=t.cipherKey.slice(0,32);this._encKeyPktLen=t.cipherKey.slice(32);this._dead=false}free(){this._dead=true}allocPacket(e){let t=4+1+e;let r=8-(t-4&8-1);if(r<4)r+=8;t+=r;const n=Buffer.allocUnsafe(t);p(n,t-4,0);n[4]=r;o(n,5+e,r);return n}encrypt(e){if(this._dead)return;L[0]=0;p(L,this.outSeqno,12);const t=n("chacha20",this._encKeyMain,L).update(D);const r=n("chacha20",this._encKeyPktLen,L).update(e.slice(0,4));this._onWrite(r);L[0]=1;const i=n("chacha20",this._encKeyMain,L).update(e.slice(4));this._onWrite(i);j(U,r,r.length,i,i.length,t);const s=Buffer.allocUnsafe(16);s.set(new Uint8Array(x.HEAPU8.buffer,U,16),0);this._onWrite(s);this.outSeqno=this.outSeqno+1>>>0}}class ChaChaPolyCipherBinding{constructor(e){const t=e.outbound;this.outSeqno=t.seqno;this._onWrite=t.onWrite;this._instance=new w(t.cipherKey);this._dead=false}free(){this._dead=true;this._instance.free()}allocPacket(e){let t=4+1+e;let r=8-(t-4&8-1);if(r<4)r+=8;t+=r;const n=Buffer.allocUnsafe(t+16);p(n,t-4,0);n[4]=r;o(n,5+e,r);return n}encrypt(e){if(this._dead)return;this._instance.encrypt(e,this.outSeqno);this._onWrite(e);this.outSeqno=this.outSeqno+1>>>0}}class AESGCMCipherNative{constructor(e){const t=e.outbound;this.outSeqno=t.seqno;this._onWrite=t.onWrite;this._encSSLName=t.cipherInfo.sslName;this._encKey=t.cipherKey;this._encIV=t.cipherIV;this._dead=false}free(){this._dead=true}allocPacket(e){let t=4+1+e;let r=16-(t-4&16-1);if(r<4)r+=16;t+=r;const n=Buffer.allocUnsafe(t);p(n,t-4,0);n[4]=r;o(n,5+e,r);return n}encrypt(e){if(this._dead)return;const t=n(this._encSSLName,this._encKey,this._encIV);t.setAutoPadding(false);const r=e.slice(0,4);t.setAAD(r);this._onWrite(r);const i=t.update(e.slice(4));this._onWrite(i);const s=t.final();if(s.length)this._onWrite(s);const o=t.getAuthTag();this._onWrite(o);ivIncrement(this._encIV);this.outSeqno=this.outSeqno+1>>>0}}class AESGCMCipherBinding{constructor(e){const t=e.outbound;this.outSeqno=t.seqno;this._onWrite=t.onWrite;this._instance=new C(t.cipherInfo.sslName,t.cipherKey,t.cipherIV);this._dead=false}free(){this._dead=true;this._instance.free()}allocPacket(e){let t=4+1+e;let r=16-(t-4&16-1);if(r<4)r+=16;t+=r;const n=Buffer.allocUnsafe(t+16);p(n,t-4,0);n[4]=r;o(n,5+e,r);return n}encrypt(e){if(this._dead)return;this._instance.encrypt(e);this._onWrite(e);this.outSeqno=this.outSeqno+1>>>0}}class GenericCipherNative{constructor(e){const t=e.outbound;this.outSeqno=t.seqno;this._onWrite=t.onWrite;this._encBlockLen=t.cipherInfo.blockLen;this._cipherInstance=n(t.cipherInfo.sslName,t.cipherKey,t.cipherIV);this._macSSLName=t.macInfo.sslName;this._macKey=t.macKey;this._macActualLen=t.macInfo.actualLen;this._macETM=t.macInfo.isETM;this._aadLen=this._macETM?4:0;this._dead=false;const r=t.cipherInfo.discardLen;if(r){let e=v.get(r);if(e===undefined){e=Buffer.alloc(r);v.set(r,e)}this._cipherInstance.update(e)}}free(){this._dead=true}allocPacket(e){const t=this._encBlockLen;let r=4+1+e;let n=t-(r-this._aadLen&t-1);if(n<4)n+=t;r+=n;const i=Buffer.allocUnsafe(r);p(i,r-4,0);i[4]=n;o(i,5+e,n);return i}encrypt(e){if(this._dead)return;let t;if(this._macETM){const r=new Uint8Array(e.buffer,e.byteOffset,4);const n=this._cipherInstance.update(new Uint8Array(e.buffer,e.byteOffset+4,e.length-4));this._onWrite(r);this._onWrite(n);t=s(this._macSSLName,this._macKey);p(_,this.outSeqno,0);t.update(_);t.update(r);t.update(n)}else{const r=this._cipherInstance.update(e);this._onWrite(r);t=s(this._macSSLName,this._macKey);p(_,this.outSeqno,0);t.update(_);t.update(e)}let r=t.digest();if(r.length>this._macActualLen)r=r.slice(0,this._macActualLen);this._onWrite(r);this.outSeqno=this.outSeqno+1>>>0}}class GenericCipherBinding{constructor(e){const t=e.outbound;this.outSeqno=t.seqno;this._onWrite=t.onWrite;this._encBlockLen=t.cipherInfo.blockLen;this._macLen=t.macInfo.len;this._macActualLen=t.macInfo.actualLen;this._aadLen=t.macInfo.isETM?4:0;this._instance=new I(t.cipherInfo.sslName,t.cipherKey,t.cipherIV,t.macInfo.sslName,t.macKey,t.macInfo.isETM);this._dead=false}free(){this._dead=true;this._instance.free()}allocPacket(e){const t=this._encBlockLen;let r=4+1+e;let n=t-(r-this._aadLen&t-1);if(n<4)n+=t;r+=n;const i=Buffer.allocUnsafe(r+this._macLen);p(i,r-4,0);i[4]=n;o(i,5+e,n);return i}encrypt(e){if(this._dead)return;this._instance.encrypt(e,this.outSeqno);if(this._macActualLen<this._macLen){e=new g(e.buffer,e.byteOffset,e.length-(this._macLen-this._macActualLen))}this._onWrite(e);this.outSeqno=this.outSeqno+1>>>0}}class NullDecipher{constructor(e,t){this.inSeqno=e;this._onPayload=t;this._len=0;this._lenBytes=0;this._packet=null;this._packetPos=0}free(){}decrypt(e,t,r){while(t<r){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,r-t);this._lenBytes+=n;while(n--)this._len=(this._len<<8)+e[t++];if(this._lenBytes<4)return;if(this._len>E||this._len<8||(4+this._len&7)!==0){throw new Error("Bad packet length")}if(t>=r)return}if(this._packetPos<this._len){const n=Math.min(this._len-this._packetPos,r-t);let i;if(t!==0||n!==r)i=new Uint8Array(e.buffer,e.byteOffset+t,n);else i=e;if(n===this._len){this._packet=i}else{if(!this._packet)this._packet=Buffer.allocUnsafe(this._len);this._packet.set(i,this._packetPos)}t+=n;this._packetPos+=n;if(this._packetPos<this._len)return}const n=!this._packet?y:new g(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0;this._len=0;this._lenBytes=0;this._packet=null;this._packetPos=0;{const e=this._onPayload(n);if(e!==undefined)return e===false?t:e}}}}class ChaChaPolyDecipherNative{constructor(e){const t=e.inbound;this.inSeqno=t.seqno;this._onPayload=t.onPayload;this._decKeyMain=t.decipherKey.slice(0,32);this._decKeyPktLen=t.decipherKey.slice(32);this._len=0;this._lenBuf=Buffer.alloc(4);this._lenPos=0;this._packet=null;this._pktLen=0;this._mac=Buffer.allocUnsafe(16);this._calcMac=Buffer.allocUnsafe(16);this._macPos=0}free(){}decrypt(e,t,r){while(t<r){if(this._lenPos<4){let n=Math.min(4-this._lenPos,r-t);while(n--)this._lenBuf[this._lenPos++]=e[t++];if(this._lenPos<4)return;L[0]=0;p(L,this.inSeqno,12);const s=i("chacha20",this._decKeyPktLen,L).update(this._lenBuf);this._len=u(s,0);if(this._len>E||this._len<8||(this._len&7)!==0){throw new Error("Bad packet length")}}if(this._pktLen<this._len){if(t>=r)return;const n=Math.min(this._len-this._pktLen,r-t);let i;if(t!==0||n!==r)i=new Uint8Array(e.buffer,e.byteOffset+t,n);else i=e;if(n===this._len){this._packet=i}else{if(!this._packet)this._packet=Buffer.allocUnsafe(this._len);this._packet.set(i,this._pktLen)}t+=n;this._pktLen+=n;if(this._pktLen<this._len||t>=r)return}{const n=Math.min(16-this._macPos,r-t);if(t!==0||n!==r){this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._macPos)}else{this._mac.set(e,this._macPos)}t+=n;this._macPos+=n;if(this._macPos<16)return}L[0]=0;p(L,this.inSeqno,12);const s=n("chacha20",this._decKeyMain,L).update(D);j(U,this._lenBuf,4,this._packet,this._packet.length,s);this._calcMac.set(new Uint8Array(x.HEAPU8.buffer,U,16),0);if(!l(this._calcMac,this._mac))throw new Error("Invalid MAC");L[0]=1;const o=i("chacha20",this._decKeyMain,L).update(this._packet);const m=new g(o.buffer,o.byteOffset+1,o.length-o[0]-1);this.inSeqno=this.inSeqno+1>>>0;this._len=0;this._lenPos=0;this._packet=null;this._pktLen=0;this._macPos=0;{const e=this._onPayload(m);if(e!==undefined)return e===false?t:e}}}}class ChaChaPolyDecipherBinding{constructor(e){const t=e.inbound;this.inSeqno=t.seqno;this._onPayload=t.onPayload;this._instance=new k(t.decipherKey);this._len=0;this._lenBuf=Buffer.alloc(4);this._lenPos=0;this._packet=null;this._pktLen=0;this._mac=Buffer.allocUnsafe(16);this._macPos=0}free(){this._instance.free()}decrypt(e,t,r){while(t<r){if(this._lenPos<4){let n=Math.min(4-this._lenPos,r-t);while(n--)this._lenBuf[this._lenPos++]=e[t++];if(this._lenPos<4)return;this._len=this._instance.decryptLen(this._lenBuf,this.inSeqno);if(this._len>E||this._len<8||(this._len&7)!==0){throw new Error("Bad packet length")}if(t>=r)return}if(this._pktLen<this._len){const n=Math.min(this._len-this._pktLen,r-t);let i;if(t!==0||n!==r)i=new Uint8Array(e.buffer,e.byteOffset+t,n);else i=e;if(n===this._len){this._packet=i}else{if(!this._packet)this._packet=Buffer.allocUnsafe(this._len);this._packet.set(i,this._pktLen)}t+=n;this._pktLen+=n;if(this._pktLen<this._len||t>=r)return}{const n=Math.min(16-this._macPos,r-t);if(t!==0||n!==r){this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._macPos)}else{this._mac.set(e,this._macPos)}t+=n;this._macPos+=n;if(this._macPos<16)return}this._instance.decrypt(this._packet,this._mac,this.inSeqno);const n=new g(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0;this._len=0;this._lenPos=0;this._packet=null;this._pktLen=0;this._macPos=0;{const e=this._onPayload(n);if(e!==undefined)return e===false?t:e}}}}class AESGCMDecipherNative{constructor(e){const t=e.inbound;this.inSeqno=t.seqno;this._onPayload=t.onPayload;this._decipherInstance=null;this._decipherSSLName=t.decipherInfo.sslName;this._decipherKey=t.decipherKey;this._decipherIV=t.decipherIV;this._len=0;this._lenBytes=0;this._packet=null;this._packetPos=0;this._pktLen=0;this._tag=Buffer.allocUnsafe(16);this._tagPos=0}free(){}decrypt(e,t,r){while(t<r){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,r-t);this._lenBytes+=n;while(n--)this._len=(this._len<<8)+e[t++];if(this._lenBytes<4)return;if(this._len+20>E||this._len<16||(this._len&15)!==0){throw new Error("Bad packet length")}this._decipherInstance=i(this._decipherSSLName,this._decipherKey,this._decipherIV);this._decipherInstance.setAutoPadding(false);this._decipherInstance.setAAD(W(this._len))}if(this._pktLen<this._len){if(t>=r)return;const n=Math.min(this._len-this._pktLen,r-t);let i;if(t!==0||n!==r){i=this._decipherInstance.update(new Uint8Array(e.buffer,e.byteOffset+t,n))}else{i=this._decipherInstance.update(e)}if(i.length){if(n===this._len){this._packet=i}else{if(!this._packet)this._packet=Buffer.allocUnsafe(this._len);this._packet.set(i,this._packetPos)}this._packetPos+=i.length}t+=n;this._pktLen+=n;if(this._pktLen<this._len||t>=r)return}{const n=Math.min(16-this._tagPos,r-t);if(t!==0||n!==r){this._tag.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._tagPos)}else{this._tag.set(e,this._tagPos)}t+=n;this._tagPos+=n;if(this._tagPos<16)return}{this._decipherInstance.setAuthTag(this._tag);const e=this._decipherInstance.final();if(e.length){if(this._packet)this._packet.set(e,this._packetPos);else this._packet=e}}const n=!this._packet?y:new g(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0;ivIncrement(this._decipherIV);this._len=0;this._lenBytes=0;this._packet=null;this._packetPos=0;this._pktLen=0;this._tagPos=0;{const e=this._onPayload(n);if(e!==undefined)return e===false?t:e}}}}class AESGCMDecipherBinding{constructor(e){const t=e.inbound;this.inSeqno=t.seqno;this._onPayload=t.onPayload;this._instance=new T(t.decipherInfo.sslName,t.decipherKey,t.decipherIV);this._len=0;this._lenBytes=0;this._packet=null;this._pktLen=0;this._tag=Buffer.allocUnsafe(16);this._tagPos=0}free(){}decrypt(e,t,r){while(t<r){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,r-t);this._lenBytes+=n;while(n--)this._len=(this._len<<8)+e[t++];if(this._lenBytes<4)return;if(this._len+20>E||this._len<16||(this._len&15)!==0){throw new Error(`Bad packet length: ${this._len}`)}}if(this._pktLen<this._len){if(t>=r)return;const n=Math.min(this._len-this._pktLen,r-t);let i;if(t!==0||n!==r)i=new Uint8Array(e.buffer,e.byteOffset+t,n);else i=e;if(n===this._len){this._packet=i}else{if(!this._packet)this._packet=Buffer.allocUnsafe(this._len);this._packet.set(i,this._pktLen)}t+=n;this._pktLen+=n;if(this._pktLen<this._len||t>=r)return}{const n=Math.min(16-this._tagPos,r-t);if(t!==0||n!==r){this._tag.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._tagPos)}else{this._tag.set(e,this._tagPos)}t+=n;this._tagPos+=n;if(this._tagPos<16)return}this._instance.decrypt(this._packet,this._len,this._tag);const n=new g(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0;this._len=0;this._lenBytes=0;this._packet=null;this._pktLen=0;this._tagPos=0;{const e=this._onPayload(n);if(e!==undefined)return e===false?t:e}}}}class GenericDecipherNative{constructor(e){const t=e.inbound;this.inSeqno=t.seqno;this._onPayload=t.onPayload;this._decipherInstance=i(t.decipherInfo.sslName,t.decipherKey,t.decipherIV);this._decipherInstance.setAutoPadding(false);this._block=Buffer.allocUnsafe(t.macInfo.isETM?4:t.decipherInfo.blockLen);this._blockSize=t.decipherInfo.blockLen;this._blockPos=0;this._len=0;this._packet=null;this._packetPos=0;this._pktLen=0;this._mac=Buffer.allocUnsafe(t.macInfo.actualLen);this._macPos=0;this._macSSLName=t.macInfo.sslName;this._macKey=t.macKey;this._macActualLen=t.macInfo.actualLen;this._macETM=t.macInfo.isETM;this._macInstance=null;const r=t.decipherInfo.discardLen;if(r){let e=v.get(r);if(e===undefined){e=Buffer.alloc(r);v.set(r,e)}this._decipherInstance.update(e)}}free(){}decrypt(e,t,r){while(t<r){if(this._blockPos<this._block.length){const n=Math.min(this._block.length-this._blockPos,r-t);if(t!==0||n!==r||n<e.length){this._block.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._blockPos)}else{this._block.set(e,this._blockPos)}t+=n;this._blockPos+=n;if(this._blockPos<this._block.length)return;let i;let o;if(this._macETM){this._len=o=u(this._block,0)}else{i=this._decipherInstance.update(this._block);this._len=u(i,0);o=4+this._len-this._blockSize}if(this._len>E||this._len<5||(o&this._blockSize-1)!==0){throw new Error("Bad packet length")}this._macInstance=s(this._macSSLName,this._macKey);p(_,this.inSeqno,0);this._macInstance.update(_);if(this._macETM){this._macInstance.update(this._block)}else{this._macInstance.update(new Uint8Array(i.buffer,i.byteOffset,4));this._pktLen=i.length-4;this._packetPos=this._pktLen;this._packet=Buffer.allocUnsafe(this._len);this._packet.set(new Uint8Array(i.buffer,i.byteOffset+4,this._packetPos),0)}if(t>=r)return}if(this._pktLen<this._len){const n=Math.min(this._len-this._pktLen,r-t);let i;if(t!==0||n!==r)i=new Uint8Array(e.buffer,e.byteOffset+t,n);else i=e;if(this._macETM)this._macInstance.update(i);const s=this._decipherInstance.update(i);if(s.length){if(n===this._len){this._packet=s}else{if(!this._packet)this._packet=Buffer.allocUnsafe(this._len);this._packet.set(s,this._packetPos)}this._packetPos+=s.length}t+=n;this._pktLen+=n;if(this._pktLen<this._len||t>=r)return}{const n=Math.min(this._macActualLen-this._macPos,r-t);if(t!==0||n!==r){this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._macPos)}else{this._mac.set(e,this._macPos)}t+=n;this._macPos+=n;if(this._macPos<this._macActualLen)return}if(!this._macETM)this._macInstance.update(this._packet);let n=this._macInstance.digest();if(this._macActualLen<n.length){n=new Uint8Array(n.buffer,n.byteOffset,this._macActualLen)}if(!timingSafeEquals(n,this._mac))throw new Error("Invalid MAC");const i=new g(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0;this._blockPos=0;this._len=0;this._packet=null;this._packetPos=0;this._pktLen=0;this._macPos=0;this._macInstance=null;{const e=this._onPayload(i);if(e!==undefined)return e===false?t:e}}}}class GenericDecipherBinding{constructor(e){const t=e.inbound;this.inSeqno=t.seqno;this._onPayload=t.onPayload;this._instance=new R(t.decipherInfo.sslName,t.decipherKey,t.decipherIV,t.macInfo.sslName,t.macKey,t.macInfo.isETM,t.macInfo.actualLen);this._block=Buffer.allocUnsafe(t.macInfo.isETM||t.decipherInfo.stream?4:t.decipherInfo.blockLen);this._blockPos=0;this._len=0;this._packet=null;this._pktLen=0;this._mac=Buffer.allocUnsafe(t.macInfo.actualLen);this._macPos=0;this._macActualLen=t.macInfo.actualLen;this._macETM=t.macInfo.isETM}free(){this._instance.free()}decrypt(e,t,r){while(t<r){if(this._blockPos<this._block.length){const n=Math.min(this._block.length-this._blockPos,r-t);if(t!==0||n!==r||n<e.length){this._block.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._blockPos)}else{this._block.set(e,this._blockPos)}t+=n;this._blockPos+=n;if(this._blockPos<this._block.length)return;let i;if(this._macETM){this._len=i=u(this._block,0)}else{this._instance.decryptBlock(this._block);this._len=u(this._block,0);i=4+this._len-this._block.length}if(this._len>E||this._len<5||(i&this._block.length-1)!==0){throw new Error("Bad packet length")}if(!this._macETM){this._pktLen=this._block.length-4;if(this._pktLen){this._packet=Buffer.allocUnsafe(this._len);this._packet.set(new Uint8Array(this._block.buffer,this._block.byteOffset+4,this._pktLen),0)}}if(t>=r)return}if(this._pktLen<this._len){const n=Math.min(this._len-this._pktLen,r-t);let i;if(t!==0||n!==r)i=new Uint8Array(e.buffer,e.byteOffset+t,n);else i=e;if(n===this._len){this._packet=i}else{if(!this._packet)this._packet=Buffer.allocUnsafe(this._len);this._packet.set(i,this._pktLen)}t+=n;this._pktLen+=n;if(this._pktLen<this._len||t>=r)return}{const n=Math.min(this._macActualLen-this._macPos,r-t);if(t!==0||n!==r){this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._macPos)}else{this._mac.set(e,this._macPos)}t+=n;this._macPos+=n;if(this._macPos<this._macActualLen)return}this._instance.decrypt(this._packet,this.inSeqno,this._block,this._mac);const n=new g(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0;this._blockPos=0;this._len=0;this._packet=null;this._pktLen=0;this._macPos=0;this._macInstance=null;{const e=this._onPayload(n);if(e!==undefined)return e===false?t:e}}}}function ivIncrement(e){++e[11]>>>8&&++e[10]>>>8&&++e[9]>>>8&&++e[8]>>>8&&++e[7]>>>8&&++e[6]>>>8&&++e[5]>>>8&&++e[4]>>>8}const W=(()=>{const e=Buffer.alloc(4);return t=>{e[0]=t>>>24;e[1]=t>>>16;e[2]=t>>>8;e[3]=t;return e}})();function timingSafeEquals(e,t){if(e.length!==t.length){l(e,e);return false}return l(e,t)}function createCipher(e){if(typeof e!=="object"||e===null)throw new Error("Invalid config");if(typeof e.outbound!=="object"||e.outbound===null)throw new Error("Invalid outbound");const t=e.outbound;if(typeof t.onWrite!=="function")throw new Error("Invalid outbound.onWrite");if(typeof t.cipherInfo!=="object"||t.cipherInfo===null)throw new Error("Invalid outbound.cipherInfo");if(!Buffer.isBuffer(t.cipherKey)||t.cipherKey.length!==t.cipherInfo.keyLen){throw new Error("Invalid outbound.cipherKey")}if(t.cipherInfo.ivLen&&(!Buffer.isBuffer(t.cipherIV)||t.cipherIV.length!==t.cipherInfo.ivLen)){throw new Error("Invalid outbound.cipherIV")}if(typeof t.seqno!=="number"||t.seqno<0||t.seqno>m){throw new Error("Invalid outbound.seqno")}const r=!!t.forceNative;switch(t.cipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return C&&!r?new AESGCMCipherBinding(e):new AESGCMCipherNative(e);case"chacha20":return w&&!r?new ChaChaPolyCipherBinding(e):new ChaChaPolyCipherNative(e);default:{if(typeof t.macInfo!=="object"||t.macInfo===null)throw new Error("Invalid outbound.macInfo");if(!Buffer.isBuffer(t.macKey)||t.macKey.length!==t.macInfo.len){throw new Error("Invalid outbound.macKey")}return I&&!r?new GenericCipherBinding(e):new GenericCipherNative(e)}}}function createDecipher(e){if(typeof e!=="object"||e===null)throw new Error("Invalid config");if(typeof e.inbound!=="object"||e.inbound===null)throw new Error("Invalid inbound");const t=e.inbound;if(typeof t.onPayload!=="function")throw new Error("Invalid inbound.onPayload");if(typeof t.decipherInfo!=="object"||t.decipherInfo===null){throw new Error("Invalid inbound.decipherInfo")}if(!Buffer.isBuffer(t.decipherKey)||t.decipherKey.length!==t.decipherInfo.keyLen){throw new Error("Invalid inbound.decipherKey")}if(t.decipherInfo.ivLen&&(!Buffer.isBuffer(t.decipherIV)||t.decipherIV.length!==t.decipherInfo.ivLen)){throw new Error("Invalid inbound.decipherIV")}if(typeof t.seqno!=="number"||t.seqno<0||t.seqno>m){throw new Error("Invalid inbound.seqno")}const r=!!t.forceNative;switch(t.decipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return T&&!r?new AESGCMDecipherBinding(e):new AESGCMDecipherNative(e);case"chacha20":return k&&!r?new ChaChaPolyDecipherBinding(e):new ChaChaPolyDecipherNative(e);default:{if(typeof t.macInfo!=="object"||t.macInfo===null)throw new Error("Invalid inbound.macInfo");if(!Buffer.isBuffer(t.macKey)||t.macKey.length!==t.macInfo.len){throw new Error("Invalid inbound.macKey")}return R&&!r?new GenericDecipherBinding(e):new GenericDecipherNative(e)}}}e.exports={CIPHER_INFO:P,MAC_INFO:B,bindingAvailable:!!b,init:(()=>new Promise((async(e,t)=>{try{x=await r(7830)();U=x._malloc(16);j=x.cwrap("poly1305_auth",null,["number","array","number","array","number","array"])}catch(e){return t(e)}e()})))(),NullCipher:NullCipher,createCipher:createCipher,NullDecipher:NullDecipher,createDecipher:createDecipher}},7830:(e,t,r)=>{var n=function(){var e=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:undefined;if(typeof __filename!=="undefined")e=e||__filename;return function(t){t=t||{};var n;n||(n=typeof t!=="undefined"?t:{});var i,s;n.ready=new Promise((function(e,t){i=e;s=t}));var o={},l;for(l in n)n.hasOwnProperty(l)&&(o[l]=n[l]);var u="object"===typeof window,p="function"===typeof importScripts,g="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,m="",y,_,v,E,b;if(g)m=p?r(6928).dirname(m)+"/":__dirname+"/",y=function(e,t){var n=H(e);if(n)return t?n:n.toString();E||(E=r(9896));b||(b=r(6928));e=b.normalize(e);return E.readFileSync(e,t?null:"utf8")},v=function(e){e=y(e,!0);e.buffer||(e=new Uint8Array(e));assert(e.buffer);return e},_=function(e,t,n){var i=H(e);i&&t(i);E||(E=r(9896));b||(b=r(6928));e=b.normalize(e);E.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),n.inspect=function(){return"[Emscripten Module object]"};else if(u||p)p?m=self.location.href:"undefined"!==typeof document&&document.currentScript&&(m=document.currentScript.src),e&&(m=e),0!==m.indexOf("blob:")?m=m.substr(0,m.lastIndexOf("/")+1):m="",y=function(e){try{var t=new XMLHttpRequest;t.open("GET",e,!1);t.send(null);return t.responseText}catch(i){if(e=H(e)){t=[];for(var r=0;r<e.length;r++){var n=e[r];255<n&&($&&assert(!1,"Character code "+n+" ("+String.fromCharCode(n)+")  at offset "+r+" not in 0x00-0xFF."),n&=255);t.push(String.fromCharCode(n))}return t.join("")}throw i}},p&&(v=function(e){try{var t=new XMLHttpRequest;t.open("GET",e,!1);t.responseType="arraybuffer";t.send(null);return new Uint8Array(t.response)}catch(t){if(e=H(e))return e;throw t}}),_=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0);n.responseType="arraybuffer";n.onload=function(){if(200==n.status||0==n.status&&n.response)t(n.response);else{var i=H(e);i?t(i.buffer):r()}};n.onerror=r;n.send(null)};n.print||console.log.bind(console);var C=n.printErr||console.warn.bind(console);for(l in o)o.hasOwnProperty(l)&&(n[l]=o[l]);o=null;var w;n.wasmBinary&&(w=n.wasmBinary);var I=n.noExitRuntime||!0;"object"!==typeof WebAssembly&&K("no native wasm support detected");var T,k=!1;function assert(e,t){e||K("Assertion failed: "+t)}function N(e){var t=n["_"+e];assert(t,"Cannot call unknown function "+e+", make sure it is exported");return t}function ca(e,t,r,n){var i={string:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var r=(e.length<<2)+1;t=te(r);var n=t,i=B;if(0<r){r=n+r-1;for(var s=0;s<e.length;++s){var o=e.charCodeAt(s);if(55296<=o&&57343>=o){var l=e.charCodeAt(++s);o=65536+((o&1023)<<10)|l&1023}if(127>=o){if(n>=r)break;i[n++]=o}else{if(2047>=o){if(n+1>=r)break;i[n++]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;i[n++]=224|o>>12}else{if(n+3>=r)break;i[n++]=240|o>>18;i[n++]=128|o>>12&63}i[n++]=128|o>>6&63}i[n++]=128|o&63}}i[n]=0}}return t},array:function(e){var t=te(e.length);P.set(e,t);return t}},s=N(e),o=[];e=0;if(n)for(var l=0;l<n.length;l++){var u=i[r[l]];u?(0===e&&(e=J()),o[l]=u(n[l])):o[l]=n[l]}r=s.apply(null,o);r=function(e){if("string"===t)if(e){for(var r=B,n=e+NaN,i=e;r[i]&&!(i>=n);)++i;if(16<i-e&&r.subarray&&R)e=R.decode(r.subarray(e,i));else{for(n="";e<i;){var s=r[e++];if(s&128){var o=r[e++]&63;if(192==(s&224))n+=String.fromCharCode((s&31)<<6|o);else{var l=r[e++]&63;s=224==(s&240)?(s&15)<<12|o<<6|l:(s&7)<<18|o<<12|l<<6|r[e++]&63;65536>s?n+=String.fromCharCode(s):(s-=65536,n+=String.fromCharCode(55296|s>>10,56320|s&1023))}}else n+=String.fromCharCode(s)}e=n}}else e="";else e="boolean"===t?!!e:e;return e}(r);0!==e&&ee(e);return r}var R="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0,O,P,B;function ia(){var e=T.buffer;O=e;n.HEAP8=P=new Int8Array(e);n.HEAP16=new Int16Array(e);n.HEAP32=new Int32Array(e);n.HEAPU8=B=new Uint8Array(e);n.HEAPU16=new Uint16Array(e);n.HEAPU32=new Uint32Array(e);n.HEAPF32=new Float32Array(e);n.HEAPF64=new Float64Array(e)}var D,L=[],x=[],U=[];function ma(){var e=n.preRun.shift();L.unshift(e)}var j=0,W=null,Q=null;n.preloadedImages={};n.preloadedAudios={};function K(e){if(n.onAbort)n.onAbort(e);C(e);k=!0;e=new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info.");s(e);throw e}var q="data:application/octet-stream;base64,",z;z="data:application/octet-stream;base64,AGFzbQEAAAABIAZgAX8Bf2ADf39/AGABfwBgAABgAAF/YAZ/f39/f38AAgcBAWEBYQAAAwsKAAEDAQAAAgQFAgQFAXABAQEFBwEBgAKAgAIGCQF/AUGAjMACCwclCQFiAgABYwADAWQACQFlAAgBZgAHAWcABgFoAAUBaQAKAWoBAAqGTQpPAQJ/QYAIKAIAIgEgAEEDakF8cSICaiEAAkAgAkEAIAAgAU0bDQAgAD8AQRB0SwRAIAAQAEUNAQtBgAggADYCACABDwtBhAhBMDYCAEF/C4wFAg5+Cn8gACgCJCEUIAAoAiAhFSAAKAIcIREgACgCGCESIAAoAhQhEyACQRBPBEAgAC0ATEVBGHQhFyAAKAIEIhZBBWytIQ8gACgCCCIYQQVsrSENIAAoAgwiGUEFbK0hCyAAKAIQIhpBBWytIQkgADUCACEIIBqtIRAgGa0hDiAYrSEMIBatIQoDQCASIAEtAAMiEiABLQAEQQh0ciABLQAFQRB0ciABLQAGIhZBGHRyQQJ2Qf///x9xaq0iAyAOfiABLwAAIAEtAAJBEHRyIBNqIBJBGHRBgICAGHFqrSIEIBB+fCARIAEtAAdBCHQgFnIgAS0ACEEQdHIgAS0ACSIRQRh0ckEEdkH///8fcWqtIgUgDH58IAEtAApBCHQgEXIgAS0AC0EQdHIgAS0ADEEYdHJBBnYgFWqtIgYgCn58IBQgF2ogAS8ADSABLQAPQRB0cmqtIgcgCH58IAMgDH4gBCAOfnwgBSAKfnwgBiAIfnwgByAJfnwgAyAKfiAEIAx+fCAFIAh+fCAGIAl+fCAHIAt+fCADIAh+IAQgCn58IAUgCX58IAYgC358IAcgDX58IAMgCX4gBCAIfnwgBSALfnwgBiANfnwgByAPfnwiA0IaiEL/////D4N8IgRCGohC/////w+DfCIFQhqIQv////8Pg3wiBkIaiEL/////D4N8IgdCGoinQQVsIAOnQf///x9xaiITQRp2IASnQf///x9xaiESIAWnQf///x9xIREgBqdB////H3EhFSAHp0H///8fcSEUIBNB////H3EhEyABQRBqIQEgAkEQayICQQ9LDQALCyAAIBQ2AiQgACAVNgIgIAAgETYCHCAAIBI2AhggACATNgIUCwMAAQu2BAEGfwJAIAAoAjgiBARAIABBPGohBQJAIAJBECAEayIDIAIgA0kbIgZFDQAgBkEDcSEHAkAgBkEBa0EDSQRAQQAhAwwBCyAGQXxxIQhBACEDA0AgBSADIARqaiABIANqLQAAOgAAIAUgA0EBciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0ECciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0EDciIEIAAoAjhqaiABIARqLQAAOgAAIANBBGohAyAAKAI4IQQgCEEEayIIDQALCyAHRQ0AA0AgBSADIARqaiABIANqLQAAOgAAIANBAWohAyAAKAI4IQQgB0EBayIHDQALCyAAIAQgBmoiAzYCOCADQRBJDQEgACAFQRAQAiAAQQA2AjggAiAGayECIAEgBmohAQsgAkEQTwRAIAAgASACQXBxIgMQAiACQQ9xIQIgASADaiEBCyACRQ0AIAJBA3EhBCAAQTxqIQVBACEDIAJBAWtBA08EQCACQXxxIQcDQCAFIAAoAjggA2pqIAEgA2otAAA6AAAgBSADQQFyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQJyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQNyIgYgACgCOGpqIAEgBmotAAA6AAAgA0EEaiEDIAdBBGsiBw0ACwsgBARAA0AgBSAAKAI4IANqaiABIANqLQAAOgAAIANBAWohAyAEQQFrIgQNAAsLIAAgACgCOCACajYCOAsLoS0BDH8jAEEQayIMJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEGICCgCACIFQRAgAEELakF4cSAAQQtJGyIIQQN2IgJ2IgFBA3EEQCABQX9zQQFxIAJqIgNBA3QiAUG4CGooAgAiBEEIaiEAAkAgBCgCCCICIAFBsAhqIgFGBEBBiAggBUF+IAN3cTYCAAwBCyACIAE2AgwgASACNgIICyAEIANBA3QiAUEDcjYCBCABIARqIgEgASgCBEEBcjYCBAwNCyAIQZAIKAIAIgpNDQEgAQRAAkBBAiACdCIAQQAgAGtyIAEgAnRxIgBBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2aiIDQQN0IgBBuAhqKAIAIgQoAggiASAAQbAIaiIARgRAQYgIIAVBfiADd3EiBTYCAAwBCyABIAA2AgwgACABNgIICyAEQQhqIQAgBCAIQQNyNgIEIAQgCGoiAiADQQN0IgEgCGsiA0EBcjYCBCABIARqIAM2AgAgCgRAIApBA3YiAUEDdEGwCGohB0GcCCgCACEEAn8gBUEBIAF0IgFxRQRAQYgIIAEgBXI2AgAgBwwBCyAHKAIICyEBIAcgBDYCCCABIAQ2AgwgBCAHNgIMIAQgATYCCAtBnAggAjYCAEGQCCADNgIADA0LQYwIKAIAIgZFDQEgBkEAIAZrcUEBayIAIABBDHZBEHEiAnYiAUEFdkEIcSIAIAJyIAEgAHYiAUECdkEEcSIAciABIAB2IgFBAXZBAnEiAHIgASAAdiIBQQF2QQFxIgByIAEgAHZqQQJ0QbgKaigCACIBKAIEQXhxIAhrIQMgASECA0ACQCACKAIQIgBFBEAgAigCFCIARQ0BCyAAKAIEQXhxIAhrIgIgAyACIANJIgIbIQMgACABIAIbIQEgACECDAELCyABIAhqIgkgAU0NAiABKAIYIQsgASABKAIMIgRHBEAgASgCCCIAQZgIKAIASRogACAENgIMIAQgADYCCAwMCyABQRRqIgIoAgAiAEUEQCABKAIQIgBFDQQgAUEQaiECCwNAIAIhByAAIgRBFGoiAigCACIADQAgBEEQaiECIAQoAhAiAA0ACyAHQQA2AgAMCwtBfyEIIABBv39LDQAgAEELaiIAQXhxIQhBjAgoAgAiCUUNAEEAIAhrIQMCQAJAAkACf0EAIAhBgAJJDQAaQR8gCEH///8HSw0AGiAAQQh2IgAgAEGA/j9qQRB2QQhxIgJ0IgAgAEGA4B9qQRB2QQRxIgF0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAEgAnIgAHJrIgBBAXQgCCAAQRVqdkEBcXJBHGoLIgVBAnRBuApqKAIAIgJFBEBBACEADAELQQAhACAIQQBBGSAFQQF2ayAFQR9GG3QhAQNAAkAgAigCBEF4cSAIayIHIANPDQAgAiEEIAciAw0AQQAhAyACIQAMAwsgACACKAIUIgcgByACIAFBHXZBBHFqKAIQIgJGGyAAIAcbIQAgAUEBdCEBIAINAAsLIAAgBHJFBEBBACEEQQIgBXQiAEEAIABrciAJcSIARQ0DIABBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2akECdEG4CmooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIAhrIgEgA0khAiABIAMgAhshAyAAIAQgAhshBCAAKAIQIgEEfyABBSAAKAIUCyIADQALCyAERQ0AIANBkAgoAgAgCGtPDQAgBCAIaiIGIARNDQEgBCgCGCEFIAQgBCgCDCIBRwRAIAQoAggiAEGYCCgCAEkaIAAgATYCDCABIAA2AggMCgsgBEEUaiICKAIAIgBFBEAgBCgCECIARQ0EIARBEGohAgsDQCACIQcgACIBQRRqIgIoAgAiAA0AIAFBEGohAiABKAIQIgANAAsgB0EANgIADAkLIAhBkAgoAgAiAk0EQEGcCCgCACEDAkAgAiAIayIBQRBPBEBBkAggATYCAEGcCCADIAhqIgA2AgAgACABQQFyNgIEIAIgA2ogATYCACADIAhBA3I2AgQMAQtBnAhBADYCAEGQCEEANgIAIAMgAkEDcjYCBCACIANqIgAgACgCBEEBcjYCBAsgA0EIaiEADAsLIAhBlAgoAgAiBkkEQEGUCCAGIAhrIgE2AgBBoAhBoAgoAgAiAiAIaiIANgIAIAAgAUEBcjYCBCACIAhBA3I2AgQgAkEIaiEADAsLQQAhACAIQS9qIgkCf0HgCygCAARAQegLKAIADAELQewLQn83AgBB5AtCgKCAgICABDcCAEHgCyAMQQxqQXBxQdiq1aoFczYCAEH0C0EANgIAQcQLQQA2AgBBgCALIgFqIgVBACABayIHcSICIAhNDQpBwAsoAgAiBARAQbgLKAIAIgMgAmoiASADTQ0LIAEgBEsNCwtBxAstAABBBHENBQJAAkBBoAgoAgAiAwRAQcgLIQADQCADIAAoAgAiAU8EQCABIAAoAgRqIANLDQMLIAAoAggiAA0ACwtBABABIgFBf0YNBiACIQVB5AsoAgAiA0EBayIAIAFxBEAgAiABayAAIAFqQQAgA2txaiEFCyAFIAhNDQYgBUH+////B0sNBkHACygCACIEBEBBuAsoAgAiAyAFaiIAIANNDQcgACAESw0HCyAFEAEiACABRw0BDAgLIAUgBmsgB3EiBUH+////B0sNBSAFEAEiASAAKAIAIAAoAgRqRg0EIAEhAAsCQCAAQX9GDQAgCEEwaiAFTQ0AQegLKAIAIgEgCSAFa2pBACABa3EiAUH+////B0sEQCAAIQEMCAsgARABQX9HBEAgASAFaiEFIAAhAQwIC0EAIAVrEAEaDAULIAAiAUF/Rw0GDAQLAAtBACEEDAcLQQAhAQwFCyABQX9HDQILQcQLQcQLKAIAQQRyNgIACyACQf7///8HSw0BIAIQASEBQQAQASEAIAFBf0YNASAAQX9GDQEgACABTQ0BIAAgAWsiBSAIQShqTQ0BC0G4C0G4CygCACAFaiIANgIAQbwLKAIAIABJBEBBvAsgADYCAAsCQAJAAkBBoAgoAgAiBwRAQcgLIQADQCABIAAoAgAiAyAAKAIEIgJqRg0CIAAoAggiAA0ACwwCC0GYCCgCACIAQQAgACABTRtFBEBBmAggATYCAAtBACEAQcwLIAU2AgBByAsgATYCAEGoCEF/NgIAQawIQeALKAIANgIAQdQLQQA2AgADQCAAQQN0IgNBuAhqIANBsAhqIgI2AgAgA0G8CGogAjYCACAAQQFqIgBBIEcNAAtBlAggBUEoayIDQXggAWtBB3FBACABQQhqQQdxGyIAayICNgIAQaAIIAAgAWoiADYCACAAIAJBAXI2AgQgASADakEoNgIEQaQIQfALKAIANgIADAILIAAtAAxBCHENACADIAdLDQAgASAHTQ0AIAAgAiAFajYCBEGgCCAHQXggB2tBB3FBACAHQQhqQQdxGyIAaiICNgIAQZQIQZQIKAIAIAVqIgEgAGsiADYCACACIABBAXI2AgQgASAHakEoNgIEQaQIQfALKAIANgIADAELQZgIKAIAIAFLBEBBmAggATYCAAsgASAFaiECQcgLIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQcgLIQADQCAHIAAoAgAiAk8EQCACIAAoAgRqIgQgB0sNAwsgACgCCCEADAALAAsgACABNgIAIAAgACgCBCAFajYCBCABQXggAWtBB3FBACABQQhqQQdxG2oiCSAIQQNyNgIEIAJBeCACa0EHcUEAIAJBCGpBB3EbaiIFIAggCWoiBmshAiAFIAdGBEBBoAggBjYCAEGUCEGUCCgCACACaiIANgIAIAYgAEEBcjYCBAwDCyAFQZwIKAIARgRAQZwIIAY2AgBBkAhBkAgoAgAgAmoiADYCACAGIABBAXI2AgQgACAGaiAANgIADAMLIAUoAgQiAEEDcUEBRgRAIABBeHEhBwJAIABB/wFNBEAgBSgCCCIDIABBA3YiAEEDdEGwCGpGGiADIAUoAgwiAUYEQEGICEGICCgCAEF+IAB3cTYCAAwCCyADIAE2AgwgASADNgIIDAELIAUoAhghCAJAIAUgBSgCDCIBRwRAIAUoAggiACABNgIMIAEgADYCCAwBCwJAIAVBFGoiACgCACIDDQAgBUEQaiIAKAIAIgMNAEEAIQEMAQsDQCAAIQQgAyIBQRRqIgAoAgAiAw0AIAFBEGohACABKAIQIgMNAAsgBEEANgIACyAIRQ0AAkAgBSAFKAIcIgNBAnRBuApqIgAoAgBGBEAgACABNgIAIAENAUGMCEGMCCgCAEF+IAN3cTYCAAwCCyAIQRBBFCAIKAIQIAVGG2ogATYCACABRQ0BCyABIAg2AhggBSgCECIABEAgASAANgIQIAAgATYCGAsgBSgCFCIARQ0AIAEgADYCFCAAIAE2AhgLIAUgB2ohBSACIAdqIQILIAUgBSgCBEF+cTYCBCAGIAJBAXI2AgQgAiAGaiACNgIAIAJB/wFNBEAgAkEDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwDC0EfIQAgAkH///8HTQRAIAJBCHYiACAAQYD+P2pBEHZBCHEiA3QiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASADciAAcmsiAEEBdCACIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQQCQEGMCCgCACIDQQEgAHQiAXFFBEBBjAggASADcjYCACAEIAY2AgAgBiAENgIYDAELIAJBAEEZIABBAXZrIABBH0YbdCEAIAQoAgAhAQNAIAEiAygCBEF4cSACRg0DIABBHXYhASAAQQF0IQAgAyABQQRxaiIEKAIQIgENAAsgBCAGNgIQIAYgAzYCGAsgBiAGNgIMIAYgBjYCCAwCC0GUCCAFQShrIgNBeCABa0EHcUEAIAFBCGpBB3EbIgBrIgI2AgBBoAggACABaiIANgIAIAAgAkEBcjYCBCABIANqQSg2AgRBpAhB8AsoAgA2AgAgByAEQScgBGtBB3FBACAEQSdrQQdxG2pBL2siACAAIAdBEGpJGyICQRs2AgQgAkHQCykCADcCECACQcgLKQIANwIIQdALIAJBCGo2AgBBzAsgBTYCAEHICyABNgIAQdQLQQA2AgAgAkEYaiEAA0AgAEEHNgIEIABBCGohASAAQQRqIQAgASAESQ0ACyACIAdGDQMgAiACKAIEQX5xNgIEIAcgAiAHayIEQQFyNgIEIAIgBDYCACAEQf8BTQRAIARBA3YiAEEDdEGwCGohAgJ/QYgIKAIAIgFBASAAdCIAcUUEQEGICCAAIAFyNgIAIAIMAQsgAigCCAshACACIAc2AgggACAHNgIMIAcgAjYCDCAHIAA2AggMBAtBHyEAIAdCADcCECAEQf///wdNBEAgBEEIdiIAIABBgP4/akEQdkEIcSICdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIAJyIAByayIAQQF0IAQgAEEVanZBAXFyQRxqIQALIAcgADYCHCAAQQJ0QbgKaiEDAkBBjAgoAgAiAkEBIAB0IgFxRQRAQYwIIAEgAnI2AgAgAyAHNgIAIAcgAzYCGAwBCyAEQQBBGSAAQQF2ayAAQR9GG3QhACADKAIAIQEDQCABIgIoAgRBeHEgBEYNBCAAQR12IQEgAEEBdCEAIAIgAUEEcWoiAygCECIBDQALIAMgBzYCECAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAwsgAygCCCIAIAY2AgwgAyAGNgIIIAZBADYCGCAGIAM2AgwgBiAANgIICyAJQQhqIQAMBQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIIC0GUCCgCACIAIAhNDQBBlAggACAIayIBNgIAQaAIQaAIKAIAIgIgCGoiADYCACAAIAFBAXI2AgQgAiAIQQNyNgIEIAJBCGohAAwDC0GECEEwNgIAQQAhAAwCCwJAIAVFDQACQCAEKAIcIgJBAnRBuApqIgAoAgAgBEYEQCAAIAE2AgAgAQ0BQYwIIAlBfiACd3EiCTYCAAwCCyAFQRBBFCAFKAIQIARGG2ogATYCACABRQ0BCyABIAU2AhggBCgCECIABEAgASAANgIQIAAgATYCGAsgBCgCFCIARQ0AIAEgADYCFCAAIAE2AhgLAkAgA0EPTQRAIAQgAyAIaiIAQQNyNgIEIAAgBGoiACAAKAIEQQFyNgIEDAELIAQgCEEDcjYCBCAGIANBAXI2AgQgAyAGaiADNgIAIANB/wFNBEAgA0EDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwBC0EfIQAgA0H///8HTQRAIANBCHYiACAAQYD+P2pBEHZBCHEiAnQiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASACciAAcmsiAEEBdCADIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQICQAJAIAlBASAAdCIBcUUEQEGMCCABIAlyNgIAIAIgBjYCACAGIAI2AhgMAQsgA0EAQRkgAEEBdmsgAEEfRht0IQAgAigCACEIA0AgCCIBKAIEQXhxIANGDQIgAEEddiECIABBAXQhACABIAJBBHFqIgIoAhAiCA0ACyACIAY2AhAgBiABNgIYCyAGIAY2AgwgBiAGNgIIDAELIAEoAggiACAGNgIMIAEgBjYCCCAGQQA2AhggBiABNgIMIAYgADYCCAsgBEEIaiEADAELAkAgC0UNAAJAIAEoAhwiAkECdEG4CmoiACgCACABRgRAIAAgBDYCACAEDQFBjAggBkF+IAJ3cTYCAAwCCyALQRBBFCALKAIQIAFGG2ogBDYCACAERQ0BCyAEIAs2AhggASgCECIABEAgBCAANgIQIAAgBDYCGAsgASgCFCIARQ0AIAQgADYCFCAAIAQ2AhgLAkAgA0EPTQRAIAEgAyAIaiIAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIEDAELIAEgCEEDcjYCBCAJIANBAXI2AgQgAyAJaiADNgIAIAoEQCAKQQN2IgBBA3RBsAhqIQRBnAgoAgAhAgJ/QQEgAHQiACAFcUUEQEGICCAAIAVyNgIAIAQMAQsgBCgCCAshACAEIAI2AgggACACNgIMIAIgBDYCDCACIAA2AggLQZwIIAk2AgBBkAggAzYCAAsgAUEIaiEACyAMQRBqJAAgAAsQACMAIABrQXBxIgAkACAACwYAIAAkAAsEACMAC4AJAgh/BH4jAEGQAWsiBiQAIAYgBS0AA0EYdEGAgIAYcSAFLwAAIAUtAAJBEHRycjYCACAGIAUoAANBAnZBg/7/H3E2AgQgBiAFKAAGQQR2Qf+B/x9xNgIIIAYgBSgACUEGdkH//8AfcTYCDCAFLwANIQggBS0ADyEJIAZCADcCFCAGQgA3AhwgBkEANgIkIAYgCCAJQRB0QYCAPHFyNgIQIAYgBSgAEDYCKCAGIAUoABQ2AiwgBiAFKAAYNgIwIAUoABwhBSAGQQA6AEwgBkEANgI4IAYgBTYCNCAGIAEgAhAEIAQEQCAGIAMgBBAECyAGKAI4IgEEQCAGQTxqIgIgAWpBAToAACABQQFqQQ9NBEAgASAGakE9aiEEAkBBDyABayIDRQ0AIAMgBGoiAUEBa0EAOgAAIARBADoAACADQQNJDQAgAUECa0EAOgAAIARBADoAASABQQNrQQA6AAAgBEEAOgACIANBB0kNACABQQRrQQA6AAAgBEEAOgADIANBCUkNACAEQQAgBGtBA3EiAWoiBEEANgIAIAQgAyABa0F8cSIBaiIDQQRrQQA2AgAgAUEJSQ0AIARBADYCCCAEQQA2AgQgA0EIa0EANgIAIANBDGtBADYCACABQRlJDQAgBEEANgIYIARBADYCFCAEQQA2AhAgBEEANgIMIANBEGtBADYCACADQRRrQQA2AgAgA0EYa0EANgIAIANBHGtBADYCACABIARBBHFBGHIiAWsiA0EgSQ0AIAEgBGohAQNAIAFCADcDGCABQgA3AxAgAUIANwMIIAFCADcDACABQSBqIQEgA0EgayIDQR9LDQALCwsgBkEBOgBMIAYgAkEQEAILIAY1AjQhECAGNQIwIREgBjUCLCEOIAAgBjUCKCAGKAIkIAYoAiAgBigCHCAGKAIYIgNBGnZqIgJBGnZqIgFBGnZqIgtBgICAYHIgAUH///8fcSINIAJB////H3EiCCAGKAIUIAtBGnZBBWxqIgFB////H3EiCUEFaiIFQRp2IANB////H3EgAUEadmoiA2oiAUEadmoiAkEadmoiBEEadmoiDEEfdSIHIANxIAEgDEEfdkEBayIDQf///x9xIgpxciIBQRp0IAUgCnEgByAJcXJyrXwiDzwAACAAIA9CGIg8AAMgACAPQhCIPAACIAAgD0IIiDwAASAAIA4gByAIcSACIApxciICQRR0IAFBBnZyrXwgD0IgiHwiDjwABCAAIA5CGIg8AAcgACAOQhCIPAAGIAAgDkIIiDwABSAAIBEgByANcSAEIApxciIBQQ50IAJBDHZyrXwgDkIgiHwiDjwACCAAIA5CGIg8AAsgACAOQhCIPAAKIAAgDkIIiDwACSAAIBAgAyAMcSAHIAtxckEIdCABQRJ2cq18IA5CIIh8Ig48AAwgACAOQhiIPAAPIAAgDkIQiDwADiAAIA5CCIg8AA0gBkIANwIwIAZCADcCKCAGQgA3AiAgBkIANwIYIAZCADcCECAGQgA3AgggBkIANwIAIAZBkAFqJAALpwwBB38CQCAARQ0AIABBCGsiAyAAQQRrKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACIBayIDQZgIKAIASQ0BIAAgAWohACADQZwIKAIARwRAIAFB/wFNBEAgAygCCCICIAFBA3YiBEEDdEGwCGpGGiACIAMoAgwiAUYEQEGICEGICCgCAEF+IAR3cTYCAAwDCyACIAE2AgwgASACNgIIDAILIAMoAhghBgJAIAMgAygCDCIBRwRAIAMoAggiAiABNgIMIAEgAjYCCAwBCwJAIANBFGoiAigCACIEDQAgA0EQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0BAkAgAyADKAIcIgJBAnRBuApqIgQoAgBGBEAgBCABNgIAIAENAUGMCEGMCCgCAEF+IAJ3cTYCAAwDCyAGQRBBFCAGKAIQIANGG2ogATYCACABRQ0CCyABIAY2AhggAygCECICBEAgASACNgIQIAIgATYCGAsgAygCFCICRQ0BIAEgAjYCFCACIAE2AhgMAQsgBSgCBCIBQQNxQQNHDQBBkAggADYCACAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAA8LIAMgBU8NACAFKAIEIgFBAXFFDQACQCABQQJxRQRAIAVBoAgoAgBGBEBBoAggAzYCAEGUCEGUCCgCACAAaiIANgIAIAMgAEEBcjYCBCADQZwIKAIARw0DQZAIQQA2AgBBnAhBADYCAA8LIAVBnAgoAgBGBEBBnAggAzYCAEGQCEGQCCgCACAAaiIANgIAIAMgAEEBcjYCBCAAIANqIAA2AgAPCyABQXhxIABqIQACQCABQf8BTQRAIAUoAggiAiABQQN2IgRBA3RBsAhqRhogAiAFKAIMIgFGBEBBiAhBiAgoAgBBfiAEd3E2AgAMAgsgAiABNgIMIAEgAjYCCAwBCyAFKAIYIQYCQCAFIAUoAgwiAUcEQCAFKAIIIgJBmAgoAgBJGiACIAE2AgwgASACNgIIDAELAkAgBUEUaiICKAIAIgQNACAFQRBqIgIoAgAiBA0AQQAhAQwBCwNAIAIhByAEIgFBFGoiAigCACIEDQAgAUEQaiECIAEoAhAiBA0ACyAHQQA2AgALIAZFDQACQCAFIAUoAhwiAkECdEG4CmoiBCgCAEYEQCAEIAE2AgAgAQ0BQYwIQYwIKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiABNgIAIAFFDQELIAEgBjYCGCAFKAIQIgIEQCABIAI2AhAgAiABNgIYCyAFKAIUIgJFDQAgASACNgIUIAIgATYCGAsgAyAAQQFyNgIEIAAgA2ogADYCACADQZwIKAIARw0BQZAIIAA2AgAPCyAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAAsgAEH/AU0EQCAAQQN2IgFBA3RBsAhqIQACf0GICCgCACICQQEgAXQiAXFFBEBBiAggASACcjYCACAADAELIAAoAggLIQIgACADNgIIIAIgAzYCDCADIAA2AgwgAyACNgIIDwtBHyECIANCADcCECAAQf///wdNBEAgAEEIdiIBIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqIQILIAMgAjYCHCACQQJ0QbgKaiEBAkACQAJAQYwIKAIAIgRBASACdCIHcUUEQEGMCCAEIAdyNgIAIAEgAzYCACADIAE2AhgMAQsgAEEAQRkgAkEBdmsgAkEfRht0IQIgASgCACEBA0AgASIEKAIEQXhxIABGDQIgAkEddiEBIAJBAXQhAiAEIAFBBHFqIgdBEGooAgAiAQ0ACyAHIAM2AhAgAyAENgIYCyADIAM2AgwgAyADNgIIDAELIAQoAggiACADNgIMIAQgAzYCCCADQQA2AhggAyAENgIMIAMgADYCCAtBqAhBqAgoAgBBAWsiAEF/IAAbNgIACwsLCQEAQYEICwIGUA==";if(!z.startsWith(q)){var G=z;z=n.locateFile?n.locateFile(G,m):m+G}function pa(){var e=z;try{if(e==z&&w)return new Uint8Array(w);var t=H(e);if(t)return t;if(v)return v(e);throw"both async and sync fetching of the wasm failed"}catch(e){K(e)}}function qa(){if(!w&&(u||p)){if("function"===typeof fetch&&!z.startsWith("file://"))return fetch(z,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+z+"'";return e.arrayBuffer()})).catch((function(){return pa()}));if(_)return new Promise((function(e,t){_(z,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return pa()}))}function X(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t(n);else{var r=t.m;"number"===typeof r?void 0===t.l?D.get(r)():D.get(r)(t.l):r(void 0===t.l?null:t.l)}}}var $=!1,Y="function"===typeof atob?atob:function(e){var t="",r=0;e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++));var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++));var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++));var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++));n=n<<2|i>>4;i=(i&15)<<4|s>>2;var l=(s&3)<<6|o;t+=String.fromCharCode(n);64!==s&&(t+=String.fromCharCode(i));64!==o&&(t+=String.fromCharCode(l))}while(r<e.length);return t};function H(e){if(e.startsWith(q)){e=e.slice(q.length);if("boolean"===typeof g&&g){var t=Buffer.from(e,"base64");t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else try{var r=Y(e),n=new Uint8Array(r.length);for(e=0;e<r.length;++e)n[e]=r.charCodeAt(e);t=n}catch(e){throw Error("Converting base64 string to bytes failed.")}return t}}var V={a:function(e){var t=B.length;e>>>=0;if(2147483648<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);n=Math.max(e,n);0<n%65536&&(n+=65536-n%65536);e:{try{T.grow(Math.min(2147483648,n)-O.byteLength+65535>>>16);ia();var i=1;break e}catch(e){}i=void 0}if(i)return!0}return!1}};(function(){function a(e){n.asm=e.exports;T=n.asm.b;ia();D=n.asm.j;x.unshift(n.asm.c);j--;n.monitorRunDependencies&&n.monitorRunDependencies(j);0==j&&(null!==W&&(clearInterval(W),W=null),Q&&(e=Q,Q=null,e()))}function c(e){a(e.instance)}function d(t){return qa().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){C("failed to asynchronously prepare wasm: "+e);K(e)}))}var e={a:V};j++;n.monitorRunDependencies&&n.monitorRunDependencies(j);if(n.instantiateWasm)try{return n.instantiateWasm(e,a)}catch(e){return C("Module.instantiateWasm callback failed with error: "+e),!1}(function(){return w||"function"!==typeof WebAssembly.instantiateStreaming||z.startsWith(q)||z.startsWith("file://")||"function"!==typeof fetch?d(c):fetch(z,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(c,(function(e){C("wasm streaming compile failed: "+e);C("falling back to ArrayBuffer instantiation");return d(c)}))}))})().catch(s);return{}})();n.___wasm_call_ctors=function(){return(n.___wasm_call_ctors=n.asm.c).apply(null,arguments)};n._poly1305_auth=function(){return(n._poly1305_auth=n.asm.d).apply(null,arguments)};var J=n.stackSave=function(){return(J=n.stackSave=n.asm.e).apply(null,arguments)},ee=n.stackRestore=function(){return(ee=n.stackRestore=n.asm.f).apply(null,arguments)},te=n.stackAlloc=function(){return(te=n.stackAlloc=n.asm.g).apply(null,arguments)};n._malloc=function(){return(n._malloc=n.asm.h).apply(null,arguments)};n._free=function(){return(n._free=n.asm.i).apply(null,arguments)};n.cwrap=function(e,t,r,n){r=r||[];var i=r.every((function(e){return"number"===e}));return"string"!==t&&i&&!n?N(e):function(){return ca(e,t,r,arguments)}};var re;Q=function ta(){re||Z();re||(Q=ta)};function Z(){function a(){if(!re&&(re=!0,n.calledRun=!0,!k)){X(x);i(n);if(n.onRuntimeInitialized)n.onRuntimeInitialized();if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;){var e=n.postRun.shift();U.unshift(e)}X(U)}}if(!(0<j)){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)ma();X(L);0<j||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1);a()}),1)):a())}}n.run=Z;if(n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();Z();return t.ready}}();if(true)e.exports=n;else{}},9244:(e,t,r)=>{"use strict";const n=new Array(256);[r(4637).HANDLERS,r(9964)].forEach((e=>{for(let[t,r]of Object.entries(e)){t=+t;if(isFinite(t)&&t>=0&&t<n.length)n[t]=r}}));e.exports=n},9964:(e,t,r)=>{"use strict";const{bufferSlice:n,bufferParser:i,doFatalError:s,sigSSHToASN1:o,writeUInt32BE:l}=r(2184);const{CHANNEL_OPEN_FAILURE:u,COMPAT:p,MESSAGE:g,TERMINAL_MODE:m}=r(4020);const{parseKey:y}=r(1789);const _=Array.from(Object.entries(m)).reduce(((e,[t,r])=>({...e,[t]:r})),{});e.exports={[g.DISCONNECT]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();const n=i.readString(true);const o=i.readString();i.clear();if(o===undefined){return s(e,"Inbound: Malformed DISCONNECT packet")}e._debug&&e._debug(`Inbound: Received DISCONNECT (${r}, "${n}")`);const l=e._handlers.DISCONNECT;l&&l(e,r,n)},[g.IGNORE]:(e,t)=>{e._debug&&e._debug("Inbound: Received IGNORE")},[g.UNIMPLEMENTED]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();i.clear();if(r===undefined){return s(e,"Inbound: Malformed UNIMPLEMENTED packet")}e._debug&&e._debug(`Inbound: Received UNIMPLEMENTED (seqno ${r})`)},[g.DEBUG]:(e,t)=>{i.init(t,1);const r=i.readBool();const n=i.readString(true);const o=i.readString();i.clear();if(o===undefined){return s(e,"Inbound: Malformed DEBUG packet")}e._debug&&e._debug("Inbound: Received DEBUG");const l=e._handlers.DEBUG;l&&l(e,r,n)},[g.SERVICE_REQUEST]:(e,t)=>{i.init(t,1);const r=i.readString(true);i.clear();if(r===undefined){return s(e,"Inbound: Malformed SERVICE_REQUEST packet")}e._debug&&e._debug(`Inbound: Received SERVICE_REQUEST (${r})`);const n=e._handlers.SERVICE_REQUEST;n&&n(e,r)},[g.SERVICE_ACCEPT]:(e,t)=>{i.init(t,1);const r=i.readString(true);i.clear();if(r===undefined){return s(e,"Inbound: Malformed SERVICE_ACCEPT packet")}e._debug&&e._debug(`Inbound: Received SERVICE_ACCEPT (${r})`);const n=e._handlers.SERVICE_ACCEPT;n&&n(e,r)},[g.EXT_INFO]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();let n;if(r!==undefined){n=[];for(let e=0;e<r;++e){const e=i.readString(true);const t=i.readString();if(t!==undefined){switch(e){case"server-sig-algs":{const r=t.latin1Slice(0,t.length).split(",");n.push({name:e,algs:r});continue}default:continue}}n=undefined;break}}i.clear();if(n===undefined)return s(e,"Inbound: Malformed EXT_INFO packet");e._debug&&e._debug("Inbound: Received EXT_INFO");const o=e._handlers.EXT_INFO;o&&o(e,n)},[g.USERAUTH_REQUEST]:(e,t)=>{i.init(t,1);const r=i.readString(true);const u=i.readString(true);const p=i.readString(true);let g;let m;switch(p){case"none":g=null;break;case"password":{const e=i.readBool();if(e!==undefined){g=i.readString(true);if(g!==undefined&&e){const e=i.readString(true);if(e!==undefined)g={oldPassword:g,newPassword:e};else g=undefined}}break}case"publickey":{const r=i.readBool();if(r!==undefined){const s=i.readString(true);let u=s;const p=i.readString();let y;switch(s){case"rsa-sha2-256":u="ssh-rsa";y="sha256";break;case"rsa-sha2-512":u="ssh-rsa";y="sha512";break}if(r){const r=i.pos();let m=i.readString();if(m!==undefined){if(m.length>4+s.length+4&&m.utf8Slice(4,4+s.length)===s){m=n(m,4+s.length+4)}m=o(m,u);if(m){const n=e._kex.sessionID;const i=Buffer.allocUnsafe(4+n.length+r);l(i,n.length,0);i.set(n,4);i.set(new Uint8Array(t.buffer,t.byteOffset,r),4+n.length);g={keyAlgo:u,key:p,signature:m,blob:i,hashAlgo:y}}}}else{g={keyAlgo:u,key:p,hashAlgo:y};m="publickey -- check"}}break}case"hostbased":{const r=i.readString(true);let s=r;const u=i.readString();const p=i.readString(true);const m=i.readString(true);let y;switch(r){case"rsa-sha2-256":s="ssh-rsa";y="sha256";break;case"rsa-sha2-512":s="ssh-rsa";y="sha512";break}const _=i.pos();let v=i.readString();if(v!==undefined){if(v.length>4+r.length+4&&v.utf8Slice(4,4+r.length)===r){v=n(v,4+r.length+4)}v=o(v,s);if(v!==undefined){const r=e._kex.sessionID;const n=Buffer.allocUnsafe(4+r.length+_);l(n,r.length,0);n.set(r,4);n.set(new Uint8Array(t.buffer,t.byteOffset,_),4+r.length);g={keyAlgo:s,key:u,signature:v,blob:n,localHostname:p,localUsername:m,hashAlgo:y}}}break}case"keyboard-interactive":i.skipString();g=i.readList();break;default:if(p!==undefined)g=i.readRaw()}i.clear();if(g===undefined){return s(e,"Inbound: Malformed USERAUTH_REQUEST packet")}if(m===undefined)m=p;e._authsQueue.push(p);e._debug&&e._debug(`Inbound: Received USERAUTH_REQUEST (${m})`);const y=e._handlers.USERAUTH_REQUEST;y&&y(e,r,u,p,g)},[g.USERAUTH_FAILURE]:(e,t)=>{i.init(t,1);const r=i.readList();const n=i.readBool();i.clear();if(n===undefined){return s(e,"Inbound: Malformed USERAUTH_FAILURE packet")}e._debug&&e._debug(`Inbound: Received USERAUTH_FAILURE (${r})`);e._authsQueue.shift();const o=e._handlers.USERAUTH_FAILURE;o&&o(e,r,n)},[g.USERAUTH_SUCCESS]:(e,t)=>{e._debug&&e._debug("Inbound: Received USERAUTH_SUCCESS");e._authsQueue.shift();const r=e._handlers.USERAUTH_SUCCESS;r&&r(e)},[g.USERAUTH_BANNER]:(e,t)=>{i.init(t,1);const r=i.readString(true);const n=i.readString();i.clear();if(n===undefined){return s(e,"Inbound: Malformed USERAUTH_BANNER packet")}e._debug&&e._debug("Inbound: Received USERAUTH_BANNER");const o=e._handlers.USERAUTH_BANNER;o&&o(e,r)},60:(e,t)=>{if(!e._authsQueue.length){e._debug&&e._debug("Inbound: Received payload type 60 without auth");return}switch(e._authsQueue[0]){case"password":{i.init(t,1);const r=i.readString(true);const n=i.readString();i.clear();if(n===undefined){return s(e,"Inbound: Malformed USERAUTH_PASSWD_CHANGEREQ packet")}e._debug&&e._debug("Inbound: Received USERAUTH_PASSWD_CHANGEREQ");const o=e._handlers.USERAUTH_PASSWD_CHANGEREQ;o&&o(e,r);break}case"publickey":{i.init(t,1);const r=i.readString(true);const n=i.readString();i.clear();if(n===undefined){return s(e,"Inbound: Malformed USERAUTH_PK_OK packet")}e._debug&&e._debug("Inbound: Received USERAUTH_PK_OK");e._authsQueue.shift();const o=e._handlers.USERAUTH_PK_OK;o&&o(e,r,n);break}case"keyboard-interactive":{i.init(t,1);const r=i.readString(true);const n=i.readString(true);i.readString();const o=i.readUInt32BE();let l;if(o!==undefined){l=new Array(o);let e;for(e=0;e<o;++e){const t=i.readString(true);const r=i.readBool();if(r===undefined)break;l[e]={prompt:t,echo:r}}if(e!==o)l=undefined}i.clear();if(l===undefined){return s(e,"Inbound: Malformed USERAUTH_INFO_REQUEST packet")}e._debug&&e._debug("Inbound: Received USERAUTH_INFO_REQUEST");const u=e._handlers.USERAUTH_INFO_REQUEST;u&&u(e,r,n,l);break}default:e._debug&&e._debug("Inbound: Received unexpected payload type 60")}},61:(e,t)=>{if(!e._authsQueue.length){e._debug&&e._debug("Inbound: Received payload type 61 without auth");return}if(e._authsQueue[0]!=="keyboard-interactive"){return s(e,"Inbound: Received unexpected payload type 61")}i.init(t,1);const r=i.readUInt32BE();let n;if(r!==undefined){n=new Array(r);let e;for(e=0;e<r;++e){const t=i.readString(true);if(t===undefined)break;n[e]=t}if(e!==r)n=undefined}i.clear();if(n===undefined){return s(e,"Inbound: Malformed USERAUTH_INFO_RESPONSE packet")}e._debug&&e._debug("Inbound: Received USERAUTH_INFO_RESPONSE");const o=e._handlers.USERAUTH_INFO_RESPONSE;o&&o(e,n)},[g.GLOBAL_REQUEST]:(e,t)=>{i.init(t,1);const r=i.readString(true);const n=i.readBool();let o;if(n!==undefined){switch(r){case"tcpip-forward":case"cancel-tcpip-forward":{const e=i.readString(true);const t=i.readUInt32BE();if(t!==undefined)o={bindAddr:e,bindPort:t};break}case"streamlocal-forward@openssh.com":case"cancel-streamlocal-forward@openssh.com":{const e=i.readString(true);if(e!==undefined)o={socketPath:e};break}case"no-more-sessions@openssh.com":o=null;break;case"hostkeys-00@openssh.com":{o=[];while(i.avail()>0){const e=i.readString();if(e===undefined){o=undefined;break}const t=y(e);if(!(t instanceof Error))o.push(t)}break}default:o=i.readRaw()}}i.clear();if(o===undefined){return s(e,"Inbound: Malformed GLOBAL_REQUEST packet")}e._debug&&e._debug(`Inbound: GLOBAL_REQUEST (${r})`);const l=e._handlers.GLOBAL_REQUEST;if(l)l(e,r,n,o);else e.requestFailure()},[g.REQUEST_SUCCESS]:(e,t)=>{const r=t.length>1?n(t,1):null;e._debug&&e._debug("Inbound: REQUEST_SUCCESS");const i=e._handlers.REQUEST_SUCCESS;i&&i(e,r)},[g.REQUEST_FAILURE]:(e,t)=>{e._debug&&e._debug("Inbound: Received REQUEST_FAILURE");const r=e._handlers.REQUEST_FAILURE;r&&r(e)},[g.CHANNEL_OPEN]:(e,t)=>{i.init(t,1);const r=i.readString(true);const n=i.readUInt32BE();const o=i.readUInt32BE();const l=i.readUInt32BE();let p;switch(r){case"forwarded-tcpip":case"direct-tcpip":{const e=i.readString(true);const t=i.readUInt32BE();const s=i.readString(true);const u=i.readUInt32BE();if(u!==undefined){p={type:r,sender:n,window:o,packetSize:l,data:{destIP:e,destPort:t,srcIP:s,srcPort:u}}}break}case"forwarded-streamlocal@openssh.com":case"direct-streamlocal@openssh.com":{const e=i.readString(true);if(e!==undefined){p={type:r,sender:n,window:o,packetSize:l,data:{socketPath:e}}}break}case"x11":{const e=i.readString(true);const t=i.readUInt32BE();if(t!==undefined){p={type:r,sender:n,window:o,packetSize:l,data:{srcIP:e,srcPort:t}}}break}default:p={type:r,sender:n,window:o,packetSize:l,data:{}}}i.clear();if(p===undefined){return s(e,"Inbound: Malformed CHANNEL_OPEN packet")}e._debug&&e._debug(`Inbound: CHANNEL_OPEN (s:${n}, ${r})`);const g=e._handlers.CHANNEL_OPEN;if(g){g(e,p)}else{e.channelOpenFail(p.sender,u.ADMINISTRATIVELY_PROHIBITED,"","")}},[g.CHANNEL_OPEN_CONFIRMATION]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();const n=i.readUInt32BE();const o=i.readUInt32BE();const l=i.readUInt32BE();const u=i.avail()?i.readRaw():undefined;i.clear();if(l===undefined){return s(e,"Inbound: Malformed CHANNEL_OPEN_CONFIRMATION packet")}e._debug&&e._debug(`Inbound: CHANNEL_OPEN_CONFIRMATION (r:${r}, s:${n})`);const p=e._handlers.CHANNEL_OPEN_CONFIRMATION;if(p)p(e,{recipient:r,sender:n,window:o,packetSize:l,data:u})},[g.CHANNEL_OPEN_FAILURE]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();const n=i.readUInt32BE();const o=i.readString(true);const l=i.readString();i.clear();if(l===undefined){return s(e,"Inbound: Malformed CHANNEL_OPEN_FAILURE packet")}e._debug&&e._debug(`Inbound: CHANNEL_OPEN_FAILURE (r:${r})`);const u=e._handlers.CHANNEL_OPEN_FAILURE;u&&u(e,r,n,o)},[g.CHANNEL_WINDOW_ADJUST]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();const n=i.readUInt32BE();i.clear();if(n===undefined){return s(e,"Inbound: Malformed CHANNEL_WINDOW_ADJUST packet")}e._debug&&e._debug(`Inbound: CHANNEL_WINDOW_ADJUST (r:${r}, ${n})`);const o=e._handlers.CHANNEL_WINDOW_ADJUST;o&&o(e,r,n)},[g.CHANNEL_DATA]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();const n=i.readString();i.clear();if(n===undefined){return s(e,"Inbound: Malformed CHANNEL_DATA packet")}e._debug&&e._debug(`Inbound: CHANNEL_DATA (r:${r}, ${n.length})`);const o=e._handlers.CHANNEL_DATA;o&&o(e,r,n)},[g.CHANNEL_EXTENDED_DATA]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();const n=i.readUInt32BE();const o=i.readString();i.clear();if(o===undefined){return s(e,"Inbound: Malformed CHANNEL_EXTENDED_DATA packet")}e._debug&&e._debug(`Inbound: CHANNEL_EXTENDED_DATA (r:${r}, ${o.length})`);const l=e._handlers.CHANNEL_EXTENDED_DATA;l&&l(e,r,o,n)},[g.CHANNEL_EOF]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();i.clear();if(r===undefined){return s(e,"Inbound: Malformed CHANNEL_EOF packet")}e._debug&&e._debug(`Inbound: CHANNEL_EOF (r:${r})`);const n=e._handlers.CHANNEL_EOF;n&&n(e,r)},[g.CHANNEL_CLOSE]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();i.clear();if(r===undefined){return s(e,"Inbound: Malformed CHANNEL_CLOSE packet")}e._debug&&e._debug(`Inbound: CHANNEL_CLOSE (r:${r})`);const n=e._handlers.CHANNEL_CLOSE;n&&n(e,r)},[g.CHANNEL_REQUEST]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();const n=i.readString(true);const o=i.readBool();let l;if(o!==undefined){switch(n){case"exit-status":l=i.readUInt32BE();e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${l})`);break;case"exit-signal":{let t;let s;if(e._compatFlags&p.OLD_EXIT){const e=i.readUInt32BE();switch(e){case 1:t="HUP";break;case 2:t="INT";break;case 3:t="QUIT";break;case 6:t="ABRT";break;case 9:t="KILL";break;case 14:t="ALRM";break;case 15:t="TERM";break;default:if(e!==undefined){t=`UNKNOWN (${e})`}}s=false}else{t=i.readString(true);s=i.readBool();if(s===undefined)t=undefined}const o=i.readString(true);if(i.skipString()!==undefined)l={signal:t,coreDumped:s,errorMessage:o};e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${t})`);break}case"pty-req":{const t=i.readString(true);const s=i.readUInt32BE();const o=i.readUInt32BE();const u=i.readUInt32BE();const p=i.readUInt32BE();const g=i.readString();if(g!==undefined){i.init(g,1);let e={};while(i.avail()){const t=i.readByte();if(t===m.TTY_OP_END)break;const r=_[t];const n=i.readUInt32BE();if(t===undefined||r===undefined||n===undefined){e=undefined;break}e[r]=n}if(e!==undefined)l={term:t,cols:s,rows:o,width:u,height:p,modes:e}}e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"window-change":{const t=i.readUInt32BE();const s=i.readUInt32BE();const o=i.readUInt32BE();const u=i.readUInt32BE();if(u!==undefined)l={cols:t,rows:s,width:o,height:u};e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"x11-req":{const t=i.readBool();const s=i.readString(true);const o=i.readString();const u=i.readUInt32BE();if(u!==undefined)l={single:t,protocol:s,cookie:o,screen:u};e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"env":{const t=i.readString(true);const s=i.readString(true);if(s!==undefined)l={name:t,value:s};if(e._debug){e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: `+`${t}=${s})`)}break}case"shell":l=null;e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break;case"exec":l=i.readString(true);e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${l})`);break;case"subsystem":l=i.readString(true);e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${l})`);break;case"signal":l=i.readString(true);e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${l})`);break;case"xon-xoff":l=i.readBool();e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${l})`);break;case"auth-agent-req@openssh.com":l=null;e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break;default:l=i.avail()?i.readRaw():null;e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`)}}i.clear();if(l===undefined){return s(e,"Inbound: Malformed CHANNEL_REQUEST packet")}const u=e._handlers.CHANNEL_REQUEST;u&&u(e,r,n,o,l)},[g.CHANNEL_SUCCESS]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();i.clear();if(r===undefined){return s(e,"Inbound: Malformed CHANNEL_SUCCESS packet")}e._debug&&e._debug(`Inbound: CHANNEL_SUCCESS (r:${r})`);const n=e._handlers.CHANNEL_SUCCESS;n&&n(e,r)},[g.CHANNEL_FAILURE]:(e,t)=>{i.init(t,1);const r=i.readUInt32BE();i.clear();if(r===undefined){return s(e,"Inbound: Malformed CHANNEL_FAILURE packet")}e._debug&&e._debug(`Inbound: CHANNEL_FAILURE (r:${r})`);const n=e._handlers.CHANNEL_FAILURE;n&&n(e,r)}}},4637:(e,t,r)=>{"use strict";const{createDiffieHellman:n,createDiffieHellmanGroup:i,createECDH:s,createHash:o,createPublicKey:l,diffieHellman:u,generateKeyPairSync:p,randomFillSync:g}=r(6982);const{Ber:m}=r(9837);const{COMPAT:y,curve25519Supported:_,DEFAULT_KEX:v,DEFAULT_SERVER_HOST_KEY:E,DEFAULT_CIPHER:b,DEFAULT_MAC:C,DEFAULT_COMPRESSION:w,DISCONNECT_REASON:I,MESSAGE:T}=r(4020);const{CIPHER_INFO:k,createCipher:R,createDecipher:O,MAC_INFO:P}=r(2888);const{parseDERKey:B}=r(1789);const{bufferFill:D,bufferParser:L,convertSignature:x,doFatalError:U,FastBuffer:j,sigSSHToASN1:W,writeUInt32BE:Q}=r(2184);const{PacketReader:q,PacketWriter:z,ZlibPacketReader:G,ZlibPacketWriter:$}=r(4592);let Y;const V=2048;const J=8192;const ee=Buffer.alloc(0);function kexinit(e){let t;if(e._compatFlags&y.BAD_DHGEX){const r=e._offer.lists.kex;let n=r.array;let i=false;for(let e=0;e<n.length;++e){if(n[e].includes("group-exchange")){if(!i){i=true;n=n.slice()}n.splice(e--,1)}}if(i){let i=1+16+e._offer.totalSize+1+4;const s=Buffer.from(n.join(","));i-=r.buffer.length-s.length;const o=e._offer.lists.all;const l=new Uint8Array(o.buffer,o.byteOffset+4+r.buffer.length,o.length-(4+r.buffer.length));t=Buffer.allocUnsafe(i);Q(t,s.length,17);t.set(s,17+4);t.set(l,17+4+s.length)}}if(t===undefined){t=Buffer.allocUnsafe(1+16+e._offer.totalSize+1+4);e._offer.copyAllTo(t,17)}e._debug&&e._debug("Outbound: Sending KEXINIT");t[0]=T.KEXINIT;g(t,1,16);D(t,0,t.length-5);e._kexinit=t;e._packetRW.write.allocStart=0;{const r=e._packetRW.write.allocStartKEX;const n=e._packetRW.write.alloc(t.length,true);n.set(t,r);e._cipher.encrypt(e._packetRW.write.finalize(n,true))}}function handleKexInit(e,t){const r={kex:undefined,serverHostKey:undefined,cs:{cipher:undefined,mac:undefined,compress:undefined,lang:undefined},sc:{cipher:undefined,mac:undefined,compress:undefined,lang:undefined}};L.init(t,17);if((r.kex=L.readList())===undefined||(r.serverHostKey=L.readList())===undefined||(r.cs.cipher=L.readList())===undefined||(r.sc.cipher=L.readList())===undefined||(r.cs.mac=L.readList())===undefined||(r.sc.mac=L.readList())===undefined||(r.cs.compress=L.readList())===undefined||(r.sc.compress=L.readList())===undefined||(r.cs.lang=L.readList())===undefined||(r.sc.lang=L.readList())===undefined){L.clear();return U(e,"Received malformed KEXINIT","handshake",I.KEY_EXCHANGE_FAILED)}const n=L.pos();const i=n<t.length&&t[n]===1;L.clear();const s=e._offer;const o=r;let l=s.lists.kex.array;if(e._compatFlags&y.BAD_DHGEX){let e=false;for(let t=0;t<l.length;++t){if(l[t].indexOf("group-exchange")!==-1){if(!e){e=true;l=l.slice()}l.splice(t--,1)}}}let u;let p;let g;const m=e._debug;m&&m("Inbound: Handshake in progress");m&&m(`Handshake: (local) KEX method: ${l}`);m&&m(`Handshake: (remote) KEX method: ${o.kex}`);let _;if(e._server){p=l;u=o.kex;_=u.indexOf("ext-info-c")!==-1}else{p=o.kex;u=l;_=p.indexOf("ext-info-s")!==-1}if(e._strictMode===undefined){if(e._server){e._strictMode=u.indexOf("kex-strict-c-v00@openssh.com")!==-1}else{e._strictMode=p.indexOf("kex-strict-s-v00@openssh.com")!==-1}if(e._strictMode){m&&m("Handshake: strict KEX mode enabled");if(e._decipher.inSeqno!==1){if(m)m("Handshake: KEXINIT not first packet in strict KEX mode");return U(e,"Handshake failed: KEXINIT not first packet in strict KEX mode","handshake",I.KEY_EXCHANGE_FAILED)}}}for(g=0;g<u.length&&p.indexOf(u[g])===-1;++g);if(g===u.length){m&&m("Handshake: no matching key exchange algorithm");return U(e,"Handshake failed: no matching key exchange algorithm","handshake",I.KEY_EXCHANGE_FAILED)}r.kex=u[g];m&&m(`Handshake: KEX algorithm: ${u[g]}`);if(i&&(!o.kex.length||u[g]!==o.kex[0])){e._skipNextInboundPacket=true}const v=s.lists.serverHostKey.array;m&&m(`Handshake: (local) Host key format: ${v}`);m&&m(`Handshake: (remote) Host key format: ${o.serverHostKey}`);if(e._server){p=v;u=o.serverHostKey}else{p=o.serverHostKey;u=v}for(g=0;g<u.length&&p.indexOf(u[g])===-1;++g);if(g===u.length){m&&m("Handshake: No matching host key format");return U(e,"Handshake failed: no matching host key format","handshake",I.KEY_EXCHANGE_FAILED)}r.serverHostKey=u[g];m&&m(`Handshake: Host key format: ${u[g]}`);const E=s.lists.cs.cipher.array;m&&m(`Handshake: (local) C->S cipher: ${E}`);m&&m(`Handshake: (remote) C->S cipher: ${o.cs.cipher}`);if(e._server){p=E;u=o.cs.cipher}else{p=o.cs.cipher;u=E}for(g=0;g<u.length&&p.indexOf(u[g])===-1;++g);if(g===u.length){m&&m("Handshake: No matching C->S cipher");return U(e,"Handshake failed: no matching C->S cipher","handshake",I.KEY_EXCHANGE_FAILED)}r.cs.cipher=u[g];m&&m(`Handshake: C->S Cipher: ${u[g]}`);const b=s.lists.sc.cipher.array;m&&m(`Handshake: (local) S->C cipher: ${b}`);m&&m(`Handshake: (remote) S->C cipher: ${o.sc.cipher}`);if(e._server){p=b;u=o.sc.cipher}else{p=o.sc.cipher;u=b}for(g=0;g<u.length&&p.indexOf(u[g])===-1;++g);if(g===u.length){m&&m("Handshake: No matching S->C cipher");return U(e,"Handshake failed: no matching S->C cipher","handshake",I.KEY_EXCHANGE_FAILED)}r.sc.cipher=u[g];m&&m(`Handshake: S->C cipher: ${u[g]}`);const C=s.lists.cs.mac.array;m&&m(`Handshake: (local) C->S MAC: ${C}`);m&&m(`Handshake: (remote) C->S MAC: ${o.cs.mac}`);if(k[r.cs.cipher].authLen>0){r.cs.mac="";m&&m("Handshake: C->S MAC: <implicit>")}else{if(e._server){p=C;u=o.cs.mac}else{p=o.cs.mac;u=C}for(g=0;g<u.length&&p.indexOf(u[g])===-1;++g);if(g===u.length){m&&m("Handshake: No matching C->S MAC");return U(e,"Handshake failed: no matching C->S MAC","handshake",I.KEY_EXCHANGE_FAILED)}r.cs.mac=u[g];m&&m(`Handshake: C->S MAC: ${u[g]}`)}const w=s.lists.sc.mac.array;m&&m(`Handshake: (local) S->C MAC: ${w}`);m&&m(`Handshake: (remote) S->C MAC: ${o.sc.mac}`);if(k[r.sc.cipher].authLen>0){r.sc.mac="";m&&m("Handshake: S->C MAC: <implicit>")}else{if(e._server){p=w;u=o.sc.mac}else{p=o.sc.mac;u=w}for(g=0;g<u.length&&p.indexOf(u[g])===-1;++g);if(g===u.length){m&&m("Handshake: No matching S->C MAC");return U(e,"Handshake failed: no matching S->C MAC","handshake",I.KEY_EXCHANGE_FAILED)}r.sc.mac=u[g];m&&m(`Handshake: S->C MAC: ${u[g]}`)}const T=s.lists.cs.compress.array;m&&m(`Handshake: (local) C->S compression: ${T}`);m&&m(`Handshake: (remote) C->S compression: ${o.cs.compress}`);if(e._server){p=T;u=o.cs.compress}else{p=o.cs.compress;u=T}for(g=0;g<u.length&&p.indexOf(u[g])===-1;++g);if(g===u.length){m&&m("Handshake: No matching C->S compression");return U(e,"Handshake failed: no matching C->S compression","handshake",I.KEY_EXCHANGE_FAILED)}r.cs.compress=u[g];m&&m(`Handshake: C->S compression: ${u[g]}`);const R=s.lists.sc.compress.array;m&&m(`Handshake: (local) S->C compression: ${R}`);m&&m(`Handshake: (remote) S->C compression: ${o.sc.compress}`);if(e._server){p=R;u=o.sc.compress}else{p=o.sc.compress;u=R}for(g=0;g<u.length&&p.indexOf(u[g])===-1;++g);if(g===u.length){m&&m("Handshake: No matching S->C compression");return U(e,"Handshake failed: no matching S->C compression","handshake",I.KEY_EXCHANGE_FAILED)}r.sc.compress=u[g];m&&m(`Handshake: S->C compression: ${u[g]}`);r.cs.lang="";r.sc.lang="";if(e._kex){if(!e._kexinit){kexinit(e)}e._decipher._onPayload=onKEXPayload.bind(e,{firstPacket:false})}e._kex=te(r,e,t);e._kex.remoteExtInfoEnabled=_;e._kex.start()}const te=(()=>{function convertToMpint(e){let t=0;let r=e.length;while(e[t]===0){++t;--r}let n;if(e[t]&128){n=Buffer.allocUnsafe(1+r);n[0]=0;e.copy(n,1,t);e=n}else if(r!==e.length){n=Buffer.allocUnsafe(r);e.copy(n,0,t);e=n}return e}class KeyExchange{constructor(e,t,r){this._protocol=t;this.sessionID=t._kex?t._kex.sessionID:undefined;this.negotiated=e;this.remoteExtInfoEnabled=false;this._step=1;this._public=null;this._dh=null;this._sentNEWKEYS=false;this._receivedNEWKEYS=false;this._finished=false;this._hostVerified=false;this._kexinit=t._kexinit;this._remoteKexinit=r;this._identRaw=t._identRaw;this._remoteIdentRaw=t._remoteIdentRaw;this._hostKey=undefined;this._dhData=undefined;this._sig=undefined}finish(e){if(this._finished)return false;this._finished=true;const t=this._protocol._server;const r=this.negotiated;const n=this.convertPublicKey(this._dhData);let i=this.computeSecret(this._dhData);if(i instanceof Error){i.message=`Error while computing DH secret (${this.type}): ${i.message}`;i.level="handshake";return U(this._protocol,i,I.KEY_EXCHANGE_FAILED)}const s=o(this.hashName);ne(s,t?this._remoteIdentRaw:this._identRaw);ne(s,t?this._identRaw:this._remoteIdentRaw);ne(s,t?this._remoteKexinit:this._kexinit);ne(s,t?this._kexinit:this._remoteKexinit);const l=t?this._hostKey.getPublicSSH():this._hostKey;ne(s,l);if(this.type==="groupex"){const e=this.getDHParams();const t=Buffer.allocUnsafe(4);Q(t,this._minBits,0);s.update(t);Q(t,this._prefBits,0);s.update(t);Q(t,this._maxBits,0);s.update(t);ne(s,e.prime);ne(s,e.generator)}ne(s,t?n:this.getPublicKey());const u=t?this.getPublicKey():n;ne(s,u);ne(s,i);const p=s.digest();if(!t){L.init(this._sig,0);const e=L.readString(true);if(!e){return U(this._protocol,"Malformed packet while reading signature","handshake",I.KEY_EXCHANGE_FAILED)}if(e!==r.serverHostKey){return U(this._protocol,`Wrong signature type: ${e}, `+`expected: ${r.serverHostKey}`,"handshake",I.KEY_EXCHANGE_FAILED)}let t=L.readString();L.clear();if(t===undefined){return U(this._protocol,"Malformed packet while reading signature","handshake",I.KEY_EXCHANGE_FAILED)}if(!(t=W(t,e))){return U(this._protocol,"Malformed signature","handshake",I.KEY_EXCHANGE_FAILED)}let n;{L.init(this._hostKey,0);const e=L.readString(true);const t=this._hostKey.slice(L.pos());L.clear();n=B(t,e);if(n instanceof Error){n.level="handshake";return U(this._protocol,n,I.KEY_EXCHANGE_FAILED)}}let i;switch(this.negotiated.serverHostKey){case"rsa-sha2-256":i="sha256";break;case"rsa-sha2-512":i="sha512";break}this._protocol._debug&&this._protocol._debug("Verifying signature ...");const s=n.verify(p,t,i);if(s!==true){if(s instanceof Error){this._protocol._debug&&this._protocol._debug(`Signature verification failed: ${s.stack}`)}else{this._protocol._debug&&this._protocol._debug("Signature verification failed")}return U(this._protocol,"Handshake failed: signature verification failed","handshake",I.KEY_EXCHANGE_FAILED)}this._protocol._debug&&this._protocol._debug("Verified signature")}else{let e;switch(this.negotiated.serverHostKey){case"rsa-sha2-256":e="sha256";break;case"rsa-sha2-512":e="sha512";break}this._protocol._debug&&this._protocol._debug("Generating signature ...");let t=this._hostKey.sign(p,e);if(t instanceof Error){return U(this._protocol,"Handshake failed: signature generation failed for "+`${this._hostKey.type} host key: ${t.message}`,"handshake",I.KEY_EXCHANGE_FAILED)}t=x(t,this._hostKey.type);if(t===false){return U(this._protocol,"Handshake failed: signature conversion failed for "+`${this._hostKey.type} host key`,"handshake",I.KEY_EXCHANGE_FAILED)}const r=this.negotiated.serverHostKey;const n=Buffer.byteLength(r);const i=4+n+4+t.length;let s=this._protocol._packetRW.write.allocStartKEX;const o=this._protocol._packetRW.write.alloc(1+4+l.length+4+u.length+4+i,true);o[s]=T.KEXDH_REPLY;Q(o,l.length,++s);o.set(l,s+=4);Q(o,u.length,s+=l.length);o.set(u,s+=4);Q(o,i,s+=u.length);Q(o,n,s+=4);o.utf8Write(r,s+=4,n);Q(o,t.length,s+=n);o.set(t,s+=4);if(this._protocol._debug){let e;switch(this.type){case"group":e="KEXDH_REPLY";break;case"groupex":e="KEXDH_GEX_REPLY";break;default:e="KEXECDH_REPLY"}this._protocol._debug(`Outbound: Sending ${e}`)}this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(o,true))}if(t||!e)trySendNEWKEYS(this);let g;let m;const completeHandshake=e=>{if(g){trySendNEWKEYS(this);g.outbound.seqno=this._protocol._cipher.outSeqno;this._protocol._cipher.free();this._protocol._cipher=R(g);this._protocol._packetRW.write=m;g=undefined;m=undefined;this._protocol._onHandshakeComplete(r);return false}if(!this.sessionID)this.sessionID=p;{const e=Buffer.allocUnsafe(4+i.length);Q(e,i.length,0);e.set(i,4);i=e}const n=k[r.cs.cipher];const s=k[r.sc.cipher];const o=generateKEXVal(n.ivLen,this.hashName,i,p,this.sessionID,"A");const l=generateKEXVal(s.ivLen,this.hashName,i,p,this.sessionID,"B");const u=generateKEXVal(n.keyLen,this.hashName,i,p,this.sessionID,"C");const y=generateKEXVal(s.keyLen,this.hashName,i,p,this.sessionID,"D");let _;let v;if(!n.authLen){_=P[r.cs.mac];v=generateKEXVal(_.len,this.hashName,i,p,this.sessionID,"E")}let E;let b;if(!s.authLen){E=P[r.sc.mac];b=generateKEXVal(E.len,this.hashName,i,p,this.sessionID,"F")}const C={inbound:{onPayload:this._protocol._onPayload,seqno:this._protocol._decipher.inSeqno,decipherInfo:!t?s:n,decipherIV:!t?l:o,decipherKey:!t?y:u,macInfo:!t?E:_,macKey:!t?b:v},outbound:{onWrite:this._protocol._onWrite,seqno:this._protocol._cipher.outSeqno,cipherInfo:t?s:n,cipherIV:t?l:o,cipherKey:t?y:u,macInfo:t?E:_,macKey:t?b:v}};this._protocol._decipher.free();g=C;this._protocol._decipher=O(C);const w={read:undefined,write:undefined};switch(r.cs.compress){case"zlib":if(t)w.read=new G;else w.write=new $(this._protocol);break;case"zlib@openssh.com":if(this._protocol._authenticated){if(t)w.read=new G;else w.write=new $(this._protocol);break}default:if(t)w.read=new q;else w.write=new z(this._protocol)}switch(r.sc.compress){case"zlib":if(t)w.write=new $(this._protocol);else w.read=new G;break;case"zlib@openssh.com":if(this._protocol._authenticated){if(t)w.write=new $(this._protocol);else w.read=new G;break}default:if(t)w.write=new z(this._protocol);else w.read=new q}this._protocol._packetRW.read.cleanup();this._protocol._packetRW.write.cleanup();this._protocol._packetRW.read=w.read;m=w.write;this._public=null;this._dh=null;this._kexinit=this._protocol._kexinit=undefined;this._remoteKexinit=undefined;this._identRaw=undefined;this._remoteIdentRaw=undefined;this._hostKey=undefined;this._dhData=undefined;this._sig=undefined;if(!e)return completeHandshake();return false};if(t||e)this.finish=completeHandshake;if(!t)return completeHandshake(e)}start(){if(!this._protocol._server){if(this._protocol._debug){let e;switch(this.type){case"group":e="KEXDH_INIT";break;default:e="KEXECDH_INIT"}this._protocol._debug(`Outbound: Sending ${e}`)}const e=this.getPublicKey();let t=this._protocol._packetRW.write.allocStartKEX;const r=this._protocol._packetRW.write.alloc(1+4+e.length,true);r[t]=T.KEXDH_INIT;Q(r,e.length,++t);r.set(e,t+=4);this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(r,true))}}getPublicKey(){this.generateKeys();const e=this._public;if(e)return this.convertPublicKey(e)}convertPublicKey(e){let t;let r=0;let n=e.length;while(e[r]===0){++r;--n}if(e[r]&128){t=Buffer.allocUnsafe(1+n);t[0]=0;e.copy(t,1,r);return t}if(n!==e.length){t=Buffer.allocUnsafe(n);e.copy(t,0,r);e=t}return e}computeSecret(e){this.generateKeys();try{return convertToMpint(this._dh.computeSecret(e))}catch(e){return e}}parse(e){const t=e[0];switch(this._step){case 1:if(this._protocol._server){if(t!==T.KEXDH_INIT){return U(this._protocol,`Received packet ${t} instead of ${T.KEXDH_INIT}`,"handshake",I.KEY_EXCHANGE_FAILED)}this._protocol._debug&&this._protocol._debug("Received DH Init");L.init(e,1);const r=L.readString();L.clear();if(r===undefined){return U(this._protocol,"Received malformed KEX*_INIT","handshake",I.KEY_EXCHANGE_FAILED)}this._dhData=r;let n=this._protocol._hostKeys[this.negotiated.serverHostKey];if(Array.isArray(n))n=n[0];this._hostKey=n;this.finish()}else{if(t!==T.KEXDH_REPLY){return U(this._protocol,`Received packet ${t} instead of ${T.KEXDH_REPLY}`,"handshake",I.KEY_EXCHANGE_FAILED)}this._protocol._debug&&this._protocol._debug("Received DH Reply");L.init(e,1);let r;let n;let i;if((r=L.readString())===undefined||(n=L.readString())===undefined||(i=L.readString())===undefined){L.clear();return U(this._protocol,"Received malformed KEX*_REPLY","handshake",I.KEY_EXCHANGE_FAILED)}L.clear();L.init(r,0);const s=L.readString(true);L.clear();if(s===undefined){return U(this._protocol,"Received malformed host public key","handshake",I.KEY_EXCHANGE_FAILED)}if(s!==this.negotiated.serverHostKey){switch(this.negotiated.serverHostKey){case"rsa-sha2-256":case"rsa-sha2-512":if(s==="ssh-rsa")break;default:return U(this._protocol,"Host key does not match negotiated type","handshake",I.KEY_EXCHANGE_FAILED)}}this._hostKey=r;this._dhData=n;this._sig=i;let o=false;let l;if(this._protocol._hostVerifier===undefined){l=true;this._protocol._debug&&this._protocol._debug("Host accepted by default (no verification)")}else{l=this._protocol._hostVerifier(r,(e=>{if(o)return;o=true;if(e===false){this._protocol._debug&&this._protocol._debug("Host denied (verification failed)");return U(this._protocol,"Host denied (verification failed)","handshake",I.KEY_EXCHANGE_FAILED)}this._protocol._debug&&this._protocol._debug("Host accepted (verified)");this._hostVerified=true;if(this._receivedNEWKEYS)this.finish();else trySendNEWKEYS(this)}))}if(l===undefined){++this._step;return}o=true;if(l===false){this._protocol._debug&&this._protocol._debug("Host denied (verification failed)");return U(this._protocol,"Host denied (verification failed)","handshake",I.KEY_EXCHANGE_FAILED)}this._protocol._debug&&this._protocol._debug("Host accepted (verified)");this._hostVerified=true;trySendNEWKEYS(this)}++this._step;break;case 2:if(t!==T.NEWKEYS){return U(this._protocol,`Received packet ${t} instead of ${T.NEWKEYS}`,"handshake",I.KEY_EXCHANGE_FAILED)}this._protocol._debug&&this._protocol._debug("Inbound: NEWKEYS");this._receivedNEWKEYS=true;if(this._protocol._strictMode)this._protocol._decipher.inSeqno=0;++this._step;return this.finish(!this._protocol._server&&!this._hostVerified);default:return U(this._protocol,`Received unexpected packet ${t} after NEWKEYS`,"handshake",I.KEY_EXCHANGE_FAILED)}}}class Curve25519Exchange extends KeyExchange{constructor(e,...t){super(...t);this.type="25519";this.hashName=e;this._keys=null}generateKeys(){if(!this._keys)this._keys=p("x25519")}getPublicKey(){this.generateKeys();const e=this._keys.publicKey.export({type:"spki",format:"der"});return e.slice(-32)}convertPublicKey(e){let t;let r=0;let n=e.length;while(e[r]===0){++r;--n}if(e.length===32)return e;if(n!==e.length){t=Buffer.allocUnsafe(n);e.copy(t,0,r);e=t}return e}computeSecret(e){this.generateKeys();try{const t=new m.Writer;t.startSequence();t.startSequence();t.writeOID("1.3.101.110");t.endSequence();t.startSequence(m.BitString);t.writeByte(0);t._ensure(e.length);e.copy(t._buf,t._offset,0,e.length);t._offset+=e.length;t.endSequence();t.endSequence();return convertToMpint(u({privateKey:this._keys.privateKey,publicKey:l({key:t.buffer,type:"spki",format:"der"})}))}catch(e){return e}}}class ECDHExchange extends KeyExchange{constructor(e,t,...r){super(...r);this.type="ecdh";this.curveName=e;this.hashName=t}generateKeys(){if(!this._dh){this._dh=s(this.curveName);this._public=this._dh.generateKeys()}}}class DHGroupExchange extends KeyExchange{constructor(e,...t){super(...t);this.type="groupex";this.hashName=e;this._prime=null;this._generator=null;this._minBits=V;this._prefBits=dhEstimate(this.negotiated);if(this._protocol._compatFlags&y.BUG_DHGEX_LARGE)this._prefBits=Math.min(this._prefBits,4096);this._maxBits=J}start(){if(this._protocol._server)return;this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_REQUEST");let e=this._protocol._packetRW.write.allocStartKEX;const t=this._protocol._packetRW.write.alloc(1+4+4+4,true);t[e]=T.KEXDH_GEX_REQUEST;Q(t,this._minBits,++e);Q(t,this._prefBits,e+=4);Q(t,this._maxBits,e+=4);this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(t,true))}generateKeys(){if(!this._dh&&this._prime&&this._generator){this._dh=n(this._prime,this._generator);this._public=this._dh.generateKeys()}}setDHParams(e,t){if(!Buffer.isBuffer(e))throw new Error("Invalid prime value");if(!Buffer.isBuffer(t))throw new Error("Invalid generator value");this._prime=e;this._generator=t}getDHParams(){if(this._dh){return{prime:convertToMpint(this._dh.getPrime()),generator:convertToMpint(this._dh.getGenerator())}}}parse(e){const t=e[0];switch(this._step){case 1:{if(this._protocol._server){if(t!==T.KEXDH_GEX_REQUEST){return U(this._protocol,`Received packet ${t} instead of `+T.KEXDH_GEX_REQUEST,"handshake",I.KEY_EXCHANGE_FAILED)}return U(this._protocol,"Group exchange not implemented for server","handshake",I.KEY_EXCHANGE_FAILED)}if(t!==T.KEXDH_GEX_GROUP){return U(this._protocol,`Received packet ${t} instead of ${T.KEXDH_GEX_GROUP}`,"handshake",I.KEY_EXCHANGE_FAILED)}this._protocol._debug&&this._protocol._debug("Received DH GEX Group");L.init(e,1);let r;let n;if((r=L.readString())===undefined||(n=L.readString())===undefined){L.clear();return U(this._protocol,"Received malformed KEXDH_GEX_GROUP","handshake",I.KEY_EXCHANGE_FAILED)}L.clear();this.setDHParams(r,n);this.generateKeys();const i=this.getPublicKey();this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_INIT");let s=this._protocol._packetRW.write.allocStartKEX;const o=this._protocol._packetRW.write.alloc(1+4+i.length,true);o[s]=T.KEXDH_GEX_INIT;Q(o,i.length,++s);o.set(i,s+=4);this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(o,true));++this._step;break}case 2:if(this._protocol._server){if(t!==T.KEXDH_GEX_INIT){return U(this._protocol,`Received packet ${t} instead of ${T.KEXDH_GEX_INIT}`,"handshake",I.KEY_EXCHANGE_FAILED)}this._protocol._debug&&this._protocol._debug("Received DH GEX Init");return U(this._protocol,"Group exchange not implemented for server","handshake",I.KEY_EXCHANGE_FAILED)}else if(t!==T.KEXDH_GEX_REPLY){return U(this._protocol,`Received packet ${t} instead of ${T.KEXDH_GEX_REPLY}`,"handshake",I.KEY_EXCHANGE_FAILED)}this._protocol._debug&&this._protocol._debug("Received DH GEX Reply");this._step=1;e[0]=T.KEXDH_REPLY;this.parse=KeyExchange.prototype.parse;this.parse(e)}}}class DHExchange extends KeyExchange{constructor(e,t,...r){super(...r);this.type="group";this.groupName=e;this.hashName=t}start(){if(!this._protocol._server){this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_INIT");const e=this.getPublicKey();let t=this._protocol._packetRW.write.allocStartKEX;const r=this._protocol._packetRW.write.alloc(1+4+e.length,true);r[t]=T.KEXDH_INIT;Q(r,e.length,++t);r.set(e,t+=4);this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(r,true))}}generateKeys(){if(!this._dh){this._dh=i(this.groupName);this._public=this._dh.generateKeys()}}getDHParams(){if(this._dh){return{prime:convertToMpint(this._dh.getPrime()),generator:convertToMpint(this._dh.getGenerator())}}}}return(e,...t)=>{if(typeof e!=="object"||e===null)throw new Error("Invalid negotiated argument");const r=e.kex;if(typeof r==="string"){t=[e,...t];switch(r){case"curve25519-sha256":case"curve25519-sha256@libssh.org":if(!_)break;return new Curve25519Exchange("sha256",...t);case"ecdh-sha2-nistp256":return new ECDHExchange("prime256v1","sha256",...t);case"ecdh-sha2-nistp384":return new ECDHExchange("secp384r1","sha384",...t);case"ecdh-sha2-nistp521":return new ECDHExchange("secp521r1","sha512",...t);case"diffie-hellman-group1-sha1":return new DHExchange("modp2","sha1",...t);case"diffie-hellman-group14-sha1":return new DHExchange("modp14","sha1",...t);case"diffie-hellman-group14-sha256":return new DHExchange("modp14","sha256",...t);case"diffie-hellman-group15-sha512":return new DHExchange("modp15","sha512",...t);case"diffie-hellman-group16-sha512":return new DHExchange("modp16","sha512",...t);case"diffie-hellman-group17-sha512":return new DHExchange("modp17","sha512",...t);case"diffie-hellman-group18-sha512":return new DHExchange("modp18","sha512",...t);case"diffie-hellman-group-exchange-sha1":return new DHGroupExchange("sha1",...t);case"diffie-hellman-group-exchange-sha256":return new DHGroupExchange("sha256",...t)}throw new Error(`Unsupported key exchange algorithm: ${r}`)}throw new Error(`Invalid key exchange type: ${r}`)}})();const re=(()=>{const e=["kex","serverHostKey",["cs","cipher"],["sc","cipher"],["cs","mac"],["sc","mac"],["cs","compress"],["sc","compress"],["cs","lang"],["sc","lang"]];return class KexInit{constructor(t){if(typeof t!=="object"||t===null)throw new TypeError("Argument must be an object");const r={kex:undefined,serverHostKey:undefined,cs:{cipher:undefined,mac:undefined,compress:undefined,lang:undefined},sc:{cipher:undefined,mac:undefined,compress:undefined,lang:undefined},all:undefined};let n=0;for(const i of e){let e;let s;let o;let l;if(typeof i==="string"){e=r;s=t[i];o=l=i}else{const n=i[0];e=r[n];l=i[1];s=t[n][l];o=`${n}.${l}`}const u={array:undefined,buffer:undefined};if(Buffer.isBuffer(s)){u.array=(""+s).split(",");u.buffer=s;n+=4+s.length}else{if(typeof s==="string")s=s.split(",");if(Array.isArray(s)){u.array=s;u.buffer=Buffer.from(s.join(","))}else{throw new TypeError(`Invalid \`${o}\` type: ${typeof s}`)}n+=4+u.buffer.length}e[l]=u}const i=Buffer.allocUnsafe(n);r.all=i;let s=0;for(const t of e){let e;if(typeof t==="string")e=r[t].buffer;else e=r[t[0]][t[1]].buffer;s=Q(i,e.length,s);i.set(e,s);s+=e.length}this.totalSize=n;this.lists=r}copyAllTo(e,t){const r=this.lists.all;if(typeof t!=="number")throw new TypeError(`Invalid offset value: ${typeof t}`);if(e.length-t<r.length)throw new Error("Insufficient space to copy list");e.set(r,t);return r.length}}})();const ne=(()=>{const e=Buffer.allocUnsafe(4);return(t,r)=>{Q(e,r.length,0);t.update(e);t.update(r)}})();function generateKEXVal(e,t,r,n,i,s){let l;if(e){let u=o(t).update(r).update(n).update(s).update(i).digest();while(u.length<e){const e=o(t).update(r).update(n).update(u).digest();const i=Buffer.allocUnsafe(u.length+e.length);i.set(u,0);i.set(e,u.length);u=i}if(u.length===e)l=u;else l=new j(u.buffer,u.byteOffset,e)}else{l=ee}return l}function onKEXPayload(e,t){if(t.length===0){this._debug&&this._debug("Inbound: Skipping empty packet payload");return}if(this._skipNextInboundPacket){this._skipNextInboundPacket=false;return}t=this._packetRW.read.read(t);const n=t[0];if(!this._strictMode){switch(n){case T.IGNORE:case T.UNIMPLEMENTED:case T.DEBUG:if(!Y)Y=r(9244);return Y[n](this,t)}}switch(n){case T.DISCONNECT:if(!Y)Y=r(9244);return Y[n](this,t);case T.KEXINIT:if(!e.firstPacket){return U(this,"Received extra KEXINIT during handshake","handshake",I.KEY_EXCHANGE_FAILED)}e.firstPacket=false;return handleKexInit(this,t);default:if(n<20||n>49){return U(this,`Received unexpected packet type ${n}`,"handshake",I.KEY_EXCHANGE_FAILED)}}return this._kex.parse(t)}function dhEstimate(e){const t=k[e.cs.cipher];const r=k[e.sc.cipher];const n=Math.max(0,t.sslName==="des-ede3-cbc"?14:t.keyLen,t.blockLen,t.ivLen,r.sslName==="des-ede3-cbc"?14:r.keyLen,r.blockLen,r.ivLen)*8;if(n<=112)return 2048;if(n<=128)return 3072;if(n<=192)return 7680;return 8192}function trySendNEWKEYS(e){if(!e._sentNEWKEYS){e._protocol._debug&&e._protocol._debug("Outbound: Sending NEWKEYS");const t=e._protocol._packetRW.write.allocStartKEX;const r=e._protocol._packetRW.write.alloc(1,true);r[t]=T.NEWKEYS;e._protocol._cipher.encrypt(e._protocol._packetRW.write.finalize(r,true));e._sentNEWKEYS=true;if(e._protocol._strictMode)e._protocol._cipher.outSeqno=0}}e.exports={KexInit:re,kexinit:kexinit,onKEXPayload:onKEXPayload,DEFAULT_KEXINIT_CLIENT:new re({kex:v.concat(["ext-info-c","kex-strict-c-v00@openssh.com"]),serverHostKey:E,cs:{cipher:b,mac:C,compress:w,lang:[]},sc:{cipher:b,mac:C,compress:w,lang:[]}}),DEFAULT_KEXINIT_SERVER:new re({kex:v.concat(["kex-strict-s-v00@openssh.com"]),serverHostKey:E,cs:{cipher:b,mac:C,compress:w,lang:[]},sc:{cipher:b,mac:C,compress:w,lang:[]}}),HANDLERS:{[T.KEXINIT]:handleKexInit}}},1789:(e,t,r)=>{"use strict";const{createDecipheriv:n,createECDH:i,createHash:s,createHmac:o,createSign:l,createVerify:u,getCiphers:p,sign:g,verify:m}=r(6982);const y=p();const{Ber:_}=r(9837);const v=r(686).pbkdf;const{CIPHER_INFO:E}=r(2888);const{eddsaSupported:b,SUPPORTED_CIPHER:C}=r(4020);const{bufferSlice:w,makeBufferParser:I,readString:T,readUInt32BE:k,writeUInt32BE:R}=r(2184);const O=Symbol("Hash Algorithm");const P=Symbol("Private key PEM");const B=Symbol("Public key PEM");const D=Symbol("Public key SSH");const L=Symbol("Decrypted Key");const x=Object.create(null);{const Q=Object.keys(E);for(let q=0;q<Q.length;++q){const z=E[Q[q]].sslName;if(!z||x[z])continue;x[z]=E[Q[q]]}}const U=I();function makePEM(e,t){t=t.base64Slice(0,t.length);let r=t.replace(/.{64}/g,"$&\n");if(t.length&63)r+="\n";return`-----BEGIN ${e} KEY-----\n${r}-----END ${e} KEY-----`}function combineBuffers(e,t){const r=Buffer.allocUnsafe(e.length+t.length);r.set(e,0);r.set(t,e.length);return r}function skipFields(e,t){const r=e.length;let n=e._pos||0;for(let i=0;i<t;++i){const t=r-n;if(n>=r||t<4)return false;const i=k(e,n);if(t<4+i)return false;n+=4+i}e._pos=n;return true}function genOpenSSLRSAPub(e,t){const r=new _.Writer;r.startSequence();r.startSequence();r.writeOID("1.2.840.113549.1.1.1");r.writeNull();r.endSequence();r.startSequence(_.BitString);r.writeByte(0);r.startSequence();r.writeBuffer(e,_.Integer);r.writeBuffer(t,_.Integer);r.endSequence();r.endSequence();r.endSequence();return makePEM("PUBLIC",r.buffer)}function genOpenSSHRSAPub(e,t){const r=Buffer.allocUnsafe(4+7+4+t.length+4+e.length);R(r,7,0);r.utf8Write("ssh-rsa",4,7);let n=4+7;R(r,t.length,n);r.set(t,n+=4);R(r,e.length,n+=t.length);r.set(e,n+4);return r}const j=(()=>{function genRSAASN1Buf(e,t,r,n,i,s,o,l){const u=new _.Writer;u.startSequence();u.writeInt(0,_.Integer);u.writeBuffer(e,_.Integer);u.writeBuffer(t,_.Integer);u.writeBuffer(r,_.Integer);u.writeBuffer(n,_.Integer);u.writeBuffer(i,_.Integer);u.writeBuffer(s,_.Integer);u.writeBuffer(o,_.Integer);u.writeBuffer(l,_.Integer);u.endSequence();return u.buffer}function bigIntFromBuffer(e){return BigInt(`0x${e.hexSlice(0,e.length)}`)}function bigIntToBuffer(e){let t=e.toString(16);if((t.length&1)!==0){t=`0${t}`}else{const e=t.charCodeAt(0);if(e===56||e===57||e>=97&&e<=102){t=`00${t}`}}return Buffer.from(t,"hex")}return function genOpenSSLRSAPriv(e,t,r,n,i,s){const o=bigIntFromBuffer(r);const l=bigIntToBuffer(o%(bigIntFromBuffer(i)-1n));const u=bigIntToBuffer(o%(bigIntFromBuffer(s)-1n));return makePEM("RSA PRIVATE",genRSAASN1Buf(e,t,r,i,s,l,u,n))}})();function genOpenSSLDSAPub(e,t,r,n){const i=new _.Writer;i.startSequence();i.startSequence();i.writeOID("1.2.840.10040.4.1");i.startSequence();i.writeBuffer(e,_.Integer);i.writeBuffer(t,_.Integer);i.writeBuffer(r,_.Integer);i.endSequence();i.endSequence();i.startSequence(_.BitString);i.writeByte(0);i.writeBuffer(n,_.Integer);i.endSequence();i.endSequence();return makePEM("PUBLIC",i.buffer)}function genOpenSSHDSAPub(e,t,r,n){const i=Buffer.allocUnsafe(4+7+4+e.length+4+t.length+4+r.length+4+n.length);R(i,7,0);i.utf8Write("ssh-dss",4,7);let s=4+7;R(i,e.length,s);i.set(e,s+=4);R(i,t.length,s+=e.length);i.set(t,s+=4);R(i,r.length,s+=t.length);i.set(r,s+=4);R(i,n.length,s+=r.length);i.set(n,s+4);return i}function genOpenSSLDSAPriv(e,t,r,n,i){const s=new _.Writer;s.startSequence();s.writeInt(0,_.Integer);s.writeBuffer(e,_.Integer);s.writeBuffer(t,_.Integer);s.writeBuffer(r,_.Integer);s.writeBuffer(n,_.Integer);s.writeBuffer(i,_.Integer);s.endSequence();return makePEM("DSA PRIVATE",s.buffer)}function genOpenSSLEdPub(e){const t=new _.Writer;t.startSequence();t.startSequence();t.writeOID("1.3.101.112");t.endSequence();t.startSequence(_.BitString);t.writeByte(0);t._ensure(e.length);t._buf.set(e,t._offset);t._offset+=e.length;t.endSequence();t.endSequence();return makePEM("PUBLIC",t.buffer)}function genOpenSSHEdPub(e){const t=Buffer.allocUnsafe(4+11+4+e.length);R(t,11,0);t.utf8Write("ssh-ed25519",4,11);R(t,e.length,15);t.set(e,19);return t}function genOpenSSLEdPriv(e){const t=new _.Writer;t.startSequence();t.writeInt(0,_.Integer);t.startSequence();t.writeOID("1.3.101.112");t.endSequence();t.startSequence(_.OctetString);t.writeBuffer(e,_.OctetString);t.endSequence();t.endSequence();return makePEM("PRIVATE",t.buffer)}function genOpenSSLECDSAPub(e,t){const r=new _.Writer;r.startSequence();r.startSequence();r.writeOID("1.2.840.10045.2.1");r.writeOID(e);r.endSequence();r.startSequence(_.BitString);r.writeByte(0);r._ensure(t.length);r._buf.set(t,r._offset);r._offset+=t.length;r.endSequence();r.endSequence();return makePEM("PUBLIC",r.buffer)}function genOpenSSHECDSAPub(e,t){let r;switch(e){case"1.2.840.10045.3.1.7":r="nistp256";break;case"1.3.132.0.34":r="nistp384";break;case"1.3.132.0.35":r="nistp521";break;default:return}const n=Buffer.allocUnsafe(4+19+4+8+4+t.length);R(n,19,0);n.utf8Write(`ecdsa-sha2-${r}`,4,19);R(n,8,23);n.utf8Write(r,27,8);R(n,t.length,35);n.set(t,39);return n}function genOpenSSLECDSAPriv(e,t,r){const n=new _.Writer;n.startSequence();n.writeInt(1,_.Integer);n.writeBuffer(r,_.OctetString);n.startSequence(160);n.writeOID(e);n.endSequence();n.startSequence(161);n.startSequence(_.BitString);n.writeByte(0);n._ensure(t.length);n._buf.set(t,n._offset);n._offset+=t.length;n.endSequence();n.endSequence();n.endSequence();return makePEM("EC PRIVATE",n.buffer)}function genOpenSSLECDSAPubFromPriv(e,t){const r=i(e);r.setPrivateKey(t);return r.getPublicKey()}const W={sign:(()=>{if(typeof g==="function"){return function sign(e,t){const r=this[P];if(r===null)return new Error("No private key available");if(!t||typeof t!=="string")t=this[O];try{return g(t,e,r)}catch(e){return e}}}return function sign(e,t){const r=this[P];if(r===null)return new Error("No private key available");if(!t||typeof t!=="string")t=this[O];const n=l(t);n.update(e);try{return n.sign(r)}catch(e){return e}}})(),verify:(()=>{if(typeof m==="function"){return function verify(e,t,r){const n=this[B];if(n===null)return new Error("No public key available");if(!r||typeof r!=="string")r=this[O];try{return m(r,e,n,t)}catch(e){return e}}}return function verify(e,t,r){const n=this[B];if(n===null)return new Error("No public key available");if(!r||typeof r!=="string")r=this[O];const i=u(r);i.update(e);try{return i.verify(n,t)}catch(e){return e}}})(),isPrivateKey:function isPrivateKey(){return this[P]!==null},getPrivatePEM:function getPrivatePEM(){return this[P]},getPublicPEM:function getPublicPEM(){return this[B]},getPublicSSH:function getPublicSSH(){return this[D]},equals:function equals(e){const t=parseKey(e);if(t instanceof Error)return false;return this.type===t.type&&this[P]===t[P]&&this[B]===t[B]&&this[D].equals(t[D])}};function OpenSSH_Private(e,t,r,n,i,s,o){this.type=e;this.comment=t;this[P]=r;this[B]=n;this[D]=i;this[O]=s;this[L]=o}OpenSSH_Private.prototype=W;{const G=/^-----BEGIN OPENSSH PRIVATE KEY-----(?:\r\n|\n)([\s\S]+)(?:\r\n|\n)-----END OPENSSH PRIVATE KEY-----$/;OpenSSH_Private.parse=(e,t)=>{const r=G.exec(e);if(r===null)return null;let i;const s=Buffer.from(r[1],"base64");if(s.length<31)return new Error("Malformed OpenSSH private key");const o=s.utf8Slice(0,15);if(o!=="openssh-key-v1\0")return new Error(`Unsupported OpenSSH key magic: ${o}`);const l=T(s,15,true);if(l===undefined)return new Error("Malformed OpenSSH private key");if(l!=="none"&&C.indexOf(l)===-1)return new Error(`Unsupported cipher for OpenSSH key: ${l}`);const u=T(s,s._pos,true);if(u===undefined)return new Error("Malformed OpenSSH private key");if(u!=="none"){if(l==="none")return new Error("Malformed OpenSSH private key");if(u!=="bcrypt")return new Error(`Unsupported kdf name for OpenSSH key: ${u}`);if(!t){return new Error("Encrypted private OpenSSH key detected, but no passphrase given")}}else if(l!=="none"){return new Error("Malformed OpenSSH private key")}let p;let g;let m;if(l!=="none")p=E[l];const y=T(s,s._pos);if(y===undefined)return new Error("Malformed OpenSSH private key");if(y.length){switch(u){case"none":return new Error("Malformed OpenSSH private key");case"bcrypt":{const e=T(y,0);if(e===undefined||y._pos+4>y.length)return new Error("Malformed OpenSSH private key");const r=k(y,y._pos);const n=Buffer.allocUnsafe(p.keyLen+p.ivLen);const i=v(t,t.length,e,e.length,n,n.length,r);if(i!==0)return new Error("Failed to generate information to decrypt key");g=w(n,0,p.keyLen);m=w(n,p.keyLen,n.length);break}}}else if(u!=="none"){return new Error("Malformed OpenSSH private key")}if(s._pos+3>=s.length)return new Error("Malformed OpenSSH private key");const _=k(s,s._pos);s._pos+=4;if(_>0){for(let e=0;e<_;++e){const e=T(s,s._pos);if(e===undefined)return new Error("Malformed OpenSSH private key");const t=T(e,0,true);if(t===undefined)return new Error("Malformed OpenSSH private key")}let e=T(s,s._pos);if(e===undefined)return new Error("Malformed OpenSSH private key");if(g!==undefined){if(e.length<p.blockLen||e.length%p.blockLen!==0){return new Error("Malformed OpenSSH private key")}try{const t={authTagLength:p.authLen};const r=n(p.sslName,g,m,t);r.setAutoPadding(false);if(p.authLen>0){if(s.length-s._pos<p.authLen)return new Error("Malformed OpenSSH private key");r.setAuthTag(w(s,s._pos,s._pos+=p.authLen))}e=combineBuffers(r.update(e),r.final())}catch(e){return e}}if(s._pos!==s.length)return new Error("Malformed OpenSSH private key");i=parseOpenSSHPrivKeys(e,_,g!==undefined)}else{i=[]}if(i instanceof Error)return i;return i[0]};function parseOpenSSHPrivKeys(e,t,r){const n=[];if(e.length<8)return new Error("Malformed OpenSSH private key");const i=k(e,0);const s=k(e,4);if(i!==s){if(r){return new Error("OpenSSH key integrity check failed -- bad passphrase?")}return new Error("OpenSSH key integrity check failed")}e._pos=8;let o;let l;for(o=0;o<t;++o){let t;let i;let s;let o;const u=T(e,e._pos,true);if(u===undefined)return new Error("Malformed OpenSSH private key");switch(u){case"ssh-rsa":{const r=T(e,e._pos);if(r===undefined)return new Error("Malformed OpenSSH private key");const n=T(e,e._pos);if(n===undefined)return new Error("Malformed OpenSSH private key");const l=T(e,e._pos);if(l===undefined)return new Error("Malformed OpenSSH private key");const u=T(e,e._pos);if(u===undefined)return new Error("Malformed OpenSSH private key");const p=T(e,e._pos);if(p===undefined)return new Error("Malformed OpenSSH private key");const g=T(e,e._pos);if(g===undefined)return new Error("Malformed OpenSSH private key");s=genOpenSSLRSAPub(r,n);o=genOpenSSHRSAPub(r,n);i=j(r,n,l,u,p,g);t="sha1";break}case"ssh-dss":{const r=T(e,e._pos);if(r===undefined)return new Error("Malformed OpenSSH private key");const n=T(e,e._pos);if(n===undefined)return new Error("Malformed OpenSSH private key");const l=T(e,e._pos);if(l===undefined)return new Error("Malformed OpenSSH private key");const u=T(e,e._pos);if(u===undefined)return new Error("Malformed OpenSSH private key");const p=T(e,e._pos);if(p===undefined)return new Error("Malformed OpenSSH private key");s=genOpenSSLDSAPub(r,n,l,u);o=genOpenSSHDSAPub(r,n,l,u);i=genOpenSSLDSAPriv(r,n,l,u,p);t="sha1";break}case"ssh-ed25519":{if(!b)return new Error(`Unsupported OpenSSH private key type: ${u}`);const r=T(e,e._pos);if(r===undefined||r.length!==32)return new Error("Malformed OpenSSH private key");const n=T(e,e._pos);if(n===undefined||n.length!==64)return new Error("Malformed OpenSSH private key");s=genOpenSSLEdPub(r);o=genOpenSSHEdPub(r);i=genOpenSSLEdPriv(w(n,0,32));t=null;break}case"ecdsa-sha2-nistp256":t="sha256";l="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":if(t===undefined){t="sha384";l="1.3.132.0.34"}case"ecdsa-sha2-nistp521":{if(t===undefined){t="sha512";l="1.3.132.0.35"}if(!skipFields(e,1))return new Error("Malformed OpenSSH private key");const r=T(e,e._pos);if(r===undefined)return new Error("Malformed OpenSSH private key");const n=T(e,e._pos);if(n===undefined)return new Error("Malformed OpenSSH private key");s=genOpenSSLECDSAPub(l,r);o=genOpenSSHECDSAPub(l,r);i=genOpenSSLECDSAPriv(l,r,n);break}default:return new Error(`Unsupported OpenSSH private key type: ${u}`)}const p=T(e,e._pos,true);if(p===undefined)return new Error("Malformed OpenSSH private key");n.push(new OpenSSH_Private(u,p,i,s,o,t,r))}let u=0;for(o=e._pos;o<e.length;++o){if(e[o]!==++u%255)return new Error("Malformed OpenSSH private key")}return n}}function OpenSSH_Old_Private(e,t,r,n,i,s,o){this.type=e;this.comment=t;this[P]=r;this[B]=n;this[D]=i;this[O]=s;this[L]=o}OpenSSH_Old_Private.prototype=W;{const $=/^-----BEGIN (RSA|DSA|EC) PRIVATE KEY-----(?:\r\n|\n)((?:[^:]+:\s*[\S].*(?:\r\n|\n))*)([\s\S]+)(?:\r\n|\n)-----END (RSA|DSA|EC) PRIVATE KEY-----$/;OpenSSH_Old_Private.parse=(e,t)=>{const r=$.exec(e);if(r===null)return null;let i=Buffer.from(r[3],"base64");let o=r[2];let l=false;if(o!==undefined){o=o.split(/\r\n|\n/g);for(let e=0;e<o.length;++e){const r=o[e];let u=r.indexOf(":");if(r.slice(0,u)==="DEK-Info"){const e=r.slice(u+2);u=e.indexOf(",");if(u===-1)continue;const o=e.slice(0,u).toLowerCase();if(y.indexOf(o)===-1){return new Error(`Cipher (${o}) not supported `+"for encrypted OpenSSH private key")}const p=x[o];if(!p){return new Error(`Cipher (${o}) not supported `+"for encrypted OpenSSH private key")}const g=Buffer.from(e.slice(u+1),"hex");if(g.length!==p.ivLen)return new Error("Malformed encrypted OpenSSH private key");if(!t){return new Error("Encrypted OpenSSH private key detected, but no passphrase given")}const m=w(g,0,8);let _=s("md5").update(t).update(m).digest();while(_.length<p.keyLen){_=combineBuffers(_,s("md5").update(_).update(t).update(m).digest())}if(_.length>p.keyLen)_=w(_,0,p.keyLen);try{const e=n(o,_,g);e.setAutoPadding(false);i=combineBuffers(e.update(i),e.final());l=true}catch(e){return e}}}}let u;let p;let g;let m;let v;let E;let b="Malformed OpenSSH private key";if(l)b+=". Bad passphrase?";switch(r[1]){case"RSA":u="ssh-rsa";p=makePEM("RSA PRIVATE",i);try{E=new _.Reader(i);E.readSequence();E.readInt();const e=E.readString(_.Integer,true);if(e===null)return new Error(b);const t=E.readString(_.Integer,true);if(t===null)return new Error(b);g=genOpenSSLRSAPub(e,t);m=genOpenSSHRSAPub(e,t)}catch{return new Error(b)}v="sha1";break;case"DSA":u="ssh-dss";p=makePEM("DSA PRIVATE",i);try{E=new _.Reader(i);E.readSequence();E.readInt();const e=E.readString(_.Integer,true);if(e===null)return new Error(b);const t=E.readString(_.Integer,true);if(t===null)return new Error(b);const r=E.readString(_.Integer,true);if(r===null)return new Error(b);const n=E.readString(_.Integer,true);if(n===null)return new Error(b);g=genOpenSSLDSAPub(e,t,r,n);m=genOpenSSHDSAPub(e,t,r,n)}catch{return new Error(b)}v="sha1";break;case"EC":{let e;let t;let r;try{E=new _.Reader(i);E.readSequence();E.readInt();t=E.readString(_.OctetString,true);E.readByte();const n=E.readLength();if(n!==null){E._offset=n;r=E.readOID();if(r===null)return new Error(b);switch(r){case"1.2.840.10045.3.1.7":e="prime256v1";u="ecdsa-sha2-nistp256";v="sha256";break;case"1.3.132.0.34":e="secp384r1";u="ecdsa-sha2-nistp384";v="sha384";break;case"1.3.132.0.35":e="secp521r1";u="ecdsa-sha2-nistp521";v="sha512";break;default:return new Error(`Unsupported private key EC OID: ${r}`)}}else{return new Error(b)}}catch{return new Error(b)}p=makePEM("EC PRIVATE",i);const n=genOpenSSLECDSAPubFromPriv(e,t);g=genOpenSSLECDSAPub(r,n);m=genOpenSSHECDSAPub(r,n);break}}return new OpenSSH_Old_Private(u,"",p,g,m,v,l)}}function PPK_Private(e,t,r,n,i,s,o){this.type=e;this.comment=t;this[P]=r;this[B]=n;this[D]=i;this[O]=s;this[L]=o}PPK_Private.prototype=W;{const Y=Buffer.alloc(0);const V=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);const J=Buffer.from([0,0,0,0]);const ee=Buffer.from([0,0,0,1]);const te=/^PuTTY-User-Key-File-2: (ssh-(?:rsa|dss))\r?\nEncryption: (aes256-cbc|none)\r?\nComment: ([^\r\n]*)\r?\nPublic-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-MAC: ([^\r\n]+)/;PPK_Private.parse=(e,t)=>{const r=te.exec(e);if(r===null)return null;const i=r[2];const l=i!=="none";if(l&&!t){return new Error("Encrypted PPK private key detected, but no passphrase given")}let u=Buffer.from(r[5],"base64");if(l){const e=E[i];let r=combineBuffers(s("sha1").update(J).update(t).digest(),s("sha1").update(ee).update(t).digest());if(r.length>e.keyLen)r=w(r,0,e.keyLen);try{const t=n(e.sslName,r,V);t.setAutoPadding(false);u=combineBuffers(t.update(u),t.final())}catch(e){return e}}const p=r[1];const g=r[3];const m=Buffer.from(r[4],"base64");const y=r[6];const _=p.length;const v=i.length;const b=Buffer.byteLength(g);const C=m.length;const I=u.length;const k=Buffer.allocUnsafe(4+_+4+v+4+b+4+C+4+I);let O=0;R(k,_,O);k.utf8Write(p,O+=4,_);R(k,v,O+=_);k.utf8Write(i,O+=4,v);R(k,b,O+=v);k.utf8Write(g,O+=4,b);R(k,C,O+=b);k.set(m,O+=4);R(k,I,O+=C);k.set(u,O+4);if(!t)t=Y;const P=o("sha1",s("sha1").update("putty-private-key-file-mac-key").update(t).digest()).update(k).digest("hex");if(P!==y){if(l){return new Error("PPK private key integrity check failed -- bad passphrase?")}return new Error("PPK private key integrity check failed")}let B;let D;let L;m._pos=0;skipFields(m,1);switch(p){case"ssh-rsa":{const e=T(m,m._pos);if(e===undefined)return new Error("Malformed PPK public key");const t=T(m,m._pos);if(t===undefined)return new Error("Malformed PPK public key");const r=T(u,0);if(r===undefined)return new Error("Malformed PPK private key");const n=T(u,u._pos);if(n===undefined)return new Error("Malformed PPK private key");const i=T(u,u._pos);if(i===undefined)return new Error("Malformed PPK private key");const s=T(u,u._pos);if(s===undefined)return new Error("Malformed PPK private key");B=genOpenSSLRSAPub(t,e);D=genOpenSSHRSAPub(t,e);L=j(t,e,r,s,n,i);break}case"ssh-dss":{const e=T(m,m._pos);if(e===undefined)return new Error("Malformed PPK public key");const t=T(m,m._pos);if(t===undefined)return new Error("Malformed PPK public key");const r=T(m,m._pos);if(r===undefined)return new Error("Malformed PPK public key");const n=T(m,m._pos);if(n===undefined)return new Error("Malformed PPK public key");const i=T(u,0);if(i===undefined)return new Error("Malformed PPK private key");B=genOpenSSLDSAPub(e,t,r,n);D=genOpenSSHDSAPub(e,t,r,n);L=genOpenSSLDSAPriv(e,t,r,n,i);break}}return new PPK_Private(p,g,L,B,D,"sha1",l)}}function OpenSSH_Public(e,t,r,n,i){this.type=e;this.comment=t;this[P]=null;this[B]=r;this[D]=n;this[O]=i;this[L]=false}OpenSSH_Public.prototype=W;{let re;if(b)re=/^(((?:ssh-(?:rsa|dss|ed25519))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/;else re=/^(((?:ssh-(?:rsa|dss))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/;OpenSSH_Public.parse=e=>{const t=re.exec(e);if(t===null)return null;const r=t[1];const n=t[2];const i=Buffer.from(t[3],"base64");const s=t[4]||"";const o=T(i,i._pos,true);if(o===undefined||o.indexOf(n)!==0)return new Error("Malformed OpenSSH public key");return parseDER(i,n,s,r)}}function RFC4716_Public(e,t,r,n,i){this.type=e;this.comment=t;this[P]=null;this[B]=r;this[D]=n;this[O]=i;this[L]=false}RFC4716_Public.prototype=W;{const ne=/^---- BEGIN SSH2 PUBLIC KEY ----(?:\r?\n)((?:.{0,72}\r?\n)+)---- END SSH2 PUBLIC KEY ----$/;const ie=/^[A-Z0-9a-z/+=\r\n]+$/;const se=/^([\x21-\x39\x3B-\x7E]{1,64}): ((?:[^\\]*\\\r?\n)*[^\r\n]+)\r?\n/gm;const oe=/\\\r?\n/g;RFC4716_Public.parse=e=>{let t=ne.exec(e);if(t===null)return null;const r=t[1];let n=0;let i="";while(t=se.exec(r)){const e=t[1];const r=t[2].replace(oe,"");if(r.length>1024){se.lastIndex=0;return new Error("Malformed RFC4716 public key")}n=se.lastIndex;if(e.toLowerCase()==="comment"){i=r;if(i.length>1&&i.charCodeAt(0)===34&&i.charCodeAt(i.length-1)===34){i=i.slice(1,-1)}}}let s=r.slice(n);if(!ie.test(s))return new Error("Malformed RFC4716 public key");s=Buffer.from(s,"base64");const o=T(s,0,true);if(o===undefined)return new Error("Malformed RFC4716 public key");let l=null;let u=null;switch(o){case"ssh-rsa":{const e=T(s,s._pos);if(e===undefined)return new Error("Malformed RFC4716 public key");const t=T(s,s._pos);if(t===undefined)return new Error("Malformed RFC4716 public key");l=genOpenSSLRSAPub(t,e);u=genOpenSSHRSAPub(t,e);break}case"ssh-dss":{const e=T(s,s._pos);if(e===undefined)return new Error("Malformed RFC4716 public key");const t=T(s,s._pos);if(t===undefined)return new Error("Malformed RFC4716 public key");const r=T(s,s._pos);if(r===undefined)return new Error("Malformed RFC4716 public key");const n=T(s,s._pos);if(n===undefined)return new Error("Malformed RFC4716 public key");l=genOpenSSLDSAPub(e,t,r,n);u=genOpenSSHDSAPub(e,t,r,n);break}default:return new Error("Malformed RFC4716 public key")}return new RFC4716_Public(o,i,l,u,"sha1")}}function parseDER(e,t,r,n){if(!isSupportedKeyType(t))return new Error(`Unsupported OpenSSH public key type: ${t}`);let i;let s;let o=null;let l=null;switch(t){case"ssh-rsa":{const t=T(e,e._pos||0);if(t===undefined)return new Error("Malformed OpenSSH public key");const r=T(e,e._pos);if(r===undefined)return new Error("Malformed OpenSSH public key");o=genOpenSSLRSAPub(r,t);l=genOpenSSHRSAPub(r,t);i="sha1";break}case"ssh-dss":{const t=T(e,e._pos||0);if(t===undefined)return new Error("Malformed OpenSSH public key");const r=T(e,e._pos);if(r===undefined)return new Error("Malformed OpenSSH public key");const n=T(e,e._pos);if(n===undefined)return new Error("Malformed OpenSSH public key");const s=T(e,e._pos);if(s===undefined)return new Error("Malformed OpenSSH public key");o=genOpenSSLDSAPub(t,r,n,s);l=genOpenSSHDSAPub(t,r,n,s);i="sha1";break}case"ssh-ed25519":{const t=T(e,e._pos||0);if(t===undefined||t.length!==32)return new Error("Malformed OpenSSH public key");o=genOpenSSLEdPub(t);l=genOpenSSHEdPub(t);i=null;break}case"ecdsa-sha2-nistp256":i="sha256";s="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":if(i===undefined){i="sha384";s="1.3.132.0.34"}case"ecdsa-sha2-nistp521":{if(i===undefined){i="sha512";s="1.3.132.0.35"}if(!skipFields(e,1))return new Error("Malformed OpenSSH public key");const t=T(e,e._pos||0);if(t===undefined)return new Error("Malformed OpenSSH public key");o=genOpenSSLECDSAPub(s,t);l=genOpenSSHECDSAPub(s,t);break}default:return new Error(`Unsupported OpenSSH public key type: ${t}`)}return new OpenSSH_Public(n,r,o,l,i)}function isSupportedKeyType(e){switch(e){case"ssh-rsa":case"ssh-dss":case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":return true;case"ssh-ed25519":if(b)return true;default:return false}}function isParsedKey(e){if(!e)return false;return typeof e[L]==="boolean"}function parseKey(e,t){if(isParsedKey(e))return e;let r;if(Buffer.isBuffer(e)){r=e;e=e.utf8Slice(0,e.length).trim()}else if(typeof e==="string"){e=e.trim()}else{return new Error("Key data must be a Buffer or string")}if(t!=undefined){if(typeof t==="string")t=Buffer.from(t);else if(!Buffer.isBuffer(t))return new Error("Passphrase must be a string or Buffer when supplied")}let n;if((n=OpenSSH_Private.parse(e,t))!==null)return n;if((n=OpenSSH_Old_Private.parse(e,t))!==null)return n;if((n=PPK_Private.parse(e,t))!==null)return n;if((n=OpenSSH_Public.parse(e))!==null)return n;if((n=RFC4716_Public.parse(e))!==null)return n;if(r){U.init(r,0);const t=U.readString(true);if(t!==undefined){e=U.readRaw();if(e!==undefined){n=parseDER(e,t,"",t);if(n instanceof Error)n=null}}U.clear()}if(n)return n;return new Error("Unsupported key format")}e.exports={isParsedKey:isParsedKey,isSupportedKeyType:isSupportedKeyType,parseDERKey:(e,t)=>parseDER(e,t,"",t),parseKey:parseKey}},3208:(e,t,r)=>{"use strict";const n=r(2613);const{inspect:i}=r(9023);function addNumericalSeparator(e){let t="";let r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function oneOf(e,t){n(typeof t==="string","`thing` has to be of type string");if(Array.isArray(e)){const r=e.length;n(r>0,"At least one expected value needs to be specified");e=e.map((e=>String(e)));if(r>2){return`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]}else if(r===2){return`one of ${t} ${e[0]} or ${e[1]}`}return`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}t.ERR_INTERNAL_ASSERTION=class ERR_INTERNAL_ASSERTION extends Error{constructor(e){super();Error.captureStackTrace(this,ERR_INTERNAL_ASSERTION);const t="This is caused by either a bug in ssh2 "+"or incorrect usage of ssh2 internals.\n"+"Please open an issue with this stack trace at "+"https://github.com/mscdex/ssh2/issues\n";this.message=e===undefined?t:`${e}\n${t}`}};const s=2**32;const o=(()=>{try{return new Function("return 2n ** 32n")()}catch{}})();t.ERR_OUT_OF_RANGE=class ERR_OUT_OF_RANGE extends RangeError{constructor(e,t,r,l){super();Error.captureStackTrace(this,ERR_OUT_OF_RANGE);n(t,'Missing "range" argument');let u=l?e:`The value of "${e}" is out of range.`;let p;if(Number.isInteger(r)&&Math.abs(r)>s){p=addNumericalSeparator(String(r))}else if(typeof r==="bigint"){p=String(r);if(r>o||r<-o)p=addNumericalSeparator(p);p+="n"}else{p=i(r)}u+=` It must be ${t}. Received ${p}`;this.message=u}};class ERR_INVALID_ARG_TYPE extends TypeError{constructor(e,t,r){super();Error.captureStackTrace(this,ERR_INVALID_ARG_TYPE);n(typeof e==="string",`'name' must be a string`);let i;if(typeof t==="string"&&t.startsWith("not ")){i="must not be";t=t.replace(/^not /,"")}else{i="must be"}let s;if(e.endsWith(" argument")){s=`The ${e} ${i} ${oneOf(t,"type")}`}else{const r=e.includes(".")?"property":"argument";s=`The "${e}" ${r} ${i} ${oneOf(t,"type")}`}s+=`. Received type ${typeof r}`;this.message=s}}t.ERR_INVALID_ARG_TYPE=ERR_INVALID_ARG_TYPE;t.validateNumber=function validateNumber(e,t){if(typeof e!=="number")throw new ERR_INVALID_ARG_TYPE(t,"number",e)}},2184:(e,t,r)=>{"use strict";const n=r(9837).Ber;let i;const s=Buffer[Symbol.species];const o=Object.getPrototypeOf(Uint8Array.prototype).fill;function readUInt32BE(e,t){return e[t++]*16777216+e[t++]*65536+e[t++]*256+e[t]}function bufferCopy(e,t,r,n,i){if(!i)i=0;if(n>e.length)n=e.length;let s=n-r;const o=t.length-i;if(s>o)s=o;t.set(new Uint8Array(e.buffer,e.byteOffset+r,s),i);return s}function bufferSlice(e,t,r){if(r===undefined)r=e.length;return new s(e.buffer,e.byteOffset+t,r-t)}function makeBufferParser(){let e=0;let t;const r={init:(r,n)=>{t=r;e=typeof n==="number"?n:0},pos:()=>e,length:()=>t?t.length:0,avail:()=>t&&e<t.length?t.length-e:0,clear:()=>{t=undefined},readUInt32BE:()=>{if(!t||e+3>=t.length)return;return t[e++]*16777216+t[e++]*65536+t[e++]*256+t[e++]},readUInt64BE:r=>{if(!t||e+7>=t.length)return;switch(r){case"always":return BigInt(`0x${t.hexSlice(e,e+=8)}`);case"maybe":if(t[e]>31)return BigInt(`0x${t.hexSlice(e,e+=8)}`);default:return t[e++]*72057594037927940+t[e++]*281474976710656+t[e++]*1099511627776+t[e++]*4294967296+t[e++]*16777216+t[e++]*65536+t[e++]*256+t[e++]}},skip:r=>{if(t&&r>0)e+=r},skipString:()=>{const n=r.readUInt32BE();if(n===undefined)return;e+=n;return e<=t.length?n:undefined},readByte:()=>{if(t&&e<t.length)return t[e++]},readBool:()=>{if(t&&e<t.length)return!!t[e++]},readList:()=>{const e=r.readString(true);if(e===undefined)return;return e?e.split(","):[]},readString:(n,i)=>{if(typeof n==="number"){i=n;n=undefined}const s=r.readUInt32BE();if(s===undefined)return;if(t.length-e<s||typeof i==="number"&&s>i){return}if(n){if(Buffer.isBuffer(n))return bufferCopy(t,n,e,e+=s);return t.utf8Slice(e,e+=s)}return bufferSlice(t,e,e+=s)},readRaw:r=>{if(!t)return;if(typeof r!=="number")return bufferSlice(t,e,e+=t.length-e);if(t.length-e>=r)return bufferSlice(t,e,e+=r)}};return r}function makeError(e,t,r){const n=new Error(e);if(typeof t==="boolean"){r=t;n.level="protocol"}else{n.level=t||"protocol"}n.fatal=!!r;return n}function writeUInt32BE(e,t,r){e[r++]=t>>>24;e[r++]=t>>>16;e[r++]=t>>>8;e[r++]=t;return r}const l=makeBufferParser();e.exports={bufferCopy:bufferCopy,bufferSlice:bufferSlice,FastBuffer:s,bufferFill:(e,t,r,n)=>o.call(e,t,r,n),makeError:makeError,doFatalError:(e,t,n,s)=>{let o;if(i===undefined)({DISCONNECT_REASON:i}=r(4020));if(t instanceof Error){o=t;if(typeof n!=="number")s=i.PROTOCOL_ERROR;else s=n}else{o=makeError(t,n,true)}if(typeof s!=="number")s=i.PROTOCOL_ERROR;e.disconnect(s);e._destruct();e._onError(o);return Infinity},readUInt32BE:readUInt32BE,writeUInt32BE:writeUInt32BE,writeUInt32LE:(e,t,r)=>{e[r++]=t;e[r++]=t>>>8;e[r++]=t>>>16;e[r++]=t>>>24;return r},makeBufferParser:makeBufferParser,bufferParser:makeBufferParser(),readString:(e,t,r,n)=>{if(typeof r==="number"){n=r;r=undefined}if(t===undefined)t=0;const i=e.length-t;if(t<0||t>=e.length||i<4)return;const s=readUInt32BE(e,t);if(i<4+s||typeof n==="number"&&s>n)return;t+=4;const o=t+s;e._pos=o;if(r){if(Buffer.isBuffer(r))return bufferCopy(e,r,t,o);return e.utf8Slice(t,o)}return bufferSlice(e,t,o)},sigSSHToASN1:(e,t)=>{switch(t){case"ssh-dss":{if(e.length>40)return e;const t=new n.Writer;t.startSequence();let r=e.slice(0,20);let i=e.slice(20);if(r[0]&128){const e=Buffer.allocUnsafe(21);e[0]=0;r.copy(e,1);r=e}else if(r[0]===0&&!(r[1]&128)){r=r.slice(1)}if(i[0]&128){const e=Buffer.allocUnsafe(21);e[0]=0;i.copy(e,1);i=e}else if(i[0]===0&&!(i[1]&128)){i=i.slice(1)}t.writeBuffer(r,n.Integer);t.writeBuffer(i,n.Integer);t.endSequence();return t.buffer}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{l.init(e,0);const t=l.readString();const r=l.readString();l.clear();if(t===undefined||r===undefined)return;const i=new n.Writer;i.startSequence();i.writeBuffer(t,n.Integer);i.writeBuffer(r,n.Integer);i.endSequence();return i.buffer}default:return e}},convertSignature:(e,t)=>{switch(t){case"ssh-dss":{if(e.length<=40)return e;const t=new n.Reader(e);t.readSequence();let r=t.readString(n.Integer,true);let i=t.readString(n.Integer,true);let s=0;let o=0;if(r.length<20){const e=Buffer.allocUnsafe(20);e.set(r,1);r=e;r[0]=0}if(i.length<20){const e=Buffer.allocUnsafe(20);e.set(i,1);i=e;i[0]=0}if(r.length>20&&r[0]===0)s=1;if(i.length>20&&i[0]===0)o=1;const l=Buffer.allocUnsafe(r.length-s+(i.length-o));bufferCopy(r,l,s,r.length,0);bufferCopy(i,l,o,i.length,r.length-s);return l}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{if(e[0]===0)return e;const t=new n.Reader(e);t.readSequence();const r=t.readString(n.Integer,true);const i=t.readString(n.Integer,true);if(r===null||i===null)return;const s=Buffer.allocUnsafe(4+r.length+4+i.length);writeUInt32BE(s,r.length,0);s.set(r,4);writeUInt32BE(s,i.length,4+r.length);s.set(i,4+4+r.length);return s}}return e},sendPacket:(e,t,r)=>{if(!r&&e._kexinit!==undefined){if(e._queue===undefined)e._queue=[];e._queue.push(t);e._debug&&e._debug("Outbound: ... packet queued");return false}e._cipher.encrypt(t);return true}}},4592:(e,t,r)=>{"use strict";const{kMaxLength:n}=r(181);const{createInflate:i,constants:{DEFLATE:s,INFLATE:o,Z_DEFAULT_CHUNK:l,Z_DEFAULT_COMPRESSION:u,Z_DEFAULT_MEMLEVEL:p,Z_DEFAULT_STRATEGY:g,Z_DEFAULT_WINDOWBITS:m,Z_PARTIAL_FLUSH:y}}=r(3106);const _=i()._handle.constructor;function processCallback(){throw new Error("Should not get here")}function zlibOnError(e,t,r){const n=this._owner;const i=new Error(e);i.errno=t;i.code=r;n._err=i}function _close(e){if(!e._handle)return;e._handle.close();e._handle=null}class Zlib{constructor(e){const t=m;const r=u;const i=p;const s=g;const o=undefined;this._err=undefined;this._writeState=new Uint32Array(2);this._chunkSize=l;this._maxOutputLength=n;this._outBuffer=Buffer.allocUnsafe(this._chunkSize);this._outOffset=0;this._handle=new _(e);this._handle._owner=this;this._handle.onerror=zlibOnError;this._handle.init(t,r,i,s,this._writeState,processCallback,o)}writeSync(e,t){const r=this._handle;if(!r)throw new Error("Invalid Zlib instance");let n=e.length;let i=this._chunkSize-this._outOffset;let s=0;let o;let l;let u;let p=0;const g=this._writeState;let m=this._outBuffer;let _=this._outOffset;const v=this._chunkSize;while(true){r.writeSync(y,e,s,n,m,_,i);if(this._err)throw this._err;o=g[0];l=g[1];const t=n-l;const E=i-o;if(E>0){const e=_===0&&E===m.length?m:m.slice(_,_+E);_+=E;if(!u)u=e;else if(u.push===undefined)u=[u,e];else u.push(e);p+=e.byteLength;if(p>this._maxOutputLength){_close(this);throw new Error(`Output length exceeded maximum of ${this._maxOutputLength}`)}}else if(E!==0){throw new Error("have should not go down")}if(o===0||_>=v){i=v;_=0;m=Buffer.allocUnsafe(v)}if(o===0){s+=t;n=l}else{break}}this._outBuffer=m;this._outOffset=_;if(p===0)u=Buffer.alloc(0);if(t){u.totalLen=p;return u}if(u.push===undefined)return u;const E=Buffer.allocUnsafe(p);for(let e=0,t=0;e<u.length;++e){const r=u[e];E.set(r,t);t+=r.length}return E}}class ZlibPacketWriter{constructor(e){this.allocStart=0;this.allocStartKEX=0;this._protocol=e;this._zlib=new Zlib(s)}cleanup(){if(this._zlib)_close(this._zlib)}alloc(e,t){return Buffer.allocUnsafe(e)}finalize(e,t){if(this._protocol._kexinit===undefined||t){const t=this._zlib.writeSync(e,true);const r=this._protocol._cipher.allocPacket(t.totalLen);if(t.push===undefined){r.set(t,5)}else{for(let e=0,n=5;e<t.length;++e){const i=t[e];r.set(i,n);n+=i.length}}return r}return e}}class PacketWriter{constructor(e){this.allocStart=5;this.allocStartKEX=5;this._protocol=e}cleanup(){}alloc(e,t){if(this._protocol._kexinit===undefined||t)return this._protocol._cipher.allocPacket(e);return Buffer.allocUnsafe(e)}finalize(e,t){return e}}class ZlibPacketReader{constructor(){this._zlib=new Zlib(o)}cleanup(){if(this._zlib)_close(this._zlib)}read(e){return this._zlib.writeSync(e,false)}}class PacketReader{cleanup(){}read(e){return e}}e.exports={PacketReader:PacketReader,PacketWriter:PacketWriter,ZlibPacketReader:ZlibPacketReader,ZlibPacketWriter:ZlibPacketWriter}},2605:(e,t,r)=>{"use strict";const{Server:n}=r(9278);const i=r(4434);const{listenerCount:s}=i;const{CHANNEL_OPEN_FAILURE:o,DEFAULT_CIPHER:l,DEFAULT_COMPRESSION:u,DEFAULT_KEX:p,DEFAULT_MAC:g,DEFAULT_SERVER_HOST_KEY:m,DISCONNECT_REASON:y,DISCONNECT_REASON_BY_VALUE:_,SUPPORTED_CIPHER:v,SUPPORTED_COMPRESSION:E,SUPPORTED_KEX:b,SUPPORTED_MAC:C,SUPPORTED_SERVER_HOST_KEY:w}=r(4020);const{init:I}=r(2888);const{KexInit:T}=r(4637);const{parseKey:k}=r(1789);const R=r(7841);const{SFTP:O}=r(4996);const{writeUInt32BE:P}=r(2184);const{Channel:B,MAX_WINDOW:D,PACKET_SIZE:L,windowAdjust:x,WINDOW_THRESHOLD:U}=r(5683);const{ChannelManager:j,generateAlgorithmList:W,isWritable:Q,onChannelOpenFailure:q,onCHANNEL_CLOSE:z}=r(2137);const G=10;class AuthContext extends i{constructor(e,t,r,n,i){super();this.username=this.user=t;this.service=r;this.method=n;this._initialResponse=false;this._finalResponse=false;this._multistep=false;this._cbfinal=(e,t,r)=>{if(!this._finalResponse){this._finalResponse=true;i(this,e,t,r)}};this._protocol=e}accept(){this._cleanup&&this._cleanup();this._initialResponse=true;this._cbfinal(true)}reject(e,t){this._cleanup&&this._cleanup();this._initialResponse=true;this._cbfinal(false,e,t)}}class KeyboardAuthContext extends AuthContext{constructor(e,t,r,n,i,s){super(e,t,r,n,s);this._multistep=true;this._cb=undefined;this._onInfoResponse=e=>{const t=this._cb;if(t){this._cb=undefined;t(e)}};this.submethods=i;this.on("abort",(()=>{this._cb&&this._cb(new Error("Authentication request aborted"))}))}prompt(e,t,r,n){if(!Array.isArray(e))e=[e];if(typeof t==="function"){n=t;t=r=undefined}else if(typeof r==="function"){n=r;r=undefined}else if(typeof n!=="function"){n=undefined}for(let t=0;t<e.length;++t){if(typeof e[t]==="string"){e[t]={prompt:e[t],echo:true}}}this._cb=n;this._initialResponse=true;this._protocol.authInfoReq(t,r,e)}}class PKAuthContext extends AuthContext{constructor(e,t,r,n,i,s){super(e,t,r,n,s);this.key={algo:i.keyAlgo,data:i.key};this.hashAlgo=i.hashAlgo;this.signature=i.signature;this.blob=i.blob}accept(){if(!this.signature){this._initialResponse=true;this._protocol.authPKOK(this.key.algo,this.key.data)}else{AuthContext.prototype.accept.call(this)}}}class HostbasedAuthContext extends AuthContext{constructor(e,t,r,n,i,s){super(e,t,r,n,s);this.key={algo:i.keyAlgo,data:i.key};this.hashAlgo=i.hashAlgo;this.signature=i.signature;this.blob=i.blob;this.localHostname=i.localHostname;this.localUsername=i.localUsername}}class PwdAuthContext extends AuthContext{constructor(e,t,r,n,i,s){super(e,t,r,n,s);this.password=i;this._changeCb=undefined}requestChange(e,t){if(this._changeCb)throw new Error("Change request already in progress");if(typeof e!=="string")throw new Error("prompt argument must be a string");if(typeof t!=="function")throw new Error("Callback argument must be a function");this._changeCb=t;this._protocol.authPasswdChg(e)}}class Session extends i{constructor(e,t,r){super();this.type="session";this.subtype=undefined;this.server=true;this._ending=false;this._channel=undefined;this._chanInfo={type:"session",incoming:{id:r,window:D,packetSize:L,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}}}}class Server extends i{constructor(e,t){super();if(typeof e!=="object"||e===null)throw new Error("Missing configuration object");const r=Object.create(null);const i=[];const s=e.hostKeys;if(!Array.isArray(s))throw new Error("hostKeys must be an array");const o=typeof e.algorithms==="object"&&e.algorithms!==null?e.algorithms:{};const y=W(o.serverHostKey,m,w);for(let e=0;e<s.length;++e){let t;if(Buffer.isBuffer(s[e])||typeof s[e]==="string")t=k(s[e]);else t=k(s[e].key,s[e].passphrase);if(t instanceof Error)throw new Error(`Cannot parse privateKey: ${t.message}`);if(Array.isArray(t)){t=t[0]}if(t.getPrivatePEM()===null)throw new Error("privateKey value contains an invalid private key");if(i.includes(t.type))continue;if(t.type==="ssh-rsa"){let e=y.indexOf("ssh-rsa");const n=y.indexOf("rsa-sha2-256");const s=y.indexOf("rsa-sha2-512");if(e===-1){e=Infinity}[e,n,s].sort(compareNumbers).forEach((o=>{if(o===-1)return;let l;switch(o){case e:l="ssh-rsa";break;case n:l="rsa-sha2-256";break;case s:l="rsa-sha2-512";break;default:return}r[l]=t;i.push(l)}))}else{r[t.type]=t;i.push(t.type)}}const _={kex:W(o.kex,p,b).concat(["kex-strict-s-v00@openssh.com"]),serverHostKey:i,cs:{cipher:W(o.cipher,l,v),mac:W(o.hmac,g,C),compress:W(o.compress,u,E),lang:[]},sc:undefined};_.sc=_.cs;if(typeof t==="function")this.on("connection",t);const I=typeof e.debug==="function"?e.debug:undefined;const R=e.ident?Buffer.from(e.ident):undefined;const O=new T(_);this._srv=new n((t=>{if(this._connections>=this.maxConnections){t.destroy();return}++this._connections;t.once("close",(()=>{--this._connections}));let n;if(I){const e=`[${process.hrtime().join(".")}] `;n=t=>{I(`${e}${t}`)}}new Client(t,r,R,O,n,this,e)})).on("error",(e=>{this.emit("error",e)})).on("listening",(()=>{this.emit("listening")})).on("close",(()=>{this.emit("close")}));this._connections=0;this.maxConnections=Infinity}injectSocket(e){this._srv.emit("connection",e)}listen(...e){this._srv.listen(...e);return this}address(){return this._srv.address()}getConnections(e){this._srv.getConnections(e);return this}close(e){this._srv.close(e);return this}ref(){this._srv.ref();return this}unref(){this._srv.unref();return this}}Server.KEEPALIVE_CLIENT_INTERVAL=15e3;Server.KEEPALIVE_CLIENT_COUNT_MAX=3;class Client extends i{constructor(e,t,r,n,i,l,u){super();let p=0;let g=false;let m=[];let v;let E;let b;const C=[];this._sock=e;this._chanMgr=new j(this);this._debug=i;this.noMoreSessions=false;this.authenticated=false;function onClientPreHeaderError(e){}this.on("error",onClientPreHeaderError);const w=!i?undefined:(e,t,r)=>{i(`Debug output from client: ${JSON.stringify(r)}`)};const T=typeof u.keepaliveInterval==="number"&&isFinite(u.keepaliveInterval)&&u.keepaliveInterval>0?u.keepaliveInterval:typeof Server.KEEPALIVE_CLIENT_INTERVAL==="number"&&isFinite(Server.KEEPALIVE_CLIENT_INTERVAL)&&Server.KEEPALIVE_CLIENT_INTERVAL>0?Server.KEEPALIVE_CLIENT_INTERVAL:-1;const k=typeof u.keepaliveCountMax==="number"&&isFinite(u.keepaliveCountMax)&&u.keepaliveCountMax>=0?u.keepaliveCountMax:typeof Server.KEEPALIVE_CLIENT_COUNT_MAX==="number"&&isFinite(Server.KEEPALIVE_CLIENT_COUNT_MAX)&&Server.KEEPALIVE_CLIENT_COUNT_MAX>=0?Server.KEEPALIVE_CLIENT_COUNT_MAX:-1;let W=0;if(T!==-1&&k!==-1){this.once("ready",(()=>{const onClose=()=>{clearInterval(E)};this.on("close",onClose).on("end",onClose);E=setInterval((()=>{if(++W>k){clearInterval(E);const e=new Error("Keepalive timeout");e.level="client-timeout";this.emit("error",e);this.end()}else{$.ping()}}),T)}));b=()=>{E&&E.refresh();W=0}}const $=this._protocol=new R({server:true,hostKeys:t,ident:r,offer:n,onPacket:b,greeting:u.greeting,banner:u.banner,onWrite:t=>{if(Q(e))e.write(t)},onError:t=>{if(!$._destruct)e.removeAllListeners("data");this.emit("error",t);try{e.end()}catch{}},onHeader:t=>{this.removeListener("error",onClientPreHeaderError);const r={ip:e.remoteAddress,family:e.remoteFamily,port:e.remotePort,header:t};if(!l.emit("connection",this,r)){$.disconnect(y.BY_APPLICATION);e.end();return}if(t.greeting)this.emit("greeting",t.greeting)},onHandshakeComplete:e=>{if(++p>1)this.emit("rekey");this.emit("handshake",e)},debug:i,messageHandlers:{DEBUG:w,DISCONNECT:(t,r,n)=>{if(r!==y.BY_APPLICATION){if(!n){n=_[r];if(n===undefined)n=`Unexpected disconnection reason: ${r}`}const e=new Error(n);e.code=r;this.emit("error",e)}e.end()},CHANNEL_OPEN:(e,t)=>{if(t.type==="session"&&this.noMoreSessions||!this.authenticated){const e=o.ADMINISTRATIVELY_PROHIBITED;return $.channelOpenFail(t.sender,e)}let r=-1;let n;let l=false;let u;const reject=()=>{if(l)return;l=true;if(n===undefined){if(r===-1)n=o.RESOURCE_SHORTAGE;else n=o.CONNECT_FAILED}if(r!==-1)this._chanMgr.remove(r);$.channelOpenFail(t.sender,n,"")};const reserveChannel=()=>{r=this._chanMgr.add();if(r===-1){n=o.RESOURCE_SHORTAGE;if(i){i("Automatic rejection of incoming channel open: "+"no channels available")}}return r!==-1};const p=t.data;switch(t.type){case"session":if(s(this,"session")&&reserveChannel()){u=()=>{if(l)return;l=true;const e=new Session(this,t,r);this._chanMgr.update(r,e);$.channelOpenConfirm(t.sender,r,D,L);return e};this.emit("session",u,reject);return}break;case"direct-tcpip":if(s(this,"tcpip")&&reserveChannel()){u=()=>{if(l)return;l=true;const e={type:undefined,incoming:{id:r,window:D,packetSize:L,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}};const n=new B(this,e,{server:true});this._chanMgr.update(r,n);$.channelOpenConfirm(t.sender,r,D,L);return n};this.emit("tcpip",u,reject,p);return}break;case"direct-streamlocal@openssh.com":if(s(this,"openssh.streamlocal")&&reserveChannel()){u=()=>{if(l)return;l=true;const e={type:undefined,incoming:{id:r,window:D,packetSize:L,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}};const n=new B(this,e,{server:true});this._chanMgr.update(r,n);$.channelOpenConfirm(t.sender,r,D,L);return n};this.emit("openssh.streamlocal",u,reject,p);return}break;default:n=o.UNKNOWN_CHANNEL_TYPE;if(i){i("Automatic rejection of unsupported incoming channel open"+` type: ${t.type}`)}}if(n===undefined){n=o.ADMINISTRATIVELY_PROHIBITED;if(i){i("Automatic rejection of unexpected incoming channel open"+` for: ${t.type}`)}}reject()},CHANNEL_OPEN_CONFIRMATION:(e,t)=>{const r=this._chanMgr.get(t.recipient);if(typeof r!=="function")return;const n={type:r.type,incoming:{id:t.recipient,window:D,packetSize:L,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}};const i=new B(this,n,{server:true});this._chanMgr.update(t.recipient,i);r(undefined,i)},CHANNEL_OPEN_FAILURE:(e,t,r,n)=>{const i=this._chanMgr.get(t);if(typeof i!=="function")return;const s={reason:r,description:n};q(this,t,s,i)},CHANNEL_DATA:(e,t,r)=>{let n=this._chanMgr.get(t);if(typeof n!=="object"||n===null)return;if(n.constructor===Session){n=n._channel;if(!n)return}if(n.incoming.window===0)return;n.incoming.window-=r.length;if(n.push(r)===false){n._waitChanDrain=true;return}if(n.incoming.window<=U)x(n)},CHANNEL_EXTENDED_DATA:(e,t,r,n)=>{},CHANNEL_WINDOW_ADJUST:(e,t,r)=>{let n=this._chanMgr.get(t);if(typeof n!=="object"||n===null)return;if(n.constructor===Session){n=n._channel;if(!n)return}n.outgoing.window+=r;if(n._waitWindow){n._waitWindow=false;if(n._chunk){n._write(n._chunk,null,n._chunkcb)}else if(n._chunkcb){n._chunkcb()}else if(n._chunkErr){n.stderr._write(n._chunkErr,null,n._chunkcbErr)}else if(n._chunkcbErr){n._chunkcbErr()}}},CHANNEL_SUCCESS:(e,t)=>{let r=this._chanMgr.get(t);if(typeof r!=="object"||r===null)return;if(r.constructor===Session){r=r._channel;if(!r)return}if(r._callbacks.length)r._callbacks.shift()(false)},CHANNEL_FAILURE:(e,t)=>{let r=this._chanMgr.get(t);if(typeof r!=="object"||r===null)return;if(r.constructor===Session){r=r._channel;if(!r)return}if(r._callbacks.length)r._callbacks.shift()(true)},CHANNEL_REQUEST:(e,t,r,n,o)=>{const l=this._chanMgr.get(t);if(typeof l!=="object"||l===null)return;let u=false;let p;let g;if(l.constructor!==Session){if(n)$.channelFailure(l.outgoing.id);return}if(n){if(r!=="shell"&&r!=="exec"&&r!=="subsystem"){p=()=>{if(u||l._ending||l._channel)return;u=true;$.channelSuccess(l._chanInfo.outgoing.id)}}g=()=>{if(u||l._ending||l._channel)return;u=true;$.channelFailure(l._chanInfo.outgoing.id)}}if(l._ending){g&&g();return}switch(r){case"env":if(s(l,"env")){l.emit("env",p,g,{key:o.name,val:o.value});return}break;case"pty-req":if(s(l,"pty")){l.emit("pty",p,g,o);return}break;case"window-change":if(s(l,"window-change"))l.emit("window-change",p,g,o);else g&&g();break;case"x11-req":if(s(l,"x11")){l.emit("x11",p,g,o);return}break;case"signal":if(s(l,"signal")){l.emit("signal",p,g,{name:o});return}break;case"auth-agent-req@openssh.com":if(s(l,"auth-agent")){l.emit("auth-agent",p,g);return}break;case"shell":if(s(l,"shell")){p=()=>{if(u||l._ending||l._channel)return;u=true;if(n)$.channelSuccess(l._chanInfo.outgoing.id);const e=new B(this,l._chanInfo,{server:true});e.subtype=l.subtype=r;l._channel=e;return e};l.emit("shell",p,g);return}break;case"exec":if(s(l,"exec")){p=()=>{if(u||l._ending||l._channel)return;u=true;if(n)$.channelSuccess(l._chanInfo.outgoing.id);const e=new B(this,l._chanInfo,{server:true});e.subtype=l.subtype=r;l._channel=e;return e};l.emit("exec",p,g,{command:o});return}break;case"subsystem":{let e=o==="sftp";p=()=>{if(u||l._ending||l._channel)return;u=true;if(n)$.channelSuccess(l._chanInfo.outgoing.id);let t;if(e){t=new O(this,l._chanInfo,{server:true,debug:i})}else{t=new B(this,l._chanInfo,{server:true});t.subtype=l.subtype=`${r}:${o}`}l._channel=t;return t};if(o==="sftp"){if(s(l,"sftp")){l.emit("sftp",p,g);return}e=false}if(s(l,"subsystem")){l.emit("subsystem",p,g,{name:o});return}break}}i&&i(`Automatic rejection of incoming channel request: ${r}`);g&&g()},CHANNEL_EOF:(e,t)=>{let r=this._chanMgr.get(t);if(typeof r!=="object"||r===null)return;if(r.constructor===Session){if(!r._ending){r._ending=true;r.emit("eof");r.emit("end")}r=r._channel;if(!r)return}if(r.incoming.state!=="open")return;r.incoming.state="eof";if(r.readable)r.push(null)},CHANNEL_CLOSE:(e,t)=>{let r=this._chanMgr.get(t);if(typeof r!=="object"||r===null)return;if(r.constructor===Session){r._ending=true;r.emit("close");r=r._channel;if(!r)return}z(this,t,r)},SERVICE_REQUEST:(t,r)=>{if(p===0||g||this.authenticated||r!=="ssh-userauth"){$.disconnect(y.SERVICE_NOT_AVAILABLE);e.end();return}g=true;$.serviceAccept(r)},USERAUTH_REQUEST:(t,r,n,i,o)=>{if(p===0||this.authenticated||v&&(v.username!==r||v.service!==n)||i!=="password"&&i!=="publickey"&&i!=="hostbased"&&i!=="keyboard-interactive"&&i!=="none"||m.length===G){$.disconnect(y.PROTOCOL_ERROR);e.end();return}else if(n!=="ssh-connection"){$.disconnect(y.SERVICE_NOT_AVAILABLE);e.end();return}let l;switch(i){case"keyboard-interactive":l=new KeyboardAuthContext($,r,n,i,o,onAuthDecide);break;case"publickey":l=new PKAuthContext($,r,n,i,o,onAuthDecide);break;case"hostbased":l=new HostbasedAuthContext($,r,n,i,o,onAuthDecide);break;case"password":if(v&&v instanceof PwdAuthContext&&v._changeCb){const e=v._changeCb;v._changeCb=undefined;e(o.newPassword);return}l=new PwdAuthContext($,r,n,i,o,onAuthDecide);break;case"none":l=new AuthContext($,r,n,i,onAuthDecide);break}if(v){if(!v._initialResponse){return m.push(l)}else if(v._multistep&&!v._finalResponse){v._cleanup&&v._cleanup();v.emit("abort")}}v=l;if(s(this,"authentication"))this.emit("authentication",v);else v.reject()},USERAUTH_INFO_RESPONSE:(e,t)=>{if(v&&v instanceof KeyboardAuthContext)v._onInfoResponse(t)},GLOBAL_REQUEST:(e,t,r,n)=>{const i={type:null,buf:null};function setReply(e,t){i.type=e;i.buf=t;sendReplies()}if(r)C.push(i);if((t==="tcpip-forward"||t==="cancel-tcpip-forward"||t==="no-more-sessions@openssh.com"||t==="streamlocal-forward@openssh.com"||t==="cancel-streamlocal-forward@openssh.com")&&s(this,"request")&&this.authenticated){let e;let i;if(r){let r=false;e=e=>{if(r)return;r=true;let i;if(t==="tcpip-forward"&&n.bindPort===0&&typeof e==="number"){i=Buffer.allocUnsafe(4);P(i,e,0)}setReply("SUCCESS",i)};i=()=>{if(r)return;r=true;setReply("FAILURE")}}if(t==="no-more-sessions@openssh.com"){this.noMoreSessions=true;e&&e();return}this.emit("request",e,i,t,n)}else if(r){setReply("FAILURE")}}}});e.pause();I.then((()=>{$.start();e.on("data",(t=>{try{$.parse(t,0,t.length)}catch(t){this.emit("error",t);try{if(Q(e))e.end()}catch{}}}));e.resume()})).catch((t=>{this.emit("error",t);try{if(Q(e))e.end()}catch{}}));e.on("error",(e=>{e.level="socket";this.emit("error",e)})).once("end",(()=>{i&&i("Socket ended");$.cleanup();this.emit("end")})).once("close",(()=>{i&&i("Socket closed");$.cleanup();this.emit("close");const e=new Error("No response from server");this._chanMgr.cleanup(e)}));const onAuthDecide=(e,t,r,n)=>{if(v===e&&!this.authenticated){if(t){v=undefined;this.authenticated=true;$.authSuccess();m=[];this.emit("ready")}else{$.authFailure(r,n);if(m.length){v=m.pop();if(s(this,"authentication"))this.emit("authentication",v);else v.reject()}}}};function sendReplies(){while(C.length>0&&C[0].type){const e=C.shift();if(e.type==="SUCCESS")$.requestSuccess(e.buf);if(e.type==="FAILURE")$.requestFailure()}}}end(){if(this._sock&&Q(this._sock)){this._protocol.disconnect(y.BY_APPLICATION);this._sock.end()}return this}x11(e,t,r){const n={originAddr:e,originPort:t};openChannel(this,"x11",n,r);return this}forwardOut(e,t,r,n,i){const s={boundAddr:e,boundPort:t,remoteAddr:r,remotePort:n};openChannel(this,"forwarded-tcpip",s,i);return this}openssh_forwardOutStreamLocal(e,t){const r={socketPath:e};openChannel(this,"forwarded-streamlocal@openssh.com",r,t);return this}rekey(e){let t;try{this._protocol.rekey()}catch(e){t=e}if(typeof e==="function"){if(t)process.nextTick(e,t);else this.once("rekey",e)}}setNoDelay(e){if(this._sock&&typeof this._sock.setNoDelay==="function")this._sock.setNoDelay(e);return this}}function openChannel(e,t,r,n){const i=D;const s=L;if(typeof r==="function"){n=r;r={}}const wrapper=(e,t)=>{n(e,t)};wrapper.type=t;const o=e._chanMgr.add(wrapper);if(o===-1){n(new Error("No free channels available"));return}switch(t){case"forwarded-tcpip":e._protocol.forwardedTcpip(o,i,s,r);break;case"x11":e._protocol.x11(o,i,s,r);break;case"forwarded-streamlocal@openssh.com":e._protocol.openssh_forwardedStreamLocal(o,i,s,r);break;default:throw new Error(`Unsupported channel type: ${t}`)}}function compareNumbers(e,t){return e-t}e.exports=Server;e.exports.IncomingClient=Client},2137:(e,t,r)=>{"use strict";const{SFTP:n}=r(4996);const i=2**32-1;function onChannelOpenFailure(e,t,r,n){e._chanMgr.remove(t);if(typeof n!=="function")return;let i;if(r instanceof Error){i=r}else if(typeof r==="object"&&r!==null){i=new Error(`(SSH) Channel open failure: ${r.description}`);i.reason=r.reason}else{i=new Error("(SSH) Channel open failure: server closed channel unexpectedly");i.reason=""}n(i)}function onCHANNEL_CLOSE(e,t,r,i,s){if(typeof r==="function"){onChannelOpenFailure(e,t,i,r);return}if(typeof r!=="object"||r===null)return;if(r.incoming&&r.incoming.state==="closed")return;e._chanMgr.remove(t);if(r.server&&r.constructor.name==="Session")return;r.incoming.state="closed";if(r.readable)r.push(null);if(r.server){if(r.stderr.writable)r.stderr.end()}else if(r.stderr.readable){r.stderr.push(null)}if(r.constructor!==n&&(r.outgoing.state==="open"||r.outgoing.state==="eof")&&!s){r.close()}if(r.outgoing.state==="closing")r.outgoing.state="closed";const o=r._readableState;const l=r._writableState;if(l&&!l.ending&&!l.finished&&!s)r.end();const u=r._callbacks;r._callbacks=[];for(let e=0;e<u.length;++e)u[e](true);if(r.server){if(!r.readable||r.destroyed||o&&o.endEmitted){r.emit("close")}else{r.once("end",(()=>r.emit("close")))}}else{let e;switch(r.type){case"direct-streamlocal@openssh.com":case"direct-tcpip":e=()=>r.emit("close");break;default:{const t=r._exit;e=()=>{if(t.code===null)r.emit("close",t.code,t.signal,t.dump,t.desc);else r.emit("close",t.code)}}}if(!r.readable||r.destroyed||o&&o.endEmitted){e()}else{r.once("end",e)}const t=r.stderr._readableState;if(!r.stderr.readable||r.stderr.destroyed||t&&t.endEmitted){r.stderr.emit("close")}else{r.stderr.once("end",(()=>r.stderr.emit("close")))}}}class ChannelManager{constructor(e){this._client=e;this._channels={};this._cur=-1;this._count=0}add(e){let t;if(this._cur<i){t=++this._cur}else if(this._count===0){this._cur=0;t=0}else{const e=this._channels;for(let r=0;r<i;++r){if(e[r]===undefined){t=r;break}}}if(t===undefined)return-1;this._channels[t]=e||true;++this._count;return t}update(e,t){if(typeof e!=="number"||e<0||e>=i||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);if(t&&this._channels[e])this._channels[e]=t}get(e){if(typeof e!=="number"||e<0||e>=i||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);return this._channels[e]}remove(e){if(typeof e!=="number"||e<0||e>=i||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);if(this._channels[e]){delete this._channels[e];if(this._count)--this._count}}cleanup(e){const t=this._channels;this._channels={};this._cur=-1;this._count=0;const r=Object.keys(t);const n=this._client;for(let i=0;i<r.length;++i){const s=+r[i];const o=t[s];onCHANNEL_CLOSE(n,s,o._channel||o,e,true)}}}const s=(()=>{const e=Object.prototype.toString;return t=>e.call(t)==="[object RegExp]"})();function generateAlgorithmList(e,t,r){if(Array.isArray(e)&&e.length>0){for(let t=0;t<e.length;++t){if(r.indexOf(e[t])===-1)throw new Error(`Unsupported algorithm: ${e[t]}`)}return e}if(typeof e==="object"&&e!==null){const n=Object.keys(e);let i=t;for(let o=0;o<n.length;++o){const l=n[o];let u=e[l];switch(l){case"append":if(!Array.isArray(u))u=[u];if(Array.isArray(u)){for(let e=0;e<u.length;++e){const n=u[e];if(typeof n==="string"){if(!n||i.indexOf(n)!==-1)continue;if(r.indexOf(n)===-1)throw new Error(`Unsupported algorithm: ${n}`);if(i===t)i=i.slice();i.push(n)}else if(s(n)){for(let e=0;e<r.length;++e){const s=r[e];if(n.test(s)){if(i.indexOf(s)!==-1)continue;if(i===t)i=i.slice();i.push(s)}}}}}break;case"prepend":if(!Array.isArray(u))u=[u];if(Array.isArray(u)){for(let e=u.length;e>=0;--e){const n=u[e];if(typeof n==="string"){if(!n||i.indexOf(n)!==-1)continue;if(r.indexOf(n)===-1)throw new Error(`Unsupported algorithm: ${n}`);if(i===t)i=i.slice();i.unshift(n)}else if(s(n)){for(let e=r.length;e>=0;--e){const s=r[e];if(n.test(s)){if(i.indexOf(s)!==-1)continue;if(i===t)i=i.slice();i.unshift(s)}}}}}break;case"remove":if(!Array.isArray(u))u=[u];if(Array.isArray(u)){for(let e=0;e<u.length;++e){const r=u[e];if(typeof r==="string"){if(!r)continue;const e=i.indexOf(r);if(e===-1)continue;if(i===t)i=i.slice();i.splice(e,1)}else if(s(r)){for(let e=0;e<i.length;++e){if(r.test(i[e])){if(i===t)i=i.slice();i.splice(e,1);--e}}}}}break}}return i}return t}e.exports={ChannelManager:ChannelManager,generateAlgorithmList:generateAlgorithmList,onChannelOpenFailure:onChannelOpenFailure,onCHANNEL_CLOSE:onCHANNEL_CLOSE,isWritable:e=>e&&e.writable&&e._readableState&&e._readableState.ended===false}},634:(e,t,r)=>{"use strict";var n=r(3058).Buffer;var i=n.isEncoding||function(e){e=""+e;switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function _normalizeEncoding(e){if(!e)return"utf8";var t;while(true){switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase();t=true}}}function normalizeEncoding(e){var t=_normalizeEncoding(e);if(typeof t!=="string"&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}t.I=StringDecoder;function StringDecoder(e){this.encoding=normalizeEncoding(e);var t;switch(this.encoding){case"utf16le":this.text=utf16Text;this.end=utf16End;t=4;break;case"utf8":this.fillLast=utf8FillLast;t=4;break;case"base64":this.text=base64Text;this.end=base64End;t=3;break;default:this.write=simpleWrite;this.end=simpleEnd;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=n.allocUnsafe(t)}StringDecoder.prototype.write=function(e){if(e.length===0)return"";var t;var r;if(this.lastNeed){t=this.fillLast(e);if(t===undefined)return"";r=this.lastNeed;this.lastNeed=0}else{r=0}if(r<e.length)return t?t+this.text(e,r):this.text(e,r);return t||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(e){if(this.lastNeed<=e.length){e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length);this.lastNeed-=e.length};function utf8CheckByte(e){if(e<=127)return 0;else if(e>>5===6)return 2;else if(e>>4===14)return 3;else if(e>>3===30)return 4;return e>>6===2?-1:-2}function utf8CheckIncomplete(e,t,r){var n=t.length-1;if(n<r)return 0;var i=utf8CheckByte(t[n]);if(i>=0){if(i>0)e.lastNeed=i-1;return i}if(--n<r||i===-2)return 0;i=utf8CheckByte(t[n]);if(i>=0){if(i>0)e.lastNeed=i-2;return i}if(--n<r||i===-2)return 0;i=utf8CheckByte(t[n]);if(i>=0){if(i>0){if(i===2)i=0;else e.lastNeed=i-3}return i}return 0}function utf8CheckExtraBytes(e,t,r){if((t[0]&192)!==128){e.lastNeed=0;return""}if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128){e.lastNeed=1;return""}if(e.lastNeed>2&&t.length>2){if((t[2]&192)!==128){e.lastNeed=2;return""}}}}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed;var r=utf8CheckExtraBytes(this,e,t);if(r!==undefined)return r;if(this.lastNeed<=e.length){e.copy(this.lastChar,t,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,t,0,e.length);this.lastNeed-=e.length}function utf8Text(e,t){var r=utf8CheckIncomplete(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);e.copy(this.lastChar,0,n);return e.toString("utf8",t,n)}function utf8End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+"";return t}function utf16Text(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1];return r.slice(0,-1)}}return r}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=e[e.length-1];return e.toString("utf16le",t,e.length-1)}function utf16End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function base64Text(e,t){var r=(e.length-t)%3;if(r===0)return e.toString("base64",t);this.lastNeed=3-r;this.lastTotal=3;if(r===1){this.lastChar[0]=e[e.length-1]}else{this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1]}return e.toString("base64",t,e.length-r)}function base64End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+this.lastChar.toString("base64",0,3-this.lastNeed);return t}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}},1450:(e,t,r)=>{"use strict";const n=r(857);const i=r(2018);const s=r(3813);const{env:o}=process;let l;if(s("no-color")||s("no-colors")||s("color=false")||s("color=never")){l=0}else if(s("color")||s("colors")||s("color=true")||s("color=always")){l=1}if("FORCE_COLOR"in o){if(o.FORCE_COLOR==="true"){l=1}else if(o.FORCE_COLOR==="false"){l=0}else{l=o.FORCE_COLOR.length===0?1:Math.min(parseInt(o.FORCE_COLOR,10),3)}}function translateLevel(e){if(e===0){return false}return{level:e,hasBasic:true,has256:e>=2,has16m:e>=3}}function supportsColor(e,t){if(l===0){return 0}if(s("color=16m")||s("color=full")||s("color=truecolor")){return 3}if(s("color=256")){return 2}if(e&&!t&&l===undefined){return 0}const r=l||0;if(o.TERM==="dumb"){return r}if(process.platform==="win32"){const e=n.release().split(".");if(Number(e[0])>=10&&Number(e[2])>=10586){return Number(e[2])>=14931?3:2}return 1}if("CI"in o){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in o))||o.CI_NAME==="codeship"){return 1}return r}if("TEAMCITY_VERSION"in o){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0}if(o.COLORTERM==="truecolor"){return 3}if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(o.TERM)){return 2}if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)){return 1}if("COLORTERM"in o){return 1}return r}function getSupportLevel(e){const t=supportsColor(e,e&&e.isTTY);return translateLevel(t)}e.exports={supportsColor:getSupportLevel,stdout:translateLevel(supportsColor(true,i.isatty(1))),stderr:translateLevel(supportsColor(true,i.isatty(2)))}},5645:(e,t,r)=>{var n=r(5384);var i=r(6118);var s=r(7898);var o=r(9200);var l=r(9896);var u=r(6928);var p=r(857);var g=p.platform()==="win32";var noop=function(){};var echo=function(e){return e};var m=!g?echo:function(e){return e.replace(/\\/g,"/").replace(/[:?<>|]/g,"_")};var statAll=function(e,t,r,n,i,s){var o=i||["."];return function loop(i){if(!o.length)return i();var l=o.shift();var p=u.join(r,l);t.call(e,p,(function(t,g){if(t)return i(t);if(!g.isDirectory())return i(null,l,g);e.readdir(p,(function(e,t){if(e)return i(e);if(s)t.sort();for(var p=0;p<t.length;p++){if(!n(u.join(r,l,t[p])))o.push(u.join(l,t[p]))}i(null,l,g)}))}))}};var strip=function(e,t){return function(r){r.name=r.name.split("/").slice(t).join("/");var n=r.linkname;if(n&&(r.type==="link"||u.isAbsolute(n))){r.linkname=n.split("/").slice(t).join("/")}return e(r)}};t.pack=function(e,t){if(!e)e=".";if(!t)t={};var r=t.fs||l;var n=t.ignore||t.filter||noop;var o=t.map||noop;var p=t.mapStream||echo;var g=statAll(r,t.dereference?r.stat:r.lstat,e,n,t.entries,t.sort);var y=t.strict!==false;var _=typeof t.umask==="number"?~t.umask:~processUmask();var v=typeof t.dmode==="number"?t.dmode:0;var E=typeof t.fmode==="number"?t.fmode:0;var b=t.pack||i.pack();var C=t.finish||noop;if(t.strip)o=strip(o,t.strip);if(t.readable){v|=parseInt(555,8);E|=parseInt(444,8)}if(t.writable){v|=parseInt(333,8);E|=parseInt(222,8)}var onsymlink=function(t,n){r.readlink(u.join(e,t),(function(e,t){if(e)return b.destroy(e);n.linkname=m(t);b.entry(n,onnextentry)}))};var onstat=function(n,i,l){if(n)return b.destroy(n);if(!i){if(t.finalize!==false)b.finalize();return C(b)}if(l.isSocket())return onnextentry();var g={name:m(i),mode:(l.mode|(l.isDirectory()?v:E))&_,mtime:l.mtime,size:l.size,type:"file",uid:l.uid,gid:l.gid};if(l.isDirectory()){g.size=0;g.type="directory";g=o(g)||g;return b.entry(g,onnextentry)}if(l.isSymbolicLink()){g.size=0;g.type="symlink";g=o(g)||g;return onsymlink(i,g)}g=o(g)||g;if(!l.isFile()){if(y)return b.destroy(new Error("unsupported type for "+i));return onnextentry()}var w=b.entry(g,onnextentry);if(!w)return;var I=p(r.createReadStream(u.join(e,i),{start:0,end:g.size>0?g.size-1:g.size}),g);I.on("error",(function(e){w.destroy(e)}));s(I,w)};var onnextentry=function(e){if(e)return b.destroy(e);g(onstat)};onnextentry();return b};var head=function(e){return e.length?e[e.length-1]:null};var processGetuid=function(){return process.getuid?process.getuid():-1};var processUmask=function(){return process.umask?process.umask():0};t.extract=function(e,t){if(!e)e=".";if(!t)t={};var r=t.fs||l;var n=t.ignore||t.filter||noop;var o=t.map||noop;var p=t.mapStream||echo;var y=t.chown!==false&&!g&&processGetuid()===0;var _=t.extract||i.extract();var v=[];var E=new Date;var b=typeof t.umask==="number"?~t.umask:~processUmask();var C=typeof t.dmode==="number"?t.dmode:0;var w=typeof t.fmode==="number"?t.fmode:0;var I=t.strict!==false;if(t.strip)o=strip(o,t.strip);if(t.readable){C|=parseInt(555,8);w|=parseInt(444,8)}if(t.writable){C|=parseInt(333,8);w|=parseInt(222,8)}var utimesParent=function(e,t){var n;while((n=head(v))&&e.slice(0,n[0].length)!==n[0])v.pop();if(!n)return t();r.utimes(n[0],E,n[1],t)};var utimes=function(e,n,i){if(t.utimes===false)return i();if(n.type==="directory")return r.utimes(e,E,n.mtime,i);if(n.type==="symlink")return utimesParent(e,i);r.utimes(e,E,n.mtime,(function(t){if(t)return i(t);utimesParent(e,i)}))};var chperm=function(e,t,n){var i=t.type==="symlink";var s=i?r.lchmod:r.chmod;var o=i?r.lchown:r.chown;if(!s)return n();var l=(t.mode|(t.type==="directory"?C:w))&b;if(o&&y)o.call(r,e,t.uid,t.gid,onchown);else onchown(null);function onchown(t){if(t)return n(t);if(!s)return n();s.call(r,e,l,n)}};_.on("entry",(function(i,l,_){i=o(i)||i;i.name=m(i.name);var E=u.join(e,u.join("/",i.name));if(n(E,i)){l.resume();return _()}var stat=function(e){if(e)return _(e);utimes(E,i,(function(e){if(e)return _(e);if(g)return _();chperm(E,i,_)}))};var onsymlink=function(){if(g)return _();r.unlink(E,(function(){var t=u.resolve(u.dirname(E),i.linkname);if(!t.startsWith(u.resolve(e)))return _(new Error(E+" is not a valid symlink"));r.symlink(i.linkname,E,stat)}))};var onlink=function(){if(g)return _();r.unlink(E,(function(){var n=u.join(e,u.join("/",i.linkname));r.realpath(n,(function(i,s){if(i||!s.startsWith(u.resolve(e)))return _(new Error(E+" is not a valid hardlink"));r.link(s,E,(function(e){if(e&&e.code==="EPERM"&&t.hardlinkAsFilesFallback){l=r.createReadStream(n);return onfile()}stat(e)}))}))}))};var onfile=function(){var e=r.createWriteStream(E);var t=p(l,i);e.on("error",(function(e){t.destroy(e)}));s(t,e,(function(t){if(t)return _(t);e.on("close",stat)}))};if(i.type==="directory"){v.push([E,i.mtime]);return mkdirfix(E,{fs:r,own:y,uid:i.uid,gid:i.gid},stat)}var b=u.dirname(E);validate(r,b,u.join(e,"."),(function(e,t){if(e)return _(e);if(!t)return _(new Error(b+" is not a valid path"));mkdirfix(b,{fs:r,own:y,uid:i.uid,gid:i.gid},(function(e){if(e)return _(e);switch(i.type){case"file":return onfile();case"link":return onlink();case"symlink":return onsymlink()}if(I)return _(new Error("unsupported type for "+E+" ("+i.type+")"));l.resume();_()}))}))}));if(t.finish)_.on("finish",t.finish);return _};function validate(e,t,r,n){if(t===r)return n(null,true);e.lstat(t,(function(i,s){if(i&&i.code!=="ENOENT")return n(i);if(i||s.isDirectory())return validate(e,u.join(t,".."),r,n);n(null,false)}))}function mkdirfix(e,t,r){o(e,{fs:t.fs},(function(e,i){if(!e&&i&&t.own){n(i,t.uid,t.gid,r)}else{r(e)}}))}},5763:(e,t,r)=>{var n=r(9023);var i=r(794);var s=r(8428);var o=r(6131).Writable;var l=r(6131).PassThrough;var noop=function(){};var overflow=function(e){e&=511;return e&&512-e};var emptyStream=function(e,t){var r=new Source(e,t);r.end();return r};var mixinPax=function(e,t){if(t.path)e.name=t.path;if(t.linkpath)e.linkname=t.linkpath;if(t.size)e.size=parseInt(t.size,10);e.pax=t;return e};var Source=function(e,t){this._parent=e;this.offset=t;l.call(this,{autoDestroy:false})};n.inherits(Source,l);Source.prototype.destroy=function(e){this._parent.destroy(e)};var Extract=function(e){if(!(this instanceof Extract))return new Extract(e);o.call(this,e);e=e||{};this._offset=0;this._buffer=i();this._missing=0;this._partial=false;this._onparse=noop;this._header=null;this._stream=null;this._overflow=null;this._cb=null;this._locked=false;this._destroyed=false;this._pax=null;this._paxGlobal=null;this._gnuLongPath=null;this._gnuLongLinkPath=null;var t=this;var r=t._buffer;var oncontinue=function(){t._continue()};var onunlock=function(e){t._locked=false;if(e)return t.destroy(e);if(!t._stream)oncontinue()};var onstreamend=function(){t._stream=null;var e=overflow(t._header.size);if(e)t._parse(e,ondrain);else t._parse(512,onheader);if(!t._locked)oncontinue()};var ondrain=function(){t._buffer.consume(overflow(t._header.size));t._parse(512,onheader);oncontinue()};var onpaxglobalheader=function(){var e=t._header.size;t._paxGlobal=s.decodePax(r.slice(0,e));r.consume(e);onstreamend()};var onpaxheader=function(){var e=t._header.size;t._pax=s.decodePax(r.slice(0,e));if(t._paxGlobal)t._pax=Object.assign({},t._paxGlobal,t._pax);r.consume(e);onstreamend()};var ongnulongpath=function(){var n=t._header.size;this._gnuLongPath=s.decodeLongPath(r.slice(0,n),e.filenameEncoding);r.consume(n);onstreamend()};var ongnulonglinkpath=function(){var n=t._header.size;this._gnuLongLinkPath=s.decodeLongPath(r.slice(0,n),e.filenameEncoding);r.consume(n);onstreamend()};var onheader=function(){var n=t._offset;var i;try{i=t._header=s.decode(r.slice(0,512),e.filenameEncoding,e.allowUnknownFormat)}catch(e){t.emit("error",e)}r.consume(512);if(!i){t._parse(512,onheader);oncontinue();return}if(i.type==="gnu-long-path"){t._parse(i.size,ongnulongpath);oncontinue();return}if(i.type==="gnu-long-link-path"){t._parse(i.size,ongnulonglinkpath);oncontinue();return}if(i.type==="pax-global-header"){t._parse(i.size,onpaxglobalheader);oncontinue();return}if(i.type==="pax-header"){t._parse(i.size,onpaxheader);oncontinue();return}if(t._gnuLongPath){i.name=t._gnuLongPath;t._gnuLongPath=null}if(t._gnuLongLinkPath){i.linkname=t._gnuLongLinkPath;t._gnuLongLinkPath=null}if(t._pax){t._header=i=mixinPax(i,t._pax);t._pax=null}t._locked=true;if(!i.size||i.type==="directory"){t._parse(512,onheader);t.emit("entry",i,emptyStream(t,n),onunlock);return}t._stream=new Source(t,n);t.emit("entry",i,t._stream,onunlock);t._parse(i.size,onstreamend);oncontinue()};this._onheader=onheader;this._parse(512,onheader)};n.inherits(Extract,o);Extract.prototype.destroy=function(e){if(this._destroyed)return;this._destroyed=true;if(e)this.emit("error",e);this.emit("close");if(this._stream)this._stream.emit("close")};Extract.prototype._parse=function(e,t){if(this._destroyed)return;this._offset+=e;this._missing=e;if(t===this._onheader)this._partial=false;this._onparse=t};Extract.prototype._continue=function(){if(this._destroyed)return;var e=this._cb;this._cb=noop;if(this._overflow)this._write(this._overflow,undefined,e);else e()};Extract.prototype._write=function(e,t,r){if(this._destroyed)return;var n=this._stream;var i=this._buffer;var s=this._missing;if(e.length)this._partial=true;if(e.length<s){this._missing-=e.length;this._overflow=null;if(n)return n.write(e,r);i.append(e);return r()}this._cb=r;this._missing=0;var o=null;if(e.length>s){o=e.slice(s);e=e.slice(0,s)}if(n)n.end(e);else i.append(e);this._overflow=o;this._onparse()};Extract.prototype._final=function(e){if(this._partial)return this.destroy(new Error("Unexpected end of data"));e()};e.exports=Extract},8428:(e,t)=>{var r=Buffer.alloc;var n="0000000000000000000";var i="7777777777777777777";var s="0".charCodeAt(0);var o=Buffer.from("ustar\0","binary");var l=Buffer.from("00","binary");var u=Buffer.from("ustar ","binary");var p=Buffer.from(" \0","binary");var g=parseInt("7777",8);var m=257;var y=263;var clamp=function(e,t,r){if(typeof e!=="number")return r;e=~~e;if(e>=t)return t;if(e>=0)return e;e+=t;if(e>=0)return e;return 0};var toType=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null};var toTypeflag=function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0};var indexOf=function(e,t,r,n){for(;r<n;r++){if(e[r]===t)return r}return n};var cksum=function(e){var t=8*32;for(var r=0;r<148;r++)t+=e[r];for(var n=156;n<512;n++)t+=e[n];return t};var encodeOct=function(e,t){e=e.toString(8);if(e.length>t)return i.slice(0,t)+" ";else return n.slice(0,t-e.length)+e+" "};function parse256(e){var t;if(e[0]===128)t=true;else if(e[0]===255)t=false;else return null;var r=[];for(var n=e.length-1;n>0;n--){var i=e[n];if(t)r.push(i);else r.push(255-i)}var s=0;var o=r.length;for(n=0;n<o;n++){s+=r[n]*Math.pow(256,n)}return t?s:-1*s}var decodeOct=function(e,t,r){e=e.slice(t,t+r);t=0;if(e[t]&128){return parse256(e)}else{while(t<e.length&&e[t]===32)t++;var n=clamp(indexOf(e,32,t,e.length),e.length,e.length);while(t<n&&e[t]===0)t++;if(n===t)return 0;return parseInt(e.slice(t,n).toString(),8)}};var decodeStr=function(e,t,r,n){return e.slice(t,indexOf(e,0,t,t+r)).toString(n)};var addLength=function(e){var t=Buffer.byteLength(e);var r=Math.floor(Math.log(t)/Math.log(10))+1;if(t+r>=Math.pow(10,r))r++;return t+r+e};t.decodeLongPath=function(e,t){return decodeStr(e,0,e.length,t)};t.encodePax=function(e){var t="";if(e.name)t+=addLength(" path="+e.name+"\n");if(e.linkname)t+=addLength(" linkpath="+e.linkname+"\n");var r=e.pax;if(r){for(var n in r){t+=addLength(" "+n+"="+r[n]+"\n")}}return Buffer.from(t)};t.decodePax=function(e){var t={};while(e.length){var r=0;while(r<e.length&&e[r]!==32)r++;var n=parseInt(e.slice(0,r).toString(),10);if(!n)return t;var i=e.slice(r+1,n-1).toString();var s=i.indexOf("=");if(s===-1)return t;t[i.slice(0,s)]=i.slice(s+1);e=e.slice(n)}return t};t.encode=function(e){var t=r(512);var n=e.name;var i="";if(e.typeflag===5&&n[n.length-1]!=="/")n+="/";if(Buffer.byteLength(n)!==n.length)return null;while(Buffer.byteLength(n)>100){var u=n.indexOf("/");if(u===-1)return null;i+=i?"/"+n.slice(0,u):n.slice(0,u);n=n.slice(u+1)}if(Buffer.byteLength(n)>100||Buffer.byteLength(i)>155)return null;if(e.linkname&&Buffer.byteLength(e.linkname)>100)return null;t.write(n);t.write(encodeOct(e.mode&g,6),100);t.write(encodeOct(e.uid,6),108);t.write(encodeOct(e.gid,6),116);t.write(encodeOct(e.size,11),124);t.write(encodeOct(e.mtime.getTime()/1e3|0,11),136);t[156]=s+toTypeflag(e.type);if(e.linkname)t.write(e.linkname,157);o.copy(t,m);l.copy(t,y);if(e.uname)t.write(e.uname,265);if(e.gname)t.write(e.gname,297);t.write(encodeOct(e.devmajor||0,6),329);t.write(encodeOct(e.devminor||0,6),337);if(i)t.write(i,345);t.write(encodeOct(cksum(t),6),148);return t};t.decode=function(e,t,r){var n=e[156]===0?0:e[156]-s;var i=decodeStr(e,0,100,t);var l=decodeOct(e,100,8);var g=decodeOct(e,108,8);var _=decodeOct(e,116,8);var v=decodeOct(e,124,12);var E=decodeOct(e,136,12);var b=toType(n);var C=e[157]===0?null:decodeStr(e,157,100,t);var w=decodeStr(e,265,32);var I=decodeStr(e,297,32);var T=decodeOct(e,329,8);var k=decodeOct(e,337,8);var R=cksum(e);if(R===8*32)return null;if(R!==decodeOct(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(o.compare(e,m,m+6)===0){if(e[345])i=decodeStr(e,345,155,t)+"/"+i}else if(u.compare(e,m,m+6)===0&&p.compare(e,y,y+2)===0){}else{if(!r){throw new Error("Invalid tar header: unknown format.")}}if(n===0&&i&&i[i.length-1]==="/")n=5;return{name:i,mode:l,uid:g,gid:_,size:v,mtime:new Date(1e3*E),type:b,linkname:C,uname:w,gname:I,devmajor:T,devminor:k}}},6118:(e,t,r)=>{t.extract=r(5763);t.pack=r(861)},861:(e,t,r)=>{var n=r(2147);var i=r(1424);var s=r(9598);var o=Buffer.alloc;var l=r(6131).Readable;var u=r(6131).Writable;var p=r(3193).StringDecoder;var g=r(8428);var m=parseInt("755",8);var y=parseInt("644",8);var _=o(1024);var noop=function(){};var overflow=function(e,t){t&=511;if(t)e.push(_.slice(0,512-t))};function modeToType(e){switch(e&n.S_IFMT){case n.S_IFBLK:return"block-device";case n.S_IFCHR:return"character-device";case n.S_IFDIR:return"directory";case n.S_IFIFO:return"fifo";case n.S_IFLNK:return"symlink"}return"file"}var Sink=function(e){u.call(this);this.written=0;this._to=e;this._destroyed=false};s(Sink,u);Sink.prototype._write=function(e,t,r){this.written+=e.length;if(this._to.push(e))return r();this._to._drain=r};Sink.prototype.destroy=function(){if(this._destroyed)return;this._destroyed=true;this.emit("close")};var LinkSink=function(){u.call(this);this.linkname="";this._decoder=new p("utf-8");this._destroyed=false};s(LinkSink,u);LinkSink.prototype._write=function(e,t,r){this.linkname+=this._decoder.write(e);r()};LinkSink.prototype.destroy=function(){if(this._destroyed)return;this._destroyed=true;this.emit("close")};var Void=function(){u.call(this);this._destroyed=false};s(Void,u);Void.prototype._write=function(e,t,r){r(new Error("No body allowed for this entry"))};Void.prototype.destroy=function(){if(this._destroyed)return;this._destroyed=true;this.emit("close")};var Pack=function(e){if(!(this instanceof Pack))return new Pack(e);l.call(this,e);this._drain=noop;this._finalized=false;this._finalizing=false;this._destroyed=false;this._stream=null};s(Pack,l);Pack.prototype.entry=function(e,t,r){if(this._stream)throw new Error("already piping an entry");if(this._finalized||this._destroyed)return;if(typeof t==="function"){r=t;t=null}if(!r)r=noop;var n=this;if(!e.size||e.type==="symlink")e.size=0;if(!e.type)e.type=modeToType(e.mode);if(!e.mode)e.mode=e.type==="directory"?m:y;if(!e.uid)e.uid=0;if(!e.gid)e.gid=0;if(!e.mtime)e.mtime=new Date;if(typeof t==="string")t=Buffer.from(t);if(Buffer.isBuffer(t)){e.size=t.length;this._encode(e);var s=this.push(t);overflow(n,e.size);if(s)process.nextTick(r);else this._drain=r;return new Void}if(e.type==="symlink"&&!e.linkname){var o=new LinkSink;i(o,(function(t){if(t){n.destroy();return r(t)}e.linkname=o.linkname;n._encode(e);r()}));return o}this._encode(e);if(e.type!=="file"&&e.type!=="contiguous-file"){process.nextTick(r);return new Void}var l=new Sink(this);this._stream=l;i(l,(function(t){n._stream=null;if(t){n.destroy();return r(t)}if(l.written!==e.size){n.destroy();return r(new Error("size mismatch"))}overflow(n,e.size);if(n._finalizing)n.finalize();r()}));return l};Pack.prototype.finalize=function(){if(this._stream){this._finalizing=true;return}if(this._finalized)return;this._finalized=true;this.push(_);this.push(null)};Pack.prototype.destroy=function(e){if(this._destroyed)return;this._destroyed=true;if(e)this.emit("error",e);this.emit("close");if(this._stream&&this._stream.destroy)this._stream.destroy()};Pack.prototype._encode=function(e){if(!e.pax){var t=g.encode(e);if(t){this.push(t);return}}this._encodePax(e)};Pack.prototype._encodePax=function(e){var t=g.encodePax({name:e.name,linkname:e.linkname,pax:e.pax});var r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(g.encode(r));this.push(t);overflow(this,t.length);r.size=e.size;r.type=e.type;this.push(g.encode(r))};Pack.prototype._read=function(e){var t=this._drain;this._drain=noop;t()};e.exports=Pack},668:(e,t,r)=>{(function(e){"use strict";var gf=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r};var randombytes=function(){throw new Error("no PRNG")};var t=new Uint8Array(16);var n=new Uint8Array(32);n[0]=9;var i=gf(),s=gf([1]),o=gf([56129,1]),l=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),p=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),g=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ts64(e,t,r,n){e[t]=r>>24&255;e[t+1]=r>>16&255;e[t+2]=r>>8&255;e[t+3]=r&255;e[t+4]=n>>24&255;e[t+5]=n>>16&255;e[t+6]=n>>8&255;e[t+7]=n&255}function vn(e,t,r,n,i){var s,o=0;for(s=0;s<i;s++)o|=e[t+s]^r[n+s];return(1&o-1>>>8)-1}function crypto_verify_16(e,t,r,n){return vn(e,t,r,n,16)}function crypto_verify_32(e,t,r,n){return vn(e,t,r,n,32)}function core_salsa20(e,t,r,n){var i=n[0]&255|(n[1]&255)<<8|(n[2]&255)<<16|(n[3]&255)<<24,s=r[0]&255|(r[1]&255)<<8|(r[2]&255)<<16|(r[3]&255)<<24,o=r[4]&255|(r[5]&255)<<8|(r[6]&255)<<16|(r[7]&255)<<24,l=r[8]&255|(r[9]&255)<<8|(r[10]&255)<<16|(r[11]&255)<<24,u=r[12]&255|(r[13]&255)<<8|(r[14]&255)<<16|(r[15]&255)<<24,p=n[4]&255|(n[5]&255)<<8|(n[6]&255)<<16|(n[7]&255)<<24,g=t[0]&255|(t[1]&255)<<8|(t[2]&255)<<16|(t[3]&255)<<24,m=t[4]&255|(t[5]&255)<<8|(t[6]&255)<<16|(t[7]&255)<<24,y=t[8]&255|(t[9]&255)<<8|(t[10]&255)<<16|(t[11]&255)<<24,_=t[12]&255|(t[13]&255)<<8|(t[14]&255)<<16|(t[15]&255)<<24,v=n[8]&255|(n[9]&255)<<8|(n[10]&255)<<16|(n[11]&255)<<24,E=r[16]&255|(r[17]&255)<<8|(r[18]&255)<<16|(r[19]&255)<<24,b=r[20]&255|(r[21]&255)<<8|(r[22]&255)<<16|(r[23]&255)<<24,C=r[24]&255|(r[25]&255)<<8|(r[26]&255)<<16|(r[27]&255)<<24,w=r[28]&255|(r[29]&255)<<8|(r[30]&255)<<16|(r[31]&255)<<24,I=n[12]&255|(n[13]&255)<<8|(n[14]&255)<<16|(n[15]&255)<<24;var T=i,k=s,R=o,O=l,P=u,B=p,D=g,L=m,x=y,U=_,j=v,W=E,Q=b,q=C,z=w,G=I,$;for(var Y=0;Y<20;Y+=2){$=T+Q|0;P^=$<<7|$>>>32-7;$=P+T|0;x^=$<<9|$>>>32-9;$=x+P|0;Q^=$<<13|$>>>32-13;$=Q+x|0;T^=$<<18|$>>>32-18;$=B+k|0;U^=$<<7|$>>>32-7;$=U+B|0;q^=$<<9|$>>>32-9;$=q+U|0;k^=$<<13|$>>>32-13;$=k+q|0;B^=$<<18|$>>>32-18;$=j+D|0;z^=$<<7|$>>>32-7;$=z+j|0;R^=$<<9|$>>>32-9;$=R+z|0;D^=$<<13|$>>>32-13;$=D+R|0;j^=$<<18|$>>>32-18;$=G+W|0;O^=$<<7|$>>>32-7;$=O+G|0;L^=$<<9|$>>>32-9;$=L+O|0;W^=$<<13|$>>>32-13;$=W+L|0;G^=$<<18|$>>>32-18;$=T+O|0;k^=$<<7|$>>>32-7;$=k+T|0;R^=$<<9|$>>>32-9;$=R+k|0;O^=$<<13|$>>>32-13;$=O+R|0;T^=$<<18|$>>>32-18;$=B+P|0;D^=$<<7|$>>>32-7;$=D+B|0;L^=$<<9|$>>>32-9;$=L+D|0;P^=$<<13|$>>>32-13;$=P+L|0;B^=$<<18|$>>>32-18;$=j+U|0;W^=$<<7|$>>>32-7;$=W+j|0;x^=$<<9|$>>>32-9;$=x+W|0;U^=$<<13|$>>>32-13;$=U+x|0;j^=$<<18|$>>>32-18;$=G+z|0;Q^=$<<7|$>>>32-7;$=Q+G|0;q^=$<<9|$>>>32-9;$=q+Q|0;z^=$<<13|$>>>32-13;$=z+q|0;G^=$<<18|$>>>32-18}T=T+i|0;k=k+s|0;R=R+o|0;O=O+l|0;P=P+u|0;B=B+p|0;D=D+g|0;L=L+m|0;x=x+y|0;U=U+_|0;j=j+v|0;W=W+E|0;Q=Q+b|0;q=q+C|0;z=z+w|0;G=G+I|0;e[0]=T>>>0&255;e[1]=T>>>8&255;e[2]=T>>>16&255;e[3]=T>>>24&255;e[4]=k>>>0&255;e[5]=k>>>8&255;e[6]=k>>>16&255;e[7]=k>>>24&255;e[8]=R>>>0&255;e[9]=R>>>8&255;e[10]=R>>>16&255;e[11]=R>>>24&255;e[12]=O>>>0&255;e[13]=O>>>8&255;e[14]=O>>>16&255;e[15]=O>>>24&255;e[16]=P>>>0&255;e[17]=P>>>8&255;e[18]=P>>>16&255;e[19]=P>>>24&255;e[20]=B>>>0&255;e[21]=B>>>8&255;e[22]=B>>>16&255;e[23]=B>>>24&255;e[24]=D>>>0&255;e[25]=D>>>8&255;e[26]=D>>>16&255;e[27]=D>>>24&255;e[28]=L>>>0&255;e[29]=L>>>8&255;e[30]=L>>>16&255;e[31]=L>>>24&255;e[32]=x>>>0&255;e[33]=x>>>8&255;e[34]=x>>>16&255;e[35]=x>>>24&255;e[36]=U>>>0&255;e[37]=U>>>8&255;e[38]=U>>>16&255;e[39]=U>>>24&255;e[40]=j>>>0&255;e[41]=j>>>8&255;e[42]=j>>>16&255;e[43]=j>>>24&255;e[44]=W>>>0&255;e[45]=W>>>8&255;e[46]=W>>>16&255;e[47]=W>>>24&255;e[48]=Q>>>0&255;e[49]=Q>>>8&255;e[50]=Q>>>16&255;e[51]=Q>>>24&255;e[52]=q>>>0&255;e[53]=q>>>8&255;e[54]=q>>>16&255;e[55]=q>>>24&255;e[56]=z>>>0&255;e[57]=z>>>8&255;e[58]=z>>>16&255;e[59]=z>>>24&255;e[60]=G>>>0&255;e[61]=G>>>8&255;e[62]=G>>>16&255;e[63]=G>>>24&255}function core_hsalsa20(e,t,r,n){var i=n[0]&255|(n[1]&255)<<8|(n[2]&255)<<16|(n[3]&255)<<24,s=r[0]&255|(r[1]&255)<<8|(r[2]&255)<<16|(r[3]&255)<<24,o=r[4]&255|(r[5]&255)<<8|(r[6]&255)<<16|(r[7]&255)<<24,l=r[8]&255|(r[9]&255)<<8|(r[10]&255)<<16|(r[11]&255)<<24,u=r[12]&255|(r[13]&255)<<8|(r[14]&255)<<16|(r[15]&255)<<24,p=n[4]&255|(n[5]&255)<<8|(n[6]&255)<<16|(n[7]&255)<<24,g=t[0]&255|(t[1]&255)<<8|(t[2]&255)<<16|(t[3]&255)<<24,m=t[4]&255|(t[5]&255)<<8|(t[6]&255)<<16|(t[7]&255)<<24,y=t[8]&255|(t[9]&255)<<8|(t[10]&255)<<16|(t[11]&255)<<24,_=t[12]&255|(t[13]&255)<<8|(t[14]&255)<<16|(t[15]&255)<<24,v=n[8]&255|(n[9]&255)<<8|(n[10]&255)<<16|(n[11]&255)<<24,E=r[16]&255|(r[17]&255)<<8|(r[18]&255)<<16|(r[19]&255)<<24,b=r[20]&255|(r[21]&255)<<8|(r[22]&255)<<16|(r[23]&255)<<24,C=r[24]&255|(r[25]&255)<<8|(r[26]&255)<<16|(r[27]&255)<<24,w=r[28]&255|(r[29]&255)<<8|(r[30]&255)<<16|(r[31]&255)<<24,I=n[12]&255|(n[13]&255)<<8|(n[14]&255)<<16|(n[15]&255)<<24;var T=i,k=s,R=o,O=l,P=u,B=p,D=g,L=m,x=y,U=_,j=v,W=E,Q=b,q=C,z=w,G=I,$;for(var Y=0;Y<20;Y+=2){$=T+Q|0;P^=$<<7|$>>>32-7;$=P+T|0;x^=$<<9|$>>>32-9;$=x+P|0;Q^=$<<13|$>>>32-13;$=Q+x|0;T^=$<<18|$>>>32-18;$=B+k|0;U^=$<<7|$>>>32-7;$=U+B|0;q^=$<<9|$>>>32-9;$=q+U|0;k^=$<<13|$>>>32-13;$=k+q|0;B^=$<<18|$>>>32-18;$=j+D|0;z^=$<<7|$>>>32-7;$=z+j|0;R^=$<<9|$>>>32-9;$=R+z|0;D^=$<<13|$>>>32-13;$=D+R|0;j^=$<<18|$>>>32-18;$=G+W|0;O^=$<<7|$>>>32-7;$=O+G|0;L^=$<<9|$>>>32-9;$=L+O|0;W^=$<<13|$>>>32-13;$=W+L|0;G^=$<<18|$>>>32-18;$=T+O|0;k^=$<<7|$>>>32-7;$=k+T|0;R^=$<<9|$>>>32-9;$=R+k|0;O^=$<<13|$>>>32-13;$=O+R|0;T^=$<<18|$>>>32-18;$=B+P|0;D^=$<<7|$>>>32-7;$=D+B|0;L^=$<<9|$>>>32-9;$=L+D|0;P^=$<<13|$>>>32-13;$=P+L|0;B^=$<<18|$>>>32-18;$=j+U|0;W^=$<<7|$>>>32-7;$=W+j|0;x^=$<<9|$>>>32-9;$=x+W|0;U^=$<<13|$>>>32-13;$=U+x|0;j^=$<<18|$>>>32-18;$=G+z|0;Q^=$<<7|$>>>32-7;$=Q+G|0;q^=$<<9|$>>>32-9;$=q+Q|0;z^=$<<13|$>>>32-13;$=z+q|0;G^=$<<18|$>>>32-18}e[0]=T>>>0&255;e[1]=T>>>8&255;e[2]=T>>>16&255;e[3]=T>>>24&255;e[4]=B>>>0&255;e[5]=B>>>8&255;e[6]=B>>>16&255;e[7]=B>>>24&255;e[8]=j>>>0&255;e[9]=j>>>8&255;e[10]=j>>>16&255;e[11]=j>>>24&255;e[12]=G>>>0&255;e[13]=G>>>8&255;e[14]=G>>>16&255;e[15]=G>>>24&255;e[16]=D>>>0&255;e[17]=D>>>8&255;e[18]=D>>>16&255;e[19]=D>>>24&255;e[20]=L>>>0&255;e[21]=L>>>8&255;e[22]=L>>>16&255;e[23]=L>>>24&255;e[24]=x>>>0&255;e[25]=x>>>8&255;e[26]=x>>>16&255;e[27]=x>>>24&255;e[28]=U>>>0&255;e[29]=U>>>8&255;e[30]=U>>>16&255;e[31]=U>>>24&255}function crypto_core_salsa20(e,t,r,n){core_salsa20(e,t,r,n)}function crypto_core_hsalsa20(e,t,r,n){core_hsalsa20(e,t,r,n)}var y=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(e,t,r,n,i,s,o){var l=new Uint8Array(16),u=new Uint8Array(64);var p,g;for(g=0;g<16;g++)l[g]=0;for(g=0;g<8;g++)l[g]=s[g];while(i>=64){crypto_core_salsa20(u,l,o,y);for(g=0;g<64;g++)e[t+g]=r[n+g]^u[g];p=1;for(g=8;g<16;g++){p=p+(l[g]&255)|0;l[g]=p&255;p>>>=8}i-=64;t+=64;n+=64}if(i>0){crypto_core_salsa20(u,l,o,y);for(g=0;g<i;g++)e[t+g]=r[n+g]^u[g]}return 0}function crypto_stream_salsa20(e,t,r,n,i){var s=new Uint8Array(16),o=new Uint8Array(64);var l,u;for(u=0;u<16;u++)s[u]=0;for(u=0;u<8;u++)s[u]=n[u];while(r>=64){crypto_core_salsa20(o,s,i,y);for(u=0;u<64;u++)e[t+u]=o[u];l=1;for(u=8;u<16;u++){l=l+(s[u]&255)|0;s[u]=l&255;l>>>=8}r-=64;t+=64}if(r>0){crypto_core_salsa20(o,s,i,y);for(u=0;u<r;u++)e[t+u]=o[u]}return 0}function crypto_stream(e,t,r,n,i){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,i,y);var o=new Uint8Array(8);for(var l=0;l<8;l++)o[l]=n[l+16];return crypto_stream_salsa20(e,t,r,o,s)}function crypto_stream_xor(e,t,r,n,i,s,o){var l=new Uint8Array(32);crypto_core_hsalsa20(l,s,o,y);var u=new Uint8Array(8);for(var p=0;p<8;p++)u[p]=s[p+16];return crypto_stream_salsa20_xor(e,t,r,n,i,u,l)}var poly1305=function(e){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var t,r,n,i,s,o,l,u;t=e[0]&255|(e[1]&255)<<8;this.r[0]=t&8191;r=e[2]&255|(e[3]&255)<<8;this.r[1]=(t>>>13|r<<3)&8191;n=e[4]&255|(e[5]&255)<<8;this.r[2]=(r>>>10|n<<6)&7939;i=e[6]&255|(e[7]&255)<<8;this.r[3]=(n>>>7|i<<9)&8191;s=e[8]&255|(e[9]&255)<<8;this.r[4]=(i>>>4|s<<12)&255;this.r[5]=s>>>1&8190;o=e[10]&255|(e[11]&255)<<8;this.r[6]=(s>>>14|o<<2)&8191;l=e[12]&255|(e[13]&255)<<8;this.r[7]=(o>>>11|l<<5)&8065;u=e[14]&255|(e[15]&255)<<8;this.r[8]=(l>>>8|u<<8)&8191;this.r[9]=u>>>5&127;this.pad[0]=e[16]&255|(e[17]&255)<<8;this.pad[1]=e[18]&255|(e[19]&255)<<8;this.pad[2]=e[20]&255|(e[21]&255)<<8;this.pad[3]=e[22]&255|(e[23]&255)<<8;this.pad[4]=e[24]&255|(e[25]&255)<<8;this.pad[5]=e[26]&255|(e[27]&255)<<8;this.pad[6]=e[28]&255|(e[29]&255)<<8;this.pad[7]=e[30]&255|(e[31]&255)<<8};poly1305.prototype.blocks=function(e,t,r){var n=this.fin?0:1<<11;var i,s,o,l,u,p,g,m,y;var _,v,E,b,C,w,I,T,k,R;var O=this.h[0],P=this.h[1],B=this.h[2],D=this.h[3],L=this.h[4],x=this.h[5],U=this.h[6],j=this.h[7],W=this.h[8],Q=this.h[9];var q=this.r[0],z=this.r[1],G=this.r[2],$=this.r[3],Y=this.r[4],V=this.r[5],J=this.r[6],ee=this.r[7],te=this.r[8],re=this.r[9];while(r>=16){i=e[t+0]&255|(e[t+1]&255)<<8;O+=i&8191;s=e[t+2]&255|(e[t+3]&255)<<8;P+=(i>>>13|s<<3)&8191;o=e[t+4]&255|(e[t+5]&255)<<8;B+=(s>>>10|o<<6)&8191;l=e[t+6]&255|(e[t+7]&255)<<8;D+=(o>>>7|l<<9)&8191;u=e[t+8]&255|(e[t+9]&255)<<8;L+=(l>>>4|u<<12)&8191;x+=u>>>1&8191;p=e[t+10]&255|(e[t+11]&255)<<8;U+=(u>>>14|p<<2)&8191;g=e[t+12]&255|(e[t+13]&255)<<8;j+=(p>>>11|g<<5)&8191;m=e[t+14]&255|(e[t+15]&255)<<8;W+=(g>>>8|m<<8)&8191;Q+=m>>>5|n;y=0;_=y;_+=O*q;_+=P*(5*re);_+=B*(5*te);_+=D*(5*ee);_+=L*(5*J);y=_>>>13;_&=8191;_+=x*(5*V);_+=U*(5*Y);_+=j*(5*$);_+=W*(5*G);_+=Q*(5*z);y+=_>>>13;_&=8191;v=y;v+=O*z;v+=P*q;v+=B*(5*re);v+=D*(5*te);v+=L*(5*ee);y=v>>>13;v&=8191;v+=x*(5*J);v+=U*(5*V);v+=j*(5*Y);v+=W*(5*$);v+=Q*(5*G);y+=v>>>13;v&=8191;E=y;E+=O*G;E+=P*z;E+=B*q;E+=D*(5*re);E+=L*(5*te);y=E>>>13;E&=8191;E+=x*(5*ee);E+=U*(5*J);E+=j*(5*V);E+=W*(5*Y);E+=Q*(5*$);y+=E>>>13;E&=8191;b=y;b+=O*$;b+=P*G;b+=B*z;b+=D*q;b+=L*(5*re);y=b>>>13;b&=8191;b+=x*(5*te);b+=U*(5*ee);b+=j*(5*J);b+=W*(5*V);b+=Q*(5*Y);y+=b>>>13;b&=8191;C=y;C+=O*Y;C+=P*$;C+=B*G;C+=D*z;C+=L*q;y=C>>>13;C&=8191;C+=x*(5*re);C+=U*(5*te);C+=j*(5*ee);C+=W*(5*J);C+=Q*(5*V);y+=C>>>13;C&=8191;w=y;w+=O*V;w+=P*Y;w+=B*$;w+=D*G;w+=L*z;y=w>>>13;w&=8191;w+=x*q;w+=U*(5*re);w+=j*(5*te);w+=W*(5*ee);w+=Q*(5*J);y+=w>>>13;w&=8191;I=y;I+=O*J;I+=P*V;I+=B*Y;I+=D*$;I+=L*G;y=I>>>13;I&=8191;I+=x*z;I+=U*q;I+=j*(5*re);I+=W*(5*te);I+=Q*(5*ee);y+=I>>>13;I&=8191;T=y;T+=O*ee;T+=P*J;T+=B*V;T+=D*Y;T+=L*$;y=T>>>13;T&=8191;T+=x*G;T+=U*z;T+=j*q;T+=W*(5*re);T+=Q*(5*te);y+=T>>>13;T&=8191;k=y;k+=O*te;k+=P*ee;k+=B*J;k+=D*V;k+=L*Y;y=k>>>13;k&=8191;k+=x*$;k+=U*G;k+=j*z;k+=W*q;k+=Q*(5*re);y+=k>>>13;k&=8191;R=y;R+=O*re;R+=P*te;R+=B*ee;R+=D*J;R+=L*V;y=R>>>13;R&=8191;R+=x*Y;R+=U*$;R+=j*G;R+=W*z;R+=Q*q;y+=R>>>13;R&=8191;y=(y<<2)+y|0;y=y+_|0;_=y&8191;y=y>>>13;v+=y;O=_;P=v;B=E;D=b;L=C;x=w;U=I;j=T;W=k;Q=R;t+=16;r-=16}this.h[0]=O;this.h[1]=P;this.h[2]=B;this.h[3]=D;this.h[4]=L;this.h[5]=x;this.h[6]=U;this.h[7]=j;this.h[8]=W;this.h[9]=Q};poly1305.prototype.finish=function(e,t){var r=new Uint16Array(10);var n,i,s,o;if(this.leftover){o=this.leftover;this.buffer[o++]=1;for(;o<16;o++)this.buffer[o]=0;this.fin=1;this.blocks(this.buffer,0,16)}n=this.h[1]>>>13;this.h[1]&=8191;for(o=2;o<10;o++){this.h[o]+=n;n=this.h[o]>>>13;this.h[o]&=8191}this.h[0]+=n*5;n=this.h[0]>>>13;this.h[0]&=8191;this.h[1]+=n;n=this.h[1]>>>13;this.h[1]&=8191;this.h[2]+=n;r[0]=this.h[0]+5;n=r[0]>>>13;r[0]&=8191;for(o=1;o<10;o++){r[o]=this.h[o]+n;n=r[o]>>>13;r[o]&=8191}r[9]-=1<<13;i=(n^1)-1;for(o=0;o<10;o++)r[o]&=i;i=~i;for(o=0;o<10;o++)this.h[o]=this.h[o]&i|r[o];this.h[0]=(this.h[0]|this.h[1]<<13)&65535;this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535;this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535;this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535;this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535;this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535;this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535;this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535;s=this.h[0]+this.pad[0];this.h[0]=s&65535;for(o=1;o<8;o++){s=(this.h[o]+this.pad[o]|0)+(s>>>16)|0;this.h[o]=s&65535}e[t+0]=this.h[0]>>>0&255;e[t+1]=this.h[0]>>>8&255;e[t+2]=this.h[1]>>>0&255;e[t+3]=this.h[1]>>>8&255;e[t+4]=this.h[2]>>>0&255;e[t+5]=this.h[2]>>>8&255;e[t+6]=this.h[3]>>>0&255;e[t+7]=this.h[3]>>>8&255;e[t+8]=this.h[4]>>>0&255;e[t+9]=this.h[4]>>>8&255;e[t+10]=this.h[5]>>>0&255;e[t+11]=this.h[5]>>>8&255;e[t+12]=this.h[6]>>>0&255;e[t+13]=this.h[6]>>>8&255;e[t+14]=this.h[7]>>>0&255;e[t+15]=this.h[7]>>>8&255};poly1305.prototype.update=function(e,t,r){var n,i;if(this.leftover){i=16-this.leftover;if(i>r)i=r;for(n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];r-=i;t+=i;this.leftover+=i;if(this.leftover<16)return;this.blocks(this.buffer,0,16);this.leftover=0}if(r>=16){i=r-r%16;this.blocks(e,t,i);t+=i;r-=i}if(r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};function crypto_onetimeauth(e,t,r,n,i,s){var o=new poly1305(s);o.update(r,n,i);o.finish(e,t);return 0}function crypto_onetimeauth_verify(e,t,r,n,i,s){var o=new Uint8Array(16);crypto_onetimeauth(o,0,r,n,i,s);return crypto_verify_16(e,t,o,0)}function crypto_secretbox(e,t,r,n,i){var s;if(r<32)return-1;crypto_stream_xor(e,0,t,0,r,n,i);crypto_onetimeauth(e,16,e,32,r-32,e);for(s=0;s<16;s++)e[s]=0;return 0}function crypto_secretbox_open(e,t,r,n,i){var s;var o=new Uint8Array(32);if(r<32)return-1;crypto_stream(o,0,32,n,i);if(crypto_onetimeauth_verify(t,16,t,32,r-32,o)!==0)return-1;crypto_stream_xor(e,0,t,0,r,n,i);for(s=0;s<32;s++)e[s]=0;return 0}function set25519(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0}function car25519(e){var t,r,n=1;for(t=0;t<16;t++){r=e[t]+n+65535;n=Math.floor(r/65536);e[t]=r-n*65536}e[0]+=n-1+37*(n-1)}function sel25519(e,t,r){var n,i=~(r-1);for(var s=0;s<16;s++){n=i&(e[s]^t[s]);e[s]^=n;t[s]^=n}}function pack25519(e,t){var r,n,i;var s=gf(),o=gf();for(r=0;r<16;r++)o[r]=t[r];car25519(o);car25519(o);car25519(o);for(n=0;n<2;n++){s[0]=o[0]-65517;for(r=1;r<15;r++){s[r]=o[r]-65535-(s[r-1]>>16&1);s[r-1]&=65535}s[15]=o[15]-32767-(s[14]>>16&1);i=s[15]>>16&1;s[14]&=65535;sel25519(o,s,1-i)}for(r=0;r<16;r++){e[2*r]=o[r]&255;e[2*r+1]=o[r]>>8}}function neq25519(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);pack25519(r,e);pack25519(n,t);return crypto_verify_32(r,0,n,0)}function par25519(e){var t=new Uint8Array(32);pack25519(t,e);return t[0]&1}function unpack25519(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function A(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function Z(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function M(e,t,r){var n,i,s=0,o=0,l=0,u=0,p=0,g=0,m=0,y=0,_=0,v=0,E=0,b=0,C=0,w=0,I=0,T=0,k=0,R=0,O=0,P=0,B=0,D=0,L=0,x=0,U=0,j=0,W=0,Q=0,q=0,z=0,G=0,$=r[0],Y=r[1],V=r[2],J=r[3],ee=r[4],te=r[5],re=r[6],ne=r[7],ie=r[8],se=r[9],oe=r[10],ae=r[11],le=r[12],ce=r[13],ue=r[14],fe=r[15];n=t[0];s+=n*$;o+=n*Y;l+=n*V;u+=n*J;p+=n*ee;g+=n*te;m+=n*re;y+=n*ne;_+=n*ie;v+=n*se;E+=n*oe;b+=n*ae;C+=n*le;w+=n*ce;I+=n*ue;T+=n*fe;n=t[1];o+=n*$;l+=n*Y;u+=n*V;p+=n*J;g+=n*ee;m+=n*te;y+=n*re;_+=n*ne;v+=n*ie;E+=n*se;b+=n*oe;C+=n*ae;w+=n*le;I+=n*ce;T+=n*ue;k+=n*fe;n=t[2];l+=n*$;u+=n*Y;p+=n*V;g+=n*J;m+=n*ee;y+=n*te;_+=n*re;v+=n*ne;E+=n*ie;b+=n*se;C+=n*oe;w+=n*ae;I+=n*le;T+=n*ce;k+=n*ue;R+=n*fe;n=t[3];u+=n*$;p+=n*Y;g+=n*V;m+=n*J;y+=n*ee;_+=n*te;v+=n*re;E+=n*ne;b+=n*ie;C+=n*se;w+=n*oe;I+=n*ae;T+=n*le;k+=n*ce;R+=n*ue;O+=n*fe;n=t[4];p+=n*$;g+=n*Y;m+=n*V;y+=n*J;_+=n*ee;v+=n*te;E+=n*re;b+=n*ne;C+=n*ie;w+=n*se;I+=n*oe;T+=n*ae;k+=n*le;R+=n*ce;O+=n*ue;P+=n*fe;n=t[5];g+=n*$;m+=n*Y;y+=n*V;_+=n*J;v+=n*ee;E+=n*te;b+=n*re;C+=n*ne;w+=n*ie;I+=n*se;T+=n*oe;k+=n*ae;R+=n*le;O+=n*ce;P+=n*ue;B+=n*fe;n=t[6];m+=n*$;y+=n*Y;_+=n*V;v+=n*J;E+=n*ee;b+=n*te;C+=n*re;w+=n*ne;I+=n*ie;T+=n*se;k+=n*oe;R+=n*ae;O+=n*le;P+=n*ce;B+=n*ue;D+=n*fe;n=t[7];y+=n*$;_+=n*Y;v+=n*V;E+=n*J;b+=n*ee;C+=n*te;w+=n*re;I+=n*ne;T+=n*ie;k+=n*se;R+=n*oe;O+=n*ae;P+=n*le;B+=n*ce;D+=n*ue;L+=n*fe;n=t[8];_+=n*$;v+=n*Y;E+=n*V;b+=n*J;C+=n*ee;w+=n*te;I+=n*re;T+=n*ne;k+=n*ie;R+=n*se;O+=n*oe;P+=n*ae;B+=n*le;D+=n*ce;L+=n*ue;x+=n*fe;n=t[9];v+=n*$;E+=n*Y;b+=n*V;C+=n*J;w+=n*ee;I+=n*te;T+=n*re;k+=n*ne;R+=n*ie;O+=n*se;P+=n*oe;B+=n*ae;D+=n*le;L+=n*ce;x+=n*ue;U+=n*fe;n=t[10];E+=n*$;b+=n*Y;C+=n*V;w+=n*J;I+=n*ee;T+=n*te;k+=n*re;R+=n*ne;O+=n*ie;P+=n*se;B+=n*oe;D+=n*ae;L+=n*le;x+=n*ce;U+=n*ue;j+=n*fe;n=t[11];b+=n*$;C+=n*Y;w+=n*V;I+=n*J;T+=n*ee;k+=n*te;R+=n*re;O+=n*ne;P+=n*ie;B+=n*se;D+=n*oe;L+=n*ae;x+=n*le;U+=n*ce;j+=n*ue;W+=n*fe;n=t[12];C+=n*$;w+=n*Y;I+=n*V;T+=n*J;k+=n*ee;R+=n*te;O+=n*re;P+=n*ne;B+=n*ie;D+=n*se;L+=n*oe;x+=n*ae;U+=n*le;j+=n*ce;W+=n*ue;Q+=n*fe;n=t[13];w+=n*$;I+=n*Y;T+=n*V;k+=n*J;R+=n*ee;O+=n*te;P+=n*re;B+=n*ne;D+=n*ie;L+=n*se;x+=n*oe;U+=n*ae;j+=n*le;W+=n*ce;Q+=n*ue;q+=n*fe;n=t[14];I+=n*$;T+=n*Y;k+=n*V;R+=n*J;O+=n*ee;P+=n*te;B+=n*re;D+=n*ne;L+=n*ie;x+=n*se;U+=n*oe;j+=n*ae;W+=n*le;Q+=n*ce;q+=n*ue;z+=n*fe;n=t[15];T+=n*$;k+=n*Y;R+=n*V;O+=n*J;P+=n*ee;B+=n*te;D+=n*re;L+=n*ne;x+=n*ie;U+=n*se;j+=n*oe;W+=n*ae;Q+=n*le;q+=n*ce;z+=n*ue;G+=n*fe;s+=38*k;o+=38*R;l+=38*O;u+=38*P;p+=38*B;g+=38*D;m+=38*L;y+=38*x;_+=38*U;v+=38*j;E+=38*W;b+=38*Q;C+=38*q;w+=38*z;I+=38*G;i=1;n=s+i+65535;i=Math.floor(n/65536);s=n-i*65536;n=o+i+65535;i=Math.floor(n/65536);o=n-i*65536;n=l+i+65535;i=Math.floor(n/65536);l=n-i*65536;n=u+i+65535;i=Math.floor(n/65536);u=n-i*65536;n=p+i+65535;i=Math.floor(n/65536);p=n-i*65536;n=g+i+65535;i=Math.floor(n/65536);g=n-i*65536;n=m+i+65535;i=Math.floor(n/65536);m=n-i*65536;n=y+i+65535;i=Math.floor(n/65536);y=n-i*65536;n=_+i+65535;i=Math.floor(n/65536);_=n-i*65536;n=v+i+65535;i=Math.floor(n/65536);v=n-i*65536;n=E+i+65535;i=Math.floor(n/65536);E=n-i*65536;n=b+i+65535;i=Math.floor(n/65536);b=n-i*65536;n=C+i+65535;i=Math.floor(n/65536);C=n-i*65536;n=w+i+65535;i=Math.floor(n/65536);w=n-i*65536;n=I+i+65535;i=Math.floor(n/65536);I=n-i*65536;n=T+i+65535;i=Math.floor(n/65536);T=n-i*65536;s+=i-1+37*(i-1);i=1;n=s+i+65535;i=Math.floor(n/65536);s=n-i*65536;n=o+i+65535;i=Math.floor(n/65536);o=n-i*65536;n=l+i+65535;i=Math.floor(n/65536);l=n-i*65536;n=u+i+65535;i=Math.floor(n/65536);u=n-i*65536;n=p+i+65535;i=Math.floor(n/65536);p=n-i*65536;n=g+i+65535;i=Math.floor(n/65536);g=n-i*65536;n=m+i+65535;i=Math.floor(n/65536);m=n-i*65536;n=y+i+65535;i=Math.floor(n/65536);y=n-i*65536;n=_+i+65535;i=Math.floor(n/65536);_=n-i*65536;n=v+i+65535;i=Math.floor(n/65536);v=n-i*65536;n=E+i+65535;i=Math.floor(n/65536);E=n-i*65536;n=b+i+65535;i=Math.floor(n/65536);b=n-i*65536;n=C+i+65535;i=Math.floor(n/65536);C=n-i*65536;n=w+i+65535;i=Math.floor(n/65536);w=n-i*65536;n=I+i+65535;i=Math.floor(n/65536);I=n-i*65536;n=T+i+65535;i=Math.floor(n/65536);T=n-i*65536;s+=i-1+37*(i-1);e[0]=s;e[1]=o;e[2]=l;e[3]=u;e[4]=p;e[5]=g;e[6]=m;e[7]=y;e[8]=_;e[9]=v;e[10]=E;e[11]=b;e[12]=C;e[13]=w;e[14]=I;e[15]=T}function S(e,t){M(e,t,t)}function inv25519(e,t){var r=gf();var n;for(n=0;n<16;n++)r[n]=t[n];for(n=253;n>=0;n--){S(r,r);if(n!==2&&n!==4)M(r,r,t)}for(n=0;n<16;n++)e[n]=r[n]}function pow2523(e,t){var r=gf();var n;for(n=0;n<16;n++)r[n]=t[n];for(n=250;n>=0;n--){S(r,r);if(n!==1)M(r,r,t)}for(n=0;n<16;n++)e[n]=r[n]}function crypto_scalarmult(e,t,r){var n=new Uint8Array(32);var i=new Float64Array(80),s,l;var u=gf(),p=gf(),g=gf(),m=gf(),y=gf(),_=gf();for(l=0;l<31;l++)n[l]=t[l];n[31]=t[31]&127|64;n[0]&=248;unpack25519(i,r);for(l=0;l<16;l++){p[l]=i[l];m[l]=u[l]=g[l]=0}u[0]=m[0]=1;for(l=254;l>=0;--l){s=n[l>>>3]>>>(l&7)&1;sel25519(u,p,s);sel25519(g,m,s);A(y,u,g);Z(u,u,g);A(g,p,m);Z(p,p,m);S(m,y);S(_,u);M(u,g,u);M(g,p,y);A(y,u,g);Z(u,u,g);S(p,u);Z(g,m,_);M(u,g,o);A(u,u,m);M(g,g,u);M(u,m,_);M(m,p,i);S(p,y);sel25519(u,p,s);sel25519(g,m,s)}for(l=0;l<16;l++){i[l+16]=u[l];i[l+32]=g[l];i[l+48]=p[l];i[l+64]=m[l]}var v=i.subarray(32);var E=i.subarray(16);inv25519(v,v);M(E,E,v);pack25519(e,E);return 0}function crypto_scalarmult_base(e,t){return crypto_scalarmult(e,t,n)}function crypto_box_keypair(e,t){randombytes(t,32);return crypto_scalarmult_base(e,t)}function crypto_box_beforenm(e,r,n){var i=new Uint8Array(32);crypto_scalarmult(i,n,r);return crypto_core_hsalsa20(e,t,i,y)}var _=crypto_secretbox;var v=crypto_secretbox_open;function crypto_box(e,t,r,n,i,s){var o=new Uint8Array(32);crypto_box_beforenm(o,i,s);return _(e,t,r,n,o)}function crypto_box_open(e,t,r,n,i,s){var o=new Uint8Array(32);crypto_box_beforenm(o,i,s);return v(e,t,r,n,o)}var E=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function crypto_hashblocks_hl(e,t,r,n){var i=new Int32Array(16),s=new Int32Array(16),o,l,u,p,g,m,y,_,v,b,C,w,I,T,k,R,O,P,B,D,L,x,U,j,W,Q;var q=e[0],z=e[1],G=e[2],$=e[3],Y=e[4],V=e[5],J=e[6],ee=e[7],te=t[0],re=t[1],ne=t[2],ie=t[3],se=t[4],oe=t[5],ae=t[6],le=t[7];var ce=0;while(n>=128){for(B=0;B<16;B++){D=8*B+ce;i[B]=r[D+0]<<24|r[D+1]<<16|r[D+2]<<8|r[D+3];s[B]=r[D+4]<<24|r[D+5]<<16|r[D+6]<<8|r[D+7]}for(B=0;B<80;B++){o=q;l=z;u=G;p=$;g=Y;m=V;y=J;_=ee;v=te;b=re;C=ne;w=ie;I=se;T=oe;k=ae;R=le;L=ee;x=le;U=x&65535;j=x>>>16;W=L&65535;Q=L>>>16;L=(Y>>>14|se<<32-14)^(Y>>>18|se<<32-18)^(se>>>41-32|Y<<32-(41-32));x=(se>>>14|Y<<32-14)^(se>>>18|Y<<32-18)^(Y>>>41-32|se<<32-(41-32));U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;L=Y&V^~Y&J;x=se&oe^~se&ae;U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;L=E[B*2];x=E[B*2+1];U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;L=i[B%16];x=s[B%16];U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;j+=U>>>16;W+=j>>>16;Q+=W>>>16;O=W&65535|Q<<16;P=U&65535|j<<16;L=O;x=P;U=x&65535;j=x>>>16;W=L&65535;Q=L>>>16;L=(q>>>28|te<<32-28)^(te>>>34-32|q<<32-(34-32))^(te>>>39-32|q<<32-(39-32));x=(te>>>28|q<<32-28)^(q>>>34-32|te<<32-(34-32))^(q>>>39-32|te<<32-(39-32));U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;L=q&z^q&G^z&G;x=te&re^te&ne^re&ne;U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;j+=U>>>16;W+=j>>>16;Q+=W>>>16;_=W&65535|Q<<16;R=U&65535|j<<16;L=p;x=w;U=x&65535;j=x>>>16;W=L&65535;Q=L>>>16;L=O;x=P;U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;j+=U>>>16;W+=j>>>16;Q+=W>>>16;p=W&65535|Q<<16;w=U&65535|j<<16;z=o;G=l;$=u;Y=p;V=g;J=m;ee=y;q=_;re=v;ne=b;ie=C;se=w;oe=I;ae=T;le=k;te=R;if(B%16===15){for(D=0;D<16;D++){L=i[D];x=s[D];U=x&65535;j=x>>>16;W=L&65535;Q=L>>>16;L=i[(D+9)%16];x=s[(D+9)%16];U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;O=i[(D+1)%16];P=s[(D+1)%16];L=(O>>>1|P<<32-1)^(O>>>8|P<<32-8)^O>>>7;x=(P>>>1|O<<32-1)^(P>>>8|O<<32-8)^(P>>>7|O<<32-7);U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;O=i[(D+14)%16];P=s[(D+14)%16];L=(O>>>19|P<<32-19)^(P>>>61-32|O<<32-(61-32))^O>>>6;x=(P>>>19|O<<32-19)^(O>>>61-32|P<<32-(61-32))^(P>>>6|O<<32-6);U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;j+=U>>>16;W+=j>>>16;Q+=W>>>16;i[D]=W&65535|Q<<16;s[D]=U&65535|j<<16}}}L=q;x=te;U=x&65535;j=x>>>16;W=L&65535;Q=L>>>16;L=e[0];x=t[0];U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;j+=U>>>16;W+=j>>>16;Q+=W>>>16;e[0]=q=W&65535|Q<<16;t[0]=te=U&65535|j<<16;L=z;x=re;U=x&65535;j=x>>>16;W=L&65535;Q=L>>>16;L=e[1];x=t[1];U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;j+=U>>>16;W+=j>>>16;Q+=W>>>16;e[1]=z=W&65535|Q<<16;t[1]=re=U&65535|j<<16;L=G;x=ne;U=x&65535;j=x>>>16;W=L&65535;Q=L>>>16;L=e[2];x=t[2];U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;j+=U>>>16;W+=j>>>16;Q+=W>>>16;e[2]=G=W&65535|Q<<16;t[2]=ne=U&65535|j<<16;L=$;x=ie;U=x&65535;j=x>>>16;W=L&65535;Q=L>>>16;L=e[3];x=t[3];U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;j+=U>>>16;W+=j>>>16;Q+=W>>>16;e[3]=$=W&65535|Q<<16;t[3]=ie=U&65535|j<<16;L=Y;x=se;U=x&65535;j=x>>>16;W=L&65535;Q=L>>>16;L=e[4];x=t[4];U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;j+=U>>>16;W+=j>>>16;Q+=W>>>16;e[4]=Y=W&65535|Q<<16;t[4]=se=U&65535|j<<16;L=V;x=oe;U=x&65535;j=x>>>16;W=L&65535;Q=L>>>16;L=e[5];x=t[5];U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;j+=U>>>16;W+=j>>>16;Q+=W>>>16;e[5]=V=W&65535|Q<<16;t[5]=oe=U&65535|j<<16;L=J;x=ae;U=x&65535;j=x>>>16;W=L&65535;Q=L>>>16;L=e[6];x=t[6];U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;j+=U>>>16;W+=j>>>16;Q+=W>>>16;e[6]=J=W&65535|Q<<16;t[6]=ae=U&65535|j<<16;L=ee;x=le;U=x&65535;j=x>>>16;W=L&65535;Q=L>>>16;L=e[7];x=t[7];U+=x&65535;j+=x>>>16;W+=L&65535;Q+=L>>>16;j+=U>>>16;W+=j>>>16;Q+=W>>>16;e[7]=ee=W&65535|Q<<16;t[7]=le=U&65535|j<<16;ce+=128;n-=128}return n}function crypto_hash(e,t,r){var n=new Int32Array(8),i=new Int32Array(8),s=new Uint8Array(256),o,l=r;n[0]=1779033703;n[1]=3144134277;n[2]=1013904242;n[3]=2773480762;n[4]=1359893119;n[5]=2600822924;n[6]=528734635;n[7]=1541459225;i[0]=4089235720;i[1]=2227873595;i[2]=4271175723;i[3]=1595750129;i[4]=2917565137;i[5]=725511199;i[6]=4215389547;i[7]=327033209;crypto_hashblocks_hl(n,i,t,r);r%=128;for(o=0;o<r;o++)s[o]=t[l-r+o];s[r]=128;r=256-128*(r<112?1:0);s[r-9]=0;ts64(s,r-8,l/536870912|0,l<<3);crypto_hashblocks_hl(n,i,s,r);for(o=0;o<8;o++)ts64(e,8*o,n[o],i[o]);return 0}function add(e,t){var r=gf(),n=gf(),i=gf(),s=gf(),o=gf(),l=gf(),p=gf(),g=gf(),m=gf();Z(r,e[1],e[0]);Z(m,t[1],t[0]);M(r,r,m);A(n,e[0],e[1]);A(m,t[0],t[1]);M(n,n,m);M(i,e[3],t[3]);M(i,i,u);M(s,e[2],t[2]);A(s,s,s);Z(o,n,r);Z(l,s,i);A(p,s,i);A(g,n,r);M(e[0],o,l);M(e[1],g,p);M(e[2],p,l);M(e[3],o,g)}function cswap(e,t,r){var n;for(n=0;n<4;n++){sel25519(e[n],t[n],r)}}function pack(e,t){var r=gf(),n=gf(),i=gf();inv25519(i,t[2]);M(r,t[0],i);M(n,t[1],i);pack25519(e,n);e[31]^=par25519(r)<<7}function scalarmult(e,t,r){var n,o;set25519(e[0],i);set25519(e[1],s);set25519(e[2],s);set25519(e[3],i);for(o=255;o>=0;--o){n=r[o/8|0]>>(o&7)&1;cswap(e,t,n);add(t,e);add(e,e);cswap(e,t,n)}}function scalarbase(e,t){var r=[gf(),gf(),gf(),gf()];set25519(r[0],p);set25519(r[1],g);set25519(r[2],s);M(r[3],p,g);scalarmult(e,r,t)}function crypto_sign_keypair(e,t,r){var n=new Uint8Array(64);var i=[gf(),gf(),gf(),gf()];var s;if(!r)randombytes(t,32);crypto_hash(n,t,32);n[0]&=248;n[31]&=127;n[31]|=64;scalarbase(i,n);pack(e,i);for(s=0;s<32;s++)t[s+32]=e[s];return 0}var b=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(e,t){var r,n,i,s;for(n=63;n>=32;--n){r=0;for(i=n-32,s=n-12;i<s;++i){t[i]+=r-16*t[n]*b[i-(n-32)];r=t[i]+128>>8;t[i]-=r*256}t[i]+=r;t[n]=0}r=0;for(i=0;i<32;i++){t[i]+=r-(t[31]>>4)*b[i];r=t[i]>>8;t[i]&=255}for(i=0;i<32;i++)t[i]-=r*b[i];for(n=0;n<32;n++){t[n+1]+=t[n]>>8;e[n]=t[n]&255}}function reduce(e){var t=new Float64Array(64),r;for(r=0;r<64;r++)t[r]=e[r];for(r=0;r<64;r++)e[r]=0;modL(e,t)}function crypto_sign(e,t,r,n){var i=new Uint8Array(64),s=new Uint8Array(64),o=new Uint8Array(64);var l,u,p=new Float64Array(64);var g=[gf(),gf(),gf(),gf()];crypto_hash(i,n,32);i[0]&=248;i[31]&=127;i[31]|=64;var m=r+64;for(l=0;l<r;l++)e[64+l]=t[l];for(l=0;l<32;l++)e[32+l]=i[32+l];crypto_hash(o,e.subarray(32),r+32);reduce(o);scalarbase(g,o);pack(e,g);for(l=32;l<64;l++)e[l]=n[l];crypto_hash(s,e,r+64);reduce(s);for(l=0;l<64;l++)p[l]=0;for(l=0;l<32;l++)p[l]=o[l];for(l=0;l<32;l++){for(u=0;u<32;u++){p[l+u]+=s[l]*i[u]}}modL(e.subarray(32),p);return m}function unpackneg(e,t){var r=gf(),n=gf(),o=gf(),u=gf(),p=gf(),g=gf(),y=gf();set25519(e[2],s);unpack25519(e[1],t);S(o,e[1]);M(u,o,l);Z(o,o,e[2]);A(u,e[2],u);S(p,u);S(g,p);M(y,g,p);M(r,y,o);M(r,r,u);pow2523(r,r);M(r,r,o);M(r,r,u);M(r,r,u);M(e[0],r,u);S(n,e[0]);M(n,n,u);if(neq25519(n,o))M(e[0],e[0],m);S(n,e[0]);M(n,n,u);if(neq25519(n,o))return-1;if(par25519(e[0])===t[31]>>7)Z(e[0],i,e[0]);M(e[3],e[0],e[1]);return 0}function crypto_sign_open(e,t,r,n){var i,s;var o=new Uint8Array(32),l=new Uint8Array(64);var u=[gf(),gf(),gf(),gf()],p=[gf(),gf(),gf(),gf()];s=-1;if(r<64)return-1;if(unpackneg(p,n))return-1;for(i=0;i<r;i++)e[i]=t[i];for(i=0;i<32;i++)e[i+32]=n[i];crypto_hash(l,e,r);reduce(l);scalarmult(u,p,l);scalarbase(p,t.subarray(32));add(u,p);pack(o,u);r-=64;if(crypto_verify_32(t,0,o,0)){for(i=0;i<r;i++)e[i]=0;return-1}for(i=0;i<r;i++)e[i]=t[i+64];s=r;return s}var C=32,w=24,I=32,T=16,k=32,R=32,O=32,P=32,B=32,D=w,L=I,x=T,U=64,j=32,W=64,Q=32,q=64;e.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:_,crypto_box:crypto_box,crypto_box_open:crypto_box_open,crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:C,crypto_secretbox_NONCEBYTES:w,crypto_secretbox_ZEROBYTES:I,crypto_secretbox_BOXZEROBYTES:T,crypto_scalarmult_BYTES:k,crypto_scalarmult_SCALARBYTES:R,crypto_box_PUBLICKEYBYTES:O,crypto_box_SECRETKEYBYTES:P,crypto_box_BEFORENMBYTES:B,crypto_box_NONCEBYTES:D,crypto_box_ZEROBYTES:L,crypto_box_BOXZEROBYTES:x,crypto_sign_BYTES:U,crypto_sign_PUBLICKEYBYTES:j,crypto_sign_SECRETKEYBYTES:W,crypto_sign_SEEDBYTES:Q,crypto_hash_BYTES:q};function checkLengths(e,t){if(e.length!==C)throw new Error("bad key size");if(t.length!==w)throw new Error("bad nonce size")}function checkBoxLengths(e,t){if(e.length!==O)throw new Error("bad public key size");if(t.length!==P)throw new Error("bad secret key size")}function checkArrayTypes(){var e,t;for(t=0;t<arguments.length;t++){if((e=Object.prototype.toString.call(arguments[t]))!=="[object Uint8Array]")throw new TypeError("unexpected type "+e+", use Uint8Array")}}function cleanup(e){for(var t=0;t<e.length;t++)e[t]=0}if(!e.util){e.util={};e.util.decodeUTF8=e.util.encodeUTF8=e.util.encodeBase64=e.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}}e.randomBytes=function(e){var t=new Uint8Array(e);randombytes(t,e);return t};e.secretbox=function(e,t,r){checkArrayTypes(e,t,r);checkLengths(r,t);var n=new Uint8Array(I+e.length);var i=new Uint8Array(n.length);for(var s=0;s<e.length;s++)n[s+I]=e[s];crypto_secretbox(i,n,n.length,t,r);return i.subarray(T)};e.secretbox.open=function(e,t,r){checkArrayTypes(e,t,r);checkLengths(r,t);var n=new Uint8Array(T+e.length);var i=new Uint8Array(n.length);for(var s=0;s<e.length;s++)n[s+T]=e[s];if(n.length<32)return false;if(crypto_secretbox_open(i,n,n.length,t,r)!==0)return false;return i.subarray(I)};e.secretbox.keyLength=C;e.secretbox.nonceLength=w;e.secretbox.overheadLength=T;e.scalarMult=function(e,t){checkArrayTypes(e,t);if(e.length!==R)throw new Error("bad n size");if(t.length!==k)throw new Error("bad p size");var r=new Uint8Array(k);crypto_scalarmult(r,e,t);return r};e.scalarMult.base=function(e){checkArrayTypes(e);if(e.length!==R)throw new Error("bad n size");var t=new Uint8Array(k);crypto_scalarmult_base(t,e);return t};e.scalarMult.scalarLength=R;e.scalarMult.groupElementLength=k;e.box=function(t,r,n,i){var s=e.box.before(n,i);return e.secretbox(t,r,s)};e.box.before=function(e,t){checkArrayTypes(e,t);checkBoxLengths(e,t);var r=new Uint8Array(B);crypto_box_beforenm(r,e,t);return r};e.box.after=e.secretbox;e.box.open=function(t,r,n,i){var s=e.box.before(n,i);return e.secretbox.open(t,r,s)};e.box.open.after=e.secretbox.open;e.box.keyPair=function(){var e=new Uint8Array(O);var t=new Uint8Array(P);crypto_box_keypair(e,t);return{publicKey:e,secretKey:t}};e.box.keyPair.fromSecretKey=function(e){checkArrayTypes(e);if(e.length!==P)throw new Error("bad secret key size");var t=new Uint8Array(O);crypto_scalarmult_base(t,e);return{publicKey:t,secretKey:new Uint8Array(e)}};e.box.publicKeyLength=O;e.box.secretKeyLength=P;e.box.sharedKeyLength=B;e.box.nonceLength=D;e.box.overheadLength=e.secretbox.overheadLength;e.sign=function(e,t){checkArrayTypes(e,t);if(t.length!==W)throw new Error("bad secret key size");var r=new Uint8Array(U+e.length);crypto_sign(r,e,e.length,t);return r};e.sign.open=function(e,t){if(arguments.length!==2)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");checkArrayTypes(e,t);if(t.length!==j)throw new Error("bad public key size");var r=new Uint8Array(e.length);var n=crypto_sign_open(r,e,e.length,t);if(n<0)return null;var i=new Uint8Array(n);for(var s=0;s<i.length;s++)i[s]=r[s];return i};e.sign.detached=function(t,r){var n=e.sign(t,r);var i=new Uint8Array(U);for(var s=0;s<i.length;s++)i[s]=n[s];return i};e.sign.detached.verify=function(e,t,r){checkArrayTypes(e,t,r);if(t.length!==U)throw new Error("bad signature size");if(r.length!==j)throw new Error("bad public key size");var n=new Uint8Array(U+e.length);var i=new Uint8Array(U+e.length);var s;for(s=0;s<U;s++)n[s]=t[s];for(s=0;s<e.length;s++)n[s+U]=e[s];return crypto_sign_open(i,n,n.length,r)>=0};e.sign.keyPair=function(){var e=new Uint8Array(j);var t=new Uint8Array(W);crypto_sign_keypair(e,t);return{publicKey:e,secretKey:t}};e.sign.keyPair.fromSecretKey=function(e){checkArrayTypes(e);if(e.length!==W)throw new Error("bad secret key size");var t=new Uint8Array(j);for(var r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}};e.sign.keyPair.fromSeed=function(e){checkArrayTypes(e);if(e.length!==Q)throw new Error("bad seed size");var t=new Uint8Array(j);var r=new Uint8Array(W);for(var n=0;n<32;n++)r[n]=e[n];crypto_sign_keypair(t,r,true);return{publicKey:t,secretKey:r}};e.sign.publicKeyLength=j;e.sign.secretKeyLength=W;e.sign.seedLength=Q;e.sign.signatureLength=U;e.hash=function(e){checkArrayTypes(e);var t=new Uint8Array(q);crypto_hash(t,e,e.length);return t};e.hash.hashLength=q;e.verify=function(e,t){checkArrayTypes(e,t);if(e.length===0||t.length===0)return false;if(e.length!==t.length)return false;return vn(e,0,t,0,e.length)===0?true:false};e.setPRNG=function(e){randombytes=e};(function(){var t=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){var n=65536;e.setPRNG((function(e,r){var i,s=new Uint8Array(r);for(i=0;i<r;i+=n){t.getRandomValues(s.subarray(i,i+Math.min(r-i,n)))}for(i=0;i<r;i++)e[i]=s[i];cleanup(s)}))}else if(true){t=r(6982);if(t&&t.randomBytes){e.setPRNG((function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];cleanup(i)}))}}})()})(true&&e.exports?e.exports:self.nacl=self.nacl||{})},4488:(e,t,r)=>{e.exports=r(9023).deprecate},2048:(e,t,r)=>{"use strict";var n;n={value:true};n={enumerable:true,get:function(){return i.default}};n={enumerable:true,get:function(){return s.default}};n={enumerable:true,get:function(){return o.default}};n={enumerable:true,get:function(){return l.default}};n={enumerable:true,get:function(){return u.default}};n={enumerable:true,get:function(){return p.default}};n={enumerable:true,get:function(){return g.default}};Object.defineProperty(t,"v4",{enumerable:true,get:function(){return m.default}});n={enumerable:true,get:function(){return y.default}};n={enumerable:true,get:function(){return _.default}};n={enumerable:true,get:function(){return v.default}};n={enumerable:true,get:function(){return E.default}};n={enumerable:true,get:function(){return b.default}};n={enumerable:true,get:function(){return C.default}};var i=_interopRequireDefault(r(242));var s=_interopRequireDefault(r(7723));var o=_interopRequireDefault(r(7267));var l=_interopRequireDefault(r(7597));var u=_interopRequireDefault(r(6415));var p=_interopRequireDefault(r(9706));var g=_interopRequireDefault(r(1697));var m=_interopRequireDefault(r(4676));var y=_interopRequireDefault(r(9771));var _=_interopRequireDefault(r(8558));var v=_interopRequireDefault(r(9558));var E=_interopRequireDefault(r(9261));var b=_interopRequireDefault(r(6200));var C=_interopRequireDefault(r(5868));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},242:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=t["default"]="ffffffff-ffff-ffff-ffff-ffffffffffff"},216:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(7598));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function md5(e){if(Array.isArray(e)){e=Buffer.from(e)}else if(typeof e==="string"){e=Buffer.from(e,"utf8")}return n.default.createHash("md5").update(e).digest()}var i=t["default"]=md5},4221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(7598));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var i=t["default"]={randomUUID:n.default.randomUUID}},7723:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=t["default"]="00000000-0000-0000-0000-000000000000"},7267:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6200));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parse(e){if(!(0,n.default)(e)){throw TypeError("Invalid UUID")}let t;const r=new Uint8Array(16);r[0]=(t=parseInt(e.slice(0,8),16))>>>24;r[1]=t>>>16&255;r[2]=t>>>8&255;r[3]=t&255;r[4]=(t=parseInt(e.slice(9,13),16))>>>8;r[5]=t&255;r[6]=(t=parseInt(e.slice(14,18),16))>>>8;r[7]=t&255;r[8]=(t=parseInt(e.slice(19,23),16))>>>8;r[9]=t&255;r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255;r[11]=t/4294967296&255;r[12]=t>>>24&255;r[13]=t>>>16&255;r[14]=t>>>8&255;r[15]=t&255;return r}var i=t["default"]=parse},7879:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var r=t["default"]=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},2973:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=rng;var n=_interopRequireDefault(r(7598));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const i=new Uint8Array(256);let s=i.length;function rng(){if(s>i.length-16){n.default.randomFillSync(i);s=0}return i.slice(s,s+=16)}},5745:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(7598));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function sha1(e){if(Array.isArray(e)){e=Buffer.from(e)}else if(typeof e==="string"){e=Buffer.from(e,"utf8")}return n.default.createHash("sha1").update(e).digest()}var i=t["default"]=sha1},7597:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;t.unsafeStringify=unsafeStringify;var n=_interopRequireDefault(r(6200));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const i=[];for(let e=0;e<256;++e){i.push((e+256).toString(16).slice(1))}function unsafeStringify(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}function stringify(e,t=0){const r=unsafeStringify(e,t);if(!(0,n.default)(r)){throw TypeError("Stringified UUID is invalid")}return r}var s=t["default"]=stringify},6415:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(2973));var i=r(7597);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}let s;let o;let l=0;let u=0;function v1(e,t,r){let p=t&&r||0;const g=t||new Array(16);e=e||{};let m=e.node;let y=e.clockseq;if(!e._v6){if(!m){m=s}if(y==null){y=o}}if(m==null||y==null){const t=e.random||(e.rng||n.default)();if(m==null){m=[t[0],t[1],t[2],t[3],t[4],t[5]];if(!s&&!e._v6){m[0]|=1;s=m}}if(y==null){y=(t[6]<<8|t[7])&16383;if(o===undefined&&!e._v6){o=y}}}let _=e.msecs!==undefined?e.msecs:Date.now();let v=e.nsecs!==undefined?e.nsecs:u+1;const E=_-l+(v-u)/1e4;if(E<0&&e.clockseq===undefined){y=y+1&16383}if((E<0||_>l)&&e.nsecs===undefined){v=0}if(v>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}l=_;u=v;o=y;_+=122192928e5;const b=((_&268435455)*1e4+v)%4294967296;g[p++]=b>>>24&255;g[p++]=b>>>16&255;g[p++]=b>>>8&255;g[p++]=b&255;const C=_/4294967296*1e4&268435455;g[p++]=C>>>8&255;g[p++]=C&255;g[p++]=C>>>24&15|16;g[p++]=C>>>16&255;g[p++]=y>>>8|128;g[p++]=y&255;for(let e=0;e<6;++e){g[p+e]=m[e]}return t||(0,i.unsafeStringify)(g)}var p=t["default"]=v1},9706:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=v1ToV6;var n=_interopRequireDefault(r(7267));var i=r(7597);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function v1ToV6(e){const t=typeof e==="string"?(0,n.default)(e):e;const r=_v1ToV6(t);return typeof e==="string"?(0,i.unsafeStringify)(r):r}function _v1ToV6(e,t=false){return Uint8Array.of((e[6]&15)<<4|e[7]>>4&15,(e[7]&15)<<4|(e[4]&240)>>4,(e[4]&15)<<4|(e[5]&240)>>4,(e[5]&15)<<4|(e[0]&240)>>4,(e[0]&15)<<4|(e[1]&240)>>4,(e[1]&15)<<4|(e[2]&240)>>4,96|e[2]&15,e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}},1697:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(2930));var i=_interopRequireDefault(r(216));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const s=(0,n.default)("v3",48,i.default);var o=t["default"]=s},2930:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.URL=t.DNS=void 0;t["default"]=v35;var n=r(7597);var i=_interopRequireDefault(r(7267));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function stringToBytes(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r){t.push(e.charCodeAt(r))}return t}const s=t.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";const o=t.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(e,t,r){function generateUUID(e,s,o,l){var u;if(typeof e==="string"){e=stringToBytes(e)}if(typeof s==="string"){s=(0,i.default)(s)}if(((u=s)===null||u===void 0?void 0:u.length)!==16){throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)")}let p=new Uint8Array(16+e.length);p.set(s);p.set(e,s.length);p=r(p);p[6]=p[6]&15|t;p[8]=p[8]&63|128;if(o){l=l||0;for(let e=0;e<16;++e){o[l+e]=p[e]}return o}return(0,n.unsafeStringify)(p)}try{generateUUID.name=e}catch(e){}generateUUID.DNS=s;generateUUID.URL=o;return generateUUID}},4676:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(4221));var i=_interopRequireDefault(r(2973));var s=r(7597);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function v4(e,t,r){if(n.default.randomUUID&&!t&&!e){return n.default.randomUUID()}e=e||{};const o=e.random||(e.rng||i.default)();o[6]=o[6]&15|64;o[8]=o[8]&63|128;if(t){r=r||0;for(let e=0;e<16;++e){t[r+e]=o[e]}return t}return(0,s.unsafeStringify)(o)}var o=t["default"]=v4},9771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(2930));var i=_interopRequireDefault(r(5745));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const s=(0,n.default)("v5",80,i.default);var o=t["default"]=s},8558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=v6;var n=r(7597);var i=_interopRequireDefault(r(6415));var s=_interopRequireDefault(r(9706));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function v6(e={},t,r=0){let o=(0,i.default)({...e,_v6:true},new Uint8Array(16));o=(0,s.default)(o);if(t){for(let e=0;e<16;e++){t[r+e]=o[e]}return t}return(0,n.unsafeStringify)(o)}},9558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=v6ToV1;var n=_interopRequireDefault(r(7267));var i=r(7597);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function v6ToV1(e){const t=typeof e==="string"?(0,n.default)(e):e;const r=_v6ToV1(t);return typeof e==="string"?(0,i.unsafeStringify)(r):r}function _v6ToV1(e){return Uint8Array.of((e[3]&15)<<4|e[4]>>4&15,(e[4]&15)<<4|(e[5]&240)>>4,(e[5]&15)<<4|e[6]&15,e[7],(e[1]&15)<<4|(e[2]&240)>>4,(e[2]&15)<<4|(e[3]&240)>>4,16|(e[0]&240)>>4,(e[0]&15)<<4|(e[1]&240)>>4,e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}},9261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(2973));var i=r(7597);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}let s=null;let o=null;let l=0;function v7(e,t,r){e=e||{};let u=t&&r||0;const p=t||new Uint8Array(16);const g=e.random||(e.rng||n.default)();const m=e.msecs!==undefined?e.msecs:Date.now();let y=e.seq!==undefined?e.seq:null;let _=o;let v=s;if(m>l&&e.msecs===undefined){l=m;if(y!==null){_=null;v=null}}if(y!==null){if(y>2147483647){y=2147483647}_=y>>>19&4095;v=y&524287}if(_===null||v===null){_=g[6]&127;_=_<<8|g[7];v=g[8]&63;v=v<<8|g[9];v=v<<5|g[10]>>>3}if(m+1e4>l&&y===null){if(++v>524287){v=0;if(++_>4095){_=0;l++}}}else{l=m}o=_;s=v;p[u++]=l/1099511627776&255;p[u++]=l/4294967296&255;p[u++]=l/16777216&255;p[u++]=l/65536&255;p[u++]=l/256&255;p[u++]=l&255;p[u++]=_>>>4&15|112;p[u++]=_&255;p[u++]=v>>>13&63|128;p[u++]=v>>>5&255;p[u++]=v<<3&255|g[10]&7;p[u++]=g[11];p[u++]=g[12];p[u++]=g[13];p[u++]=g[14];p[u++]=g[15];return t||(0,i.unsafeStringify)(p)}var u=t["default"]=v7},6200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(7879));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function validate(e){return typeof e==="string"&&n.default.test(e)}var i=t["default"]=validate},5868:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=void 0;var n=_interopRequireDefault(r(6200));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function version(e){if(!(0,n.default)(e)){throw TypeError("Invalid UUID")}return parseInt(e.slice(14,15),16)}var i=t["default"]=version},8264:e=>{e.exports=wrappy;function wrappy(e,t){if(e&&t)return wrappy(e)(t);if(typeof e!=="function")throw new TypeError("need wrapper function");Object.keys(e).forEach((function(t){wrapper[t]=e[t]}));return wrapper;function wrapper(){var t=new Array(arguments.length);for(var r=0;r<t.length;r++){t[r]=arguments[r]}var n=e.apply(this,t);var i=t[t.length-1];if(typeof n==="function"&&n!==i){Object.keys(i).forEach((function(e){n[e]=i[e]}))}return n}}},5243:(e,t,r)=>{e.exports=require(r.ab+"build/Release/cpufeatures.node")},8440:(e,t,r)=>{e.exports=require(r.ab+"lib/protocol/crypto/build/Release/sshcrypto.node")},2613:e=>{"use strict";e.exports=require("assert")},181:e=>{"use strict";e.exports=require("buffer")},5317:e=>{"use strict";e.exports=require("child_process")},9140:e=>{"use strict";e.exports=require("constants")},6982:e=>{"use strict";e.exports=require("crypto")},2250:e=>{"use strict";e.exports=require("dns")},4434:e=>{"use strict";e.exports=require("events")},9896:e=>{"use strict";e.exports=require("fs")},1943:e=>{"use strict";e.exports=require("fs/promises")},8611:e=>{"use strict";e.exports=require("http")},5675:e=>{"use strict";e.exports=require("http2")},5692:e=>{"use strict";e.exports=require("https")},9278:e=>{"use strict";e.exports=require("net")},7598:e=>{"use strict";e.exports=require("node:crypto")},1455:e=>{"use strict";e.exports=require("node:fs/promises")},6760:e=>{"use strict";e.exports=require("node:path")},7075:e=>{"use strict";e.exports=require("node:stream")},857:e=>{"use strict";e.exports=require("os")},6928:e=>{"use strict";e.exports=require("path")},932:e=>{"use strict";e.exports=require("process")},3480:e=>{"use strict";e.exports=require("querystring")},2203:e=>{"use strict";e.exports=require("stream")},3193:e=>{"use strict";e.exports=require("string_decoder")},4756:e=>{"use strict";e.exports=require("tls")},2018:e=>{"use strict";e.exports=require("tty")},7016:e=>{"use strict";e.exports=require("url")},9023:e=>{"use strict";e.exports=require("util")},3106:e=>{"use strict";e.exports=require("zlib")},6390:function(e,t){(function(r,n){function preferDefault(e){return e.default||e}if(typeof define==="function"&&define.amd){define([],(function(){var e={};n(e);return preferDefault(e)}))}else if(true){n(t);if(true)e.exports=preferDefault(t)}else{}})(typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:this,(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;
/**
     * @license
     * Copyright 2009 The Closure Library Authors
     * Copyright 2020 Daniel Wirtz / The long.js Authors.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     *
     * SPDX-License-Identifier: Apache-2.0
     */var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Long(e,t,r){this.low=e|0;this.high=t|0;this.unsigned=!!r}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:true});function isLong(e){return(e&&e["__isLong__"])===true}function ctz32(e){var t=Math.clz32(e&-e);return e?31-t:t}Long.isLong=isLong;var r={};var n={};function fromInt(e,t){var i,s,o;if(t){e>>>=0;if(o=0<=e&&e<256){s=n[e];if(s)return s}i=fromBits(e,0,true);if(o)n[e]=i;return i}else{e|=0;if(o=-128<=e&&e<128){s=r[e];if(s)return s}i=fromBits(e,e<0?-1:0,false);if(o)r[e]=i;return i}}Long.fromInt=fromInt;function fromNumber(e,t){if(isNaN(e))return t?y:m;if(t){if(e<0)return y;if(e>=u)return C}else{if(e<=-p)return w;if(e+1>=p)return b}if(e<0)return fromNumber(-e,t).neg();return fromBits(e%l|0,e/l|0,t)}Long.fromNumber=fromNumber;function fromBits(e,t,r){return new Long(e,t,r)}Long.fromBits=fromBits;var i=Math.pow;function fromString(e,t,r){if(e.length===0)throw Error("empty string");if(typeof t==="number"){r=t;t=false}else{t=!!t}if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return t?y:m;r=r||10;if(r<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");else if(n===0){return fromString(e.substring(1),t,r).neg()}var s=fromNumber(i(r,8));var o=m;for(var l=0;l<e.length;l+=8){var u=Math.min(8,e.length-l),p=parseInt(e.substring(l,l+u),r);if(u<8){var g=fromNumber(i(r,u));o=o.mul(g).add(fromNumber(p))}else{o=o.mul(s);o=o.add(fromNumber(p))}}o.unsigned=t;return o}Long.fromString=fromString;function fromValue(e,t){if(typeof e==="number")return fromNumber(e,t);if(typeof e==="string")return fromString(e,t);return fromBits(e.low,e.high,typeof t==="boolean"?t:e.unsigned)}Long.fromValue=fromValue;var s=1<<16;var o=1<<24;var l=s*s;var u=l*l;var p=u/2;var g=fromInt(o);var m=fromInt(0);Long.ZERO=m;var y=fromInt(0,true);Long.UZERO=y;var _=fromInt(1);Long.ONE=_;var v=fromInt(1,true);Long.UONE=v;var E=fromInt(-1);Long.NEG_ONE=E;var b=fromBits(4294967295|0,2147483647|0,false);Long.MAX_VALUE=b;var C=fromBits(4294967295|0,4294967295|0,true);Long.MAX_UNSIGNED_VALUE=C;var w=fromBits(0,2147483648|0,false);Long.MIN_VALUE=w;var I=Long.prototype;I.toInt=function toInt(){return this.unsigned?this.low>>>0:this.low};I.toNumber=function toNumber(){if(this.unsigned)return(this.high>>>0)*l+(this.low>>>0);return this.high*l+(this.low>>>0)};I.toString=function toString(e){e=e||10;if(e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(w)){var t=fromNumber(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}else return"-"+this.neg().toString(e)}var s=fromNumber(i(e,6),this.unsigned),o=this;var l="";while(true){var u=o.div(s),p=o.sub(u.mul(s)).toInt()>>>0,g=p.toString(e);o=u;if(o.isZero())return g+l;else{while(g.length<6)g="0"+g;l=""+g+l}}};I.getHighBits=function getHighBits(){return this.high};I.getHighBitsUnsigned=function getHighBitsUnsigned(){return this.high>>>0};I.getLowBits=function getLowBits(){return this.low};I.getLowBitsUnsigned=function getLowBitsUnsigned(){return this.low>>>0};I.getNumBitsAbs=function getNumBitsAbs(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();var e=this.high!=0?this.high:this.low;for(var t=31;t>0;t--)if((e&1<<t)!=0)break;return this.high!=0?t+33:t+1};I.isSafeInteger=function isSafeInteger(){var e=this.high>>21;if(!e)return true;if(this.unsigned)return false;return e===-1&&!(this.low===0&&this.high===-2097152)};I.isZero=function isZero(){return this.high===0&&this.low===0};I.eqz=I.isZero;I.isNegative=function isNegative(){return!this.unsigned&&this.high<0};I.isPositive=function isPositive(){return this.unsigned||this.high>=0};I.isOdd=function isOdd(){return(this.low&1)===1};I.isEven=function isEven(){return(this.low&1)===0};I.equals=function equals(e){if(!isLong(e))e=fromValue(e);if(this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1)return false;return this.high===e.high&&this.low===e.low};I.eq=I.equals;I.notEquals=function notEquals(e){return!this.eq(e)};I.neq=I.notEquals;I.ne=I.notEquals;I.lessThan=function lessThan(e){return this.comp(e)<0};I.lt=I.lessThan;I.lessThanOrEqual=function lessThanOrEqual(e){return this.comp(e)<=0};I.lte=I.lessThanOrEqual;I.le=I.lessThanOrEqual;I.greaterThan=function greaterThan(e){return this.comp(e)>0};I.gt=I.greaterThan;I.greaterThanOrEqual=function greaterThanOrEqual(e){return this.comp(e)>=0};I.gte=I.greaterThanOrEqual;I.ge=I.greaterThanOrEqual;I.compare=function compare(e){if(!isLong(e))e=fromValue(e);if(this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();if(t&&!r)return-1;if(!t&&r)return 1;if(!this.unsigned)return this.sub(e).isNegative()?-1:1;return e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1};I.comp=I.compare;I.negate=function negate(){if(!this.unsigned&&this.eq(w))return w;return this.not().add(_)};I.neg=I.negate;I.add=function add(e){if(!isLong(e))e=fromValue(e);var t=this.high>>>16;var r=this.high&65535;var n=this.low>>>16;var i=this.low&65535;var s=e.high>>>16;var o=e.high&65535;var l=e.low>>>16;var u=e.low&65535;var p=0,g=0,m=0,y=0;y+=i+u;m+=y>>>16;y&=65535;m+=n+l;g+=m>>>16;m&=65535;g+=r+o;p+=g>>>16;g&=65535;p+=t+s;p&=65535;return fromBits(m<<16|y,p<<16|g,this.unsigned)};I.subtract=function subtract(e){if(!isLong(e))e=fromValue(e);return this.add(e.neg())};I.sub=I.subtract;I.multiply=function multiply(e){if(this.isZero())return this;if(!isLong(e))e=fromValue(e);if(t){var r=t["mul"](this.low,this.high,e.low,e.high);return fromBits(r,t["get_high"](),this.unsigned)}if(e.isZero())return this.unsigned?y:m;if(this.eq(w))return e.isOdd()?w:m;if(e.eq(w))return this.isOdd()?w:m;if(this.isNegative()){if(e.isNegative())return this.neg().mul(e.neg());else return this.neg().mul(e).neg()}else if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16;var i=this.high&65535;var s=this.low>>>16;var o=this.low&65535;var l=e.high>>>16;var u=e.high&65535;var p=e.low>>>16;var _=e.low&65535;var v=0,E=0,b=0,C=0;C+=o*_;b+=C>>>16;C&=65535;b+=s*_;E+=b>>>16;b&=65535;b+=o*p;E+=b>>>16;b&=65535;E+=i*_;v+=E>>>16;E&=65535;E+=s*p;v+=E>>>16;E&=65535;E+=o*u;v+=E>>>16;E&=65535;v+=n*_+i*p+s*u+o*l;v&=65535;return fromBits(b<<16|C,v<<16|E,this.unsigned)};I.mul=I.multiply;I.divide=function divide(e){if(!isLong(e))e=fromValue(e);if(e.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1){return this}var r=(this.unsigned?t["div_u"]:t["div_s"])(this.low,this.high,e.low,e.high);return fromBits(r,t["get_high"](),this.unsigned)}if(this.isZero())return this.unsigned?y:m;var n,s,o;if(!this.unsigned){if(this.eq(w)){if(e.eq(_)||e.eq(E))return w;else if(e.eq(w))return _;else{var l=this.shr(1);n=l.div(e).shl(1);if(n.eq(m)){return e.isNegative()?_:E}else{s=this.sub(e.mul(n));o=n.add(s.div(e));return o}}}else if(e.eq(w))return this.unsigned?y:m;if(this.isNegative()){if(e.isNegative())return this.neg().div(e.neg());return this.neg().div(e).neg()}else if(e.isNegative())return this.div(e.neg()).neg();o=m}else{if(!e.unsigned)e=e.toUnsigned();if(e.gt(this))return y;if(e.gt(this.shru(1)))return v;o=y}s=this;while(s.gte(e)){n=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));var u=Math.ceil(Math.log(n)/Math.LN2),p=u<=48?1:i(2,u-48),g=fromNumber(n),b=g.mul(e);while(b.isNegative()||b.gt(s)){n-=p;g=fromNumber(n,this.unsigned);b=g.mul(e)}if(g.isZero())g=_;o=o.add(g);s=s.sub(b)}return o};I.div=I.divide;I.modulo=function modulo(e){if(!isLong(e))e=fromValue(e);if(t){var r=(this.unsigned?t["rem_u"]:t["rem_s"])(this.low,this.high,e.low,e.high);return fromBits(r,t["get_high"](),this.unsigned)}return this.sub(this.div(e).mul(e))};I.mod=I.modulo;I.rem=I.modulo;I.not=function not(){return fromBits(~this.low,~this.high,this.unsigned)};I.countLeadingZeros=function countLeadingZeros(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};I.clz=I.countLeadingZeros;I.countTrailingZeros=function countTrailingZeros(){return this.low?ctz32(this.low):ctz32(this.high)+32};I.ctz=I.countTrailingZeros;I.and=function and(e){if(!isLong(e))e=fromValue(e);return fromBits(this.low&e.low,this.high&e.high,this.unsigned)};I.or=function or(e){if(!isLong(e))e=fromValue(e);return fromBits(this.low|e.low,this.high|e.high,this.unsigned)};I.xor=function xor(e){if(!isLong(e))e=fromValue(e);return fromBits(this.low^e.low,this.high^e.high,this.unsigned)};I.shiftLeft=function shiftLeft(e){if(isLong(e))e=e.toInt();if((e&=63)===0)return this;else if(e<32)return fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned);else return fromBits(0,this.low<<e-32,this.unsigned)};I.shl=I.shiftLeft;I.shiftRight=function shiftRight(e){if(isLong(e))e=e.toInt();if((e&=63)===0)return this;else if(e<32)return fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned);else return fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};I.shr=I.shiftRight;I.shiftRightUnsigned=function shiftRightUnsigned(e){if(isLong(e))e=e.toInt();if((e&=63)===0)return this;if(e<32)return fromBits(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned);if(e===32)return fromBits(this.high,0,this.unsigned);return fromBits(this.high>>>e-32,0,this.unsigned)};I.shru=I.shiftRightUnsigned;I.shr_u=I.shiftRightUnsigned;I.rotateLeft=function rotateLeft(e){var t;if(isLong(e))e=e.toInt();if((e&=63)===0)return this;if(e===32)return fromBits(this.high,this.low,this.unsigned);if(e<32){t=32-e;return fromBits(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)}e-=32;t=32-e;return fromBits(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)};I.rotl=I.rotateLeft;I.rotateRight=function rotateRight(e){var t;if(isLong(e))e=e.toInt();if((e&=63)===0)return this;if(e===32)return fromBits(this.high,this.low,this.unsigned);if(e<32){t=32-e;return fromBits(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)}e-=32;t=32-e;return fromBits(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)};I.rotr=I.rotateRight;I.toSigned=function toSigned(){if(!this.unsigned)return this;return fromBits(this.low,this.high,false)};I.toUnsigned=function toUnsigned(){if(this.unsigned)return this;return fromBits(this.low,this.high,true)};I.toBytes=function toBytes(e){return e?this.toBytesLE():this.toBytesBE()};I.toBytesLE=function toBytesLE(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};I.toBytesBE=function toBytesBE(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Long.fromBytes=function fromBytes(e,t,r){return r?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)};Long.fromBytesLE=function fromBytesLE(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};Long.fromBytesBE=function fromBytesBE(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};if(typeof BigInt==="function"){Long.fromBigInt=function fromBigInt(e,t){var r=Number(BigInt.asIntN(32,e));var n=Number(BigInt.asIntN(32,e>>BigInt(32)));return fromBits(r,n,t)};Long.fromValue=function fromValueWithBigInt(e,t){if(typeof e==="bigint")return Long.fromBigInt(e,t);return fromValue(e,t)};I.toBigInt=function toBigInt(){var e=BigInt(this.low>>>0);var t=BigInt(this.unsigned?this.high>>>0:this.high);return t<<BigInt(32)|e}}var T=e.default=Long}))},8305:(e,t,r)=>{const n=new Set;const i="supervised-container-";const s=r(4664);function mapSupervisorName(e){return`${i}${e}`}function add(e){if(!n.has(e)){n.add(e);console.log(`Added to container list: ${e}`);refreshSupervisor()}}function remove(e){if(n.has(e)){n.delete(e);console.log(`Removed from container list: ${e}`);refreshSupervisor()}}function refreshSupervisor(){const e=new Map;n.forEach((t=>{const r=mapSupervisorName(t);const n=`docker run --rm --name ${r} ${t}`;e.set(r,n)}));s.updateSupervisorConfig("dockerRunner",e)}function restart(e){if(n.has(e)){const t=mapSupervisorName(e);s.restartSupervisorTask(t)}else{console.error(`Image not found in list: ${e}`)}}e.exports={add:add,remove:remove,restart:restart}},8740:(e,t,r)=>{const n=r(1127);const{getImageNameFromPath:i}=r(4237);e.exports.buildImage=async function(e){const t=i(e);if(!t){throw new Error(`Could not determine image name from path: ${e}`)}console.log(`Building Docker image: ${t} from path: ${e}`);return n.execAsync(`docker build -t "${t}" "${e}"`)};e.exports.startContainer=async function(e){if(!e){throw new Error("Image name is required to start a container")}console.log(`Starting Docker container from image: ${e}`);return n.execAsync(`docker run -d --name "${e}" "${e}"`)};e.exports.stopContainer=async function(e){if(!e){throw new Error("Container name is required to stop a container")}console.log(`Stopping Docker container: ${e}`);return n.execAsync(`docker stop "${e}"`)}},1478:(e,t,r)=>{const n=r(857);const i=r(9040);let s={};if(process.platform==="win32"){s.socketPath="//./pipe/docker_engine"}else if(process.platform==="darwin"||process.platform==="linux"){s.socketPath="/var/run/docker.sock"}else{throw new Error("Unsupported platform: "+process.platform)}const o=new i(s)},4664:(e,t,r)=>{const n=r(9896);const{execSync:i}=r(5317);if(process.getuid&&process.getuid()!==0){console.error("This script must be run as root.");process.exit(1)}function reloadSupervisor(){try{console.log("Reloading Supervisor...");i("supervisorctl reread",{stdio:"inherit"});i("supervisorctl update",{stdio:"inherit"})}catch(e){console.error("Failed to reload Supervisor:",e.message)}}function generateSupervisorFile(e=new Map){const t=[];e.forEach(((e,r)=>{t.push(`[program:${r}]`);t.push(`command=${e}`);t.push(`autostart=true`);t.push(`autorestart=true`);t.push(`stderr_logfile=/var/log/supervisor/${r}.err.log`);t.push(`stdout_logfile=/var/log/supervisor/${r}.out.log`);t.push(`stderr_logfile_maxbytes=1MB`);t.push(`stderr_logfile_backups=5`);t.push(`stdout_logfile_maxbytes=1MB`);t.push(`stdout_logfile_backups=5`);t.push("")}));return t.join("\n")}function updateSupervisorConfig(e,t=new Map){const r=`/etc/supervisor/conf.d/${e}.conf`;const i=generateSupervisorFile(t);if(n.existsSync(r)){const e=n.readFileSync(r,"utf8");if(e===i){console.log("No changes to Supervisor config, skipping write.");return}}n.writeFileSync(r,i);console.log(`Supervisor config updated at ${r}`);reloadSupervisor()}function restartSupervisorTask(e){try{console.log(`Restarting Supervisor task: ${e}`);i(`supervisorctl restart ${e}`,{stdio:"inherit"})}catch(t){console.error(`Failed to restart Supervisor task ${e}:`,t.message)}}e.exports={updateSupervisorConfig:updateSupervisorConfig,restartSupervisorTask:restartSupervisorTask}},1127:(e,t,r)=>{const n=r(5317);function testCommand(e){if(!e||typeof e!=="string"){throw new Error("Invalid command provided")}}function combineOptions(e){return{stdio:"inherit",shell:true,...e}}function execSync(e,t={}){testCommand(e);try{console.log(`Executing command: ${e}`);n.execSync(e,combineOptions(t))}catch(t){console.error(`Error executing command: ${e}`,t);throw t}}function execAsync(e,t={}){testCommand(e);const[r,...i]=e.split(" ");return new Promise(((s,o)=>{const l=n.spawn(r,i,combineOptions(t));l.on("close",(e=>{if(e===0){s()}else{o(new Error(`Command failed with exit code ${e}`))}}));l.on("error",(t=>{console.error(`Failed to start command: ${e}`,t);o(t)}))}))}e.exports={execSync:execSync,execAsync:execAsync}},2494:e=>{class UniqueQueue{constructor(e=Symbol("Queue")){this.name=e;this.list=new Set}enqueue(e){if(!this.list.has(e)){this.list.add(e);console.log(`Enqueued in ${this.name.toString()}: ${e}`)}}dequeue(){if(this.list.size===0){return null}const e=this.list.values().next().value;this.list.delete(e);console.log(`Dequeued from ${this.name.toString()}: ${e}`);return e}clear(){this.list.clear();console.log(`Queue ${this.name.toString()} cleared.`)}peek(){if(this.list.size===0)return null;return this.list.values().next().value}get size(){return this.list.size}has(e){return this.list.has(e)}[Symbol.iterator](){return this.list.values()}toArray(){return Array.from(this.list)}toString(){return`UniqueQueue(${this.name.toString()}): ${Array.from(this.list).join(", ")}`}}e.exports=UniqueQueue},4237:(e,t,r)=>{const n=r(6928);const i=r(9896);function getImageNameFromPath(e){return n.basename(e).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function isValidDockerPath(e){const t=n.join(e,"Dockerfile");if(!i.existsSync(t)){console.warn(`Dockerfile not found at: ${t}`);return false}const r=i.statSync(t);return r.isFile()}e.exports={getImageNameFromPath:getImageNameFromPath,isValidDockerPath:isValidDockerPath}},217:e=>{const t=new Map;function debounce(e,r,n=1e3){if(t.has(e)){clearTimeout(t.get(e))}t.set(e,setTimeout((()=>{t.delete(e);r()}),n))}function clearAll(){for(const e of t.values()){clearTimeout(e)}t.clear()}e.exports={debounce:debounce,clearAll:clearAll}},443:(e,t,r)=>{"use strict";const n=r(9896);const i=r(6928);const s=r(2494);console.log("Queue module loaded.",s);const o=r(7696);const l=r(217);const u=new s;const p=r(8740);const g=r(1478);const m=r(8305);const y=r(4237);let _=true;e.exports=function(e){if(!n.existsSync(e)){throw new Error(`Docker path does not exist: ${e}`)}if(!n.statSync(e).isDirectory()){throw new Error(`Docker path is not a directory: ${e}`)}console.log(`Watching Docker path: ${e}`);const t=o.createWatcher(e,((t,r)=>{const n=i.relative(e,r);const s=n.split(i.sep)[0];const o=i.join(e,s);l.debounce(o,(()=>handleDirectoryChange(o)),1e3)}));process.on("SIGINT",(()=>{console.log("Shutting down...");t.close();_=false;process.exit(0)}));buildThread()};function handleDirectoryChange(e){if(!n.existsSync(e)){g.stopContainer(y.getImageNameFromPath(e));return}if(!n.statSync(e).isDirectory()){return}const t=i.join(e,"Dockerfile");if(!n.existsSync(t)){return}u.enqueue(e)}async function buildThread(){while(_){const e=u.dequeue();if(e===null){await new Promise((e=>setTimeout(e,1e3)));continue}await handleBuildImage(e)}}async function handleBuildImage(e){if(!y.isValidDockerPath(e)){console.warn(`Invalid Docker path: ${e}`);return}try{console.log(`Processing build for: ${e}`);await p.buildImage(e).then((t=>{console.log(`Build completed for ${e}:`);handleNewImageBuild(e)}));console.log(`Build image command executed for: ${e}`)}catch(t){console.error(`Error processing build for ${e}:`,t)}}async function handleNewImageBuild(e){const t=y.getImageNameFromPath(e);if(!t){console.error(`Could not determine image name from path: ${e}`);return}await p.stopContainer(t);return p.startContainer(t)}},7696:(e,t,r)=>{const n=r(5315);e.exports.createWatcher=function(e,t){console.log(`Creating watcher for: ${e}`);const r=n.watch(e,{ignoreInitial:false,persistent:true});r.on("all",((e,r)=>{t(e,r)}));return r}},9943:e=>{"use strict";e.exports={rE:"1.13.4"}},5434:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},3951:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"edition":"proto2","fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}},"extensions":[[536000000,536000000]]},"Edition":{"edition":"proto2","values":{"EDITION_UNKNOWN":0,"EDITION_LEGACY":900,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10},"weakDependency":{"rule":"repeated","type":"int32","id":11},"optionDependency":{"rule":"repeated","type":"string","id":15},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10},"visibility":{"type":"SymbolVisibility","id":11}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"edition":"proto2","fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5},"visibility":{"type":"SymbolVisibility","id":6}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"edition":"proto2","fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],"php_generic_services",[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"edition":"proto2","fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"edition":"proto2","fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"unverifiedLazy":{"type":"bool","id":15},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10,"options":{"deprecated":true}},"debugRedact":{"type":"bool","id":16},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"featureSupport":{"type":"FeatureSupport","id":22},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}},"FeatureSupport":{"fields":{"editionIntroduced":{"type":"Edition","id":1},"editionDeprecated":{"type":"Edition","id":2},"deprecationWarning":{"type":"string","id":3},"editionRemoved":{"type":"Edition","id":4}}}}},"OneofOptions":{"edition":"proto2","fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"edition":"proto2","fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"edition":"proto2","fields":{"deprecated":{"type":"bool","id":1},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3},"featureSupport":{"type":"FieldOptions.FeatureSupport","id":4},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"edition":"proto2","fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"edition":"proto2","fields":{"deprecated":{"type":"bool","id":33},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"edition":"proto2","fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"edition":"proto2","fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_LEGACY","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}},"enforceNamingStyle":{"type":"EnforceNamingStyle","id":7,"options":{"retention":"RETENTION_SOURCE","targets":"TARGET_TYPE_METHOD","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"STYLE2024"}},"defaultSymbolVisibility":{"type":"VisibilityFeature.DefaultSymbolVisibility","id":8,"options":{"retention":"RETENTION_SOURCE","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"EXPORT_TOP_LEVEL"}}},"extensions":[[1000,9994],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}},"EnforceNamingStyle":{"values":{"ENFORCE_NAMING_STYLE_UNKNOWN":0,"STYLE2024":1,"STYLE_LEGACY":2}},"VisibilityFeature":{"fields":{},"reserved":[[1,536870911]],"nested":{"DefaultSymbolVisibility":{"values":{"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN":0,"EXPORT_ALL":1,"EXPORT_TOP_LEVEL":2,"LOCAL_ALL":3,"STRICT":4}}}}}},"FeatureSetDefaults":{"edition":"proto2","fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"overridableFeatures":{"type":"FeatureSet","id":4},"fixedFeatures":{"type":"FeatureSet","id":5}},"reserved":[[1,1],[2,2],"features"]}}},"SourceCodeInfo":{"edition":"proto2","fields":{"location":{"rule":"repeated","type":"Location","id":1}},"extensions":[[536000000,536000000]],"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1,"options":{"packed":true}},"span":{"rule":"repeated","type":"int32","id":2,"options":{"packed":true}},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"edition":"proto2","fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1,"options":{"packed":true}},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"SymbolVisibility":{"edition":"proto2","values":{"VISIBILITY_UNSET":0,"VISIBILITY_LOCAL":1,"VISIBILITY_EXPORT":2}}}}}}}}')},2939:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},6710:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},8342:e=>{"use strict";e.exports={rE:"1.16.0"}}};var __webpack_module_cache__={};function __nccwpck_require__(e){var t=__webpack_module_cache__[e];if(t!==undefined){return t.exports}var r=__webpack_module_cache__[e]={exports:{}};var n=true;try{__webpack_modules__[e].call(r.exports,r,r.exports,__nccwpck_require__);n=false}finally{if(n)delete __webpack_module_cache__[e]}return r.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__={};(()=>{"use strict";if(process.argv.length!=3){console.error("Usage: node index.js <dockerPath>");process.exit(1)}const e=process.argv[2];const t=__nccwpck_require__(443);t(e)})();module.exports=__webpack_exports__})();
//# sourceMappingURL=index.js.map